function IT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function __(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kd={exports:{}},Ha={},Gd={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function ST(){if(my)return Ne;my=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function A(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function x(F,H,me){this.props=F,this.context=H,this.refs=M,this.updater=me||U}x.prototype.isReactComponent={},x.prototype.setState=function(F,H){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,H,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Q(){}Q.prototype=x.prototype;function ee(F,H,me){this.props=F,this.context=H,this.refs=M,this.updater=me||U}var te=ee.prototype=new Q;te.constructor=ee,N(te,x.prototype),te.isPureReactComponent=!0;var ae=Array.isArray,ne=Object.prototype.hasOwnProperty,se={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(F,H,me){var Se,Pe={},Le=null,ze=null;if(H!=null)for(Se in H.ref!==void 0&&(ze=H.ref),H.key!==void 0&&(Le=""+H.key),H)ne.call(H,Se)&&!k.hasOwnProperty(Se)&&(Pe[Se]=H[Se]);var $e=arguments.length-2;if($e===1)Pe.children=me;else if(1<$e){for(var Qe=Array($e),Tt=0;Tt<$e;Tt++)Qe[Tt]=arguments[Tt+2];Pe.children=Qe}if(F&&F.defaultProps)for(Se in $e=F.defaultProps,$e)Pe[Se]===void 0&&(Pe[Se]=$e[Se]);return{$$typeof:n,type:F,key:Le,ref:ze,props:Pe,_owner:se.current}}function S(F,H){return{$$typeof:n,type:F.type,key:H,ref:F.ref,props:F.props,_owner:F._owner}}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var H={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(me){return H[me]})}var D=/\/+/g;function R(F,H){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):H.toString(36)}function ke(F,H,me,Se,Pe){var Le=typeof F;(Le==="undefined"||Le==="boolean")&&(F=null);var ze=!1;if(F===null)ze=!0;else switch(Le){case"string":case"number":ze=!0;break;case"object":switch(F.$$typeof){case n:case e:ze=!0}}if(ze)return ze=F,Pe=Pe(ze),F=Se===""?"."+R(ze,0):Se,ae(Pe)?(me="",F!=null&&(me=F.replace(D,"$&/")+"/"),ke(Pe,H,me,"",function(Tt){return Tt})):Pe!=null&&(P(Pe)&&(Pe=S(Pe,me+(!Pe.key||ze&&ze.key===Pe.key?"":(""+Pe.key).replace(D,"$&/")+"/")+F)),H.push(Pe)),1;if(ze=0,Se=Se===""?".":Se+":",ae(F))for(var $e=0;$e<F.length;$e++){Le=F[$e];var Qe=Se+R(Le,$e);ze+=ke(Le,H,me,Qe,Pe)}else if(Qe=A(F),typeof Qe=="function")for(F=Qe.call(F),$e=0;!(Le=F.next()).done;)Le=Le.value,Qe=Se+R(Le,$e++),ze+=ke(Le,H,me,Qe,Pe);else if(Le==="object")throw H=String(F),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ze}function Ge(F,H,me){if(F==null)return F;var Se=[],Pe=0;return ke(F,Se,"","",function(Le){return H.call(me,Le,Pe++)}),Se}function be(F){if(F._status===-1){var H=F._result;H=H(),H.then(function(me){(F._status===0||F._status===-1)&&(F._status=1,F._result=me)},function(me){(F._status===0||F._status===-1)&&(F._status=2,F._result=me)}),F._status===-1&&(F._status=0,F._result=H)}if(F._status===1)return F._result.default;throw F._result}var Fe={current:null},ie={transition:null},ye={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ie,ReactCurrentOwner:se};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Ge,forEach:function(F,H,me){Ge(F,function(){H.apply(this,arguments)},me)},count:function(F){var H=0;return Ge(F,function(){H++}),H},toArray:function(F){return Ge(F,function(H){return H})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ne.Component=x,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=i,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Ne.act=le,Ne.cloneElement=function(F,H,me){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Se=N({},F.props),Pe=F.key,Le=F.ref,ze=F._owner;if(H!=null){if(H.ref!==void 0&&(Le=H.ref,ze=se.current),H.key!==void 0&&(Pe=""+H.key),F.type&&F.type.defaultProps)var $e=F.type.defaultProps;for(Qe in H)ne.call(H,Qe)&&!k.hasOwnProperty(Qe)&&(Se[Qe]=H[Qe]===void 0&&$e!==void 0?$e[Qe]:H[Qe])}var Qe=arguments.length-2;if(Qe===1)Se.children=me;else if(1<Qe){$e=Array(Qe);for(var Tt=0;Tt<Qe;Tt++)$e[Tt]=arguments[Tt+2];Se.children=$e}return{$$typeof:n,type:F.type,key:Pe,ref:Le,props:Se,_owner:ze}},Ne.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Ne.createElement=I,Ne.createFactory=function(F){var H=I.bind(null,F);return H.type=F,H},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(F){return{$$typeof:d,render:F}},Ne.isValidElement=P,Ne.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:be}},Ne.memo=function(F,H){return{$$typeof:y,type:F,compare:H===void 0?null:H}},Ne.startTransition=function(F){var H=ie.transition;ie.transition={};try{F()}finally{ie.transition=H}},Ne.unstable_act=le,Ne.useCallback=function(F,H){return Fe.current.useCallback(F,H)},Ne.useContext=function(F){return Fe.current.useContext(F)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(F){return Fe.current.useDeferredValue(F)},Ne.useEffect=function(F,H){return Fe.current.useEffect(F,H)},Ne.useId=function(){return Fe.current.useId()},Ne.useImperativeHandle=function(F,H,me){return Fe.current.useImperativeHandle(F,H,me)},Ne.useInsertionEffect=function(F,H){return Fe.current.useInsertionEffect(F,H)},Ne.useLayoutEffect=function(F,H){return Fe.current.useLayoutEffect(F,H)},Ne.useMemo=function(F,H){return Fe.current.useMemo(F,H)},Ne.useReducer=function(F,H,me){return Fe.current.useReducer(F,H,me)},Ne.useRef=function(F){return Fe.current.useRef(F)},Ne.useState=function(F){return Fe.current.useState(F)},Ne.useSyncExternalStore=function(F,H,me){return Fe.current.useSyncExternalStore(F,H,me)},Ne.useTransition=function(){return Fe.current.useTransition()},Ne.version="18.3.1",Ne}var gy;function np(){return gy||(gy=1,Gd.exports=ST()),Gd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function AT(){if(yy)return Ha;yy=1;var n=np(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,E={},A=null,U=null;y!==void 0&&(A=""+y),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(U=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:A,ref:U,props:E,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var vy;function RT(){return vy||(vy=1,Kd.exports=AT()),Kd.exports}var O=RT(),K=np();const w_=__(K),CT=IT({__proto__:null,default:w_},[K]);var tc={},Qd={exports:{}},sn={},Jd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function PT(){return _y||(_y=1,(function(n){function e(ie,ye){var le=ie.length;ie.push(ye);e:for(;0<le;){var F=le-1>>>1,H=ie[F];if(0<o(H,ye))ie[F]=ye,ie[le]=H,le=F;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ye=ie[0],le=ie.pop();if(le!==ye){ie[0]=le;e:for(var F=0,H=ie.length,me=H>>>1;F<me;){var Se=2*(F+1)-1,Pe=ie[Se],Le=Se+1,ze=ie[Le];if(0>o(Pe,le))Le<H&&0>o(ze,Pe)?(ie[F]=ze,ie[Le]=le,F=Le):(ie[F]=Pe,ie[Se]=le,F=Se);else if(Le<H&&0>o(ze,le))ie[F]=ze,ie[Le]=le,F=Le;else break e}}return ye}function o(ie,ye){var le=ie.sortIndex-ye.sortIndex;return le!==0?le:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,E=null,A=3,U=!1,N=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ie){for(var ye=t(y);ye!==null;){if(ye.callback===null)i(y);else if(ye.startTime<=ie)i(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(y)}}function ae(ie){if(M=!1,te(ie),!N)if(t(p)!==null)N=!0,be(ne);else{var ye=t(y);ye!==null&&Fe(ae,ye.startTime-ie)}}function ne(ie,ye){N=!1,M&&(M=!1,Q(I),I=-1),U=!0;var le=A;try{for(te(ye),E=t(p);E!==null&&(!(E.expirationTime>ye)||ie&&!L());){var F=E.callback;if(typeof F=="function"){E.callback=null,A=E.priorityLevel;var H=F(E.expirationTime<=ye);ye=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(p)&&i(p),te(ye)}else i(p);E=t(p)}if(E!==null)var me=!0;else{var Se=t(y);Se!==null&&Fe(ae,Se.startTime-ye),me=!1}return me}finally{E=null,A=le,U=!1}}var se=!1,k=null,I=-1,S=5,P=-1;function L(){return!(n.unstable_now()-P<S)}function D(){if(k!==null){var ie=n.unstable_now();P=ie;var ye=!0;try{ye=k(!0,ie)}finally{ye?R():(se=!1,k=null)}}else se=!1}var R;if(typeof ee=="function")R=function(){ee(D)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ge=ke.port2;ke.port1.onmessage=D,R=function(){Ge.postMessage(null)}}else R=function(){x(D,0)};function be(ie){k=ie,se||(se=!0,R())}function Fe(ie,ye){I=x(function(){ie(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){N||U||(N=!0,be(ne))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ie){switch(A){case 1:case 2:case 3:var ye=3;break;default:ye=A}var le=A;A=ye;try{return ie()}finally{A=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var le=A;A=ie;try{return ye()}finally{A=le}},n.unstable_scheduleCallback=function(ie,ye,le){var F=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?F+le:F):le=F,ie){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=le+H,ie={id:_++,callback:ye,priorityLevel:ie,startTime:le,expirationTime:H,sortIndex:-1},le>F?(ie.sortIndex=le,e(y,ie),t(p)===null&&ie===t(y)&&(M?(Q(I),I=-1):M=!0,Fe(ae,le-F))):(ie.sortIndex=H,e(p,ie),N||U||(N=!0,be(ne))),ie},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ie){var ye=A;return function(){var le=A;A=ye;try{return ie.apply(this,arguments)}finally{A=le}}}})(Yd)),Yd}var wy;function kT(){return wy||(wy=1,Jd.exports=PT()),Jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function NT(){if(Ey)return sn;Ey=1;var n=np(),e=kT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function A(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function U(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,s,a,h){if(s===null||typeof s>"u"||U(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function M(r,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new M(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];x[s]=new M(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new M(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new M(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new M(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new M(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new M(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new M(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new M(r,5,!1,r.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Q,ee);x[s]=new M(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Q,ee);x[s]=new M(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Q,ee);x[s]=new M(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new M(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new M(r,1,!1,r.toLowerCase(),null,!0,!0)});function te(r,s,a,h){var f=x.hasOwnProperty(s)?x[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,a,f,h)&&(a=null),h||f===null?A(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),se=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),L=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=ie&&r[ie]||r["@@iterator"],typeof r=="function"?r:null)}var le=Object.assign,F;function H(r){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var me=!1;function Se(r,s){if(!r||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var b=`
`+f[w].replace(" at new "," at ");return r.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",r.displayName)),b}while(1<=w&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?H(r):""}function Pe(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case se:return"Portal";case S:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case ke:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case P:return(r._context.displayName||"Context")+".Provider";case D:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ge:return s=r.displayName||null,s!==null?s:Le(r.type)||"Memo";case be:s=r._payload,r=r._init;try{return Le(r(s))}catch{}}return null}function ze(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tt(r){var s=Qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function cr(r){r._valueTracker||(r._valueTracker=Tt(r))}function Ss(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=Qe(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function zr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Li(r,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function As(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=$e(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Xo(r,s){s=s.checked,s!=null&&te(r,"checked",s,!1)}function Zo(r,s){Xo(r,s);var a=$e(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Rs(r,s.type,a):s.hasOwnProperty("defaultValue")&&Rs(r,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function jl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Rs(r,s,a){(s!=="number"||zr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var hr=Array.isArray;function dr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+$e(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ea(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Cs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(hr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:$e(a)}}function Ps(r,s){var a=$e(s.value),h=$e(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function ta(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?gt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var fr,na=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(fr=fr||document.createElement("div"),fr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=fr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function $r(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mi=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(r){Mi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Vi[s]=Vi[r]})});function ra(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Vi.hasOwnProperty(r)&&Vi[r]?(""+s).trim():s+"px"}function ia(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=ra(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var sa=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oa(r,s){if(s){if(sa[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function aa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function ks(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ns=null,yn=null,Kn=null;function xs(r){if(r=xa(r)){if(typeof Ns!="function")throw Error(t(280));var s=r.stateNode;s&&(s=gu(s),Ns(r.stateNode,r.type,s))}}function Gn(r){yn?Kn?Kn.push(r):Kn=[r]:yn=r}function la(){if(yn){var r=yn,s=Kn;if(Kn=yn=null,xs(r),s)for(r=0;r<s.length;r++)xs(s[r])}}function Ui(r,s){return r(s)}function ua(){}var pr=!1;function ca(r,s,a){if(pr)return r(s,a);pr=!0;try{return Ui(r,s,a)}finally{pr=!1,(yn!==null||Kn!==null)&&(ua(),la())}}function lt(r,s){var a=r.stateNode;if(a===null)return null;var h=gu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var bs=!1;if(d)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){bs=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{bs=!1}function ji(r,s,a,h,f,g,w,C,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Y){this.onError(Y)}}var Bi=!1,Os=null,kn=!1,ha=null,Eh={onError:function(r){Bi=!0,Os=r}};function Ds(r,s,a,h,f,g,w,C,b){Bi=!1,Os=null,ji.apply(Eh,arguments)}function Bl(r,s,a,h,f,g,w,C,b){if(Ds.apply(this,arguments),Bi){if(Bi){var $=Os;Bi=!1,Os=null}else throw Error(t(198));kn||(kn=!0,ha=$)}}function Nn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function zi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function xn(r){if(Nn(r)!==r)throw Error(t(188))}function zl(r){var s=r.alternate;if(!s){if(s=Nn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return xn(f),r;if(g===h)return xn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,h=g;break}if(C===h){w=!0,h=f,a=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===a){w=!0,a=g,h=f;break}if(C===h){w=!0,h=g,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function da(r){return r=zl(r),r!==null?Ls(r):null}function Ls(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ls(r);if(s!==null)return s;r=r.sibling}return null}var Vs=e.unstable_scheduleCallback,fa=e.unstable_cancelCallback,$l=e.unstable_shouldYield,Th=e.unstable_requestPaint,Je=e.unstable_now,ql=e.unstable_getCurrentPriorityLevel,$i=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,pa=e.unstable_LowPriority,Wl=e.unstable_IdlePriority,qi=null,un=null;function Hl(r){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(qi,r,void 0,(r.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Gl,ma=Math.log,Kl=Math.LN2;function Gl(r){return r>>>=0,r===0?32:31-(ma(r)/Kl|0)|0}var Ms=64,Fs=4194304;function Wr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Wi(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?h=Wr(C):(g&=w,g!==0&&(h=Wr(g)))}else w=a&~f,w!==0?h=Wr(w):g!==0&&(h=Wr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-Ht(s),f=1<<a,h|=r[a],s&=~f;return h}function Ih(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Ht(g),C=1<<w,b=f[w];b===-1?((C&a)===0||(C&h)!==0)&&(f[w]=Ih(C,s)):b<=s&&(r.expiredLanes|=C),g&=~C}}function cn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Hi(){var r=Ms;return Ms<<=1,(Ms&4194240)===0&&(Ms=64),r}function Hr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Kr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ht(s),r[s]=a}function Ke(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Ht(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Gr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-Ht(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var Oe=0;function Qr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ql,Us,Jl,Yl,Xl,ga=!1,Qn=[],kt=null,bn=null,On=null,Jr=new Map,_n=new Map,Jn=[],Sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zl(r,s){switch(r){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Yt(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=xa(s),s!==null&&Us(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Ah(r,s,a,h,f){switch(s){case"focusin":return kt=Yt(kt,r,s,a,h,f),!0;case"dragenter":return bn=Yt(bn,r,s,a,h,f),!0;case"mouseover":return On=Yt(On,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Jr.set(g,Yt(Jr.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,_n.set(g,Yt(_n.get(g)||null,r,s,a,h,f)),!0}return!1}function eu(r){var s=Yi(r.target);if(s!==null){var a=Nn(s);if(a!==null){if(s=a.tag,s===13){if(s=zi(a),s!==null){r.blockedOn=s,Xl(r.priority,function(){Jl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=js(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Fi=h,a.target.dispatchEvent(h),Fi=null}else return s=xa(a),s!==null&&Us(s),r.blockedOn=a,!1;s.shift()}return!0}function Ki(r,s,a){gr(r)&&a.delete(s)}function tu(){ga=!1,kt!==null&&gr(kt)&&(kt=null),bn!==null&&gr(bn)&&(bn=null),On!==null&&gr(On)&&(On=null),Jr.forEach(Ki),_n.forEach(Ki)}function Dn(r,s){r.blockedOn===s&&(r.blockedOn=null,ga||(ga=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tu)))}function Ln(r){function s(f){return Dn(f,r)}if(0<Qn.length){Dn(Qn[0],r);for(var a=1;a<Qn.length;a++){var h=Qn[a];h.blockedOn===r&&(h.blockedOn=null)}}for(kt!==null&&Dn(kt,r),bn!==null&&Dn(bn,r),On!==null&&Dn(On,r),Jr.forEach(s),_n.forEach(s),a=0;a<Jn.length;a++)h=Jn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)eu(a),a.blockedOn===null&&Jn.shift()}var yr=ae.ReactCurrentBatchConfig,Yr=!0;function tt(r,s,a,h){var f=Oe,g=yr.transition;yr.transition=null;try{Oe=1,ya(r,s,a,h)}finally{Oe=f,yr.transition=g}}function Rh(r,s,a,h){var f=Oe,g=yr.transition;yr.transition=null;try{Oe=4,ya(r,s,a,h)}finally{Oe=f,yr.transition=g}}function ya(r,s,a,h){if(Yr){var f=js(r,s,a,h);if(f===null)Mh(r,s,h,Gi,a),Zl(r,h);else if(Ah(f,r,s,a,h))h.stopPropagation();else if(Zl(r,h),s&4&&-1<Sh.indexOf(r)){for(;f!==null;){var g=xa(f);if(g!==null&&Ql(g),g=js(r,s,a,h),g===null&&Mh(r,s,h,Gi,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Mh(r,s,h,null,a)}}var Gi=null;function js(r,s,a,h){if(Gi=null,r=ks(h),r=Yi(r),r!==null)if(s=Nn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=zi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Gi=r,null}function va(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case $i:return 1;case qr:return 4;case vn:case pa:return 16;case Wl:return 536870912;default:return 16}default:return 16}}var hn=null,Bs=null,Xt=null;function _a(){if(Xt)return Xt;var r,s=Bs,a=s.length,h,f="value"in hn?hn.value:hn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return Xt=f.slice(r,1<h?1-h:void 0)}function zs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Yn(){return!0}function wa(){return!1}function Nt(r){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(a=r[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Yn:wa,this.isPropagationStopped=wa,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),s}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=Nt(Vn),Xn=le({},Vn,{view:0,detail:0}),Ch=Nt(Xn),qs,vr,Xr,Qi=le({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xr&&(Xr&&r.type==="mousemove"?(qs=r.screenX-Xr.screenX,vr=r.screenY-Xr.screenY):vr=qs=0,Xr=r),qs)},movementY:function(r){return"movementY"in r?r.movementY:vr}}),Ws=Nt(Qi),Ea=le({},Qi,{dataTransfer:0}),nu=Nt(Ea),Hs=le({},Xn,{relatedTarget:0}),Ks=Nt(Hs),ru=le({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=Nt(ru),iu=le({},Vn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),su=Nt(iu),ou=le({},Vn,{data:0}),Ta=Nt(ou),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=au[r])?!!s[r]:!1}function Zn(){return lu}var u=le({},Xn,{key:function(r){if(r.key){var s=Gs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=zs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(r){return r.type==="keypress"?zs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?zs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Nt(u),v=le({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(v),j=le({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),W=Nt(j),oe=le({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Nt(oe),vt=le({},Qi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Nt(vt),It=[9,13,27,32],dt=d&&"CompositionEvent"in window,wn=null;d&&"documentMode"in document&&(wn=document.documentMode);var dn=d&&"TextEvent"in window&&!wn,Ji=d&&(!dt||wn&&8<wn&&11>=wn),Qs=" ",um=!1;function cm(r,s){switch(r){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Js=!1;function w0(r,s){switch(r){case"compositionend":return hm(s);case"keypress":return s.which!==32?null:(um=!0,Qs);case"textInput":return r=s.data,r===Qs&&um?null:r;default:return null}}function E0(r,s){if(Js)return r==="compositionend"||!dt&&cm(r,s)?(r=_a(),Xt=Bs=hn=null,Js=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ji&&s.locale!=="ko"?null:s.data;default:return null}}var T0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!T0[r.type]:s==="textarea"}function fm(r,s,a,h){Gn(h),s=fu(s,"onChange"),0<s.length&&(a=new $s("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var Ia=null,Sa=null;function I0(r){xm(r,0)}function uu(r){var s=to(r);if(Ss(s))return r}function S0(r,s){if(r==="change")return s}var pm=!1;if(d){var Ph;if(d){var kh="oninput"in document;if(!kh){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),kh=typeof mm.oninput=="function"}Ph=kh}else Ph=!1;pm=Ph&&(!document.documentMode||9<document.documentMode)}function gm(){Ia&&(Ia.detachEvent("onpropertychange",ym),Sa=Ia=null)}function ym(r){if(r.propertyName==="value"&&uu(Sa)){var s=[];fm(s,Sa,r,ks(r)),ca(I0,s)}}function A0(r,s,a){r==="focusin"?(gm(),Ia=s,Sa=a,Ia.attachEvent("onpropertychange",ym)):r==="focusout"&&gm()}function R0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uu(Sa)}function C0(r,s){if(r==="click")return uu(s)}function P0(r,s){if(r==="input"||r==="change")return uu(s)}function k0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Mn=typeof Object.is=="function"?Object.is:k0;function Aa(r,s){if(Mn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Mn(r[f],s[f]))return!1}return!0}function vm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _m(r,s){var a=vm(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vm(a)}}function wm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?wm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Em(){for(var r=window,s=zr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=zr(r.document)}return s}function Nh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function N0(r){var s=Em(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&wm(a.ownerDocument.documentElement,a)){if(h!==null&&Nh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=_m(a,g);var w=_m(a,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var x0=d&&"documentMode"in document&&11>=document.documentMode,Ys=null,xh=null,Ra=null,bh=!1;function Tm(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bh||Ys==null||Ys!==zr(h)||(h=Ys,"selectionStart"in h&&Nh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ra&&Aa(Ra,h)||(Ra=h,h=fu(xh,"onSelect"),0<h.length&&(s=new $s("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Ys)))}function cu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Xs={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},Oh={},Im={};d&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function hu(r){if(Oh[r])return Oh[r];if(!Xs[r])return r;var s=Xs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Im)return Oh[r]=s[a];return r}var Sm=hu("animationend"),Am=hu("animationiteration"),Rm=hu("animationstart"),Cm=hu("transitionend"),Pm=new Map,km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(r,s){Pm.set(r,s),l(s,[r])}for(var Dh=0;Dh<km.length;Dh++){var Lh=km[Dh],b0=Lh.toLowerCase(),O0=Lh[0].toUpperCase()+Lh.slice(1);Zr(b0,"on"+O0)}Zr(Sm,"onAnimationEnd"),Zr(Am,"onAnimationIteration"),Zr(Rm,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(Cm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Nm(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,Bl(h,s,void 0,r),r.currentTarget=null}function xm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var C=h[w],b=C.instance,$=C.currentTarget;if(C=C.listener,b!==g&&f.isPropagationStopped())break e;Nm(f,C,$),g=b}else for(w=0;w<h.length;w++){if(C=h[w],b=C.instance,$=C.currentTarget,C=C.listener,b!==g&&f.isPropagationStopped())break e;Nm(f,C,$),g=b}}}if(kn)throw r=ha,kn=!1,ha=null,r}function Xe(r,s){var a=s[$h];a===void 0&&(a=s[$h]=new Set);var h=r+"__bubble";a.has(h)||(bm(s,r,2,!1),a.add(h))}function Vh(r,s,a){var h=0;s&&(h|=4),bm(a,r,h,s)}var du="_reactListening"+Math.random().toString(36).slice(2);function Pa(r){if(!r[du]){r[du]=!0,i.forEach(function(a){a!=="selectionchange"&&(D0.has(a)||Vh(a,!1,r),Vh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[du]||(s[du]=!0,Vh("selectionchange",!1,s))}}function bm(r,s,a,h){switch(va(s)){case 1:var f=tt;break;case 4:f=Rh;break;default:f=ya}a=f.bind(null,s,a,r),f=void 0,!bs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Mh(r,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===f||b.nodeType===8&&b.parentNode===f))return;w=w.return}for(;C!==null;){if(w=Yi(C),w===null)return;if(b=w.tag,b===5||b===6){h=g=w;continue e}C=C.parentNode}}h=h.return}ca(function(){var $=g,Y=ks(a),Z=[];e:{var J=Pm.get(r);if(J!==void 0){var ue=$s,de=r;switch(r){case"keypress":if(zs(a)===0)break e;case"keydown":case"keyup":ue=m;break;case"focusin":de="focus",ue=Ks;break;case"focusout":de="blur",ue=Ks;break;case"beforeblur":case"afterblur":ue=Ks;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case Sm:case Am:case Rm:ue=_r;break;case Cm:ue=qe;break;case"scroll":ue=Ch;break;case"wheel":ue=Ve;break;case"copy":case"cut":case"paste":ue=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var fe=(s&4)!==0,ut=!fe&&r==="scroll",B=fe?J!==null?J+"Capture":null:J;fe=[];for(var V=$,z;V!==null;){z=V;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,B!==null&&(re=lt(V,B),re!=null&&fe.push(ka(V,re,z)))),ut)break;V=V.return}0<fe.length&&(J=new ue(J,de,null,a,Y),Z.push({event:J,listeners:fe}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",J&&a!==Fi&&(de=a.relatedTarget||a.fromElement)&&(Yi(de)||de[wr]))break e;if((ue||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ue?(de=a.relatedTarget||a.toElement,ue=$,de=de?Yi(de):null,de!==null&&(ut=Nn(de),de!==ut||de.tag!==5&&de.tag!==6)&&(de=null)):(ue=null,de=$),ue!==de)){if(fe=Ws,re="onMouseLeave",B="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(fe=T,re="onPointerLeave",B="onPointerEnter",V="pointer"),ut=ue==null?J:to(ue),z=de==null?J:to(de),J=new fe(re,V+"leave",ue,a,Y),J.target=ut,J.relatedTarget=z,re=null,Yi(Y)===$&&(fe=new fe(B,V+"enter",de,a,Y),fe.target=z,fe.relatedTarget=ut,re=fe),ut=re,ue&&de)t:{for(fe=ue,B=de,V=0,z=fe;z;z=Zs(z))V++;for(z=0,re=B;re;re=Zs(re))z++;for(;0<V-z;)fe=Zs(fe),V--;for(;0<z-V;)B=Zs(B),z--;for(;V--;){if(fe===B||B!==null&&fe===B.alternate)break t;fe=Zs(fe),B=Zs(B)}fe=null}else fe=null;ue!==null&&Om(Z,J,ue,fe,!1),de!==null&&ut!==null&&Om(Z,ut,de,fe,!0)}}e:{if(J=$?to($):window,ue=J.nodeName&&J.nodeName.toLowerCase(),ue==="select"||ue==="input"&&J.type==="file")var ge=S0;else if(dm(J))if(pm)ge=P0;else{ge=R0;var _e=A0}else(ue=J.nodeName)&&ue.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ge=C0);if(ge&&(ge=ge(r,$))){fm(Z,ge,a,Y);break e}_e&&_e(r,J,$),r==="focusout"&&(_e=J._wrapperState)&&_e.controlled&&J.type==="number"&&Rs(J,"number",J.value)}switch(_e=$?to($):window,r){case"focusin":(dm(_e)||_e.contentEditable==="true")&&(Ys=_e,xh=$,Ra=null);break;case"focusout":Ra=xh=Ys=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,Tm(Z,a,Y);break;case"selectionchange":if(x0)break;case"keydown":case"keyup":Tm(Z,a,Y)}var we;if(dt)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Js?cm(r,a)&&(Te="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Ji&&a.locale!=="ko"&&(Js||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Js&&(we=_a()):(hn=Y,Bs="value"in hn?hn.value:hn.textContent,Js=!0)),_e=fu($,Te),0<_e.length&&(Te=new Ta(Te,r,null,a,Y),Z.push({event:Te,listeners:_e}),we?Te.data=we:(we=hm(a),we!==null&&(Te.data=we)))),(we=dn?w0(r,a):E0(r,a))&&($=fu($,"onBeforeInput"),0<$.length&&(Y=new Ta("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:$}),Y.data=we))}xm(Z,s)})}function ka(r,s,a){return{instance:r,listener:s,currentTarget:a}}function fu(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=lt(r,a),g!=null&&h.unshift(ka(r,g,f)),g=lt(r,s),g!=null&&h.push(ka(r,g,f))),r=r.return}return h}function Zs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Om(r,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var C=a,b=C.alternate,$=C.stateNode;if(b!==null&&b===h)break;C.tag===5&&$!==null&&(C=$,f?(b=lt(a,g),b!=null&&w.unshift(ka(a,b,C))):f||(b=lt(a,g),b!=null&&w.push(ka(a,b,C)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var L0=/\r\n?/g,V0=/\u0000|\uFFFD/g;function Dm(r){return(typeof r=="string"?r:""+r).replace(L0,`
`).replace(V0,"")}function pu(r,s,a){if(s=Dm(s),Dm(r)!==s&&a)throw Error(t(425))}function mu(){}var Fh=null,Uh=null;function jh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,M0=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,F0=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(r){return Lm.resolve(null).then(r).catch(U0)}:Bh;function U0(r){setTimeout(function(){throw r})}function zh(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),Ln(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Ln(s)}function ei(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Vm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var eo=Math.random().toString(36).slice(2),er="__reactFiber$"+eo,Na="__reactProps$"+eo,wr="__reactContainer$"+eo,$h="__reactEvents$"+eo,j0="__reactListeners$"+eo,B0="__reactHandles$"+eo;function Yi(r){var s=r[er];if(s)return s;for(var a=r.parentNode;a;){if(s=a[wr]||a[er]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Vm(r);r!==null;){if(a=r[er])return a;r=Vm(r)}return s}r=a,a=r.parentNode}return null}function xa(r){return r=r[er]||r[wr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function to(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function gu(r){return r[Na]||null}var qh=[],no=-1;function ti(r){return{current:r}}function Ze(r){0>no||(r.current=qh[no],qh[no]=null,no--)}function Ye(r,s){no++,qh[no]=r.current,r.current=s}var ni={},Mt=ti(ni),Zt=ti(!1),Xi=ni;function ro(r,s){var a=r.type.contextTypes;if(!a)return ni;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function yu(){Ze(Zt),Ze(Mt)}function Mm(r,s,a){if(Mt.current!==ni)throw Error(t(168));Ye(Mt,s),Ye(Zt,a)}function Fm(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,ze(r)||"Unknown",f));return le({},a,h)}function vu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ni,Xi=Mt.current,Ye(Mt,r),Ye(Zt,Zt.current),!0}function Um(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Fm(r,s,Xi),h.__reactInternalMemoizedMergedChildContext=r,Ze(Zt),Ze(Mt),Ye(Mt,r)):Ze(Zt),Ye(Zt,a)}var Er=null,_u=!1,Wh=!1;function jm(r){Er===null?Er=[r]:Er.push(r)}function z0(r){_u=!0,jm(r)}function ri(){if(!Wh&&Er!==null){Wh=!0;var r=0,s=Oe;try{var a=Er;for(Oe=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Er=null,_u=!1}catch(f){throw Er!==null&&(Er=Er.slice(r+1)),Vs($i,ri),f}finally{Oe=s,Wh=!1}}return null}var io=[],so=0,wu=null,Eu=0,En=[],Tn=0,Zi=null,Tr=1,Ir="";function es(r,s){io[so++]=Eu,io[so++]=wu,wu=r,Eu=s}function Bm(r,s,a){En[Tn++]=Tr,En[Tn++]=Ir,En[Tn++]=Zi,Zi=r;var h=Tr;r=Ir;var f=32-Ht(h)-1;h&=~(1<<f),a+=1;var g=32-Ht(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Tr=1<<32-Ht(s)+f|a<<f|h,Ir=g+r}else Tr=1<<g|a<<f|h,Ir=r}function Hh(r){r.return!==null&&(es(r,1),Bm(r,1,0))}function Kh(r){for(;r===wu;)wu=io[--so],io[so]=null,Eu=io[--so],io[so]=null;for(;r===Zi;)Zi=En[--Tn],En[Tn]=null,Ir=En[--Tn],En[Tn]=null,Tr=En[--Tn],En[Tn]=null}var fn=null,pn=null,nt=!1,Fn=null;function zm(r,s){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function $m(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,fn=r,pn=ei(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,fn=r,pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Zi!==null?{id:Tr,overflow:Ir}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,fn=r,pn=null,!0):!1;default:return!1}}function Gh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Qh(r){if(nt){var s=pn;if(s){var a=s;if(!$m(r,s)){if(Gh(r))throw Error(t(418));s=ei(a.nextSibling);var h=fn;s&&$m(r,s)?zm(h,a):(r.flags=r.flags&-4097|2,nt=!1,fn=r)}}else{if(Gh(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,fn=r}}}function qm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;fn=r}function Tu(r){if(r!==fn)return!1;if(!nt)return qm(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!jh(r.type,r.memoizedProps)),s&&(s=pn)){if(Gh(r))throw Wm(),Error(t(418));for(;s;)zm(r,s),s=ei(s.nextSibling)}if(qm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){pn=ei(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}pn=null}}else pn=fn?ei(r.stateNode.nextSibling):null;return!0}function Wm(){for(var r=pn;r;)r=ei(r.nextSibling)}function oo(){pn=fn=null,nt=!1}function Jh(r){Fn===null?Fn=[r]:Fn.push(r)}var $0=ae.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Iu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Hm(r){var s=r._init;return s(r._payload)}function Km(r){function s(B,V){if(r){var z=B.deletions;z===null?(B.deletions=[V],B.flags|=16):z.push(V)}}function a(B,V){if(!r)return null;for(;V!==null;)s(B,V),V=V.sibling;return null}function h(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function f(B,V){return B=hi(B,V),B.index=0,B.sibling=null,B}function g(B,V,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<V?(B.flags|=2,V):z):(B.flags|=2,V)):(B.flags|=1048576,V)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function C(B,V,z,re){return V===null||V.tag!==6?(V=Bd(z,B.mode,re),V.return=B,V):(V=f(V,z),V.return=B,V)}function b(B,V,z,re){var ge=z.type;return ge===k?Y(B,V,z.props.children,re,z.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===be&&Hm(ge)===V.type)?(re=f(V,z.props),re.ref=ba(B,V,z),re.return=B,re):(re=Ku(z.type,z.key,z.props,null,B.mode,re),re.ref=ba(B,V,z),re.return=B,re)}function $(B,V,z,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=zd(z,B.mode,re),V.return=B,V):(V=f(V,z.children||[]),V.return=B,V)}function Y(B,V,z,re,ge){return V===null||V.tag!==7?(V=ls(z,B.mode,re,ge),V.return=B,V):(V=f(V,z),V.return=B,V)}function Z(B,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Bd(""+V,B.mode,z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ne:return z=Ku(V.type,V.key,V.props,null,B.mode,z),z.ref=ba(B,null,V),z.return=B,z;case se:return V=zd(V,B.mode,z),V.return=B,V;case be:var re=V._init;return Z(B,re(V._payload),z)}if(hr(V)||ye(V))return V=ls(V,B.mode,z,null),V.return=B,V;Iu(B,V)}return null}function J(B,V,z,re){var ge=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ge!==null?null:C(B,V,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ne:return z.key===ge?b(B,V,z,re):null;case se:return z.key===ge?$(B,V,z,re):null;case be:return ge=z._init,J(B,V,ge(z._payload),re)}if(hr(z)||ye(z))return ge!==null?null:Y(B,V,z,re,null);Iu(B,z)}return null}function ue(B,V,z,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(z)||null,C(V,B,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ne:return B=B.get(re.key===null?z:re.key)||null,b(V,B,re,ge);case se:return B=B.get(re.key===null?z:re.key)||null,$(V,B,re,ge);case be:var _e=re._init;return ue(B,V,z,_e(re._payload),ge)}if(hr(re)||ye(re))return B=B.get(z)||null,Y(V,B,re,ge,null);Iu(V,re)}return null}function de(B,V,z,re){for(var ge=null,_e=null,we=V,Te=V=0,Rt=null;we!==null&&Te<z.length;Te++){we.index>Te?(Rt=we,we=null):Rt=we.sibling;var je=J(B,we,z[Te],re);if(je===null){we===null&&(we=Rt);break}r&&we&&je.alternate===null&&s(B,we),V=g(je,V,Te),_e===null?ge=je:_e.sibling=je,_e=je,we=Rt}if(Te===z.length)return a(B,we),nt&&es(B,Te),ge;if(we===null){for(;Te<z.length;Te++)we=Z(B,z[Te],re),we!==null&&(V=g(we,V,Te),_e===null?ge=we:_e.sibling=we,_e=we);return nt&&es(B,Te),ge}for(we=h(B,we);Te<z.length;Te++)Rt=ue(we,B,Te,z[Te],re),Rt!==null&&(r&&Rt.alternate!==null&&we.delete(Rt.key===null?Te:Rt.key),V=g(Rt,V,Te),_e===null?ge=Rt:_e.sibling=Rt,_e=Rt);return r&&we.forEach(function(di){return s(B,di)}),nt&&es(B,Te),ge}function fe(B,V,z,re){var ge=ye(z);if(typeof ge!="function")throw Error(t(150));if(z=ge.call(z),z==null)throw Error(t(151));for(var _e=ge=null,we=V,Te=V=0,Rt=null,je=z.next();we!==null&&!je.done;Te++,je=z.next()){we.index>Te?(Rt=we,we=null):Rt=we.sibling;var di=J(B,we,je.value,re);if(di===null){we===null&&(we=Rt);break}r&&we&&di.alternate===null&&s(B,we),V=g(di,V,Te),_e===null?ge=di:_e.sibling=di,_e=di,we=Rt}if(je.done)return a(B,we),nt&&es(B,Te),ge;if(we===null){for(;!je.done;Te++,je=z.next())je=Z(B,je.value,re),je!==null&&(V=g(je,V,Te),_e===null?ge=je:_e.sibling=je,_e=je);return nt&&es(B,Te),ge}for(we=h(B,we);!je.done;Te++,je=z.next())je=ue(we,B,Te,je.value,re),je!==null&&(r&&je.alternate!==null&&we.delete(je.key===null?Te:je.key),V=g(je,V,Te),_e===null?ge=je:_e.sibling=je,_e=je);return r&&we.forEach(function(TT){return s(B,TT)}),nt&&es(B,Te),ge}function ut(B,V,z,re){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ne:e:{for(var ge=z.key,_e=V;_e!==null;){if(_e.key===ge){if(ge=z.type,ge===k){if(_e.tag===7){a(B,_e.sibling),V=f(_e,z.props.children),V.return=B,B=V;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===be&&Hm(ge)===_e.type){a(B,_e.sibling),V=f(_e,z.props),V.ref=ba(B,_e,z),V.return=B,B=V;break e}a(B,_e);break}else s(B,_e);_e=_e.sibling}z.type===k?(V=ls(z.props.children,B.mode,re,z.key),V.return=B,B=V):(re=Ku(z.type,z.key,z.props,null,B.mode,re),re.ref=ba(B,V,z),re.return=B,B=re)}return w(B);case se:e:{for(_e=z.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(B,V.sibling),V=f(V,z.children||[]),V.return=B,B=V;break e}else{a(B,V);break}else s(B,V);V=V.sibling}V=zd(z,B.mode,re),V.return=B,B=V}return w(B);case be:return _e=z._init,ut(B,V,_e(z._payload),re)}if(hr(z))return de(B,V,z,re);if(ye(z))return fe(B,V,z,re);Iu(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(B,V.sibling),V=f(V,z),V.return=B,B=V):(a(B,V),V=Bd(z,B.mode,re),V.return=B,B=V),w(B)):a(B,V)}return ut}var ao=Km(!0),Gm=Km(!1),Su=ti(null),Au=null,lo=null,Yh=null;function Xh(){Yh=lo=Au=null}function Zh(r){var s=Su.current;Ze(Su),r._currentValue=s}function ed(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function uo(r,s){Au=r,Yh=lo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function In(r){var s=r._currentValue;if(Yh!==r)if(r={context:r,memoizedValue:s,next:null},lo===null){if(Au===null)throw Error(t(308));lo=r,Au.dependencies={lanes:0,firstContext:r}}else lo=lo.next=r;return s}var ts=null;function td(r){ts===null?ts=[r]:ts.push(r)}function Qm(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,td(s)):(a.next=f.next,f.next=a),s.interleaved=a,Sr(r,h)}function Sr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ii=!1;function nd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ar(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function si(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ue&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Sr(r,a)}return f=h.interleaved,f===null?(s.next=s,td(h)):(s.next=f.next,f.next=s),h.interleaved=s,Sr(r,a)}function Ru(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gr(r,a)}}function Ym(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Cu(r,s,a,h){var f=r.updateQueue;ii=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var b=C,$=b.next;b.next=null,w===null?g=$:w.next=$,w=b;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==w&&(C===null?Y.firstBaseUpdate=$:C.next=$,Y.lastBaseUpdate=b))}if(g!==null){var Z=f.baseState;w=0,Y=$=b=null,C=g;do{var J=C.lane,ue=C.eventTime;if((h&J)===J){Y!==null&&(Y=Y.next={eventTime:ue,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var de=r,fe=C;switch(J=s,ue=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){Z=de.call(ue,Z,J);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,J=typeof de=="function"?de.call(ue,Z,J):de,J==null)break e;Z=le({},Z,J);break e;case 2:ii=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,J=f.effects,J===null?f.effects=[C]:J.push(C))}else ue={eventTime:ue,lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?($=Y=ue,b=Z):Y=Y.next=ue,w|=J;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;J=C,C=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(Y===null&&(b=Z),f.baseState=b,f.firstBaseUpdate=$,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);is|=w,r.lanes=w,r.memoizedState=Z}}function Xm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Oa={},tr=ti(Oa),Da=ti(Oa),La=ti(Oa);function ns(r){if(r===Oa)throw Error(t(174));return r}function rd(r,s){switch(Ye(La,s),Ye(Da,r),Ye(tr,Oa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=yt(s,r)}Ze(tr),Ye(tr,s)}function co(){Ze(tr),Ze(Da),Ze(La)}function Zm(r){ns(La.current);var s=ns(tr.current),a=yt(s,r.type);s!==a&&(Ye(Da,r),Ye(tr,a))}function id(r){Da.current===r&&(Ze(tr),Ze(Da))}var rt=ti(0);function Pu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var sd=[];function od(){for(var r=0;r<sd.length;r++)sd[r]._workInProgressVersionPrimary=null;sd.length=0}var ku=ae.ReactCurrentDispatcher,ad=ae.ReactCurrentBatchConfig,rs=0,it=null,_t=null,St=null,Nu=!1,Va=!1,Ma=0,q0=0;function Ft(){throw Error(t(321))}function ld(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Mn(r[a],s[a]))return!1;return!0}function ud(r,s,a,h,f,g){if(rs=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ku.current=r===null||r.memoizedState===null?G0:Q0,r=a(h,f),Va){g=0;do{if(Va=!1,Ma=0,25<=g)throw Error(t(301));g+=1,St=_t=null,s.updateQueue=null,ku.current=J0,r=a(h,f)}while(Va)}if(ku.current=Ou,s=_t!==null&&_t.next!==null,rs=0,St=_t=it=null,Nu=!1,s)throw Error(t(300));return r}function cd(){var r=Ma!==0;return Ma=0,r}function nr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?it.memoizedState=St=r:St=St.next=r,St}function Sn(){if(_t===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var s=St===null?it.memoizedState:St.next;if(s!==null)St=s,_t=r;else{if(r===null)throw Error(t(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?it.memoizedState=St=r:St=St.next=r}return St}function Fa(r,s){return typeof s=="function"?s(r):s}function hd(r){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=_t,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var C=w=null,b=null,$=g;do{var Y=$.lane;if((rs&Y)===Y)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var Z={lane:Y,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(C=b=Z,w=h):b=b.next=Z,it.lanes|=Y,is|=Y}$=$.next}while($!==null&&$!==g);b===null?w=h:b.next=C,Mn(h,s.memoizedState)||(tn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=b,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,is|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function dd(r){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Mn(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function eg(){}function tg(r,s){var a=it,h=Sn(),f=s(),g=!Mn(h.memoizedState,f);if(g&&(h.memoizedState=f,tn=!0),h=h.queue,fd(ig.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,Ua(9,rg.bind(null,a,h,f,s),void 0,null),At===null)throw Error(t(349));(rs&30)!==0||ng(a,s,f)}return f}function ng(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function rg(r,s,a,h){s.value=a,s.getSnapshot=h,sg(s)&&og(r)}function ig(r,s,a){return a(function(){sg(s)&&og(r)})}function sg(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Mn(r,a)}catch{return!0}}function og(r){var s=Sr(r,1);s!==null&&zn(s,r,1,-1)}function ag(r){var s=nr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:r},s.queue=r,r=r.dispatch=K0.bind(null,it,r),[s.memoizedState,r]}function Ua(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function lg(){return Sn().memoizedState}function xu(r,s,a,h){var f=nr();it.flags|=r,f.memoizedState=Ua(1|s,a,void 0,h===void 0?null:h)}function bu(r,s,a,h){var f=Sn();h=h===void 0?null:h;var g=void 0;if(_t!==null){var w=_t.memoizedState;if(g=w.destroy,h!==null&&ld(h,w.deps)){f.memoizedState=Ua(s,a,g,h);return}}it.flags|=r,f.memoizedState=Ua(1|s,a,g,h)}function ug(r,s){return xu(8390656,8,r,s)}function fd(r,s){return bu(2048,8,r,s)}function cg(r,s){return bu(4,2,r,s)}function hg(r,s){return bu(4,4,r,s)}function dg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function fg(r,s,a){return a=a!=null?a.concat([r]):null,bu(4,4,dg.bind(null,s,r),a)}function pd(){}function pg(r,s){var a=Sn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ld(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function mg(r,s){var a=Sn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ld(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function gg(r,s,a){return(rs&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=a):(Mn(a,s)||(a=Hi(),it.lanes|=a,is|=a,r.baseState=!0),s)}function W0(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var h=ad.transition;ad.transition={};try{r(!1),s()}finally{Oe=a,ad.transition=h}}function yg(){return Sn().memoizedState}function H0(r,s,a){var h=ui(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},vg(r))_g(s,a);else if(a=Qm(r,s,a,h),a!==null){var f=Qt();zn(a,r,h,f),wg(a,s,h)}}function K0(r,s,a){var h=ui(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(vg(r))_g(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,a);if(f.hasEagerState=!0,f.eagerState=C,Mn(C,w)){var b=s.interleaved;b===null?(f.next=f,td(s)):(f.next=b.next,b.next=f),s.interleaved=f;return}}catch{}finally{}a=Qm(r,s,f,h),a!==null&&(f=Qt(),zn(a,r,h,f),wg(a,s,h))}}function vg(r){var s=r.alternate;return r===it||s!==null&&s===it}function _g(r,s){Va=Nu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function wg(r,s,a){if((a&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gr(r,a)}}var Ou={readContext:In,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},G0={readContext:In,useCallback:function(r,s){return nr().memoizedState=[r,s===void 0?null:s],r},useContext:In,useEffect:ug,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,xu(4194308,4,dg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return xu(4194308,4,r,s)},useInsertionEffect:function(r,s){return xu(4,2,r,s)},useMemo:function(r,s){var a=nr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=nr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=H0.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=nr();return r={current:r},s.memoizedState=r},useState:ag,useDebugValue:pd,useDeferredValue:function(r){return nr().memoizedState=r},useTransition:function(){var r=ag(!1),s=r[0];return r=W0.bind(null,r[1]),nr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=it,f=nr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),At===null)throw Error(t(349));(rs&30)!==0||ng(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ug(ig.bind(null,h,g,r),[r]),h.flags|=2048,Ua(9,rg.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=nr(),s=At.identifierPrefix;if(nt){var a=Ir,h=Tr;a=(h&~(1<<32-Ht(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ma++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=q0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Q0={readContext:In,useCallback:pg,useContext:In,useEffect:fd,useImperativeHandle:fg,useInsertionEffect:cg,useLayoutEffect:hg,useMemo:mg,useReducer:hd,useRef:lg,useState:function(){return hd(Fa)},useDebugValue:pd,useDeferredValue:function(r){var s=Sn();return gg(s,_t.memoizedState,r)},useTransition:function(){var r=hd(Fa)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:eg,useSyncExternalStore:tg,useId:yg,unstable_isNewReconciler:!1},J0={readContext:In,useCallback:pg,useContext:In,useEffect:fd,useImperativeHandle:fg,useInsertionEffect:cg,useLayoutEffect:hg,useMemo:mg,useReducer:dd,useRef:lg,useState:function(){return dd(Fa)},useDebugValue:pd,useDeferredValue:function(r){var s=Sn();return _t===null?s.memoizedState=r:gg(s,_t.memoizedState,r)},useTransition:function(){var r=dd(Fa)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:eg,useSyncExternalStore:tg,useId:yg,unstable_isNewReconciler:!1};function Un(r,s){if(r&&r.defaultProps){s=le({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function md(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:le({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Du={isMounted:function(r){return(r=r._reactInternals)?Nn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Qt(),f=ui(r),g=Ar(h,f);g.payload=s,a!=null&&(g.callback=a),s=si(r,g,f),s!==null&&(zn(s,r,f,h),Ru(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Qt(),f=ui(r),g=Ar(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=si(r,g,f),s!==null&&(zn(s,r,f,h),Ru(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Qt(),h=ui(r),f=Ar(a,h);f.tag=2,s!=null&&(f.callback=s),s=si(r,f,h),s!==null&&(zn(s,r,h,a),Ru(s,r,h))}};function Eg(r,s,a,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Aa(a,h)||!Aa(f,g):!0}function Tg(r,s,a){var h=!1,f=ni,g=s.contextType;return typeof g=="object"&&g!==null?g=In(g):(f=en(s)?Xi:Mt.current,h=s.contextTypes,g=(h=h!=null)?ro(r,f):ni),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Du,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Ig(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Du.enqueueReplaceState(s,s.state,null)}function gd(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},nd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=In(g):(g=en(s)?Xi:Mt.current,f.context=ro(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(md(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Du.enqueueReplaceState(f,f.state,null),Cu(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ho(r,s){try{var a="",h=s;do a+=Pe(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function yd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function vd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Y0=typeof WeakMap=="function"?WeakMap:Map;function Sg(r,s,a){a=Ar(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Bu||(Bu=!0,Od=h),vd(r,s)},a}function Ag(r,s,a){a=Ar(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){vd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){vd(r,s),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Rg(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new Y0;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=hT.bind(null,r,s,a),s.then(r,r))}function Cg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Pg(r,s,a,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ar(-1,1),s.tag=2,si(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var X0=ae.ReactCurrentOwner,tn=!1;function Gt(r,s,a,h){s.child=r===null?Gm(s,null,a,h):ao(s,r.child,a,h)}function kg(r,s,a,h,f){a=a.render;var g=s.ref;return uo(s,f),h=ud(r,s,a,h,g,f),a=cd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Rr(r,s,f)):(nt&&a&&Hh(s),s.flags|=1,Gt(r,s,h,f),s.child)}function Ng(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!jd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,xg(r,s,g,h,f)):(r=Ku(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(w,h)&&r.ref===s.ref)return Rr(r,s,f)}return s.flags|=1,r=hi(g,h),r.ref=s.ref,r.return=s,s.child=r}function xg(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(Aa(g,h)&&r.ref===s.ref)if(tn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,Rr(r,s,f)}return _d(r,s,a,h,f)}function bg(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(po,mn),mn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(po,mn),mn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Ye(po,mn),mn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,Ye(po,mn),mn|=h;return Gt(r,s,f,a),s.child}function Og(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function _d(r,s,a,h,f){var g=en(a)?Xi:Mt.current;return g=ro(s,g),uo(s,f),a=ud(r,s,a,h,g,f),h=cd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Rr(r,s,f)):(nt&&h&&Hh(s),s.flags|=1,Gt(r,s,a,f),s.child)}function Dg(r,s,a,h,f){if(en(a)){var g=!0;vu(s)}else g=!1;if(uo(s,f),s.stateNode===null)Vu(r,s),Tg(s,a,h),gd(s,a,h,f),h=!0;else if(r===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var b=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=In($):($=en(a)?Xi:Mt.current,$=ro(s,$));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==h||b!==$)&&Ig(s,w,h,$),ii=!1;var J=s.memoizedState;w.state=J,Cu(s,h,w,f),b=s.memoizedState,C!==h||J!==b||Zt.current||ii?(typeof Y=="function"&&(md(s,a,Y,h),b=s.memoizedState),(C=ii||Eg(s,a,C,h,J,b,$))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=b),w.props=h,w.state=b,w.context=$,h=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Jm(r,s),C=s.memoizedProps,$=s.type===s.elementType?C:Un(s.type,C),w.props=$,Z=s.pendingProps,J=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=In(b):(b=en(a)?Xi:Mt.current,b=ro(s,b));var ue=a.getDerivedStateFromProps;(Y=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Z||J!==b)&&Ig(s,w,h,b),ii=!1,J=s.memoizedState,w.state=J,Cu(s,h,w,f);var de=s.memoizedState;C!==Z||J!==de||Zt.current||ii?(typeof ue=="function"&&(md(s,a,ue,h),de=s.memoizedState),($=ii||Eg(s,a,$,h,J,de,b)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,de,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,de,b)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=de),w.props=h,w.state=de,w.context=b,h=$):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),h=!1)}return wd(r,s,a,h,g,f)}function wd(r,s,a,h,f,g){Og(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Um(s,a,!1),Rr(r,s,g);h=s.stateNode,X0.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=ao(s,r.child,null,g),s.child=ao(s,null,C,g)):Gt(r,s,C,g),s.memoizedState=h.state,f&&Um(s,a,!0),s.child}function Lg(r){var s=r.stateNode;s.pendingContext?Mm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Mm(r,s.context,!1),rd(r,s.containerInfo)}function Vg(r,s,a,h,f){return oo(),Jh(f),s.flags|=256,Gt(r,s,a,h),s.child}var Ed={dehydrated:null,treeContext:null,retryLane:0};function Td(r){return{baseLanes:r,cachePool:null,transitions:null}}function Mg(r,s,a){var h=s.pendingProps,f=rt.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(rt,f&1),r===null)return Qh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Gu(w,h,0,null),r=ls(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Td(a),s.memoizedState=Ed,r):Id(s,w));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Z0(r,s,w,h,C,f,a);if(g){g=h.fallback,w=s.mode,f=r.child,C=f.sibling;var b={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=b,s.deletions=null):(h=hi(f,b),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=hi(C,g):(g=ls(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Td(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Ed,h}return g=r.child,r=g.sibling,h=hi(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function Id(r,s){return s=Gu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Lu(r,s,a,h){return h!==null&&Jh(h),ao(s,r.child,null,a),r=Id(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Z0(r,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=yd(Error(t(422))),Lu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Gu({mode:"visible",children:h.children},f,0,null),g=ls(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&ao(s,r.child,null,w),s.child.memoizedState=Td(w),s.memoizedState=Ed,g);if((s.mode&1)===0)return Lu(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=yd(g,h,void 0),Lu(r,s,w,h)}if(C=(w&r.childLanes)!==0,tn||C){if(h=At,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Sr(r,f),zn(h,r,f,-1))}return Ud(),h=yd(Error(t(421))),Lu(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=dT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,pn=ei(f.nextSibling),fn=s,nt=!0,Fn=null,r!==null&&(En[Tn++]=Tr,En[Tn++]=Ir,En[Tn++]=Zi,Tr=r.id,Ir=r.overflow,Zi=s),s=Id(s,h.children),s.flags|=4096,s)}function Fg(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),ed(r.return,s,a)}function Sd(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function Ug(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Gt(r,s,h.children,a),h=rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Fg(r,a,s);else if(r.tag===19)Fg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Pu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Sd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Pu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Sd(s,!0,a,null,g);break;case"together":Sd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Vu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Rr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),is|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=hi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=hi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function eT(r,s,a){switch(s.tag){case 3:Lg(s),oo();break;case 5:Zm(s);break;case 1:en(s.type)&&vu(s);break;case 4:rd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(Su,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Mg(r,s,a):(Ye(rt,rt.current&1),r=Rr(r,s,a),r!==null?r.sibling:null);Ye(rt,rt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Ug(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,bg(r,s,a)}return Rr(r,s,a)}var jg,Ad,Bg,zg;jg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ad=function(){},Bg=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,ns(tr.current);var g=null;switch(a){case"input":f=Li(r,f),h=Li(r,h),g=[];break;case"select":f=le({},f,{value:void 0}),h=le({},h,{value:void 0}),g=[];break;case"textarea":f=ea(r,f),h=ea(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=mu)}oa(a,h);var w;a=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var C=f[$];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var b=h[$];if(C=f?.[$],h.hasOwnProperty($)&&b!==C&&(b!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&C[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(g||(g=[]),g.push($,a)),a=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,C=C?C.__html:void 0,b!=null&&C!==b&&(g=g||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(g=g||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(b!=null&&$==="onScroll"&&Xe("scroll",r),g||C===b||(g=[])):(g=g||[]).push($,b))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},zg=function(r,s,a,h){a!==h&&(s.flags|=4)};function ja(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function tT(r,s,a){var h=s.pendingProps;switch(Kh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return en(s.type)&&yu(),Ut(s),null;case 3:return h=s.stateNode,co(),Ze(Zt),Ze(Mt),od(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Tu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fn!==null&&(Vd(Fn),Fn=null))),Ad(r,s),Ut(s),null;case 5:id(s);var f=ns(La.current);if(a=s.type,r!==null&&s.stateNode!=null)Bg(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=ns(tr.current),Tu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[er]=s,h[Na]=g,r=(s.mode&1)!==0,a){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<Ca.length;f++)Xe(Ca[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":As(h,g),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",h);break;case"textarea":Cs(h,g),Xe("invalid",h)}oa(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&pu(h.textContent,C,r),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&pu(h.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Xe("scroll",h)}switch(a){case"input":cr(h),jl(h,g,!0);break;case"textarea":cr(h),ta(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=mu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[er]=s,r[Na]=h,jg(r,s,!1,!1),s.stateNode=r;e:{switch(w=aa(a,h),a){case"dialog":Xe("cancel",r),Xe("close",r),f=h;break;case"iframe":case"object":case"embed":Xe("load",r),f=h;break;case"video":case"audio":for(f=0;f<Ca.length;f++)Xe(Ca[f],r);f=h;break;case"source":Xe("error",r),f=h;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),f=h;break;case"details":Xe("toggle",r),f=h;break;case"input":As(r,h),f=Li(r,h),Xe("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=le({},h,{value:void 0}),Xe("invalid",r);break;case"textarea":Cs(r,h),f=ea(r,h),Xe("invalid",r);break;default:f=h}oa(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var b=C[g];g==="style"?ia(r,b):g==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&na(r,b)):g==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&$r(r,b):typeof b=="number"&&$r(r,""+b):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?b!=null&&g==="onScroll"&&Xe("scroll",r):b!=null&&te(r,g,b,w))}switch(a){case"input":cr(r),jl(r,h,!1);break;case"textarea":cr(r),ta(r);break;case"option":h.value!=null&&r.setAttribute("value",""+$e(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?dr(r,!!h.multiple,g,!1):h.defaultValue!=null&&dr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=mu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)zg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ns(La.current),ns(tr.current),Tu(s)){if(h=s.stateNode,a=s.memoizedProps,h[er]=s,(g=h.nodeValue!==a)&&(r=fn,r!==null))switch(r.tag){case 3:pu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&pu(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[er]=s,s.stateNode=h}return Ut(s),null;case 13:if(Ze(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&pn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Wm(),oo(),s.flags|=98560,g=!1;else if(g=Tu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=s}else oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else Fn!==null&&(Vd(Fn),Fn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?wt===0&&(wt=3):Ud())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return co(),Ad(r,s),r===null&&Pa(s.stateNode.containerInfo),Ut(s),null;case 10:return Zh(s.type._context),Ut(s),null;case 17:return en(s.type)&&yu(),Ut(s),null;case 19:if(Ze(rt),g=s.memoizedState,g===null)return Ut(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)ja(g,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Pu(r),w!==null){for(s.flags|=128,ja(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ye(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Je()>mo&&(s.flags|=128,h=!0,ja(g,!1),s.lanes=4194304)}else{if(!h)if(r=Pu(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ja(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!nt)return Ut(s),null}else 2*Je()-g.renderingStartTime>mo&&a!==1073741824&&(s.flags|=128,h=!0,ja(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,a=rt.current,Ye(rt,h?a&1|2:a&1),s):(Ut(s),null);case 22:case 23:return Fd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(mn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function nT(r,s){switch(Kh(s),s.tag){case 1:return en(s.type)&&yu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return co(),Ze(Zt),Ze(Mt),od(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return id(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));oo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return co(),null;case 10:return Zh(s.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var Mu=!1,jt=!1,rT=typeof WeakSet=="function"?WeakSet:Set,he=null;function fo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){at(r,s,h)}else a.current=null}function Rd(r,s,a){try{a()}catch(h){at(r,s,h)}}var $g=!1;function iT(r,s){if(Fh=Yr,r=Em(),Nh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,C=-1,b=-1,$=0,Y=0,Z=r,J=null;t:for(;;){for(var ue;Z!==a||f!==0&&Z.nodeType!==3||(C=w+f),Z!==g||h!==0&&Z.nodeType!==3||(b=w+h),Z.nodeType===3&&(w+=Z.nodeValue.length),(ue=Z.firstChild)!==null;)J=Z,Z=ue;for(;;){if(Z===r)break t;if(J===a&&++$===f&&(C=w),J===g&&++Y===h&&(b=w),(ue=Z.nextSibling)!==null)break;Z=J,J=Z.parentNode}Z=ue}a=C===-1||b===-1?null:{start:C,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uh={focusedElem:r,selectionRange:a},Yr=!1,he=s;he!==null;)if(s=he,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,he=r;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ut=de.memoizedState,B=s.stateNode,V=B.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Un(s.type,fe),ut);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){at(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}return de=$g,$g=!1,de}function Ba(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Rd(s,a,g)}f=f.next}while(f!==h)}}function Fu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Cd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function qg(r){var s=r.alternate;s!==null&&(r.alternate=null,qg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[er],delete s[Na],delete s[$h],delete s[j0],delete s[B0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Wg(r){return r.tag===5||r.tag===3||r.tag===4}function Hg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Wg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Pd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=mu));else if(h!==4&&(r=r.child,r!==null))for(Pd(r,s,a),r=r.sibling;r!==null;)Pd(r,s,a),r=r.sibling}function kd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(kd(r,s,a),r=r.sibling;r!==null;)kd(r,s,a),r=r.sibling}var xt=null,jn=!1;function oi(r,s,a){for(a=a.child;a!==null;)Kg(r,s,a),a=a.sibling}function Kg(r,s,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(qi,a)}catch{}switch(a.tag){case 5:jt||fo(a,s);case 6:var h=xt,f=jn;xt=null,oi(r,s,a),xt=h,jn=f,xt!==null&&(jn?(r=xt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):xt.removeChild(a.stateNode));break;case 18:xt!==null&&(jn?(r=xt,a=a.stateNode,r.nodeType===8?zh(r.parentNode,a):r.nodeType===1&&zh(r,a),Ln(r)):zh(xt,a.stateNode));break;case 4:h=xt,f=jn,xt=a.stateNode.containerInfo,jn=!0,oi(r,s,a),xt=h,jn=f;break;case 0:case 11:case 14:case 15:if(!jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Rd(a,s,w),f=f.next}while(f!==h)}oi(r,s,a);break;case 1:if(!jt&&(fo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){at(a,s,C)}oi(r,s,a);break;case 21:oi(r,s,a);break;case 22:a.mode&1?(jt=(h=jt)||a.memoizedState!==null,oi(r,s,a),jt=h):oi(r,s,a);break;default:oi(r,s,a)}}function Gg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new rT),s.forEach(function(h){var f=fT.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Bn(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:xt=C.stateNode,jn=!1;break e;case 3:xt=C.stateNode.containerInfo,jn=!0;break e;case 4:xt=C.stateNode.containerInfo,jn=!0;break e}C=C.return}if(xt===null)throw Error(t(160));Kg(g,w,f),xt=null,jn=!1;var b=f.alternate;b!==null&&(b.return=null),f.return=null}catch($){at(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Qg(s,r),s=s.sibling}function Qg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bn(s,r),rr(r),h&4){try{Ba(3,r,r.return),Fu(3,r)}catch(fe){at(r,r.return,fe)}try{Ba(5,r,r.return)}catch(fe){at(r,r.return,fe)}}break;case 1:Bn(s,r),rr(r),h&512&&a!==null&&fo(a,a.return);break;case 5:if(Bn(s,r),rr(r),h&512&&a!==null&&fo(a,a.return),r.flags&32){var f=r.stateNode;try{$r(f,"")}catch(fe){at(r,r.return,fe)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,C=r.type,b=r.updateQueue;if(r.updateQueue=null,b!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Xo(f,g),aa(C,w);var $=aa(C,g);for(w=0;w<b.length;w+=2){var Y=b[w],Z=b[w+1];Y==="style"?ia(f,Z):Y==="dangerouslySetInnerHTML"?na(f,Z):Y==="children"?$r(f,Z):te(f,Y,Z,$)}switch(C){case"input":Zo(f,g);break;case"textarea":Ps(f,g);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?dr(f,!!g.multiple,ue,!1):J!==!!g.multiple&&(g.defaultValue!=null?dr(f,!!g.multiple,g.defaultValue,!0):dr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Na]=g}catch(fe){at(r,r.return,fe)}}break;case 6:if(Bn(s,r),rr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(fe){at(r,r.return,fe)}}break;case 3:if(Bn(s,r),rr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(fe){at(r,r.return,fe)}break;case 4:Bn(s,r),rr(r);break;case 13:Bn(s,r),rr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(bd=Je())),h&4&&Gg(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(jt=($=jt)||Y,Bn(s,r),jt=$):Bn(s,r),rr(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Y&&(r.mode&1)!==0)for(he=r,Y=r.child;Y!==null;){for(Z=he=Y;he!==null;){switch(J=he,ue=J.child,J.tag){case 0:case 11:case 14:case 15:Ba(4,J,J.return);break;case 1:fo(J,J.return);var de=J.stateNode;if(typeof de.componentWillUnmount=="function"){h=J,a=J.return;try{s=h,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){at(h,a,fe)}}break;case 5:fo(J,J.return);break;case 22:if(J.memoizedState!==null){Xg(Z);continue}}ue!==null?(ue.return=J,he=ue):Xg(Z)}Y=Y.sibling}e:for(Y=null,Z=r;;){if(Z.tag===5){if(Y===null){Y=Z;try{f=Z.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=Z.stateNode,b=Z.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=ra("display",w))}catch(fe){at(r,r.return,fe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(fe){at(r,r.return,fe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Bn(s,r),rr(r),h&4&&Gg(r);break;case 21:break;default:Bn(s,r),rr(r)}}function rr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Wg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&($r(f,""),h.flags&=-33);var g=Hg(r);kd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,C=Hg(r);Pd(r,C,w);break;default:throw Error(t(161))}}catch(b){at(r,r.return,b)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function sT(r,s,a){he=r,Jg(r)}function Jg(r,s,a){for(var h=(r.mode&1)!==0;he!==null;){var f=he,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Mu;if(!w){var C=f.alternate,b=C!==null&&C.memoizedState!==null||jt;C=Mu;var $=jt;if(Mu=w,(jt=b)&&!$)for(he=f;he!==null;)w=he,b=w.child,w.tag===22&&w.memoizedState!==null?Zg(f):b!==null?(b.return=w,he=b):Zg(f);for(;g!==null;)he=g,Jg(g),g=g.sibling;he=f,Mu=C,jt=$}Yg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,he=g):Yg(r)}}function Yg(r){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||Fu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Un(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Xm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Xm(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Ln(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&Cd(s)}catch(J){at(s,s.return,J)}}if(s===r){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function Xg(r){for(;he!==null;){var s=he;if(s===r){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function Zg(r){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Fu(4,s)}catch(b){at(s,a,b)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(b){at(s,f,b)}}var g=s.return;try{Cd(s)}catch(b){at(s,g,b)}break;case 5:var w=s.return;try{Cd(s)}catch(b){at(s,w,b)}}}catch(b){at(s,s.return,b)}if(s===r){he=null;break}var C=s.sibling;if(C!==null){C.return=s.return,he=C;break}he=s.return}}var oT=Math.ceil,Uu=ae.ReactCurrentDispatcher,Nd=ae.ReactCurrentOwner,An=ae.ReactCurrentBatchConfig,Ue=0,At=null,ft=null,bt=0,mn=0,po=ti(0),wt=0,za=null,is=0,ju=0,xd=0,$a=null,nn=null,bd=0,mo=1/0,Cr=null,Bu=!1,Od=null,ai=null,zu=!1,li=null,$u=0,qa=0,Dd=null,qu=-1,Wu=0;function Qt(){return(Ue&6)!==0?Je():qu!==-1?qu:qu=Je()}function ui(r){return(r.mode&1)===0?1:(Ue&2)!==0&&bt!==0?bt&-bt:$0.transition!==null?(Wu===0&&(Wu=Hi()),Wu):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:va(r.type)),r)}function zn(r,s,a,h){if(50<qa)throw qa=0,Dd=null,Error(t(185));Kr(r,a,h),((Ue&2)===0||r!==At)&&(r===At&&((Ue&2)===0&&(ju|=a),wt===4&&ci(r,bt)),rn(r,h),a===1&&Ue===0&&(s.mode&1)===0&&(mo=Je()+500,_u&&ri()))}function rn(r,s){var a=r.callbackNode;mr(r,s);var h=Wi(r,r===At?bt:0);if(h===0)a!==null&&fa(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&fa(a),s===1)r.tag===0?z0(ty.bind(null,r)):jm(ty.bind(null,r)),F0(function(){(Ue&6)===0&&ri()}),a=null;else{switch(Qr(h)){case 1:a=$i;break;case 4:a=qr;break;case 16:a=vn;break;case 536870912:a=Wl;break;default:a=vn}a=uy(a,ey.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function ey(r,s){if(qu=-1,Wu=0,(Ue&6)!==0)throw Error(t(327));var a=r.callbackNode;if(go()&&r.callbackNode!==a)return null;var h=Wi(r,r===At?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Hu(r,h);else{s=h;var f=Ue;Ue|=2;var g=ry();(At!==r||bt!==s)&&(Cr=null,mo=Je()+500,os(r,s));do try{uT();break}catch(C){ny(r,C)}while(!0);Xh(),Uu.current=g,Ue=f,ft!==null?s=0:(At=null,bt=0,s=wt)}if(s!==0){if(s===2&&(f=cn(r),f!==0&&(h=f,s=Ld(r,f))),s===1)throw a=za,os(r,0),ci(r,h),rn(r,Je()),a;if(s===6)ci(r,h);else{if(f=r.current.alternate,(h&30)===0&&!aT(f)&&(s=Hu(r,h),s===2&&(g=cn(r),g!==0&&(h=g,s=Ld(r,g))),s===1))throw a=za,os(r,0),ci(r,h),rn(r,Je()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:as(r,nn,Cr);break;case 3:if(ci(r,h),(h&130023424)===h&&(s=bd+500-Je(),10<s)){if(Wi(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Qt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Bh(as.bind(null,r,nn,Cr),s);break}as(r,nn,Cr);break;case 4:if(ci(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Ht(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*oT(h/1960))-h,10<h){r.timeoutHandle=Bh(as.bind(null,r,nn,Cr),h);break}as(r,nn,Cr);break;case 5:as(r,nn,Cr);break;default:throw Error(t(329))}}}return rn(r,Je()),r.callbackNode===a?ey.bind(null,r):null}function Ld(r,s){var a=$a;return r.current.memoizedState.isDehydrated&&(os(r,s).flags|=256),r=Hu(r,s),r!==2&&(s=nn,nn=a,s!==null&&Vd(s)),r}function Vd(r){nn===null?nn=r:nn.push.apply(nn,r)}function aT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Mn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(r,s){for(s&=~xd,s&=~ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Ht(s),h=1<<a;r[a]=-1,s&=~h}}function ty(r){if((Ue&6)!==0)throw Error(t(327));go();var s=Wi(r,0);if((s&1)===0)return rn(r,Je()),null;var a=Hu(r,s);if(r.tag!==0&&a===2){var h=cn(r);h!==0&&(s=h,a=Ld(r,h))}if(a===1)throw a=za,os(r,0),ci(r,s),rn(r,Je()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,as(r,nn,Cr),rn(r,Je()),null}function Md(r,s){var a=Ue;Ue|=1;try{return r(s)}finally{Ue=a,Ue===0&&(mo=Je()+500,_u&&ri())}}function ss(r){li!==null&&li.tag===0&&(Ue&6)===0&&go();var s=Ue;Ue|=1;var a=An.transition,h=Oe;try{if(An.transition=null,Oe=1,r)return r()}finally{Oe=h,An.transition=a,Ue=s,(Ue&6)===0&&ri()}}function Fd(){mn=po.current,Ze(po)}function os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,M0(a)),ft!==null)for(a=ft.return;a!==null;){var h=a;switch(Kh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&yu();break;case 3:co(),Ze(Zt),Ze(Mt),od();break;case 5:id(h);break;case 4:co();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:Zh(h.type._context);break;case 22:case 23:Fd()}a=a.return}if(At=r,ft=r=hi(r.current,null),bt=mn=s,wt=0,za=null,xd=ju=is=0,nn=$a=null,ts!==null){for(s=0;s<ts.length;s++)if(a=ts[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}ts=null}return r}function ny(r,s){do{var a=ft;try{if(Xh(),ku.current=Ou,Nu){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Nu=!1}if(rs=0,St=_t=it=null,Va=!1,Ma=0,Nd.current=null,a===null||a.return===null){wt=1,za=s,ft=null;break}e:{var g=r,w=a.return,C=a,b=s;if(s=bt,C.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,Y=C,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ue=Cg(w);if(ue!==null){ue.flags&=-257,Pg(ue,w,C,g,s),ue.mode&1&&Rg(g,$,s),s=ue,b=$;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(b),s.updateQueue=fe}else de.add(b);break e}else{if((s&1)===0){Rg(g,$,s),Ud();break e}b=Error(t(426))}}else if(nt&&C.mode&1){var ut=Cg(w);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Pg(ut,w,C,g,s),Jh(ho(b,C));break e}}g=b=ho(b,C),wt!==4&&(wt=2),$a===null?$a=[g]:$a.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=Sg(g,b,s);Ym(g,B);break e;case 1:C=b;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ai===null||!ai.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=Ag(g,C,s);Ym(g,re);break e}}g=g.return}while(g!==null)}sy(a)}catch(ge){s=ge,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function ry(){var r=Uu.current;return Uu.current=Ou,r===null?Ou:r}function Ud(){(wt===0||wt===3||wt===2)&&(wt=4),At===null||(is&268435455)===0&&(ju&268435455)===0||ci(At,bt)}function Hu(r,s){var a=Ue;Ue|=2;var h=ry();(At!==r||bt!==s)&&(Cr=null,os(r,s));do try{lT();break}catch(f){ny(r,f)}while(!0);if(Xh(),Ue=a,Uu.current=h,ft!==null)throw Error(t(261));return At=null,bt=0,wt}function lT(){for(;ft!==null;)iy(ft)}function uT(){for(;ft!==null&&!$l();)iy(ft)}function iy(r){var s=ly(r.alternate,r,mn);r.memoizedProps=r.pendingProps,s===null?sy(r):ft=s,Nd.current=null}function sy(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=tT(a,s,mn),a!==null){ft=a;return}}else{if(a=nT(a,s),a!==null){a.flags&=32767,ft=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=r}while(s!==null);wt===0&&(wt=5)}function as(r,s,a){var h=Oe,f=An.transition;try{An.transition=null,Oe=1,cT(r,s,a,h)}finally{An.transition=f,Oe=h}return null}function cT(r,s,a,h){do go();while(li!==null);if((Ue&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ke(r,g),r===At&&(ft=At=null,bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zu||(zu=!0,uy(vn,function(){return go(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=An.transition,An.transition=null;var w=Oe;Oe=1;var C=Ue;Ue|=4,Nd.current=null,iT(r,a),Qg(a,r),N0(Uh),Yr=!!Fh,Uh=Fh=null,r.current=a,sT(a),Th(),Ue=C,Oe=w,An.transition=g}else r.current=a;if(zu&&(zu=!1,li=r,$u=f),g=r.pendingLanes,g===0&&(ai=null),Hl(a.stateNode),rn(r,Je()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Bu)throw Bu=!1,r=Od,Od=null,r;return($u&1)!==0&&r.tag!==0&&go(),g=r.pendingLanes,(g&1)!==0?r===Dd?qa++:(qa=0,Dd=r):qa=0,ri(),null}function go(){if(li!==null){var r=Qr($u),s=An.transition,a=Oe;try{if(An.transition=null,Oe=16>r?16:r,li===null)var h=!1;else{if(r=li,li=null,$u=0,(Ue&6)!==0)throw Error(t(331));var f=Ue;for(Ue|=4,he=r.current;he!==null;){var g=he,w=g.child;if((he.flags&16)!==0){var C=g.deletions;if(C!==null){for(var b=0;b<C.length;b++){var $=C[b];for(he=$;he!==null;){var Y=he;switch(Y.tag){case 0:case 11:case 15:Ba(8,Y,g)}var Z=Y.child;if(Z!==null)Z.return=Y,he=Z;else for(;he!==null;){Y=he;var J=Y.sibling,ue=Y.return;if(qg(Y),Y===$){he=null;break}if(J!==null){J.return=ue,he=J;break}he=ue}}}var de=g.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ut=fe.sibling;fe.sibling=null,fe=ut}while(fe!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,he=w;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ba(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,he=B;break e}he=g.return}}var V=r.current;for(he=V;he!==null;){w=he;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,he=z;else e:for(w=V;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Fu(9,C)}}catch(ge){at(C,C.return,ge)}if(C===w){he=null;break e}var re=C.sibling;if(re!==null){re.return=C.return,he=re;break e}he=C.return}}if(Ue=f,ri(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(qi,r)}catch{}h=!0}return h}finally{Oe=a,An.transition=s}}return!1}function oy(r,s,a){s=ho(a,s),s=Sg(r,s,1),r=si(r,s,1),s=Qt(),r!==null&&(Kr(r,1,s),rn(r,s))}function at(r,s,a){if(r.tag===3)oy(r,r,a);else for(;s!==null;){if(s.tag===3){oy(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ai===null||!ai.has(h))){r=ho(a,r),r=Ag(s,r,1),s=si(s,r,1),r=Qt(),s!==null&&(Kr(s,1,r),rn(s,r));break}}s=s.return}}function hT(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&a,At===r&&(bt&a)===a&&(wt===4||wt===3&&(bt&130023424)===bt&&500>Je()-bd?os(r,0):xd|=a),rn(r,s)}function ay(r,s){s===0&&((r.mode&1)===0?s=1:(s=Fs,Fs<<=1,(Fs&130023424)===0&&(Fs=4194304)));var a=Qt();r=Sr(r,s),r!==null&&(Kr(r,s,a),rn(r,a))}function dT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),ay(r,a)}function fT(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),ay(r,a)}var ly;ly=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return tn=!1,eT(r,s,a);tn=(r.flags&131072)!==0}else tn=!1,nt&&(s.flags&1048576)!==0&&Bm(s,Eu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Vu(r,s),r=s.pendingProps;var f=ro(s,Mt.current);uo(s,a),f=ud(null,s,h,r,f,a);var g=cd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(h)?(g=!0,vu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,nd(s),f.updater=Du,s.stateNode=f,f._reactInternals=s,gd(s,h,r,a),s=wd(null,s,h,!0,g,a)):(s.tag=0,nt&&g&&Hh(s),Gt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Vu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=mT(h),r=Un(h,r),f){case 0:s=_d(null,s,h,r,a);break e;case 1:s=Dg(null,s,h,r,a);break e;case 11:s=kg(null,s,h,r,a);break e;case 14:s=Ng(null,s,h,Un(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Un(h,f),_d(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Un(h,f),Dg(r,s,h,f,a);case 3:e:{if(Lg(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Jm(r,s),Cu(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ho(Error(t(423)),s),s=Vg(r,s,h,a,f);break e}else if(h!==f){f=ho(Error(t(424)),s),s=Vg(r,s,h,a,f);break e}else for(pn=ei(s.stateNode.containerInfo.firstChild),fn=s,nt=!0,Fn=null,a=Gm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),h===f){s=Rr(r,s,a);break e}Gt(r,s,h,a)}s=s.child}return s;case 5:return Zm(s),r===null&&Qh(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,jh(h,f)?w=null:g!==null&&jh(h,g)&&(s.flags|=32),Og(r,s),Gt(r,s,w,a),s.child;case 6:return r===null&&Qh(s),null;case 13:return Mg(r,s,a);case 4:return rd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=ao(s,null,h,a):Gt(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Un(h,f),kg(r,s,h,f,a);case 7:return Gt(r,s,s.pendingProps,a),s.child;case 8:return Gt(r,s,s.pendingProps.children,a),s.child;case 12:return Gt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ye(Su,h._currentValue),h._currentValue=w,g!==null)if(Mn(g.value,w)){if(g.children===f.children&&!Zt.current){s=Rr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var b=C.firstContext;b!==null;){if(b.context===h){if(g.tag===1){b=Ar(-1,a&-a),b.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var Y=$.pending;Y===null?b.next=b:(b.next=Y.next,Y.next=b),$.pending=b}}g.lanes|=a,b=g.alternate,b!==null&&(b.lanes|=a),ed(g.return,a,s),C.lanes|=a;break}b=b.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),ed(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Gt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,uo(s,a),f=In(f),h=h(f),s.flags|=1,Gt(r,s,h,a),s.child;case 14:return h=s.type,f=Un(h,s.pendingProps),f=Un(h.type,f),Ng(r,s,h,f,a);case 15:return xg(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Un(h,f),Vu(r,s),s.tag=1,en(h)?(r=!0,vu(s)):r=!1,uo(s,a),Tg(s,h,f),gd(s,h,f,a),wd(null,s,h,!0,r,a);case 19:return Ug(r,s,a);case 22:return bg(r,s,a)}throw Error(t(156,s.tag))};function uy(r,s){return Vs(r,s)}function pT(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(r,s,a,h){return new pT(r,s,a,h)}function jd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function mT(r){if(typeof r=="function")return jd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===Ge)return 14}return 2}function hi(r,s){var a=r.alternate;return a===null?(a=Rn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ku(r,s,a,h,f,g){var w=2;if(h=r,typeof r=="function")jd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case k:return ls(a.children,f,g,s);case I:w=8,f|=8;break;case S:return r=Rn(12,a,s,f|2),r.elementType=S,r.lanes=g,r;case R:return r=Rn(13,a,s,f),r.elementType=R,r.lanes=g,r;case ke:return r=Rn(19,a,s,f),r.elementType=ke,r.lanes=g,r;case Fe:return Gu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:w=10;break e;case L:w=9;break e;case D:w=11;break e;case Ge:w=14;break e;case be:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Rn(w,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function ls(r,s,a,h){return r=Rn(7,r,h,s),r.lanes=a,r}function Gu(r,s,a,h){return r=Rn(22,r,h,s),r.elementType=Fe,r.lanes=a,r.stateNode={isHidden:!1},r}function Bd(r,s,a){return r=Rn(6,r,null,s),r.lanes=a,r}function zd(r,s,a){return s=Rn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function gT(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hr(0),this.expirationTimes=Hr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function $d(r,s,a,h,f,g,w,C,b){return r=new gT(r,s,a,C,b),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Rn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},nd(g),r}function yT(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function cy(r){if(!r)return ni;r=r._reactInternals;e:{if(Nn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(en(a))return Fm(r,a,s)}return s}function hy(r,s,a,h,f,g,w,C,b){return r=$d(a,h,!0,r,f,g,w,C,b),r.context=cy(null),a=r.current,h=Qt(),f=ui(a),g=Ar(h,f),g.callback=s??null,si(a,g,f),r.current.lanes=f,Kr(r,f,h),rn(r,h),r}function Qu(r,s,a,h){var f=s.current,g=Qt(),w=ui(f);return a=cy(a),s.context===null?s.context=a:s.pendingContext=a,s=Ar(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=si(f,s,w),r!==null&&(zn(r,f,w,g),Ru(r,f,w)),w}function Ju(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function dy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function qd(r,s){dy(r,s),(r=r.alternate)&&dy(r,s)}function vT(){return null}var fy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Wd(r){this._internalRoot=r}Yu.prototype.render=Wd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Qu(r,s,null,null)},Yu.prototype.unmount=Wd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ss(function(){Qu(null,r,null,null)}),s[wr]=null}};function Yu(r){this._internalRoot=r}Yu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Jn.length&&s!==0&&s<Jn[a].priority;a++);Jn.splice(a,0,r),a===0&&eu(r)}};function Hd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Xu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function py(){}function _T(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=Ju(w);g.call($)}}var w=hy(s,h,r,0,null,!1,!1,"",py);return r._reactRootContainer=w,r[wr]=w.current,Pa(r.nodeType===8?r.parentNode:r),ss(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var $=Ju(b);C.call($)}}var b=$d(r,0,!1,null,null,!1,!1,"",py);return r._reactRootContainer=b,r[wr]=b.current,Pa(r.nodeType===8?r.parentNode:r),ss(function(){Qu(s,b,a,h)}),b}function Zu(r,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var b=Ju(w);C.call(b)}}Qu(s,w,r,f)}else w=_T(a,s,r,f,h);return Ju(w)}Ql=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Wr(s.pendingLanes);a!==0&&(Gr(s,a|1),rn(s,Je()),(Ue&6)===0&&(mo=Je()+500,ri()))}break;case 13:ss(function(){var h=Sr(r,1);if(h!==null){var f=Qt();zn(h,r,1,f)}}),qd(r,1)}},Us=function(r){if(r.tag===13){var s=Sr(r,134217728);if(s!==null){var a=Qt();zn(s,r,134217728,a)}qd(r,134217728)}},Jl=function(r){if(r.tag===13){var s=ui(r),a=Sr(r,s);if(a!==null){var h=Qt();zn(a,r,s,h)}qd(r,s)}},Yl=function(){return Oe},Xl=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},Ns=function(r,s,a){switch(s){case"input":if(Zo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=gu(h);if(!f)throw Error(t(90));Ss(h),Zo(h,f)}}}break;case"textarea":Ps(r,a);break;case"select":s=a.value,s!=null&&dr(r,!!a.multiple,s,!1)}},Ui=Md,ua=ss;var wT={usingClientEntryPoint:!1,Events:[xa,to,gu,Gn,la,Md]},Wa={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ET={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=da(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||vT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{qi=ec.inject(ET),un=ec}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wT,sn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hd(s))throw Error(t(200));return yT(r,s,null,a)},sn.createRoot=function(r,s){if(!Hd(r))throw Error(t(299));var a=!1,h="",f=fy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=$d(r,1,!1,null,null,a,!1,h,f),r[wr]=s.current,Pa(r.nodeType===8?r.parentNode:r),new Wd(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=da(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return ss(r)},sn.hydrate=function(r,s,a){if(!Xu(s))throw Error(t(200));return Zu(null,r,s,!0,a)},sn.hydrateRoot=function(r,s,a){if(!Hd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=fy;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=hy(s,null,r,1,a??null,f,!1,g,w),r[wr]=s.current,Pa(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Yu(s)},sn.render=function(r,s,a){if(!Xu(s))throw Error(t(200));return Zu(null,r,s,!1,a)},sn.unmountComponentAtNode=function(r){if(!Xu(r))throw Error(t(40));return r._reactRootContainer?(ss(function(){Zu(null,null,r,!1,function(){r._reactRootContainer=null,r[wr]=null})}),!0):!1},sn.unstable_batchedUpdates=Md,sn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!Xu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Zu(r,s,a,!1,h)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var Ty;function E_(){if(Ty)return Qd.exports;Ty=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qd.exports=NT(),Qd.exports}var Iy;function xT(){if(Iy)return tc;Iy=1;var n=E_();return tc.createRoot=n.createRoot,tc.hydrateRoot=n.hydrateRoot,tc}var bT=xT();const OT=__(bT);E_();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ll.apply(this,arguments)}var vi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(vi||(vi={}));const Sy="popstate";function DT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return Ef("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Ic(o)}return VT(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function T_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LT(){return Math.random().toString(36).substr(2,8)}function Ay(n,e){return{usr:n.state,key:n.key,idx:e}}function Ef(n,e,t,i){return t===void 0&&(t=null),ll({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Uo(e):e,{state:t,key:e&&e.key||i||LT()})}function Ic(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Uo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function VT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d=vi.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(ll({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){d=vi.Pop;let x=_(),Q=x==null?null:x-y;y=x,p&&p({action:d,location:M.location,delta:Q})}function A(x,Q){d=vi.Push;let ee=Ef(M.location,x,Q);y=_()+1;let te=Ay(ee,y),ae=M.createHref(ee);try{c.pushState(te,"",ae)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;o.location.assign(ae)}l&&p&&p({action:d,location:M.location,delta:1})}function U(x,Q){d=vi.Replace;let ee=Ef(M.location,x,Q);y=_();let te=Ay(ee,y),ae=M.createHref(ee);c.replaceState(te,"",ae),l&&p&&p({action:d,location:M.location,delta:0})}function N(x){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof x=="string"?x:Ic(x);return ee=ee.replace(/ $/,"%20"),st(Q,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,Q)}let M={get action(){return d},get location(){return n(o,c)},listen(x){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Sy,E),p=x,()=>{o.removeEventListener(Sy,E),p=null}},createHref(x){return e(o,x)},createURL:N,encodeLocation(x){let Q=N(x);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:A,replace:U,go(x){return c.go(x)}};return M}var Ry;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ry||(Ry={}));function MT(n,e,t){return t===void 0&&(t="/"),FT(n,e,t)}function FT(n,e,t,i){let o=typeof e=="string"?Uo(e):e,l=Po(o.pathname||"/",t);if(l==null)return null;let c=I_(n);UT(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let y=JT(l);d=GT(c[p],y)}return d}function I_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(st(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=wi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(st(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),I_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:HT(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let p of S_(l.path))o(l,c,p)}),e}function S_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=S_(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function UT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const jT=/^:[\w-]+$/,BT=3,zT=2,$T=1,qT=10,WT=-2,Cy=n=>n==="*";function HT(n,e){let t=n.split("/"),i=t.length;return t.some(Cy)&&(i+=WT),e&&(i+=zT),t.filter(o=>!Cy(o)).reduce((o,l)=>o+(jT.test(l)?BT:l===""?$T:qT),i)}function KT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function GT(n,e,t){let{routesMeta:i}=n,o={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Tf({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),A=p.route;if(!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:wi([l,E.pathname]),pathnameBase:eI(wi([l,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(l=wi([l,E.pathnameBase]))}return c}function Tf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=QT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:A,isOptional:U}=_;if(A==="*"){let M=d[E]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const N=d[E];return U&&!N?y[A]=void 0:y[A]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function QT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),T_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return T_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Po(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function YT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Uo(n):n;return{pathname:t?t.startsWith("/")?t:XT(t,e):e,search:tI(i),hash:nI(o)}}function XT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Xd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rp(n,e){let t=ZT(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function ip(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Uo(n):(o=ll({},n),st(!o.pathname||!o.pathname.includes("?"),Xd("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),Xd("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),Xd("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}d=E>=0?e[E]:"/"}let p=YT(o,d),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const wi=n=>n.join("/").replace(/\/\/+/g,"/"),eI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,nI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function rI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const A_=["post","put","patch","delete"];new Set(A_);const iI=["get",...A_];new Set(iI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ul.apply(this,arguments)}const qc=K.createContext(null),R_=K.createContext(null),Fr=K.createContext(null),Wc=K.createContext(null),Ur=K.createContext({outlet:null,matches:[],isDataRoute:!1}),C_=K.createContext(null);function sI(n,e){let{relative:t}=e===void 0?{}:e;jo()||st(!1);let{basename:i,navigator:o}=K.useContext(Fr),{hash:l,pathname:c,search:d}=Hc(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:wi([i,c])),o.createHref({pathname:p,search:d,hash:l})}function jo(){return K.useContext(Wc)!=null}function Bo(){return jo()||st(!1),K.useContext(Wc).location}function P_(n){K.useContext(Fr).static||K.useLayoutEffect(n)}function Tl(){let{isDataRoute:n}=K.useContext(Ur);return n?_I():oI()}function oI(){jo()||st(!1);let n=K.useContext(qc),{basename:e,future:t,navigator:i}=K.useContext(Fr),{matches:o}=K.useContext(Ur),{pathname:l}=Bo(),c=JSON.stringify(rp(o,t.v7_relativeSplatPath)),d=K.useRef(!1);return P_(()=>{d.current=!0}),K.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=ip(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:wi([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,c,l,n])}function aI(){let{matches:n}=K.useContext(Ur),e=n[n.length-1];return e?e.params:{}}function Hc(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=K.useContext(Fr),{matches:o}=K.useContext(Ur),{pathname:l}=Bo(),c=JSON.stringify(rp(o,i.v7_relativeSplatPath));return K.useMemo(()=>ip(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function lI(n,e){return uI(n,e)}function uI(n,e,t,i){jo()||st(!1);let{navigator:o}=K.useContext(Fr),{matches:l}=K.useContext(Ur),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=Bo(),_;if(e){var E;let x=typeof e=="string"?Uo(e):e;p==="/"||(E=x.pathname)!=null&&E.startsWith(p)||st(!1),_=x}else _=y;let A=_.pathname||"/",U=A;if(p!=="/"){let x=p.replace(/^\//,"").split("/");U="/"+A.replace(/^\//,"").split("/").slice(x.length).join("/")}let N=MT(n,{pathname:U}),M=pI(N&&N.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:wi([p,o.encodeLocation?o.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?p:wi([p,o.encodeLocation?o.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,t,i);return e&&M?K.createElement(Wc.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:vi.Pop}},M):M}function cI(){let n=vI(),e=rI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,null)}const hI=K.createElement(cI,null);class dI extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?K.createElement(Ur.Provider,{value:this.props.routeContext},K.createElement(C_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fI(n){let{routeContext:e,match:t,children:i}=n,o=K.useContext(qc);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Ur.Provider,{value:e},i)}function pI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=c.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||st(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:A,errors:U}=t,N=E.route.loader&&A[E.route.id]===void 0&&(!U||U[E.route.id]===void 0);if(E.route.lazy||N){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,A)=>{let U,N=!1,M=null,x=null;t&&(U=d&&E.route.id?d[E.route.id]:void 0,M=E.route.errorElement||hI,p&&(y<0&&A===0?(wI("route-fallback"),N=!0,x=null):y===A&&(N=!0,x=E.route.hydrateFallbackElement||null)));let Q=e.concat(c.slice(0,A+1)),ee=()=>{let te;return U?te=M:N?te=x:E.route.Component?te=K.createElement(E.route.Component,null):E.route.element?te=E.route.element:te=_,K.createElement(fI,{match:E,routeContext:{outlet:_,matches:Q,isDataRoute:t!=null},children:te})};return t&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?K.createElement(dI,{location:t.location,revalidation:t.revalidation,component:M,error:U,children:ee(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):ee()},null)}var k_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(k_||{}),N_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(N_||{});function mI(n){let e=K.useContext(qc);return e||st(!1),e}function gI(n){let e=K.useContext(R_);return e||st(!1),e}function yI(n){let e=K.useContext(Ur);return e||st(!1),e}function x_(n){let e=yI(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function vI(){var n;let e=K.useContext(C_),t=gI(),i=x_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function _I(){let{router:n}=mI(k_.UseNavigateStable),e=x_(N_.UseNavigateStable),t=K.useRef(!1);return P_(()=>{t.current=!0}),K.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ul({fromRouteId:e},l)))},[n,e])}const Py={};function wI(n,e,t){Py[n]||(Py[n]=!0)}function EI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function If(n){let{to:e,replace:t,state:i,relative:o}=n;jo()||st(!1);let{future:l,static:c}=K.useContext(Fr),{matches:d}=K.useContext(Ur),{pathname:p}=Bo(),y=Tl(),_=ip(e,rp(d,l.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return K.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function vo(n){st(!1)}function TI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=vi.Pop,navigator:l,static:c=!1,future:d}=n;jo()&&st(!1);let p=e.replace(/^\/*/,"/"),y=K.useMemo(()=>({basename:p,navigator:l,static:c,future:ul({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof i=="string"&&(i=Uo(i));let{pathname:_="/",search:E="",hash:A="",state:U=null,key:N="default"}=i,M=K.useMemo(()=>{let x=Po(_,p);return x==null?null:{location:{pathname:x,search:E,hash:A,state:U,key:N},navigationType:o}},[p,_,E,A,U,N,o]);return M==null?null:K.createElement(Fr.Provider,{value:y},K.createElement(Wc.Provider,{children:t,value:M}))}function II(n){let{children:e,location:t}=n;return lI(Sf(e),t)}new Promise(()=>{});function Sf(n,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(n,(i,o)=>{if(!K.isValidElement(i))return;let l=[...e,o];if(i.type===K.Fragment){t.push.apply(t,Sf(i.props.children,l));return}i.type!==vo&&st(!1),!i.props.index||!i.props.children||st(!1);let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Sf(i.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sc.apply(this,arguments)}function b_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function SI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function AI(n,e){return n.button===0&&(!e||e==="_self")&&!SI(n)}const RI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],PI="6";try{window.__reactRouterVersion=PI}catch{}const kI=K.createContext({isTransitioning:!1}),NI="startTransition",ky=CT[NI];function xI(n){let{basename:e,children:t,future:i,window:o}=n,l=K.useRef();l.current==null&&(l.current=DT({window:o,v5Compat:!0}));let c=l.current,[d,p]=K.useState({action:c.action,location:c.location}),{v7_startTransition:y}=i||{},_=K.useCallback(E=>{y&&ky?ky(()=>p(E)):p(E)},[p,y]);return K.useLayoutEffect(()=>c.listen(_),[c,_]),K.useEffect(()=>EI(i),[i]),K.createElement(TI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:i})}const bI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sp=K.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,A=b_(e,RI),{basename:U}=K.useContext(Fr),N,M=!1;if(typeof y=="string"&&OI.test(y)&&(N=y,bI))try{let te=new URL(window.location.href),ae=y.startsWith("//")?new URL(te.protocol+y):new URL(y),ne=Po(ae.pathname,U);ae.origin===te.origin&&ne!=null?y=ne+ae.search+ae.hash:M=!0}catch{}let x=sI(y,{relative:o}),Q=LI(y,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function ee(te){i&&i(te),te.defaultPrevented||Q(te)}return K.createElement("a",Sc({},A,{href:N||x,onClick:M||l?i:ee,ref:t,target:p}))}),Ny=K.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:d,to:p,viewTransition:y,children:_}=e,E=b_(e,CI),A=Hc(p,{relative:E.relative}),U=Bo(),N=K.useContext(R_),{navigator:M,basename:x}=K.useContext(Fr),Q=N!=null&&VI(A)&&y===!0,ee=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,te=U.pathname,ae=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;o||(te=te.toLowerCase(),ae=ae?ae.toLowerCase():null,ee=ee.toLowerCase()),ae&&x&&(ae=Po(ae,x)||ae);const ne=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let se=te===ee||!c&&te.startsWith(ee)&&te.charAt(ne)==="/",k=ae!=null&&(ae===ee||!c&&ae.startsWith(ee)&&ae.charAt(ee.length)==="/"),I={isActive:se,isPending:k,isTransitioning:Q},S=se?i:void 0,P;typeof l=="function"?P=l(I):P=[l,se?"active":null,k?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let L=typeof d=="function"?d(I):d;return K.createElement(sp,Sc({},E,{"aria-current":S,className:P,ref:t,style:L,to:p,viewTransition:y}),typeof _=="function"?_(I):_)});var Af;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Af||(Af={}));var xy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(xy||(xy={}));function DI(n){let e=K.useContext(qc);return e||st(!1),e}function LI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=Tl(),y=Bo(),_=Hc(n,{relative:c});return K.useCallback(E=>{if(AI(E,t)){E.preventDefault();let A=i!==void 0?i:Ic(y)===Ic(_);p(n,{replace:A,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[y,p,_,i,o,t,n,l,c,d])}function VI(n,e){e===void 0&&(e={});let t=K.useContext(kI);t==null&&st(!1);let{basename:i}=DI(Af.useViewTransitionState),o=Hc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Po(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Po(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Tf(o.pathname,c)!=null||Tf(o.pathname,l)!=null}var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},D_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|y>>6,U=y&63;p||(U=64,c||(A=64)),i.push(t[_],t[E],t[A],t[U])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(O_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new FI;const A=l<<2|d>>4;if(i.push(A),y!==64){const U=d<<4&240|y>>2;if(i.push(U),E!==64){const N=y<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(n){const e=O_(n);return D_.encodeByteArray(e,!0)},Ac=function(n){return UI(n).replace(/\./g,"")},L_=function(n){try{return D_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=()=>jI().__FIREBASE_DEFAULTS__,zI=()=>{if(typeof process>"u"||typeof by>"u")return;const n=by.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$I=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&L_(n[1]);return e&&JSON.parse(e)},Kc=()=>{try{return BI()||zI()||$I()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},V_=n=>{var e,t;return(t=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qI=n=>{const e=V_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},M_=()=>{var n;return(n=Kc())===null||n===void 0?void 0:n.config},F_=n=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ac(JSON.stringify(t)),Ac(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function GI(){var n;const e=(n=Kc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XI(){const n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ZI(){return!GI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eS(){try{return typeof indexedDB=="object"}catch{return!1}}function tS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="FirebaseError";class jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nS,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?rS(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new jr(o,d,i)}}function rS(n,e){return n.replace(iS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const iS=/\{\$([^}]+)}/g;function sS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(Oy(l)&&Oy(c)){if(!Rc(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Oy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ja(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ya(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function oS(n,e){const t=new aS(n,e);return t.subscribe.bind(t)}class aS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Zd),o.error===void 0&&(o.error=Zd),o.complete===void 0&&(o.complete=Zd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class ms{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new WI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hS(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cS(n){return n===us?void 0:n}function hS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const fS={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},pS=De.INFO,mS={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},gS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=mS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=pS,this._logHandler=gS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const yS=(n,e)=>e.some(t=>n instanceof t);let Dy,Ly;function vS(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U_=new WeakMap,Rf=new WeakMap,j_=new WeakMap,ef=new WeakMap,ap=new WeakMap;function wS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ei(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&U_.set(t,n)}).catch(()=>{}),ap.set(e,n),e}function ES(n){if(Rf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Rf.set(n,e)}let Cf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||j_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function TS(n){Cf=n(Cf)}function IS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(tf(this),e,...t);return j_.set(i,e.sort?e.sort():[e]),Ei(i)}:_S().includes(n)?function(...e){return n.apply(tf(this),e),Ei(U_.get(this))}:function(...e){return Ei(n.apply(tf(this),e))}}function SS(n){return typeof n=="function"?IS(n):(n instanceof IDBTransaction&&ES(n),yS(n,vS())?new Proxy(n,Cf):n)}function Ei(n){if(n instanceof IDBRequest)return wS(n);if(ef.has(n))return ef.get(n);const e=SS(n);return e!==n&&(ef.set(n,e),ap.set(e,n)),e}const tf=n=>ap.get(n);function AS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=Ei(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ei(c.result),p.oldVersion,p.newVersion,Ei(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const RS=["get","getKey","getAll","getAllKeys","count"],CS=["put","add","delete","clear"],nf=new Map;function Vy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nf.get(e))return nf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=CS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RS.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return nf.set(e,l),l}TS(n=>({...n,get:(e,t,i)=>Vy(e,t)||n.get(e,t,i),has:(e,t)=>!!Vy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function kS(n){const e=n.getComponent();return e?.type==="VERSION"}const Pf="@firebase/app",My="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new op("@firebase/app"),NS="@firebase/app-compat",xS="@firebase/analytics-compat",bS="@firebase/analytics",OS="@firebase/app-check-compat",DS="@firebase/app-check",LS="@firebase/auth",VS="@firebase/auth-compat",MS="@firebase/database",FS="@firebase/data-connect",US="@firebase/database-compat",jS="@firebase/functions",BS="@firebase/functions-compat",zS="@firebase/installations",$S="@firebase/installations-compat",qS="@firebase/messaging",WS="@firebase/messaging-compat",HS="@firebase/performance",KS="@firebase/performance-compat",GS="@firebase/remote-config",QS="@firebase/remote-config-compat",JS="@firebase/storage",YS="@firebase/storage-compat",XS="@firebase/firestore",ZS="@firebase/vertexai-preview",eA="@firebase/firestore-compat",tA="firebase",nA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",rA={[Pf]:"fire-core",[NS]:"fire-core-compat",[bS]:"fire-analytics",[xS]:"fire-analytics-compat",[DS]:"fire-app-check",[OS]:"fire-app-check-compat",[LS]:"fire-auth",[VS]:"fire-auth-compat",[MS]:"fire-rtdb",[FS]:"fire-data-connect",[US]:"fire-rtdb-compat",[jS]:"fire-fn",[BS]:"fire-fn-compat",[zS]:"fire-iid",[$S]:"fire-iid-compat",[qS]:"fire-fcm",[WS]:"fire-fcm-compat",[HS]:"fire-perf",[KS]:"fire-perf-compat",[GS]:"fire-rc",[QS]:"fire-rc-compat",[JS]:"fire-gcs",[YS]:"fire-gcs-compat",[XS]:"fire-fst",[eA]:"fire-fst-compat",[ZS]:"fire-vertex","fire-js":"fire-js",[tA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,iA=new Map,Nf=new Map;function Fy(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ko(n){const e=n.name;if(Nf.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Nf.set(e,n);for(const t of Cc.values())Fy(t,n);for(const t of iA.values())Fy(t,n);return!0}function lp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new Il("app","Firebase",sA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=nA;function B_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:kf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ti.create("bad-app-name",{appName:String(o)});if(t||(t=M_()),!t)throw Ti.create("no-options");const l=Cc.get(o);if(l){if(Rc(t,l.options)&&Rc(i,l.config))return l;throw Ti.create("duplicate-app",{appName:o})}const c=new dS(o);for(const p of Nf.values())c.addComponent(p);const d=new oA(t,i,c);return Cc.set(o,d),d}function z_(n=kf){const e=Cc.get(n);if(!e&&n===kf&&M_())return B_();if(!e)throw Ti.create("no-app",{appName:n});return e}function Ii(n,e,t){var i;let o=(i=rA[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(d.join(" "));return}ko(new ms(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",lA=1,cl="firebase-heartbeat-store";let rf=null;function $_(){return rf||(rf=AS(aA,lA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ti.create("idb-open",{originalErrorMessage:n.message})})),rf}async function uA(n){try{const t=(await $_()).transaction(cl),i=await t.objectStore(cl).get(q_(n));return await t.done,i}catch(e){if(e instanceof jr)Dr.warn(e.message);else{const t=Ti.create("idb-get",{originalErrorMessage:e?.message});Dr.warn(t.message)}}}async function Uy(n,e){try{const i=(await $_()).transaction(cl,"readwrite");await i.objectStore(cl).put(e,q_(n)),await i.done}catch(t){if(t instanceof jr)Dr.warn(t.message);else{const i=Ti.create("idb-set",{originalErrorMessage:t?.message});Dr.warn(i.message)}}}function q_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1024,hA=720*60*60*1e3;class dA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=hA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Dr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jy(),{heartbeatsToSend:i,unsentEntries:o}=fA(this._heartbeatsCache.heartbeats),l=Ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Dr.warn(t),""}}}function jy(){return new Date().toISOString().substring(0,10)}function fA(n,e=cA){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),By(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),By(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class pA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eS()?tS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function By(n){return Ac(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){ko(new ms("platform-logger",e=>new PS(e),"PRIVATE")),ko(new ms("heartbeat",e=>new dA(e),"PRIVATE")),Ii(Pf,My,n),Ii(Pf,My,"esm2017"),Ii("fire-js","")}mA("");function up(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function W_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gA=W_,H_=new Il("auth","Firebase",W_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new op("@firebase/auth");function yA(n,...e){Pc.logLevel<=De.WARN&&Pc.warn(`Auth (${zo}): ${n}`,...e)}function cc(n,...e){Pc.logLevel<=De.ERROR&&Pc.error(`Auth (${zo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n,...e){throw cp(n,...e)}function sr(n,...e){return cp(n,...e)}function K_(n,e,t){const i=Object.assign(Object.assign({},gA()),{[e]:t});return new Il("auth","Firebase",i).create(e,{appName:n.name})}function Si(n){return K_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return H_.create(n,...e)}function Ee(n,e,...t){if(!n)throw cp(e,...t)}function kr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cc(e),new Error(e)}function Lr(n,e){n||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vA(){return zy()==="http:"||zy()==="https:"}function zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vA()||JI()||"connection"in navigator)?navigator.onLine:!0}function wA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=KI()||YI()}get(){return _A()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(n,e){Lr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Al(3e4,6e4);function Es(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Oi(n,e,t,i,o={}){return Q_(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Sl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return QI()||(y.referrerPolicy="no-referrer"),G_.fetch()(J_(n,n.config.apiHost,t,d),y)})}async function Q_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},EA),e);try{const o=new SA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw nc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw nc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw K_(n,_,y);qn(n,_)}}catch(o){if(o instanceof jr)throw o;qn(n,"network-request-failed",{message:String(o)})}}async function Gc(n,e,t,i,o={}){const l=await Oi(n,e,t,i,o);return"mfaPendingCredential"in l&&qn(n,"multi-factor-auth-required",{_serverResponse:l}),l}function J_(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?hp(n.config,o):`${n.config.apiScheme}://${o}`}function IA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(sr(this.auth,"network-request-failed")),TA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=sr(n,e,i);return o.customData._tokenResponse=t,o}function $y(n){return n!==void 0&&n.enterprise!==void 0}class AA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RA(n,e){return Oi(n,"GET","/v2/recaptchaConfig",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n,e){return Oi(n,"POST","/v1/accounts:delete",e)}async function Y_(n,e){return Oi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PA(n,e=!1){const t=Pt(n),i=await t.getIdToken(e),o=dp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:nl(sf(o.auth_time)),issuedAtTime:nl(sf(o.iat)),expirationTime:nl(sf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function sf(n){return Number(n)*1e3}function dp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const o=L_(t);return o?JSON.parse(o):(cc("Failed to decode base64 JWT payload"),null)}catch(o){return cc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qy(n){const e=dp(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof jr&&kA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function kA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await hl(n,Y_(t,{idToken:i}));Ee(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?X_(l.providerUserInfo):[],d=bA(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!d?.length,_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new bf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function xA(n){const e=Pt(n);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bA(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function X_(n){return n.map(e=>{var{providerId:t}=e,i=up(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,e){const t=await Q_(n,{},async()=>{const i=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=J_(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",G_.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DA(n,e){return Oi(n,"POST","/v2/accounts:revokeToken",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=qy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await OA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new So;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new bf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PA(this,e)}reload(){return xA(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await kc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await hl(this,CA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,U=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,x=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Q=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:te,emailVerified:ae,isAnonymous:ne,providerData:se,stsTokenManager:k}=t;Ee(te&&k,e,"internal-error");const I=So.fromJSON(this.name,k);Ee(typeof te=="string",e,"internal-error"),fi(E,e.name),fi(A,e.name),Ee(typeof ae=="boolean",e,"internal-error"),Ee(typeof ne=="boolean",e,"internal-error"),fi(U,e.name),fi(N,e.name),fi(M,e.name),fi(x,e.name),fi(Q,e.name),fi(ee,e.name);const S=new Nr({uid:te,auth:e,email:A,emailVerified:ae,displayName:E,isAnonymous:ne,photoURL:N,phoneNumber:U,tenantId:M,stsTokenManager:I,createdAt:Q,lastLoginAt:ee});return se&&Array.isArray(se)&&(S.providerData=se.map(P=>Object.assign({},P))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,t,i=!1){const o=new So;o.updateFromServerResponse(t);const l=new Nr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await kc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?X_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new So;d.updateFromIdToken(i);const p=new Nr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new bf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;function xr(n){Lr(n instanceof Function,"Expected a class definition");let e=Wy.get(n);return e?(Lr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Z_.type="NONE";const Hy=Z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ao{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=hc(this.userKey,o.apiKey,l),this.fullPersistenceKey=hc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ao(xr(Hy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||xr(Hy);const c=hc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){const E=Nr._fromJSON(e,_);y!==l&&(d=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ao(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Ao(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ew(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sw(e))return"Blackberry";if(ow(e))return"Webos";if(tw(e))return"Safari";if((e.includes("chrome/")||nw(e))&&!e.includes("edge/"))return"Chrome";if(iw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function ew(n=Wt()){return/firefox\//i.test(n)}function tw(n=Wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nw(n=Wt()){return/crios\//i.test(n)}function rw(n=Wt()){return/iemobile/i.test(n)}function iw(n=Wt()){return/android/i.test(n)}function sw(n=Wt()){return/blackberry/i.test(n)}function ow(n=Wt()){return/webos/i.test(n)}function fp(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LA(n=Wt()){var e;return fp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VA(){return XI()&&document.documentMode===10}function aw(n=Wt()){return fp(n)||iw(n)||ow(n)||sw(n)||/windows phone/i.test(n)||rw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n,e=[]){let t;switch(n){case"Browser":t=Ky(Wt());break;case"Worker":t=`${Ky(Wt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(n,e={}){return Oi(n,"GET","/v2/passwordPolicy",Es(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=6;class jA{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:UA,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gy(this),this.idTokenSubscription=new Gy(this),this.beforeStateQueue=new MA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Y_(this,{idToken:e}),i=await Nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(Si(this));const t=e?Pt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FA(this),t=new jA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await DA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&yA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $o(n){return Pt(n)}class Gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=oS(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zA(n){Qc=n}function uw(n){return Qc.loadJS(n)}function $A(){return Qc.recaptchaEnterpriseScript}function qA(){return Qc.gapiScript}function WA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const HA="recaptcha-enterprise",KA="NO_RECAPTCHA";class GA{constructor(e){this.type=HA,this.auth=$o(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{RA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new AA(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;$y(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(KA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&$y(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=$A();p.length!==0&&(p+=d),uw(p).then(()=>{o(d,l,c)}).catch(y=>{c(y)})}}).catch(d=>{c(d)})})}}async function Qy(n,e,t,i=!1){const o=new GA(n);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Jy(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Qy(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Qy(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,e){const t=lp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Rc(l,e??{}))return o;qn(o,"already-initialized")}return t.initialize({options:e})}function JA(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function YA(n,e,t){const i=$o(n);Ee(i._canInitEmulator,i,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=cw(e),{host:c,port:d}=XA(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${c}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),ZA()}function cw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XA(n){const e=cw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Yy(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Yy(c)}}}function Yy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,t){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function eR(n,e){return Oi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e){return Gc(n,"POST","/v1/accounts:signInWithPassword",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(n,e){return Gc(n,"POST","/v1/accounts:signInWithEmailLink",Es(n,e))}async function rR(n,e){return Gc(n,"POST","/v1/accounts:signInWithEmailLink",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends pp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new dl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new dl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,t,"signInWithPassword",tR);case"emailLink":return nR(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,i,"signUpPassword",eR);case"emailLink":return rR(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(n,e){return Gc(n,"POST","/v1/accounts:signInWithIdp",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="http://localhost";class gs extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=up(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new gs(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ro(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ro(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}buildRequest(){const e={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oR(n){const e=Ja(Ya(n)).link,t=e?Ja(Ya(e)).deep_link_id:null,i=Ja(Ya(n)).deep_link_id;return(i?Ja(Ya(i)).link:null)||i||t||e||n}class mp{constructor(e){var t,i,o,l,c,d;const p=Ja(Ya(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=sR((o=p.mode)!==null&&o!==void 0?o:null);Ee(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=oR(e);try{return new mp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return dl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=mp.parseLink(t);return Ee(i,"argument-error"),dl._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Rl{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return mi.credential(t,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Rl{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Rl{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Nr._fromIdTokenResponse(e,i,o),c=Xy(i);return new No({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Xy(i);return new No({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Xy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends jr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Nc(e,t,i,o)}}function dw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nc._fromErrorAndOperation(n,l,e,i):l})}async function aR(n,e,t=!1){const i=await hl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(n,e,t=!1){const{auth:i}=n;if(Pr(i.app))return Promise.reject(Si(i));const o="reauthenticate";try{const l=await hl(n,dw(i,o,e,n),t);Ee(l.idToken,i,"internal-error");const c=dp(l.idToken);Ee(c,i,"internal-error");const{sub:d}=c;return Ee(n.uid===d,i,"user-mismatch"),No._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&qn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(n,e,t=!1){if(Pr(n.app))return Promise.reject(Si(n));const i="signIn",o=await dw(n,i,e),l=await No._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function uR(n,e){return fw($o(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n){const e=$o(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function hR(n,e,t){return Pr(n.app)?Promise.reject(Si(n)):uR(Pt(n),qo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cR(n),i})}function dR(n,e,t,i){return Pt(n).onIdTokenChanged(e,t,i)}function fR(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function pR(n){return Pt(n).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1e3,gR=10;class mw extends pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);VA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,gR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},mR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mw.type="LOCAL";const yR=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gw.type="SESSION";const yw=gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,l)),p=await vR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const y=gp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function wR(n){or().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function ER(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function IR(){return vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",SR=1,bc="firebaseLocalStorage",ww="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yc(n,e){return n.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function AR(){const n=indexedDB.deleteDatabase(_w);return new Cl(n).toPromise()}function Of(){const n=indexedDB.open(_w,SR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(bc,{keyPath:ww})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(bc)?e(i):(i.close(),await AR(),e(await Of()))})})}async function Zy(n,e,t){const i=Yc(n,!0).put({[ww]:e,value:t});return new Cl(i).toPromise()}async function RR(n,e){const t=Yc(n,!1).get(e),i=await new Cl(t).toPromise();return i===void 0?null:i.value}function ev(n,e){const t=Yc(n,!0).delete(e);return new Cl(t).toPromise()}const CR=800,PR=3;class Ew{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Of(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>PR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(IR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new _R(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Of();return await Zy(e,xc,"1"),await ev(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>RR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ev(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Yc(o,!1).getAll();return new Cl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ew.type="LOCAL";const kR=Ew;new Al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n,e){return e?xr(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xR(n){return fw(n.auth,new yp(n),n.bypassAuthState)}function bR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),lR(t,new yp(n),n.bypassAuthState)}async function OR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),aR(t,new yp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return bR;default:qn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Al(2e3,1e4);class Io extends Tw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DR.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="pendingRedirect",dc=new Map;class VR extends Tw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const i=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(n,e){const t=jR(e),i=UR(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function FR(n,e){dc.set(n._key(),e)}function UR(n){return xr(n._redirectPersistence)}function jR(n){return hc(LR,n.config.apiKey,n.name)}async function BR(n,e,t=!1){if(Pr(n.app))return Promise.reject(Si(n));const i=$o(n),o=NR(i,e),c=await new VR(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=600*1e3;class $R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Iw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zR&&this.cachedEventUids.clear(),this.cachedEventUids.has(tv(e))}saveEventToCache(e){this.cachedEventUids.add(tv(e)),this.lastProcessedEventTime=Date.now()}}function tv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Iw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e={}){return Oi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function GR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await WR(n);for(const t of e)try{if(QR(t))return}catch{}qn(n,"unauthorized-domain")}function QR(n){const e=xf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!KR.test(t))return!1;if(HR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new Al(3e4,6e4);function nv(){const n=or().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YR(n){return new Promise((e,t)=>{var i,o,l;function c(){nv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nv(),t(sr(n,"network-request-failed"))},timeout:JR.get()})}if(!((o=(i=or().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=or().gapi)===null||l===void 0)&&l.load)c();else{const d=WA("iframefcb");return or()[d]=()=>{gapi.load?c():t(sr(n,"network-request-failed"))},uw(`${qA()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw fc=null,e})}let fc=null;function XR(n){return fc=fc||YR(n),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new Al(5e3,15e3),eC="__/auth/iframe",tC="emulator/auth/iframe",nC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hp(e,tC):`https://${n.config.authDomain}/${eC}`,i={apiKey:e.apiKey,appName:n.name,v:zo},o=rC.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Sl(i).slice(1)}`}async function sC(n){const e=await XR(n),t=or().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:iC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nC,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=sr(n,"network-request-failed"),d=or().setTimeout(()=>{l(c)},ZR.get());function p(){or().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aC=500,lC=600,uC="_blank",cC="http://localhost";class rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hC(n,e,t,i=aC,o=lC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},oC),{width:i.toString(),height:o.toString(),top:l,left:c}),y=Wt().toLowerCase();t&&(d=nw(y)?uC:t),ew(y)&&(e=e||cC,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[U,N])=>`${A}${U}=${N},`,"");if(LA(y)&&d!=="_self")return dC(e||"",d),new rv(null);const E=window.open(e||"",d,_);Ee(E,n,"popup-blocked");try{E.focus()}catch{}return new rv(E)}function dC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="__/auth/handler",pC="emulator/auth/handler",mC=encodeURIComponent("fac");async function iv(n,e,t,i,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:zo,eventId:o};if(e instanceof hw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",sS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Rl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${mC}=${encodeURIComponent(p)}`:"";return`${gC(n)}?${Sl(d).slice(1)}${y}`}function gC({config:n}){return n.emulator?hp(n,pC):`https://${n.authDomain}/${fC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class yC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yw,this._completeRedirectFn=BR,this._overrideRedirectResult=FR}async _openPopup(e,t,i,o){var l;Lr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await iv(e,t,i,xf(),o);return hC(e,c,gp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await iv(e,t,i,xf(),o);return wR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await sC(e),i=new $R(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(of,{type:of},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[of];c!==void 0&&t(!!c),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aw()||tw()||fp()}}const vC=yC;var sv="@firebase/auth",ov="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EC(n){ko(new ms("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lw(n)},y=new BA(i,o,l,p);return JA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ko(new ms("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(i=>new _C(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(sv,ov,wC(n)),Ii(sv,ov,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=300,IC=F_("authIdTokenMaxAge")||TC;let av=null;const SC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>IC)return;const o=t?.token;av!==o&&(av=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function AC(n=z_()){const e=lp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QA(n,{popupRedirectResolver:vC,persistence:[kR,yR,yw]}),i=F_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=SC(l.toString());fR(t,c,()=>c(t.currentUser)),dR(t,d=>c(d))}}const o=V_("auth");return o&&YA(t,`http://${o}`),t}function RC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}zA({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=sr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",RC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EC("Browser");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Sw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function S(){}S.prototype=I.prototype,k.D=I.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(P,L,D){for(var R=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)R[ke-2]=arguments[ke];return I.prototype[L].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,S){S||(S=0);var P=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)P[L]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(L=0;16>L;++L)P[L]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=k.g[0],S=k.g[1],L=k.g[2];var D=k.g[3],R=I+(D^S&(L^D))+P[0]+3614090360&4294967295;I=S+(R<<7&4294967295|R>>>25),R=D+(L^I&(S^L))+P[1]+3905402710&4294967295,D=I+(R<<12&4294967295|R>>>20),R=L+(S^D&(I^S))+P[2]+606105819&4294967295,L=D+(R<<17&4294967295|R>>>15),R=S+(I^L&(D^I))+P[3]+3250441966&4294967295,S=L+(R<<22&4294967295|R>>>10),R=I+(D^S&(L^D))+P[4]+4118548399&4294967295,I=S+(R<<7&4294967295|R>>>25),R=D+(L^I&(S^L))+P[5]+1200080426&4294967295,D=I+(R<<12&4294967295|R>>>20),R=L+(S^D&(I^S))+P[6]+2821735955&4294967295,L=D+(R<<17&4294967295|R>>>15),R=S+(I^L&(D^I))+P[7]+4249261313&4294967295,S=L+(R<<22&4294967295|R>>>10),R=I+(D^S&(L^D))+P[8]+1770035416&4294967295,I=S+(R<<7&4294967295|R>>>25),R=D+(L^I&(S^L))+P[9]+2336552879&4294967295,D=I+(R<<12&4294967295|R>>>20),R=L+(S^D&(I^S))+P[10]+4294925233&4294967295,L=D+(R<<17&4294967295|R>>>15),R=S+(I^L&(D^I))+P[11]+2304563134&4294967295,S=L+(R<<22&4294967295|R>>>10),R=I+(D^S&(L^D))+P[12]+1804603682&4294967295,I=S+(R<<7&4294967295|R>>>25),R=D+(L^I&(S^L))+P[13]+4254626195&4294967295,D=I+(R<<12&4294967295|R>>>20),R=L+(S^D&(I^S))+P[14]+2792965006&4294967295,L=D+(R<<17&4294967295|R>>>15),R=S+(I^L&(D^I))+P[15]+1236535329&4294967295,S=L+(R<<22&4294967295|R>>>10),R=I+(L^D&(S^L))+P[1]+4129170786&4294967295,I=S+(R<<5&4294967295|R>>>27),R=D+(S^L&(I^S))+P[6]+3225465664&4294967295,D=I+(R<<9&4294967295|R>>>23),R=L+(I^S&(D^I))+P[11]+643717713&4294967295,L=D+(R<<14&4294967295|R>>>18),R=S+(D^I&(L^D))+P[0]+3921069994&4294967295,S=L+(R<<20&4294967295|R>>>12),R=I+(L^D&(S^L))+P[5]+3593408605&4294967295,I=S+(R<<5&4294967295|R>>>27),R=D+(S^L&(I^S))+P[10]+38016083&4294967295,D=I+(R<<9&4294967295|R>>>23),R=L+(I^S&(D^I))+P[15]+3634488961&4294967295,L=D+(R<<14&4294967295|R>>>18),R=S+(D^I&(L^D))+P[4]+3889429448&4294967295,S=L+(R<<20&4294967295|R>>>12),R=I+(L^D&(S^L))+P[9]+568446438&4294967295,I=S+(R<<5&4294967295|R>>>27),R=D+(S^L&(I^S))+P[14]+3275163606&4294967295,D=I+(R<<9&4294967295|R>>>23),R=L+(I^S&(D^I))+P[3]+4107603335&4294967295,L=D+(R<<14&4294967295|R>>>18),R=S+(D^I&(L^D))+P[8]+1163531501&4294967295,S=L+(R<<20&4294967295|R>>>12),R=I+(L^D&(S^L))+P[13]+2850285829&4294967295,I=S+(R<<5&4294967295|R>>>27),R=D+(S^L&(I^S))+P[2]+4243563512&4294967295,D=I+(R<<9&4294967295|R>>>23),R=L+(I^S&(D^I))+P[7]+1735328473&4294967295,L=D+(R<<14&4294967295|R>>>18),R=S+(D^I&(L^D))+P[12]+2368359562&4294967295,S=L+(R<<20&4294967295|R>>>12),R=I+(S^L^D)+P[5]+4294588738&4294967295,I=S+(R<<4&4294967295|R>>>28),R=D+(I^S^L)+P[8]+2272392833&4294967295,D=I+(R<<11&4294967295|R>>>21),R=L+(D^I^S)+P[11]+1839030562&4294967295,L=D+(R<<16&4294967295|R>>>16),R=S+(L^D^I)+P[14]+4259657740&4294967295,S=L+(R<<23&4294967295|R>>>9),R=I+(S^L^D)+P[1]+2763975236&4294967295,I=S+(R<<4&4294967295|R>>>28),R=D+(I^S^L)+P[4]+1272893353&4294967295,D=I+(R<<11&4294967295|R>>>21),R=L+(D^I^S)+P[7]+4139469664&4294967295,L=D+(R<<16&4294967295|R>>>16),R=S+(L^D^I)+P[10]+3200236656&4294967295,S=L+(R<<23&4294967295|R>>>9),R=I+(S^L^D)+P[13]+681279174&4294967295,I=S+(R<<4&4294967295|R>>>28),R=D+(I^S^L)+P[0]+3936430074&4294967295,D=I+(R<<11&4294967295|R>>>21),R=L+(D^I^S)+P[3]+3572445317&4294967295,L=D+(R<<16&4294967295|R>>>16),R=S+(L^D^I)+P[6]+76029189&4294967295,S=L+(R<<23&4294967295|R>>>9),R=I+(S^L^D)+P[9]+3654602809&4294967295,I=S+(R<<4&4294967295|R>>>28),R=D+(I^S^L)+P[12]+3873151461&4294967295,D=I+(R<<11&4294967295|R>>>21),R=L+(D^I^S)+P[15]+530742520&4294967295,L=D+(R<<16&4294967295|R>>>16),R=S+(L^D^I)+P[2]+3299628645&4294967295,S=L+(R<<23&4294967295|R>>>9),R=I+(L^(S|~D))+P[0]+4096336452&4294967295,I=S+(R<<6&4294967295|R>>>26),R=D+(S^(I|~L))+P[7]+1126891415&4294967295,D=I+(R<<10&4294967295|R>>>22),R=L+(I^(D|~S))+P[14]+2878612391&4294967295,L=D+(R<<15&4294967295|R>>>17),R=S+(D^(L|~I))+P[5]+4237533241&4294967295,S=L+(R<<21&4294967295|R>>>11),R=I+(L^(S|~D))+P[12]+1700485571&4294967295,I=S+(R<<6&4294967295|R>>>26),R=D+(S^(I|~L))+P[3]+2399980690&4294967295,D=I+(R<<10&4294967295|R>>>22),R=L+(I^(D|~S))+P[10]+4293915773&4294967295,L=D+(R<<15&4294967295|R>>>17),R=S+(D^(L|~I))+P[1]+2240044497&4294967295,S=L+(R<<21&4294967295|R>>>11),R=I+(L^(S|~D))+P[8]+1873313359&4294967295,I=S+(R<<6&4294967295|R>>>26),R=D+(S^(I|~L))+P[15]+4264355552&4294967295,D=I+(R<<10&4294967295|R>>>22),R=L+(I^(D|~S))+P[6]+2734768916&4294967295,L=D+(R<<15&4294967295|R>>>17),R=S+(D^(L|~I))+P[13]+1309151649&4294967295,S=L+(R<<21&4294967295|R>>>11),R=I+(L^(S|~D))+P[4]+4149444226&4294967295,I=S+(R<<6&4294967295|R>>>26),R=D+(S^(I|~L))+P[11]+3174756917&4294967295,D=I+(R<<10&4294967295|R>>>22),R=L+(I^(D|~S))+P[2]+718787259&4294967295,L=D+(R<<15&4294967295|R>>>17),R=S+(D^(L|~I))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+D&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var S=I-this.blockSize,P=this.B,L=this.h,D=0;D<I;){if(L==0)for(;D<=S;)o(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<I;)if(P[L++]=k.charCodeAt(D++),L==this.blockSize){o(this,P),L=0;break}}else for(;D<I;)if(P[L++]=k[D++],L==this.blockSize){o(this,P),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var S=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=S&255,S/=256;for(this.u(k),k=Array(16),I=S=0;4>I;++I)for(var P=0;32>P;P+=8)k[S++]=this.g[I]>>>P&255;return k};function l(k,I){var S=d;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=I(k)}function c(k,I){this.h=I;for(var S=[],P=!0,L=k.length-1;0<=L;L--){var D=k[L]|0;P&&D==I||(S[L]=D,P=!1)}this.g=S}var d={};function p(k){return-128<=k&&128>k?l(k,function(I){return new c([I|0],0>I?-1:0)}):new c([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return x(y(-k));for(var I=[],S=1,P=0;k>=S;P++)I[P]=k/S|0,S*=4294967296;return new c(I,0)}function _(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return x(_(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(I,8)),P=E,L=0;L<k.length;L+=8){var D=Math.min(8,k.length-L),R=parseInt(k.substring(L,L+D),I);8>D?(D=y(Math.pow(I,D)),P=P.j(D).add(y(R))):(P=P.j(S),P=P.add(y(R)))}return P}var E=p(0),A=p(1),U=p(16777216);n=c.prototype,n.m=function(){if(M(this))return-x(this).m();for(var k=0,I=1,S=0;S<this.g.length;S++){var P=this.i(S);k+=(0<=P?P:4294967296+P)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(M(this))return"-"+x(this).toString(k);for(var I=y(Math.pow(k,6)),S=this,P="";;){var L=ae(S,I).g;S=Q(S,L.j(I));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=L,N(S))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=Q(this,k),M(k)?-1:N(k)?0:1};function x(k){for(var I=k.g.length,S=[],P=0;P<I;P++)S[P]=~k.g[P];return new c(S,~k.h).add(A)}n.abs=function(){return M(this)?x(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],P=0,L=0;L<=I;L++){var D=P+(this.i(L)&65535)+(k.i(L)&65535),R=(D>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);P=R>>>16,D&=65535,R&=65535,S[L]=R<<16|D}return new c(S,S[S.length-1]&-2147483648?-1:0)};function Q(k,I){return k.add(x(I))}n.j=function(k){if(N(this)||N(k))return E;if(M(this))return M(k)?x(this).j(x(k)):x(x(this).j(k));if(M(k))return x(this.j(x(k)));if(0>this.l(U)&&0>k.l(U))return y(this.m()*k.m());for(var I=this.g.length+k.g.length,S=[],P=0;P<2*I;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<k.g.length;L++){var D=this.i(P)>>>16,R=this.i(P)&65535,ke=k.i(L)>>>16,Ge=k.i(L)&65535;S[2*P+2*L]+=R*Ge,ee(S,2*P+2*L),S[2*P+2*L+1]+=D*Ge,ee(S,2*P+2*L+1),S[2*P+2*L+1]+=R*ke,ee(S,2*P+2*L+1),S[2*P+2*L+2]+=D*ke,ee(S,2*P+2*L+2)}for(P=0;P<I;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=I;P<2*I;P++)S[P]=0;return new c(S,0)};function ee(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function te(k,I){this.g=k,this.h=I}function ae(k,I){if(N(I))throw Error("division by zero");if(N(k))return new te(E,E);if(M(k))return I=ae(x(k),I),new te(x(I.g),x(I.h));if(M(I))return I=ae(k,x(I)),new te(x(I.g),I.h);if(30<k.g.length){if(M(k)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var S=A,P=I;0>=P.l(k);)S=ne(S),P=ne(P);var L=se(S,1),D=se(P,1);for(P=se(P,2),S=se(S,2);!N(P);){var R=D.add(P);0>=R.l(k)&&(L=L.add(S),D=R),P=se(P,1),S=se(S,1)}return I=Q(k,L.j(I)),new te(L,I)}for(L=E;0<=k.l(I);){for(S=Math.max(1,Math.floor(k.m()/I.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=y(S),R=D.j(I);M(R)||0<R.l(k);)S-=P,D=y(S),R=D.j(I);N(D)&&(D=A),L=L.add(D),k=Q(k,R)}return new te(L,k)}n.A=function(k){return ae(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],P=0;P<I;P++)S[P]=this.i(P)&k.i(P);return new c(S,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],P=0;P<I;P++)S[P]=this.i(P)|k.i(P);return new c(S,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],P=0;P<I;P++)S[P]=this.i(P)^k.i(P);return new c(S,this.h^k.h)};function ne(k){for(var I=k.g.length+1,S=[],P=0;P<I;P++)S[P]=k.i(P)<<1|k.i(P-1)>>>31;return new c(S,k.h)}function se(k,I){var S=I>>5;I%=32;for(var P=k.g.length-S,L=[],D=0;D<P;D++)L[D]=0<I?k.i(D+S)>>>I|k.i(D+S+1)<<32-I:k.i(D+S);return new c(L,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,fs=c}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aw,Xa,Rw,pc,Df,Cw,Pw,kw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in v))break e;v=v[j]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,T=!1,j={next:function(){if(!T&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function A(u,m,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,A.apply(null,arguments)}function U(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function N(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,j,W){for(var oe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)oe[qe-2]=arguments[qe];return m.prototype[j].apply(T,oe)}}function M(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function x(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const j=u.length||0,W=T.length||0;u.length=j+W;for(let oe=0;oe<W;oe++)u[j+oe]=T[oe]}else u.push(T)}}class Q{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var ne=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function se(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function I(u){const m={};for(const v in u)m[v]=u[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)u[v]=T[v];for(let W=0;W<S.length;W++)v=S[W],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function D(u){d.setTimeout(()=>{throw u},0)}function R(){var u=ye;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ke{constructor(){this.h=this.g=null}add(m,v){const T=Ge.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Ge=new Q(()=>new be,u=>u.reset());class be{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,ie=!1,ye=new ke,le=()=>{const u=d.Promise.resolve(void 0);Fe=()=>{u.then(F)}};var F=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){D(v)}var m=Ge;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function Pe(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ne){e:{try{ae(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}N(Pe,me);var Le={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Qe(u,m,v,T,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=j,this.key=++$e,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cr(u){this.src=u,this.g={},this.h=0}cr.prototype.add=function(u,m,v,T,j){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var oe=zr(u,m,T,j);return-1<oe?(m=u[oe],v||(m.fa=!1)):(m=new Qe(m,this.src,W,!!T,j),m.fa=v,u.push(m)),m};function Ss(u,m){var v=m.type;if(v in u.g){var T=u.g[v],j=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(T,j,1),W&&(Tt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function zr(u,m,v,T){for(var j=0;j<u.length;++j){var W=u[j];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==T)return j}return-1}var Li="closure_lm_"+(1e6*Math.random()|0),As={};function Xo(u,m,v,T,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Xo(u,m[W],v,T,j);return null}return v=ta(v),u&&u[ze]?u.K(m,v,y(T)?!!T.capture:!1,j):Zo(u,m,v,!1,T,j)}function Zo(u,m,v,T,j,W){if(!m)throw Error("Invalid event type");var oe=y(j)?!!j.capture:!!j,qe=Cs(u);if(qe||(u[Li]=qe=new cr(u)),v=qe.add(m,v,T,oe,W),v.proxy)return v;if(T=jl(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Se||(j=oe),j===void 0&&(j=!1),u.addEventListener(m.toString(),T,j);else if(u.attachEvent)u.attachEvent(dr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function jl(){function u(v){return m.call(u.src,u.listener,v)}const m=ea;return u}function Rs(u,m,v,T,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)Rs(u,m[W],v,T,j);else T=y(T)?!!T.capture:!!T,v=ta(v),u&&u[ze]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=zr(W,v,T,j),-1<v&&(Tt(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Cs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=zr(m,v,T,j)),(v=-1<u?m[u]:null)&&hr(v))}function hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ze])Ss(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(dr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=Cs(m))?(Ss(v,u),v.h==0&&(v.src=null,m[Li]=null)):Tt(u)}}}function dr(u){return u in As?As[u]:As[u]="on"+u}function ea(u,m){if(u.da)u=!0;else{m=new Pe(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&hr(u),u=v.call(T,m)}return u}function Cs(u){return u=u[Li],u instanceof cr?u:null}var Ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function ta(u){return typeof u=="function"?u:(u[Ps]||(u[Ps]=function(m){return u.handleEvent(m)}),u[Ps])}function gt(){H.call(this),this.i=new cr(this),this.M=this,this.F=null}N(gt,H),gt.prototype[ze]=!0,gt.prototype.removeEventListener=function(u,m,v,T){Rs(this,u,m,v,T)};function yt(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var j=m;m=new me(T,u),P(m,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var oe=m.g=v[W];j=fr(oe,T,!0,m)&&j}if(oe=m.g=u,j=fr(oe,T,!0,m)&&j,j=fr(oe,T,!1,m)&&j,v)for(W=0;W<v.length;W++)oe=m.g=v[W],j=fr(oe,T,!1,m)&&j}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)Tt(v[T]);delete u.g[m],u.h--}}this.F=null},gt.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},gt.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function fr(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var oe=m[W];if(oe&&!oe.da&&oe.capture==v){var qe=oe.listener,vt=oe.ha||oe.src;oe.fa&&Ss(u.i,oe),j=qe.call(vt,T)!==!1&&j}}return j&&!T.defaultPrevented}function na(u,m,v){if(typeof u=="function")v&&(u=A(u,v));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function $r(u){u.g=na(()=>{u.g=null,u.i&&(u.i=!1,$r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Vi extends H{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(u){H.call(this),this.h=u,this.g={}}N(Mi,H);var ra=[];function ia(u){se(u.g,function(m,v){this.g.hasOwnProperty(v)&&hr(m)},u),u.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),ia(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sa=d.JSON.stringify,oa=d.JSON.parse,aa=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Fi(){}Fi.prototype.h=null;function ks(u){return u.h||(u.h=u.i())}function Ns(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){me.call(this,"d")}N(Kn,me);function xs(){me.call(this,"c")}N(xs,me);var Gn={},la=null;function Ui(){return la=la||new gt}Gn.La="serverreachability";function ua(u){me.call(this,Gn.La,u)}N(ua,me);function pr(u){const m=Ui();yt(m,new ua(m))}Gn.STAT_EVENT="statevent";function ca(u,m){me.call(this,Gn.STAT_EVENT,u),this.stat=m}N(ca,me);function lt(u){const m=Ui();yt(m,new ca(m,u))}Gn.Ma="timingevent";function bs(u,m){me.call(this,Gn.Ma,u),this.size=m}N(bs,me);function Pn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function Bi(u,m,v,T,j,W){u.info(function(){if(u.g)if(W)for(var oe="",qe=W.split("&"),vt=0;vt<qe.length;vt++){var Ve=qe[vt].split("=");if(1<Ve.length){var It=Ve[0];Ve=Ve[1];var dt=It.split("_");oe=2<=dt.length&&dt[1]=="type"?oe+(It+"="+Ve+"&"):oe+(It+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+v+`
`+oe})}function Os(u,m,v,T,j,W,oe){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+v+`
`+W+" "+oe})}function kn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Eh(u,v)+(T?" "+T:"")})}function ha(u,m){u.info(function(){return"TIMEOUT: "+m})}ji.prototype.info=function(){};function Eh(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<j.length;oe++)j[oe]=""}}}}return sa(v)}catch{return m}}var Ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function zi(){}N(zi,Fi),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},Nn=new zi;function xn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zl}function zl(){this.i=null,this.g="",this.h=!1}var da={},Ls={};function Vs(u,m,v){u.L=1,u.v=Gr(cn(m)),u.m=v,u.P=!0,fa(u,null)}function fa(u,m){u.F=Date.now(),Je(u),u.A=cn(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Jr(v.i,"t",T),u.C=0,v=u.j.J,u.h=new zl,u.g=ou(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Vi(A(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(ra[0]=j.toString()),j=ra);for(var W=0;W<j.length;W++){var oe=Xo(v,j[W],T||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),pr(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}xn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Xt(u)==3?m.j():this.Y(u)},xn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Xt(this.g);var m=this.g.Ba();const wn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||_a(this.g)))){this.J||dt!=4||m==7||(m==8||0>=wn?pr(3):pr(2)),$i(this);var v=this.g.Z();this.X=v;t:if($l(this)){var T=_a(this.g);u="";var j=T.length,W=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),qr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==j-1)});T.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,Os(this.i,this.u,this.A,this.l,this.R,dt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,vt=this.g;if((qe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(qe)){var Ve=qe;break t}}Ve=null}if(v=Ve)kn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pa(this,v);else{this.o=!1,this.s=3,lt(12),vn(this),qr(this);break e}}if(this.P){v=!0;let dn;for(;!this.J&&this.C<oe.length;)if(dn=Th(this,oe),dn==Ls){dt==4&&(this.s=4,lt(14),v=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==da){this.s=4,lt(15),kn(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else kn(this.i,this.l,dn,null),pa(this,dn);if($l(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||oe.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)kn(this.i,this.l,oe,"[Invalid Chunked Response]"),vn(this),qr(this);else if(0<oe.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Ea(It),It.M=!0,lt(11))}}else kn(this.i,this.l,oe,null),pa(this,oe);dt==4&&vn(this),this.o&&!this.J&&(dt==4?Ks(this.j,this):(this.o=!1,Je(this)))}else zs(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),vn(this),qr(this)}}}catch{}finally{}};function $l(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Th(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Ls:(v=Number(m.substring(v,T)),isNaN(v)?da:(T+=1,T+v>m.length?Ls:(m=m.slice(T,T+v),u.C=T+v,m)))}xn.prototype.cancel=function(){this.J=!0,vn(this)};function Je(u){u.S=Date.now()+u.I,ql(u,u.I)}function ql(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pn(A(u.ba,u),m)}function $i(u){u.B&&(d.clearTimeout(u.B),u.B=null)}xn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ha(this.i,this.A),this.L!=2&&(pr(),lt(17)),vn(this),this.s=2,qr(this)):ql(this,this.S-u)};function qr(u){u.j.G==0||u.J||Ks(u.j,u)}function vn(u){$i(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ia(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function pa(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ht(v.h,u))){if(!u.K&&Ht(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Hs(v),Vn(v);else break e;Ws(v),lt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Pn(A(v.Za,v),6e3));if(1>=Hl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else _r(v,11)}else if((u.K||v.g==u)&&Hs(v),!ee(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Ve=j[m];if(v.T=Ve[0],Ve=Ve[1],v.G==2)if(Ve[0]=="c"){v.K=Ve[1],v.ia=Ve[2];const It=Ve[3];It!=null&&(v.la=It,v.j.info("VER="+v.la));const dt=Ve[4];dt!=null&&(v.Aa=dt,v.j.info("SVER="+v.Aa));const wn=Ve[5];wn!=null&&typeof wn=="number"&&0<wn&&(T=1.5*wn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const dn=u.g;if(dn){const Ji=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var W=T.h;W.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ma(W,W.h),W.h=null))}if(T.D){const Qs=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qs&&(T.ya=Qs,Ke(T.I,T.D,Qs))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var oe=u;if(T.qa=su(T,T.J?T.ia:null,T.W),oe.K){Kl(T.h,oe);var qe=oe,vt=T.L;vt&&(qe.I=vt),qe.B&&($i(qe),Je(qe)),T.g=oe}else Qi(T);0<v.i.length&&Xn(v)}else Ve[0]!="stop"&&Ve[0]!="close"||_r(v,7);else v.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?_r(v,7):Nt(v):Ve[0]!="noop"&&v.l&&v.l.ta(Ve),v.v=0)}}pr(4)}catch{}}var Wl=class{constructor(u,m){this.g=u,this.map=m}};function qi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hl(u){return u.h?1:u.g?u.g.size:0}function Ht(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ma(u,m){u.g?u.g.add(m):u.h=m}function Kl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}qi.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return M(u.i)}function Ms(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function Fs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function Wr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Fs(u),T=Ms(u),j=T.length,W=0;W<j;W++)m.call(void 0,T[W],v&&v[W],u)}var Wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),j=null;if(0<=T){var W=u[v].substring(0,T);j=u[v].substring(T+1)}else W=u[v];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function mr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mr){this.h=u.h,Hi(this,u.j),this.o=u.o,this.g=u.g,Hr(this,u.s),this.l=u.l;var m=u.i,v=new Qn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Kr(this,v),this.m=u.m}else u&&(m=String(u).match(Wi))?(this.h=!1,Hi(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),Hr(this,m[4]),this.l=Oe(m[5]||"",!0),Kr(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}mr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Qr(m,Us,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qr(m,Us,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Qr(v,v.charAt(0)=="/"?Yl:Jl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Qr(v,ga)),u.join("")};function cn(u){return new mr(u)}function Hi(u,m,v){u.j=v?Oe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Hr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Kr(u,m,v){m instanceof Qn?(u.i=m,Jn(u.i,u.h)):(v||(m=Qr(m,Xl)),u.i=new Qn(m,u.h))}function Ke(u,m,v){u.i.set(m,v)}function Gr(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Ql),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ql(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Us=/[#\/\?@]/g,Jl=/[#\?:]/g,Yl=/[#\?]/g,Xl=/[#\?@]/g,ga=/#/g;function Qn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function kt(u){u.g||(u.g=new Map,u.h=0,u.i&&Ih(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Qn.prototype,n.add=function(u,m){kt(this),this.i=null,u=_n(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function bn(u,m){kt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function On(u,m){return kt(u),m=_n(u,m),u.g.has(m)}n.forEach=function(u,m){kt(this),this.g.forEach(function(v,T){v.forEach(function(j){u.call(m,j,T,this)},this)},this)},n.na=function(){kt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const j=u[T];for(let W=0;W<j.length;W++)v.push(m[T])}return v},n.V=function(u){kt(this);let m=[];if(typeof u=="string")On(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return kt(this),this.i=null,u=_n(this,u),On(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Jr(u,m,v){bn(u,m),0<v.length&&(u.i=null,u.g.set(_n(u,m),M(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const W=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var j=W;oe[T]!==""&&(j+="="+encodeURIComponent(String(oe[T]))),u.push(j)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Jn(u,m){m&&!u.j&&(kt(u),u.i=null,u.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(bn(this,T),Jr(this,j,v))},u)),u.j=m}function Sh(u,m){const v=new ji;if(d.Image){const T=new Image;T.onload=U(Yt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=U(Yt,v,"TestLoadImage: error",!1,m,T),T.onabort=U(Yt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=U(Yt,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Zl(u,m){const v=new ji,T=new AbortController,j=setTimeout(()=>{T.abort(),Yt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(j),W.ok?Yt(v,"TestPingServer: ok",!0,m):Yt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Yt(v,"TestPingServer: error",!1,m)})}function Yt(u,m,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function Ah(){this.g=new aa}function eu(u,m,v){const T=v||"";try{Wr(u,function(j,W){let oe=j;y(j)&&(oe=sa(j)),m.push(T+W+"="+encodeURIComponent(oe))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function gr(u){this.l=u.Ub||null,this.j=u.eb||!1}N(gr,Fi),gr.prototype.g=function(){return new Ki(this.l,this.j)},gr.prototype.i=(function(u){return function(){return u}})({});function Ki(u,m){gt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ki,gt),n=Ki.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ln(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Dn(this):Ln(this),this.readyState==3&&tu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Dn(this))},n.Qa=function(u){this.g&&(this.response=u,Dn(this))},n.ga=function(){this.g&&Dn(this)};function Dn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ln(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yr(u){let m="";return se(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Yr(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=yr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Ke(u,m,v))}function tt(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(tt,gt);var Rh=/^https?$/i,ya=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?ks(this.o):ks(Nn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Gi(this,W);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())v.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ya,m,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of v)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bs(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Gi(this,W)}};function Gi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,js(u),hn(u)}function js(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),hn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},n.bb=function(){va(this)};function va(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)na(u.Ea,0,u);else if(yt(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=oe===0){var j=String(u.D).match(Wi)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Rh.test(j?j.toLowerCase():"")}v=T}if(v)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var W=2<Xt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",js(u)}}finally{hn(u)}}}}function hn(u,m){if(u.g){Bs(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||yt(u,"ready");try{v.onreadystatechange=T}catch{}}}function Bs(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),oa(m)}};function _a(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zs(u){const m={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ee(u[T]))continue;var v=L(u[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[j]||[];m[j]=W,W.push(v)}k(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function wa(u){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,u),this.cb=Yn("retryDelaySeedMs",1e4,u),this.Wa=Yn("forwardChannelMaxRetries",2,u),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qi(u&&u.concurrentRequestLimit),this.Da=new Ah,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wa.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,T){lt(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=su(this,null,this.W),Xn(this)};function Nt(u){if($s(u),u.G==3){var m=u.U++,v=cn(u.I);if(Ke(v,"SID",u.K),Ke(v,"RID",m),Ke(v,"TYPE","terminate"),vr(u,v),m=new xn(u,u.j,m),m.L=2,m.v=Gr(cn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=ou(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}iu(u)}function Vn(u){u.g&&(Ea(u),u.g.cancel(),u.g=null)}function $s(u){Vn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Hs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Xn(u){if(!un(u.h)&&!u.s){u.s=!0;var m=u.Ga;Fe||le(),ie||(Fe(),ie=!0),ye.add(m,u),u.B=0}}function Ch(u,m){return Hl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pn(A(u.Ga,u,m),ru(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new xn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=I(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Xr(this,j,m),v=cn(this.I),Ke(v,"RID",u),Ke(v,"CVER",22),this.D&&Ke(v,"X-HTTP-Session-Id",this.D),vr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(yr(W)))+"&"+m:this.m&&Yr(v,this.m,W)),ma(this.h,j),this.Ua&&Ke(v,"TYPE","init"),this.P?(Ke(v,"$req",m),Ke(v,"SID","null"),j.T=!0,Vs(j,v,null)):Vs(j,v,m),this.G=2}}else this.G==3&&(u?qs(this,u):this.i.length==0||un(this.h)||qs(this))};function qs(u,m){var v;m?v=m.l:v=u.U++;const T=cn(u.I);Ke(T,"SID",u.K),Ke(T,"RID",v),Ke(T,"AID",u.T),vr(u,T),u.m&&u.o&&Yr(T,u.m,u.o),v=new xn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Xr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ma(u.h,v),Vs(v,T,m)}function vr(u,m){u.H&&se(u.H,function(v,T){Ke(m,T,v)}),u.l&&Wr({},function(v,T){Ke(m,T,v)})}function Xr(u,m,v){v=Math.min(u.i.length,v);var T=u.l?A(u.l.Na,u.l,u):null;e:{var j=u.i;let W=-1;for(;;){const oe=["count="+v];W==-1?0<v?(W=j[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let qe=!0;for(let vt=0;vt<v;vt++){let Ve=j[vt].g;const It=j[vt].map;if(Ve-=W,0>Ve)W=Math.max(0,j[vt].g-100),qe=!1;else try{eu(It,oe,"req"+Ve+"_")}catch{T&&T(It)}}if(qe){T=oe.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function Qi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Fe||le(),ie||(Fe(),ie=!0),ye.add(m,u),u.v=0}}function Ws(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pn(A(u.Fa,u),ru(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pn(A(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Vn(this),nu(this))};function Ea(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function nu(u){u.g=new xn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=cn(u.qa);Ke(m,"RID","rpc"),Ke(m,"SID",u.K),Ke(m,"AID",u.T),Ke(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(m,"TO",u.ja),Ke(m,"TYPE","xmlhttp"),vr(u,m),u.m&&u.o&&Yr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Gr(cn(m)),v.m=null,v.P=!0,fa(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Vn(this),Ws(this),lt(19))};function Hs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ks(u,m){var v=null;if(u.g==m){Hs(u),Ea(u),u.g=null;var T=2}else if(Ht(u.h,m))v=m.D,Kl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;T=Ui(),yt(T,new bs(T,v)),Xn(u)}else Qi(u);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&Ch(u,m)||T==2&&Ws(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),j){case 1:_r(u,5);break;case 4:_r(u,10);break;case 3:_r(u,6);break;default:_r(u,2)}}}function ru(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function _r(u,m){if(u.j.info("Error code "+m),m==2){var v=A(u.fb,u),T=u.Xa;const j=!T;T=new mr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Hi(T,"https"),Gr(T),j?Sh(T.toString(),v):Zl(T.toString(),v)}else lt(2);u.G=0,u.l&&u.l.sa(m),iu(u),$s(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function iu(u){if(u.G=0,u.ka=[],u.l){const m=Gl(u.h);(m.length!=0||u.i.length!=0)&&(x(u.ka,m),x(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function su(u,m,v){var T=v instanceof mr?cn(v):new mr(v);if(T.g!="")m&&(T.g=m+"."+T.g),Hr(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new mr(null);T&&Hi(W,T),m&&(W.g=m),j&&Hr(W,j),v&&(W.l=v),T=W}return v=u.D,m=u.ya,v&&m&&Ke(T,v,m),Ke(T,"VER",u.la),vr(u,T),T}function ou(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new tt(new gr({eb:v})):new tt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}n=Ta.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new Kt(u,m)};function Kt(u,m){gt.call(this),this.g=new wa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}N(Kt,gt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Nt(this.g)},Kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=sa(u),u=v);m.i.push(new Wl(m.Ya++,u)),m.G==3&&Xn(m)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Kt.aa.N.call(this)};function au(u){Kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}N(au,Kn);function lu(){xs.call(this),this.status=1}N(lu,xs);function Zn(u){this.g=u}N(Zn,Ta),Zn.prototype.ua=function(){yt(this.g,"a")},Zn.prototype.ta=function(u){yt(this.g,new au(u))},Zn.prototype.sa=function(u){yt(this.g,new lu)},Zn.prototype.ra=function(){yt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,kw=function(){return new Gs},Pw=function(){return Ui()},Cw=Gn,Df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,pc=Ds,Bl.COMPLETE="complete",Rw=Bl,Ns.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Xa=Ns,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Aw=tt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new op("@firebase/firestore");function Ka(){return ys.logLevel}function pe(n,...e){if(ys.logLevel<=De.DEBUG){const t=e.map(vp);ys.debug(`Firestore (${Wo}): ${n}`,...t)}}function Vr(n,...e){if(ys.logLevel<=De.ERROR){const t=e.map(vp);ys.error(`Firestore (${Wo}): ${n}`,...t)}}function xo(n,...e){if(ys.logLevel<=De.WARN){const t=e.map(vp);ys.warn(`Firestore (${Wo}): ${n}`,...t)}}function vp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function We(n,e){n||Ie()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class PC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kC{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new br,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new br)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new Nw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new zt(e)}}class NC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new NC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string"),this.R=t.token,new bC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=DC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function bo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Et(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Et(0,0))}static max(){return new Ae(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(),i===void 0?i=e.length-t:i>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return fl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fl?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends fl{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const LC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends fl{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return LC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ce(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new ce(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function VC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new Ci(o,ve.empty(),e)}function MC(n){return new Ci(n.readTime,n.key,-1)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(Ae.min(),ve.empty(),-1)}static max(){return new Ci(Ae.max(),ve.empty(),-1)}}function FC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==UC)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++d,d===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function BC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function kl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_p.oe=-1;function Xc(n){return n==null}function Oc(n){return n===0&&1/n==-1/0}function zC(n){return typeof n=="number"&&Number.isInteger(n)&&!Oc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ts(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Lt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ow("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const $C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(We(!!n),typeof n=="string"){let e=0;const t=$C.exec(n);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vs(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ep(n){const e=n.mapValue.fields.__previous_value__;return wp(e)?Ep(e):e}function pl(n){const e=Pi(n.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t,i,o,l,c,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class ml{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc={mapValue:{}};function _s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wp(n)?4:HC(n)?9007199254740991:WC(n)?10:11:Ie()}function ur(n,e){if(n===e)return!0;const t=_s(n);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pl(n).isEqual(pl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Pi(o.timestampValue),d=Pi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return vs(o.bytesValue).isEqual(vs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ct(o.doubleValue),d=ct(l.doubleValue);return c===d?Oc(c)===Oc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return bo(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(cv(c)!==cv(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!ur(c[p],d[p])))return!1;return!0})(n,e);default:return Ie()}}function gl(n,e){return(n.values||[]).find((t=>ur(t,e)))!==void 0}function Oo(n,e){if(n===e)return 0;const t=_s(n),i=_s(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ct(l.integerValue||l.doubleValue),p=ct(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return dv(n.timestampValue,e.timestampValue);case 4:return dv(pl(n),pl(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=vs(l),p=vs(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Be(d[y],p[y]);if(_!==0)return _}return Be(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Be(ct(l.latitude),ct(c.latitude));return d!==0?d:Be(ct(l.longitude),ct(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return fv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,y,_;const E=l.fields||{},A=c.fields||{},U=(d=E.value)===null||d===void 0?void 0:d.arrayValue,N=(p=A.value)===null||p===void 0?void 0:p.arrayValue,M=Be(((y=U?.values)===null||y===void 0?void 0:y.length)||0,((_=N?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:fv(U,N)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===sc.mapValue&&c===sc.mapValue)return 0;if(l===sc.mapValue)return 1;if(c===sc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const A=Be(p[E],_[E]);if(A!==0)return A;const U=Oo(d[p[E]],y[_[E]]);if(U!==0)return U}return Be(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie()}}function dv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Pi(n),i=Pi(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function fv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Oo(t[o],i[o]);if(l)return l}return Be(t.length,i.length)}function Do(n){return Lf(n)}function Lf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Pi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return vs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Lf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Lf(t.fields[c])}`;return o+"}"})(n.mapValue):Ie()}function pv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vf(n){return!!n&&"integerValue"in n}function Tp(n){return!!n&&"arrayValue"in n}function mv(n){return!!n&&"nullValue"in n}function gv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mc(n){return!!n&&"mapValue"in n}function WC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function rl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ts(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=rl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function HC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=rl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ts(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new on(rl(this.value))}}function Dw(n){const e=[];return Ts(n.fields,((t,i)=>{const o=new Dt([t]);if(mc(i)){const l=Dw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),on.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ae.min(),Ae.min(),on.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ae.min(),Ae.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function yv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(c.referenceValue),t.key):i=Oo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function vv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t="asc"){this.field=e,this.dir=t}}function KC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{}class mt extends Lw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new QC(e,t,i):t==="array-contains"?new XC(e,i):t==="in"?new ZC(e,i):t==="not-in"?new eP(e,i):t==="array-contains-any"?new tP(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new JC(e,i):new YC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oo(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends Lw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Wn(e,t)}matches(e){return Vw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vw(n){return n.op==="and"}function Mw(n){return GC(n)&&Vw(n)}function GC(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function Mf(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+Do(n.value);if(Mw(n))return n.filters.map((e=>Mf(e))).join(",");{const e=n.filters.map((t=>Mf(t))).join(",");return`${n.op}(${e})`}}function Fw(n,e){return n instanceof mt?(function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&ur(i.value,o.value)})(n,e):n instanceof Wn?(function(i,o){return o instanceof Wn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,d)=>l&&Fw(c,o.filters[d])),!0):!1})(n,e):void Ie()}function Uw(n){return n instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Uw).join(" ,")+"}"})(n):"Filter"}class QC extends mt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class JC extends mt{constructor(e,t){super(e,"in",t),this.keys=jw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YC extends mt{constructor(e,t){super(e,"not-in",t),this.keys=jw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class XC extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tp(t)&&gl(t.arrayValue,this.value)}}class ZC extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}}class eP extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!gl(this.value.arrayValue,t)}}class tP extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function _v(n,e=null,t=[],i=[],o=null,l=null,c=null){return new nP(n,e,t,i,o,l,c)}function Ip(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Mf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Do(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Do(i))).join(",")),e.ue=t}return e.ue}function Sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Fw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vv(n.startAt,e.startAt)&&vv(n.endAt,e.endAt)}function Ff(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rP(n,e,t,i,o,l,c,d){return new Ho(n,e,t,i,o,l,c,d)}function Zc(n){return new Ho(n)}function wv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bw(n){return n.collectionGroup!==null}function il(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Lt(Dt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new yl(l,i))})),t.has(Dt.keyField().canonicalString())||e.ce.push(new yl(Dt.keyField(),i))}return e.ce}function ar(n){const e=Re(n);return e.le||(e.le=iP(e,il(n))),e.le}function iP(n,e){if(n.limitType==="F")return _v(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yl(o.field,l)}));const t=n.endAt?new Dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Dc(n.startAt.position,n.startAt.inclusive):null;return _v(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Uf(n,e){const t=n.filters.concat([e]);return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lc(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eh(n,e){return Sp(ar(n),ar(e))&&n.limitType===e.limitType}function zw(n){return`${Ip(ar(n))}|lt:${n.limitType}`}function _o(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Uw(o))).join(", ")}]`),Xc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${i})`})(ar(n))}; limitType=${n.limitType})`}function th(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of il(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,d,p){const y=yv(c,d,p);return c.inclusive?y<=0:y<0})(i.startAt,il(i),o)||i.endAt&&!(function(c,d,p){const y=yv(c,d,p);return c.inclusive?y>=0:y>0})(i.endAt,il(i),o))})(n,e)}function sP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $w(n){return(e,t)=>{let i=!1;for(const o of il(n)){const l=oP(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function oP(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Oo(p,y):Ie()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new ot(ve.comparator);function Mr(){return aP}const qw=new ot(ve.comparator);function Za(...n){let e=qw;for(const t of n)e=e.insert(t.key,t);return e}function Ww(n){let e=qw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function cs(){return sl()}function Hw(){return sl()}function sl(){return new Ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const lP=new ot(ve.comparator),uP=new Lt(ve.comparator);function xe(...n){let e=uP;for(const t of n)e=e.add(t);return e}const cP=new Lt(Be);function hP(){return cP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function Kw(n){return{integerValue:""+n}}function dP(n,e){return zC(e)?Kw(e):Ap(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this._=void 0}}function fP(n,e,t){return n instanceof vl?(function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&wp(l)&&(l=Ep(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(t,e):n instanceof _l?Qw(n,e):n instanceof wl?Jw(n,e):(function(o,l){const c=Gw(o,l),d=Ev(c)+Ev(o.Pe);return Vf(c)&&Vf(o.Pe)?Kw(d):Ap(o.serializer,d)})(n,e)}function pP(n,e,t){return n instanceof _l?Qw(n,e):n instanceof wl?Jw(n,e):t}function Gw(n,e){return n instanceof Vc?(function(i){return Vf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vl extends nh{}class _l extends nh{constructor(e){super(),this.elements=e}}function Qw(n,e){const t=Yw(e);for(const i of n.elements)t.some((o=>ur(o,i)))||t.push(i);return{arrayValue:{values:t}}}class wl extends nh{constructor(e){super(),this.elements=e}}function Jw(n,e){let t=Yw(e);for(const i of n.elements)t=t.filter((o=>!ur(o,i)));return{arrayValue:{values:t}}}class Vc extends nh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ev(n){return ct(n.integerValue||n.doubleValue)}function Yw(n){return Tp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.field=e,this.transform=t}}function gP(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof _l&&o instanceof _l||i instanceof wl&&o instanceof wl?bo(i.elements,o.elements,ur):i instanceof Vc&&o instanceof Vc?ur(i.Pe,o.Pe):i instanceof vl&&o instanceof vl})(n.transform,e.transform)}class yP{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rh{}function Xw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rp(n.key,$n.none()):new Nl(n.key,n.data,$n.none());{const t=n.data,i=on.empty();let o=new Lt(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Di(n.key,i,new gn(o.toArray()),$n.none())}}function vP(n,e,t){n instanceof Nl?(function(o,l,c){const d=o.value.clone(),p=Iv(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Di?(function(o,l,c){if(!gc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Iv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Zw(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ol(n,e,t,i){return n instanceof Nl?(function(l,c,d,p){if(!gc(l.precondition,c))return d;const y=l.value.clone(),_=Sv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Di?(function(l,c,d,p){if(!gc(l.precondition,c))return d;const y=Sv(l.fieldTransforms,p,c),_=c.data;return _.setAll(Zw(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,c,d){return gc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function _P(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=Gw(i.transform,o||null);l!=null&&(t===null&&(t=on.empty()),t.set(i.field,l))}return t||null}function Tv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&bo(i,o,((l,c)=>gP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nl extends rh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Di extends rh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Iv(n,e,t){const i=new Map;We(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,pP(c,d,t[o]))}return i}function Sv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,fP(l,c,e))}return i}class Rp extends rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wP extends rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&vP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Hw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=Xw(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xe())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,((t,i)=>Tv(t,i)))&&bo(this.baseMutations,e.baseMutations,((t,i)=>Tv(t,i)))}}class Cp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length);let o=(function(){return lP})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Cp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Me;function SP(n){switch(n){default:return Ie();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function eE(n){if(n===void 0)return Vr("GRPC error has no .code"),G.UNKNOWN;switch(n){case pt.OK:return G.OK;case pt.CANCELLED:return G.CANCELLED;case pt.UNKNOWN:return G.UNKNOWN;case pt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case pt.INTERNAL:return G.INTERNAL;case pt.UNAVAILABLE:return G.UNAVAILABLE;case pt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case pt.NOT_FOUND:return G.NOT_FOUND;case pt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case pt.ABORTED:return G.ABORTED;case pt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case pt.DATA_LOSS:return G.DATA_LOSS;default:return Ie()}}(Me=pt||(pt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new fs([4294967295,4294967295],0);function Av(n){const e=AP().encode(n),t=new Sw;return t.update(e),new Uint8Array(t.digest())}function Rv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fs([t,i],0),new fs([o,l],0)]}class Pp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new el(`Invalid padding: ${t}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new el(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fs.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(fs.fromNumber(i)));return o.compare(RP)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Av(e),[i,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Pp(l,o,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.Ie===0)return;const t=Av(e),[i,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ih(Ae.min(),o,new ot(Be),Mr(),xe())}}class xl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xl(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class tE{constructor(e,t){this.targetId=e,this.me=t}}class nE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Cv{constructor(){this.fe=0,this.ge=kv(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),i=xe();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie()}})),new xl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=kv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mr(),this.qe=Pv(),this.Qe=new ot(Be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ie()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(Ff(l))if(i===0){const c=new ve(l.path);this.Ue(t,c,$t.newNoDocument(c,Ae.min()))}else We(i===1);else{const c=this.Ye(t);if(c!==i){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=vs(i).toUint8Array()}catch(p){if(p instanceof Ow)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Pp(c,o,l)}catch(p){return xo(p instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Ff(d.target)){const p=new ve(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,$t.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}}));let i=xe();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(e)));const o=new ih(e,t,this.Qe,this.ke,i);return this.ke=Mr(),this.qe=Pv(),this.Qe=new ot(Be),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Cv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(Be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cv),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Pv(){return new ot(ve.comparator)}function kv(){return new ot(ve.comparator)}const PP={asc:"ASCENDING",desc:"DESCENDING"},kP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NP={and:"AND",or:"OR"};class xP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jf(n,e){return n.useProto3Json||Xc(e)?e:{value:e}}function Mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bP(n,e){return Mc(n,e.toTimestamp())}function lr(n){return We(!!n),Ae.fromTimestamp((function(t){const i=Pi(t);return new Et(i.seconds,i.nanos)})(n))}function kp(n,e){return Bf(n,e).canonicalString()}function Bf(n,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iE(n){const e=et.fromString(n);return We(uE(e)),e}function zf(n,e){return kp(n.databaseId,e.path)}function af(n,e){const t=iE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(oE(t))}function sE(n,e){return kp(n.databaseId,e)}function OP(n){const e=iE(n);return e.length===4?et.emptyPath():oE(e)}function $f(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oE(n){return We(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Nv(n,e,t){return{name:zf(n,e),fields:t.value.mapValue.fields}}function DP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(We(_===void 0||typeof _=="string"),Vt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Vt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(y){const _=y.code===void 0?G.UNKNOWN:eE(y.code);return new ce(_,y.message||"")})(c);t=new nE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=af(n,i.document.name),l=lr(i.document.updateTime),c=i.document.createTime?lr(i.document.createTime):Ae.min(),d=new on({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,l,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new yc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=af(n,i.document),l=i.readTime?lr(i.readTime):Ae.min(),c=$t.newNoDocument(o,l),d=i.removedTargetIds||[];t=new yc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=af(n,i.document),l=i.removedTargetIds||[];t=new yc([],l,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new IP(o,l),d=i.targetId;t=new tE(d,c)}}return t}function LP(n,e){let t;if(e instanceof Nl)t={update:Nv(n,e.key,e.value)};else if(e instanceof Rp)t={delete:zf(n,e.key)};else if(e instanceof Di)t={update:Nv(n,e.key,e.data),updateMask:qP(e.fieldMask)};else{if(!(e instanceof wP))return Ie();t={verify:zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof vl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _l)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Vc)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Ie()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:bP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie()})(n,e.precondition)),t}function VP(n,e){return n&&n.length>0?(We(e!==void 0),n.map((t=>(function(o,l){let c=o.updateTime?lr(o.updateTime):lr(l);return c.isEqual(Ae.min())&&(c=lr(l)),new yP(c,o.transformResults||[])})(t,e)))):[]}function MP(n,e){return{documents:[sE(n,e.path)]}}function FP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=sE(n,o);const l=(function(y){if(y.length!==0)return lE(Wn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:wo(A.field),direction:BP(A.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=jf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function UP(n){let e=OP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const A=aE(E);return A instanceof Wn&&Mw(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(N){return new yl(Eo(N.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,Xc(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,U=E.values||[];return new Dc(U,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const A=!E.before,U=E.values||[];return new Dc(U,A)})(t.endAt)),rP(e,o,c,l,d,"F",p,y)}function jP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Eo(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Eo(t.unaryFilter.field);return mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Eo(t.unaryFilter.field);return mt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}})(n):n.fieldFilter!==void 0?(function(t){return mt.create(Eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map((i=>aE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}})(t.compositeFilter.op))})(n):Ie()}function BP(n){return PP[n]}function zP(n){return kP[n]}function $P(n){return NP[n]}function wo(n){return{fieldPath:n.canonicalString()}}function Eo(n){return Dt.fromServerFormat(n.fieldPath)}function lE(n){return n instanceof mt?(function(t){if(t.op==="=="){if(gv(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(mv(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gv(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(mv(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:zP(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){const i=t.getFilters().map((o=>lE(o)));return i.length===1?i[0]:{compositeFilter:{op:$P(t.op),filters:i}}})(n):Ie()}function qP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,i,o,l=Ae.min(),c=Ae.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.ct=e}}function HP(n){const e=UP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.un=new GP}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Ci.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class GP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Lo(0)}static kn(){return new Lo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ol(i.mutation,o,gn.empty(),Et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,xe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=xe()){const o=cs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Za();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=cs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,xe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,o){let l=Mr();const c=sl(),d=(function(){return sl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Di)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),ol(_.mutation,y,_.mutation.getFieldMask(),Et.now())):c.set(y.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new JP(_,(E=c.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=sl();let o=new ot(((c,d)=>c-d)),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||gn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||xe()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=Hw();_.forEach((A=>{if(!l.has(A)){const U=Xw(t.get(A),i.get(A));U!==null&&E.set(A,U),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return X.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(cs());let d=-1,p=l;return c.next((y=>X.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?X.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,xe()))).next((_=>({batchId:d,changes:Ww(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=Za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Za();return this.indexManager.getCollectionParents(e,l).next((d=>X.forEach(d,(p=>{const y=(function(E,A){return new Ho(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,$t.newInvalidDocument(_)))}));let d=Za();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&ol(_.mutation,y,gn.empty(),Et.now()),th(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:lr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:HP(o.bundledQuery),readTime:lr(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.overlays=new ot(ve.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=cs();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.ht(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=cs(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ot(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=cs(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=cs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return X.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new TP(t,i));let l=this.Ir.get(t);l===void 0&&(l=xe(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.Tr=new Lt(Ct.Er),this.dr=new Lt(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Ct(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Ct(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new ve(new et([])),i=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.dr.forEachInRange([i,o],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new et([])),i=new Ct(t,e),o=new Ct(t,e+1);let l=xe();return this.dr.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ct(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||Be(e.wr,t.wr)}static Ar(e,t){return Be(e.wr,t.wr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Ct.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new EP(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.br=this.br.add(new Ct(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return X.resolve(c)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],(c=>{const d=this.Dr(c.wr);l.push(d)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(Be);return t.forEach((o=>{const l=new Ct(o,0),c=new Ct(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{i=i.add(d.wr)}))})),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const c=new Ct(new ve(l),0);let d=new Lt(Be);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.wr)),!0)}),c),X.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Ct(t,0),o=this.br.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Mr();const c=t.path,d=new ve(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||FC(MC(_),i)<=0||(o.has(_.key)||th(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie()}Or(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new rk(this)}getSize(e){return X.resolve(this.size)}}class rk extends QP{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.persistence=e,this.Nr=new Ko((t=>Ip(t)),Sp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Np,this.targetCount=0,this.kr=Lo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _p(0),this.Kr=!1,this.Kr=!0,this.$r=new ek,this.referenceDelegate=e(this),this.Ur=new ik(this),this.indexManager=new KP,this.remoteDocumentCache=(function(o){return new nk(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new WP(t),this.Gr=new XP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new tk(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new ok(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return X.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class ok extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Jr=new Np,this.Yr=null}static Zr(e){return new xp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,(i=>{const o=ve.fromPath(i);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return ZI()?8:BC(Wt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new ak;return this.Xi(e,t,c).next((d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)}))})).next((()=>l.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Ka()<=De.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Ka()<=De.DEBUG&&pe("QueryEngine","Query:",_o(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ka()<=De.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(t))):X.resolve())}Yi(e,t){if(wv(t))return X.resolve(null);let i=ar(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Lc(t,null,"F"),i=ar(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=xe(...l);return this.Ji.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(t,d);return this.ns(t,y,c,p.readTime)?this.Yi(e,Lc(t,null,"F")):this.rs(e,y,t,p)}))))})))))}Zi(e,t,i,o){return wv(t)||o.isEqual(Ae.min())?X.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const c=this.ts(t,l);return this.ns(t,c,i,o)?X.resolve(null):(Ka()<=De.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.rs(e,c,t,VC(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Lt($w(e));return t.forEach(((o,l)=>{th(e,l)&&(i=i.add(l))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return Ka()<=De.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",_o(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ci.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(Be),this._s=new Ko((l=>Ip(l)),Sp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function ck(n,e,t,i){return new uk(n,e,t,i)}async function cE(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=xe();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:c,addedBatchIds:d})))}))}))}function hk(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,_){const E=y.batch,A=E.keys();let U=X.resolve();return A.forEach((N=>{U=U.next((()=>_.getEntry(p,N))).next((M=>{const x=y.docVersions.get(N);We(x!==null),M.version.compareTo(x)<0&&(E.applyToRemoteDocument(M,y),M.isValidDocument()&&(M.setReadTime(y.commitVersion),_.addEntry(M)))}))})),U.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=xe();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function hE(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function dk(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;d.push(t.Ur.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(l,_.addedDocuments,E))));let U=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?U=U.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(_.resumeToken,i)),o=o.insert(E,U),(function(M,x,Q){return M.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,U,_)&&d.push(t.Ur.updateTargetData(l,U))}));let p=Mr(),y=xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(fk(l,c,e.documentUpdates).next((_=>{p=_.Ps,y=_.Is}))),!i.isEqual(Ae.min())){const _=t.Ur.getLastRemoteSnapshotVersion(l).next((E=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return X.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.os=o,l)))}function fk(n,e,t){let i=xe(),o=xe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Mr();return t.forEach(((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):pe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ps:c,Is:o}}))}function pk(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function mk(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.Ur.allocateTargetId(i).next((c=>(o=new _i(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function qf(n,e,t){const i=Re(n),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!kl(c))throw c;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function xv(n,e,t){const i=Re(n);let o=Ae.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const E=Re(p),A=E._s.get(_);return A!==void 0?X.resolve(E.os.get(A)):E.Ur.getTargetData(y,_)})(i,c,ar(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(c,e,t?o:Ae.min(),t?l:xe()))).next((d=>(gk(i,sP(e),d),{documents:d,Ts:l})))))}function gk(n,e,t){let i=n.us.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.us.set(e,i)}class bv{constructor(){this.activeTargetIds=hP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.so=new bv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function lf(){return oc===null?oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Ek extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,c){const d=lf(),p=this.xo(t,i.toUriEncodedString());pe("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,l,c),this.No(t,p,y,o).then((_=>(pe("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw xo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(t,i,o,l,c,d){return this.Mo(t,i,o,l,c)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>t[c]=l)),o&&o.headers.forEach(((l,c)=>t[c]=l))}xo(t,i){const o=_k[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=lf();return new Promise(((c,d)=>{const p=new Aw;p.setWithCredentials(!0),p.listenOnce(Rw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case pc.NO_ERROR:const _=p.getResponseJson();pe(Bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case pc.TIMEOUT:pe(Bt,`RPC '${e}' ${l} timed out`),d(new ce(G.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const E=p.getStatus();if(pe(Bt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const U=A?.error;if(U&&U.status&&U.message){const N=(function(x){const Q=x.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Q)>=0?Q:G.UNKNOWN})(U.status);d(new ce(N,U.message))}else d(new ce(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ce(G.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{pe(Bt,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(o);pe(Bt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=lf(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kw(),d=Pw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");pe(Bt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);let A=!1,U=!1;const N=new wk({Io:x=>{U?pe(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,x):(A||(pe(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),pe(Bt,`RPC '${e}' stream ${o} sending:`,x),E.send(x))},To:()=>E.close()}),M=(x,Q,ee)=>{x.listen(Q,(te=>{try{ee(te)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return M(E,Xa.EventType.OPEN,(()=>{U||(pe(Bt,`RPC '${e}' stream ${o} transport opened.`),N.yo())})),M(E,Xa.EventType.CLOSE,(()=>{U||(U=!0,pe(Bt,`RPC '${e}' stream ${o} transport closed`),N.So())})),M(E,Xa.EventType.ERROR,(x=>{U||(U=!0,xo(Bt,`RPC '${e}' stream ${o} transport errored:`,x),N.So(new ce(G.UNAVAILABLE,"The operation could not be completed")))})),M(E,Xa.EventType.MESSAGE,(x=>{var Q;if(!U){const ee=x.data[0];We(!!ee);const te=ee,ae=te.error||((Q=te[0])===null||Q===void 0?void 0:Q.error);if(ae){pe(Bt,`RPC '${e}' stream ${o} received error:`,ae);const ne=ae.status;let se=(function(S){const P=pt[S];if(P!==void 0)return eE(P)})(ne),k=ae.message;se===void 0&&(se=G.INTERNAL,k="Unknown error status: "+ne+" with message "+ae.message),U=!0,N.So(new ce(se,k)),E.close()}else pe(Bt,`RPC '${e}' stream ${o} received:`,ee),N.bo(ee)}})),M(d,Cw.STAT_EVENT,(x=>{x.stat===Df.PROXY?pe(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):x.stat===Df.NOPROXY&&pe(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(n){return new xP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,i,o,l,c,d,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new ce(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tk extends fE{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=DP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?lr(c.readTime):Ae.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=$f(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ff(p)?{documents:MP(l,p)}:{query:FP(l,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=rE(l,c.resumeToken);const y=jf(l,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Mc(l,c.snapshotVersion.toTimestamp());const y=jf(l,c.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=jP(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=$f(this.serializer),t.removeTarget=e,this.a_(t)}}class Ik extends fE{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=VP(e.writeResults,e.commitTime),i=lr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>LP(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(e,Bf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(G.UNKNOWN,l.toString())}))}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(e,Bf(t,i),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(G.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Ak{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(t),this.D_=!1):pe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{i.enqueueAndForget((async()=>{Is(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.L_.add(4),await bl(y),y.q_.set("Unknown"),y.L_.delete(4),await oh(y)})(this))}))})),this.q_=new Ak(i,o)}}async function oh(n){if(Is(n))for(const e of n.B_)await e(!0)}async function bl(n){for(const e of n.B_)await e(!1)}function pE(n,e){const t=Re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Vp(t)?Lp(t):Go(t).r_()&&Dp(t,e))}function Op(n,e){const t=Re(n),i=Go(t);t.N_.delete(e),i.r_()&&mE(t,e),t.N_.size===0&&(i.r_()?i.o_():Is(t)&&t.q_.set("Unknown"))}function Dp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(n).A_(e)}function mE(n,e){n.Q_.xe(e),Go(n).R_(e)}function Lp(n){n.Q_=new CP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Go(n).start(),n.q_.v_()}function Vp(n){return Is(n)&&!Go(n).n_()&&n.N_.size>0}function Is(n){return Re(n).L_.size===0}function gE(n){n.Q_=void 0}async function Ck(n){n.q_.set("Online")}async function Pk(n){n.N_.forEach(((e,t)=>{Dp(n,e)}))}async function kk(n,e){gE(n),Vp(n)?(n.q_.M_(e),Lp(n)):n.q_.set("Unknown")}async function Nk(n,e,t){if(n.q_.set("Online"),e instanceof nE&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fc(n,i)}else if(e instanceof yc?n.Q_.Ke(e):e instanceof tE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{const i=await hE(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.N_.get(y);_&&l.N_.set(y,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,y)=>{const _=l.N_.get(p);if(!_)return;l.N_.set(p,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),mE(l,p);const E=new _i(_.target,p,y,_.sequenceNumber);Dp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe("RemoteStore","Failed to raise snapshot:",i),await Fc(n,i)}}async function Fc(n,e,t){if(!kl(e))throw e;n.L_.add(1),await bl(n),n.q_.set("Offline"),t||(t=()=>hE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await oh(n)}))}function yE(n,e){return e().catch((t=>Fc(n,t,e)))}async function ah(n){const e=Re(n),t=ki(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xk(e);)try{const o=await pk(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,bk(e,o)}catch(o){await Fc(e,o)}vE(e)&&_E(e)}function xk(n){return Is(n)&&n.O_.length<10}function bk(n,e){n.O_.push(e);const t=ki(n);t.r_()&&t.V_&&t.m_(e.mutations)}function vE(n){return Is(n)&&!ki(n).n_()&&n.O_.length>0}function _E(n){ki(n).start()}async function Ok(n){ki(n).p_()}async function Dk(n){const e=ki(n);for(const t of n.O_)e.m_(t.mutations)}async function Lk(n,e,t){const i=n.O_.shift(),o=Cp.from(i,e,t);await yE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ah(n)}async function Vk(n,e){e&&ki(n).V_&&await(async function(i,o){if((function(c){return SP(c)&&c!==G.ABORTED})(o.code)){const l=i.O_.shift();ki(i).s_(),await yE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await ah(i)}})(n,e),vE(n)&&_E(n)}async function Dv(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const i=Is(t);t.L_.add(3),await bl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await oh(t)}async function Mk(n,e){const t=Re(n);e?(t.L_.delete(2),await oh(t)):e||(t.L_.add(2),await bl(t),t.q_.set("Unknown"))}function Go(n){return n.K_||(n.K_=(function(t,i,o){const l=Re(t);return l.w_(),new Tk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:Ck.bind(null,n),Ro:Pk.bind(null,n),mo:kk.bind(null,n),d_:Nk.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Vp(n)?Lp(n):n.q_.set("Unknown")):(await n.K_.stop(),gE(n))}))),n.K_}function ki(n){return n.U_||(n.U_=(function(t,i,o){const l=Re(t);return l.w_(),new Ik(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ok.bind(null,n),mo:Vk.bind(null,n),f_:Dk.bind(null,n),g_:Lk.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await ah(n)):(await n.U_.stop(),n.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new Mp(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),kl(n))return new ce(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Za(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.W_=new ot(ve.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Vo{constructor(e,t,i,o,l,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Vo(e,t,Co.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Uk{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=Vv(),l.forEach(((c,d)=>{for(const p of d.j_)p.onError(i)}))})(this,new ce(G.ABORTED,"Firestore shutting down"))}}function Vv(){return new Ko((n=>zw(n)),eh)}async function Up(n,e){const t=Re(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new Fk,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Fp(c,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Bp(t)}async function jp(n,e){const t=Re(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jk(n,e){const t=Re(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(o)&&(i=!0);c.z_=o}}i&&Bp(t)}function Bk(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function Bp(n){n.Y_.forEach((e=>{e.next()}))}var Wf,Mv;(Mv=Wf||(Wf={})).ea="default",Mv.Cache="cache";class zp{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Vo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.key=e}}class EE{constructor(e){this.key=e}}class zk{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=$w(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Lv,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),U=th(this.query,E)?E:null,N=!!A&&this.mutatedKeys.has(A.key),M=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let x=!1;A&&U?A.data.isEqual(U.data)?N!==M&&(i.track({type:3,doc:U}),x=!0):this.ga(A,U)||(i.track({type:2,doc:U}),x=!0,(p&&this.Aa(U,p)>0||y&&this.Aa(U,y)<0)&&(d=!0)):!A&&U?(i.track({type:0,doc:U}),x=!0):A&&!U&&(i.track({type:1,doc:A}),x=!0,(p||y)&&(d=!0)),x&&(U?(c=c.add(U),l=M?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{Ra:c,fa:i,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort(((_,E)=>(function(U,N){const M=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return M(U)-M(N)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,c.length!==0||y?{snapshot:new Vo(this.query,e.Ra,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new EE(i))})),this.da.forEach((i=>{e.has(i)||t.push(new wE(i))})),t}ba(e){this.Ta=e.Ts,this.da=xe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Vo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $k{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qk{constructor(e){this.key=e,this.va=!1}}class Wk{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ko((d=>zw(d)),eh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ve.comparator),this.Na=new Map,this.La=new Np,this.Ba={},this.ka=new Map,this.qa=Lo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Hk(n,e,t=!0){const i=CE(n);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await TE(i,e,t,!0),o}async function Kk(n,e){const t=CE(n);await TE(t,e,!0,!1)}async function TE(n,e,t,i){const o=await mk(n.localStore,ar(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await Gk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&pE(n.remoteStore,o),d}async function Gk(n,e,t,i,o){n.Ka=(E,A,U)=>(async function(M,x,Q,ee){let te=x.view.ma(Q);te.ns&&(te=await xv(M.localStore,x.query,!1).then((({documents:k})=>x.view.ma(k,te))));const ae=ee&&ee.targetChanges.get(x.targetId),ne=ee&&ee.targetMismatches.get(x.targetId)!=null,se=x.view.applyChanges(te,M.isPrimaryClient,ae,ne);return Uv(M,x.targetId,se.wa),se.snapshot})(n,E,A,U);const l=await xv(n.localStore,e,!0),c=new zk(e,l.Ts),d=c.ma(l.documents),p=xl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);Uv(n,t,y.wa);const _=new $k(e,t,c);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function Qk(n,e,t){const i=Re(n),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter((c=>!eh(c,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await qf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Op(i.remoteStore,o.targetId),Hf(i,o.targetId)})).catch(Pl)):(Hf(i,o.targetId),await qf(i.localStore,o.targetId,!0))}async function Jk(n,e){const t=Re(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Op(t.remoteStore,i.targetId))}async function Yk(n,e,t){const i=i1(n);try{const o=await(function(c,d){const p=Re(c),y=Et.now(),_=d.reduce(((U,N)=>U.add(N.key)),xe());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let N=Mr(),M=xe();return p.cs.getEntries(U,_).next((x=>{N=x,N.forEach(((Q,ee)=>{ee.isValidDocument()||(M=M.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(U,N))).next((x=>{E=x;const Q=[];for(const ee of d){const te=_P(ee,E.get(ee.key).overlayedDocument);te!=null&&Q.push(new Di(ee.key,te,Dw(te.value.mapValue),$n.exists(!0)))}return p.mutationQueue.addMutationBatch(U,y,Q,d)})).next((x=>{A=x;const Q=x.applyToLocalDocumentSet(E,M);return p.documentOverlayCache.saveOverlays(U,x.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:Ww(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let y=c.Ba[c.currentUser.toKey()];y||(y=new ot(Be)),y=y.insert(d,p),c.Ba[c.currentUser.toKey()]=y})(i,o.batchId,t),await Ol(i,o.changes),await ah(i.remoteStore)}catch(o){const l=Fp(o,"Failed to persist write");t.reject(l)}}async function IE(n,e){const t=Re(n);try{const i=await dk(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Na.get(l);c&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?We(c.va):o.removedDocuments.size>0&&(We(c.va),c.va=!1))})),await Ol(t,i,e)}catch(i){await Pl(i)}}function Fv(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((l,c)=>{const d=c.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Re(c);p.onlineState=d;let y=!1;p.queries.forEach(((_,E)=>{for(const A of E.j_)A.Z_(d)&&(y=!0)})),y&&Bp(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Xk(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let c=new ot(ve.comparator);c=c.insert(l,$t.newNoDocument(l,Ae.min()));const d=xe().add(l),p=new ih(Ae.min(),new Map,new ot(Be),c,d);await IE(i,p),i.Oa=i.Oa.remove(l),i.Na.delete(e),$p(i)}else await qf(i.localStore,e,!1).then((()=>Hf(i,e,t))).catch(Pl)}async function Zk(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await hk(t.localStore,e);AE(t,i,null),SE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ol(t,o)}catch(o){await Pl(o)}}async function e1(n,e,t){const i=Re(n);try{const o=await(function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(We(E!==null),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);AE(i,e,t),SE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ol(i,o)}catch(o){await Pl(o)}}function SE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function AE(n,e,t){const i=Re(n);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Hf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||RE(n,i)}))}function RE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Op(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$p(n))}function Uv(n,e,t){for(const i of t)i instanceof wE?(n.La.addReference(i.key,e),t1(n,i)):i instanceof EE?(pe("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||RE(n,i.key)):Ie()}function t1(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(pe("SyncEngine","New document in limbo: "+t),n.xa.add(i),$p(n))}function $p(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ve(et.fromString(e)),i=n.qa.next();n.Na.set(i,new qk(t)),n.Oa=n.Oa.insert(t,i),pE(n.remoteStore,new _i(ar(Zc(t.path)),i,"TargetPurposeLimboResolution",_p.oe))}}async function Ol(n,e,t){const i=Re(n),o=[],l=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,p)=>{c.push(i.Ka(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=bp.Wi(p.targetId,y);l.push(E)}})))})),await Promise.all(c),i.Ca.d_(o),await(async function(p,y){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>X.forEach(y,(A=>X.forEach(A.$i,(U=>_.persistence.referenceDelegate.addReference(E,A.targetId,U))).next((()=>X.forEach(A.Ui,(U=>_.persistence.referenceDelegate.removeReference(E,A.targetId,U)))))))))}catch(E){if(!kl(E))throw E;pe("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const U=_.os.get(A),N=U.snapshotVersion,M=U.withLastLimboFreeSnapshotVersion(N);_.os=_.os.insert(A,M)}}})(i.localStore,l))}async function n1(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const i=await cE(t.localStore,e);t.currentUser=e,(function(l,c){l.ka.forEach((d=>{d.forEach((p=>{p.reject(new ce(G.CANCELLED,c))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ol(t,i.hs)}}function r1(n,e){const t=Re(n),i=t.Na.get(e);if(i&&i.va)return xe().add(i.key);{let o=xe();const l=t.Ma.get(e);if(!l)return o;for(const c of l){const d=t.Fa.get(c);o=o.unionWith(d.view.Va)}return o}}function CE(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xk.bind(null,e),e.Ca.d_=jk.bind(null,e.eventManager),e.Ca.$a=Bk.bind(null,e.eventManager),e}function i1(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e1.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ck(this.persistence,new lk,e.initialUser,this.serializer)}Ga(e){return new sk(xp.Zr,this.serializer)}Wa(e){return new yk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class Kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=n1.bind(null,this.syncEngine),await Mk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const t=sh(e.databaseInfo.databaseId),i=(function(l){return new Ek(l)})(e.databaseInfo);return(function(l,c,d,p){return new Sk(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,d){return new Rk(i,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fv(this.syncEngine,t,0)),(function(){return Ov.D()?new Ov:new vk})())}createSyncEngine(e,t){return(function(o,l,c,d,p,y,_){const E=new Wk(o,l,c,d,p,y);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);pe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await bl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kf.provider={build:()=>new Kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=xw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{pe("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Fp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function cf(n,e){n.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await cE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function jv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o1(n);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Dv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Dv(e.remoteStore,o))),n._onlineComponents=e}async function o1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await cf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),await cf(n,new Uc)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await cf(n,new Uc);return n._offlineComponents}async function PE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await jv(n,n._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await jv(n,new Kf))),n._onlineComponents}function a1(n){return PE(n).then((e=>e.syncEngine))}async function jc(n){const e=await PE(n),t=e.eventManager;return t.onListen=Hk.bind(null,e.syncEngine),t.onUnlisten=Qk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jk.bind(null,e.syncEngine),t}function l1(n,e,t={}){const i=new br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new qp({next:A=>{_.Za(),c.enqueueAndForget((()=>jp(l,E)));const U=A.docs.has(d);!U&&A.fromCache?y.reject(new ce(G.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&A.fromCache&&p&&p.source==="server"?y.reject(new ce(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new zp(Zc(d.path),_,{includeMetadataChanges:!0,_a:!0});return Up(l,E)})(await jc(n),n.asyncQueue,e,t,i))),i.promise}function u1(n,e,t={}){const i=new br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new qp({next:A=>{_.Za(),c.enqueueAndForget((()=>jp(l,E))),A.fromCache&&p.source==="server"?y.reject(new ce(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new zp(d,_,{includeMetadataChanges:!0,_a:!0});return Up(l,E)})(await jc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e,t){if(!t)throw new ce(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c1(n,e,t,i){if(e===!0&&i===!0)throw new ce(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zv(n){if(!ve.isDocumentKey(n))throw new ce(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $v(n){if(ve.isDocumentKey(n))throw new ce(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lh(n);throw new ce(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ce(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ce(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ce(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new CC;switch(i.type){case"firstParty":return new xC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Bv.get(t);i&&(pe("ComponentProvider","Removing Datastore"),Bv.delete(t),i.terminate())})(this),Promise.resolve()}}function h1(n,e,t,i={}){var o;const l=(n=Cn(n,uh))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=zt.MOCK_USER;else{d=HI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ce(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(y)}n._authCredentials=new PC(new Nw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Ai extends Br{constructor(e,t,i){super(e,t,Zc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ve(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function Ni(n,e,...t){if(n=Pt(n),NE("collection","path",e),n instanceof uh){const i=et.fromString(e,...t);return $v(i),new Ai(n,null,i)}{if(!(n instanceof Jt||n instanceof Ai))throw new ce(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return $v(i),new Ai(n.firestore,null,i)}}function Or(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=xw.newId()),NE("doc","path",e),n instanceof uh){const i=et.fromString(e,...t);return zv(i),new Jt(n,null,new ve(i))}{if(!(n instanceof Jt||n instanceof Ai))throw new ce(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return zv(i),new Jt(n.firestore,n instanceof Ai?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dE(this,"async_queue_retry"),this.Vu=()=>{const i=uf();i&&pe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new br;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!kl(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(i);throw Vr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Mp.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Hv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class xi extends uh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function d1(n,e){const t=typeof n=="object"?n:z_(),i=typeof n=="string"?n:"(default)",o=lp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=qI("firestore");l&&h1(o,...l)}return o}function ch(n){if(n._terminated)throw new ce(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f1(n),n._firestoreClient}function f1(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,p,y,_){return new qC(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,kE(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new s1(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mo(Vt.fromBase64String(e))}catch(t){throw new ce(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mo(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=/^__.*__$/;class m1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class xE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Kp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bE(this.Cu)&&p1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class g1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||sh(e)}Qu(e,t,i,o=!1){return new Kp({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gp(n){const e=n._freezeSettings(),t=sh(n._databaseId);return new g1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function y1(n,e,t,i,o,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,e,t,o);Jp("Data must be an object, but it was:",c,i);const d=OE(i,c);let p,y;if(l.merge)p=new gn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const A=Gf(e,E,t);if(!c.contains(A))throw new ce(G.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);LE(_,A)||_.push(A)}p=new gn(_),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new m1(new on(d),p,y)}class Dl extends dh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dl}}class Qp extends dh{_toFieldTransform(e){return new mP(e.path,new vl)}isEqual(e){return e instanceof Qp}}function v1(n,e,t,i){const o=n.Qu(1,e,t);Jp("Data must be an object, but it was:",o,i);const l=[],c=on.empty();Ts(i,((p,y)=>{const _=Yp(e,p,t);y=Pt(y);const E=o.Nu(_);if(y instanceof Dl)l.push(_);else{const A=Ll(y,E);A!=null&&(l.push(_),c.set(_,A))}}));const d=new gn(l);return new xE(c,d,o.fieldTransforms)}function _1(n,e,t,i,o,l){const c=n.Qu(1,e,t),d=[Gf(e,i,t)],p=[o];if(l.length%2!=0)throw new ce(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Gf(e,l[A])),p.push(l[A+1]);const y=[],_=on.empty();for(let A=d.length-1;A>=0;--A)if(!LE(y,d[A])){const U=d[A];let N=p[A];N=Pt(N);const M=c.Nu(U);if(N instanceof Dl)y.push(U);else{const x=Ll(N,M);x!=null&&(y.push(U),_.set(U,x))}}const E=new gn(y);return new xE(_,E,c.fieldTransforms)}function w1(n,e,t,i=!1){return Ll(t,n.Qu(i?4:3,e))}function Ll(n,e){if(DE(n=Pt(n)))return Jp("Unsupported field value:",e,n),OE(n,e);if(n instanceof dh)return(function(i,o){if(!bE(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const d of i){let p=Ll(d,o.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Et.fromDate(i);return{timestampValue:Mc(o.serializer,l)}}if(i instanceof Et){const l=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mc(o.serializer,l)}}if(i instanceof Wp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mo)return{bytesValue:rE(o.serializer,i._byteString)};if(i instanceof Jt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:kp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hp)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Ap(d.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${lh(i)}`)})(n,e)}function OE(n,e){const t={};return bw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(n,((i,o)=>{const l=Ll(o,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function DE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Wp||n instanceof Mo||n instanceof Jt||n instanceof dh||n instanceof Hp)}function Jp(n,e,t){if(!DE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=lh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Gf(n,e,t){if((e=Pt(e))instanceof hh)return e._internalPath;if(typeof e=="string")return Yp(n,e);throw Bc("Field path arguments must be of type string or ",n,!1,void 0,t)}const E1=new RegExp("[~\\*/\\[\\]]");function Yp(n,e,t){if(e.search(E1)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ce(G.INVALID_ARGUMENT,d+n+p)}function LE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T1 extends VE{data(){return super.data()}}function fh(n,e){return typeof e=="string"?Yp(n,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xp{}class Zp extends Xp{}function zc(n,e,...t){let i=[];e instanceof Xp&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof em)).length,d=l.filter((p=>p instanceof ph)).length;if(c>1||c>0&&d>0)throw new ce(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class ph extends Zp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ph(e,t,i)}_apply(e){const t=this._parse(e);return FE(e._query,t),new Br(e.firestore,e.converter,Uf(e._query,t))}_parse(e){const t=Gp(e.firestore);return(function(l,c,d,p,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Qv(E,_);const U=[];for(const N of E)U.push(Gv(p,l,N));A={arrayValue:{values:U}}}else A=Gv(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Qv(E,_),A=w1(d,c,E,_==="in"||_==="not-in");return mt.create(y,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Qf(n,e,t){const i=e,o=fh("where",n);return ph._create(o,i,t)}class em extends Xp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new em(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const d=l.getFlattenedFilters();for(const p of d)FE(c,p),c=Uf(c,p)})(e._query,t),new Br(e.firestore,e.converter,Uf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tm extends Zp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tm(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ce(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yl(l,c)})(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new Ho(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function I1(n,e="asc"){const t=e,i=fh("orderBy",n);return tm._create(i,t)}class nm extends Zp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new nm(e,t,i)}_apply(e){return new Br(e.firestore,e.converter,Lc(e._query,this._limit,this._limitType))}}function Kv(n){return nm._create("limit",n,"F")}function Gv(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new ce(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bw(e)&&t.indexOf("/")!==-1)throw new ce(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ve.isDocumentKey(i))throw new ce(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(n,new ve(i))}if(t instanceof Jt)return pv(n,t._key);throw new ce(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lh(t)}.`)}function Qv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FE(n,e){const t=(function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class S1{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ts(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>ct(c.doubleValue)));return new Hp(l)}convertGeoPoint(e){return new Wp(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ep(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);We(uE(i));const o=new ml(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return o.isEqual(t)||Vr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UE extends VE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class vc extends UE{data(e={}){return super.data(e)}}class jE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new vc(this._firestore,this._userDataWriter,i.key,i,new tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:R1(d.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function R1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n){n=Cn(n,Jt);const e=Cn(n.firestore,xi);return l1(ch(e),n._key).then((t=>zE(e,n,t)))}class rm extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function mh(n){n=Cn(n,Br);const e=Cn(n.firestore,xi),t=ch(e),i=new rm(e);return ME(n._query),u1(t,n._query).then((o=>new jE(e,i,n,o)))}function Jf(n,e,t,...i){n=Cn(n,Jt);const o=Cn(n.firestore,xi),l=Gp(o);let c;return c=typeof(e=Pt(e))=="string"||e instanceof hh?_1(l,"updateDoc",n._key,e,t,i):v1(l,"updateDoc",n._key,e),sm(o,[c.toMutation(n._key,$n.exists(!0))])}function BE(n){return sm(Cn(n.firestore,xi),[new Rp(n._key,$n.none())])}function im(n,e){const t=Cn(n.firestore,xi),i=Or(n),o=A1(n.converter,e);return sm(t,[y1(Gp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,$n.exists(!1))]).then((()=>i))}function C1(n,...e){var t,i,o;n=Pt(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Hv(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Hv(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,y,_;if(n instanceof Jt)y=Cn(n.firestore,xi),_=Zc(n._key.path),p={next:E=>{e[c]&&e[c](zE(y,n,E))},error:e[c+1],complete:e[c+2]};else{const E=Cn(n,Br);y=Cn(E.firestore,xi),_=E._query;const A=new rm(y);p={next:U=>{e[c]&&e[c](new jE(y,A,E,U))},error:e[c+1],complete:e[c+2]},ME(n._query)}return(function(A,U,N,M){const x=new qp(M),Q=new zp(U,x,N);return A.asyncQueue.enqueueAndForget((async()=>Up(await jc(A),Q))),()=>{x.Za(),A.asyncQueue.enqueueAndForget((async()=>jp(await jc(A),Q)))}})(ch(y),_,d,p)}function sm(n,e){return(function(i,o){const l=new br;return i.asyncQueue.enqueueAndForget((async()=>Yk(await a1(i),o,l))),l.promise})(ch(n),e)}function zE(n,e,t){const i=t.docs.get(e._key),o=new rm(n);return new UE(n,o,e._key,i,new tl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return new Dl("deleteField")}function $E(){return new Qp("serverTimestamp")}(function(e,t=!0){(function(o){Wo=o})(zo),ko(new ms("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new xi(new kC(i.getProvider("auth-internal")),new OC(i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ii(uv,"4.7.3",e),Ii(uv,"4.7.3","esm2017")})();var k1="firebase",N1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(k1,N1,"app");const yo={apiKey:"AIzaSyDMJN4-PWQMH-8PFmr9nL0kNdI2hr5DY9E",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.firebasestorage.app",messagingSenderId:"301206293641",appId:"1:301206293641:web:6d31c24c1331398ebdca58"},qE={apiKey:yo.apiKey,authDomain:yo.authDomain,projectId:yo.projectId,storageBucket:yo.storageBucket,messagingSenderId:yo.messagingSenderId,appId:yo.appId},El=Object.values(qE).every(Boolean);let hf,hs=null,He=null;El&&(hf=B_(qE),hs=AC(hf),He=d1(hf));const _c=()=>new Date().toISOString(),x1=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:"Fade bajo con linea marcada. Usa pomada mate.",createdAt:_c()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:"Corte bob texturizado. Prefiere styling natural.",createdAt:_c()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:"Cliente nuevo. Probar mid fade la proxima visita.",createdAt:_c()}];let bi=[...x1];const b1={"carlos-ruiz":["https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80","https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80"],"maria-garcia":["https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80"],"leo-suarez":[]};let al={...b1};const WE=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let Ri=[...WE];const O1=WE[0]?.id??"demo-barber";function df(){return[...bi]}function HE(n){return bi.find(e=>e.id===n)||null}function D1(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||O1,notes:n.notes||"",createdAt:_c()};return bi=[e,...bi],e}function L1(n,e){return bi=bi.map(t=>t.id===n?{...t,...e}:t),HE(n)}function V1(n){bi=bi.filter(e=>e.id!==n),delete al[n]}function M1(n){return[...al[n]||[]]}function F1(n,e){const t=al[n]||[];return al[n]=[e,...t],al[n]}function To(){return[...Ri]}function U1(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return Ri=[e,...Ri],e}function Yv(n,e){return Ri=Ri.map(t=>t.id===n?{...t,...e}:t),Ri.find(t=>t.id===n)||null}function j1(n){Ri=Ri.filter(e=>e.id!==n)}const B1="barberiawebpro@gmail.com",Xv="users",Zv="barberos",z1=async()=>{},KE=K.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!El,loginDemo:()=>{},logout:z1}),Qo=()=>K.useContext(KE),$1={user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!El},GE=n=>n?.trim().toLowerCase()||null,ff=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;if(e&&t)return`${e} ${t}`.trim();if(e)return e;if(t)return t},q1=async(n,e)=>{if(!He)return{};const i=(await Jv(Or(He,Xv,n))).data(),o=i?.role||void 0,l=ff(i);if(o||l)return{role:o,displayName:l};const c=GE(e);if(c){const E=[zc(Ni(He,Xv),Qf("email","==",c),Kv(1)),zc(Ni(He,Zv),Qf("email","==",c),Kv(1))];for(const A of E){const N=(await mh(A)).docs[0];if(N){const M=N.data(),x=M?.role||void 0,Q=ff(M);if(x||Q)return{role:x,displayName:Q}}}}const p=(await Jv(Or(He,Zv,n))).data(),y=p?.role||void 0,_=ff(p);return{role:y,displayName:_}},W1=n=>({uid:n.id,email:n.email,displayName:n.displayName});function H1({children:n}){const[e,t]=K.useState($1);K.useEffect(()=>{if(!hs||!El){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!0});return}const c=i();return()=>c()},[]);const i=()=>hs.onAuthStateChanged(async c=>{if(!c){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!1});return}const d=GE(c.email)===B1?"admin":void 0;try{const p=await q1(c.uid,c.email),y=p.role||d,_=p.displayName||c.displayName||c.email||void 0;t({user:c,role:y,profileName:_,loading:!1,demoMode:!1})}catch(p){console.error("No se pudo obtener el rol del usuario",p),t({user:c,role:d,profileName:c.displayName||c.email||void 0,loading:!1,demoMode:!1})}}),o=c=>{t(d=>{if(!d.demoMode)return d;const p=To().find(y=>y.id===c);return p?{user:W1(p),role:p.role,profileName:p.displayName,loading:!1,demoMode:!0}:d})},l=async()=>{if(!hs||!El){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!0});return}try{await pR(hs)}finally{t(c=>({...c,loading:!1}))}};return O.jsx(KE.Provider,{value:{...e,loginDemo:o,logout:l},children:n})}function pf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=Qo();return i?O.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?O.jsx(If,{to:"/clientes",replace:!0}):n:O.jsx(If,{to:"/login",replace:!0})}const e_="clientes",K1=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",c=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:c,fullName_lower:e.fullName_lower||c.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:e.notes||e.Informacion||e.info||"",createdAt:e.createdAt??null}},ac=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(l=>{if(t&&i&&l.mainBarberId&&l.mainBarberId!==i)return!1;if(!o)return!0;const c=(l.fullName||"").toLowerCase(),d=(l.phone||"").toLowerCase(),p=(l.notes||"").toLowerCase();return c.includes(o)||d.includes(o)||p.includes(o)})};function G1(){const{user:n,role:e}=Qo(),t=!He,i=e==="admin"||e==="barbero",[o,l]=K.useState(!1),[c,d]=K.useState(""),[p,y]=K.useState(()=>t?df():[]),[_,E]=K.useState(()=>ac(p,c,o,n?.uid)),[A,U]=K.useState(()=>!t),[N,M]=K.useState(!1),[x,Q]=K.useState({fullName:"",phone:""}),[ee,te]=K.useState(!1),[ae,ne]=K.useState(null),[se,k]=K.useState(null),I=K.useCallback(()=>{const D=df();y(D),E(ac(D,c,o,n?.uid)),U(!1),k(null)},[o,c,n?.uid]),S=K.useCallback(async()=>{if(!He){I();return}U(!0),k(null);try{const D=He;if(!D){I();return}const Ge=(await mh(Ni(D,e_))).docs.map(be=>K1(be.id,be.data(),n?.uid)).sort((be,Fe)=>be.fullName.localeCompare(Fe.fullName));y(Ge)}catch(D){console.error("No pudimos cargar clientes",D),y([]),k("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{U(!1)}},[I,n?.uid]);K.useEffect(()=>{if(t){I();return}S()},[t,S,I]),K.useEffect(()=>{if(t){const D=df();E(ac(D,c,o,n?.uid));return}E(ac(p,c,o,n?.uid))},[c,o,p,n?.uid,t]);const P=async D=>{D.preventDefault();const R=x.fullName.trim(),ke=x.phone.trim();if(!R){ne("El nombre es obligatorio.");return}te(!0),ne(null);try{He?(await im(Ni(He,e_),{fullName:R,fullName_lower:R.toLowerCase(),phone:ke||void 0,mainBarberId:n?.uid||"",notes:"",createdAt:$E()}),await S()):(D1({fullName:R,phone:ke,mainBarberId:n?.uid}),I()),Q({fullName:"",phone:""}),M(!1)}catch(Ge){console.error("No pudimos crear el cliente",Ge),ne("No pudimos crear el cliente. Intenta de nuevo.")}finally{te(!1)}},L=_;return O.jsxs("div",{className:"panel space-y-8",children:[O.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),O.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),O.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&O.jsx("button",{className:"btn btn-primary",onClick:()=>M(D=>!D),children:N?"Cerrar formulario":"Nuevo cliente"})]}),O.jsxs("section",{className:"space-y-4",children:[O.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[O.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:c,onChange:D=>d(D.target.value)}),O.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[O.jsx("input",{type:"checkbox",checked:o,onChange:()=>l(D=>!D),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),N&&i&&O.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:P,children:[O.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),O.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:x.fullName,onChange:D=>Q(R=>({...R,fullName:D.target.value}))})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),O.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:x.phone,onChange:D=>Q(R=>({...R,phone:D.target.value}))})]})]}),ae&&O.jsx("p",{className:"text-xs text-red-500",children:ae}),O.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.jsx("button",{className:"btn btn-primary",type:"submit",disabled:ee,children:ee?"Guardando...":"Guardar"}),O.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>M(!1),children:"Cancelar"})]})]})]}),O.jsxs("section",{className:"space-y-3",children:[A&&O.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),se&&!A&&O.jsx("div",{className:"text-sm text-red-600",children:se}),!A&&!se&&L.map(D=>O.jsxs(sp,{to:`/clientes/${D.id}`,className:"list-item",children:[O.jsx("div",{className:"avatar",children:D.fullName.split(" ").map(R=>R[0]).slice(0,2)}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"title",children:D.fullName}),D.phone&&O.jsx("div",{className:"sub",children:D.phone})]}),O.jsx("span",{className:"sub",children:"Ver"})]},D.id)),!A&&!se&&L.length===0&&O.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&O.jsx("footer",{className:"flex items-center justify-end",children:O.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void S(),disabled:A,children:"Actualizar"})}),O.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",O.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function Q1({photos:n}){return n?.length?O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.map((e,t)=>O.jsx("img",{src:e,className:"rounded-xl aspect-square object-cover shadow-lg"},t))}):O.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."})}function QE(n,e){return function(){return n.apply(e,arguments)}}const{toString:J1}=Object.prototype,{getPrototypeOf:om}=Object,{iterator:gh,toStringTag:JE}=Symbol,yh=(n=>e=>{const t=J1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=n=>(n=n.toLowerCase(),e=>yh(e)===n),vh=n=>e=>typeof e===n,{isArray:Jo}=Array,Fo=vh("undefined");function Vl(n){return n!==null&&!Fo(n)&&n.constructor!==null&&!Fo(n.constructor)&&an(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const YE=Hn("ArrayBuffer");function Y1(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&YE(n.buffer),e}const X1=vh("string"),an=vh("function"),XE=vh("number"),Ml=n=>n!==null&&typeof n=="object",Z1=n=>n===!0||n===!1,wc=n=>{if(yh(n)!=="object")return!1;const e=om(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(JE in n)&&!(gh in n)},eN=n=>{if(!Ml(n)||Vl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},tN=Hn("Date"),nN=Hn("File"),rN=Hn("Blob"),iN=Hn("FileList"),sN=n=>Ml(n)&&an(n.pipe),oN=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||an(n.append)&&((e=yh(n))==="formdata"||e==="object"&&an(n.toString)&&n.toString()==="[object FormData]"))},aN=Hn("URLSearchParams"),[lN,uN,cN,hN]=["ReadableStream","Request","Response","Headers"].map(Hn),dN=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),Jo(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Vl(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let d;for(i=0;i<c;i++)d=l[i],e.call(null,n[d],d,n)}}function ZE(n,e){if(Vl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,e0=n=>!Fo(n)&&n!==ds;function Yf(){const{caseless:n,skipUndefined:e}=e0(this)&&this||{},t={},i=(o,l)=>{const c=n&&ZE(t,l)||l;wc(t[c])&&wc(o)?t[c]=Yf(t[c],o):wc(o)?t[c]=Yf({},o):Jo(o)?t[c]=o.slice():(!e||!Fo(o))&&(t[c]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&Fl(arguments[o],i);return t}const fN=(n,e,t,{allOwnKeys:i}={})=>(Fl(e,(o,l)=>{t&&an(o)?n[l]=QE(o,t):n[l]=o},{allOwnKeys:i}),n),pN=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),mN=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},gN=(n,e,t,i)=>{let o,l,c;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)c=o[l],(!i||i(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&om(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},yN=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},vN=n=>{if(!n)return null;if(Jo(n))return n;let e=n.length;if(!XE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},_N=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&om(Uint8Array)),wN=(n,e)=>{const i=(n&&n[gh]).call(n);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},EN=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},TN=Hn("HTMLFormElement"),IN=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),t_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),SN=Hn("RegExp"),t0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Fl(t,(o,l)=>{let c;(c=e(o,l,n))!==!1&&(i[l]=c||o)}),Object.defineProperties(n,i)},AN=n=>{t0(n,(e,t)=>{if(an(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(an(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},RN=(n,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return Jo(n)?i(n):i(String(n).split(e)),t},CN=()=>{},PN=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function kN(n){return!!(n&&an(n.append)&&n[JE]==="FormData"&&n[gh])}const NN=n=>{const e=new Array(10),t=(i,o)=>{if(Ml(i)){if(e.indexOf(i)>=0)return;if(Vl(i))return i;if(!("toJSON"in i)){e[o]=i;const l=Jo(i)?[]:{};return Fl(i,(c,d)=>{const p=t(c,o+1);!Fo(p)&&(l[d]=p)}),e[o]=void 0,l}}return i};return t(n,0)},xN=Hn("AsyncFunction"),bN=n=>n&&(Ml(n)||an(n))&&an(n.then)&&an(n.catch),n0=((n,e)=>n?setImmediate:e?((t,i)=>(ds.addEventListener("message",({source:o,data:l})=>{o===ds&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),ds.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",an(ds.postMessage)),ON=typeof queueMicrotask<"u"?queueMicrotask.bind(ds):typeof process<"u"&&process.nextTick||n0,DN=n=>n!=null&&an(n[gh]),q={isArray:Jo,isArrayBuffer:YE,isBuffer:Vl,isFormData:oN,isArrayBufferView:Y1,isString:X1,isNumber:XE,isBoolean:Z1,isObject:Ml,isPlainObject:wc,isEmptyObject:eN,isReadableStream:lN,isRequest:uN,isResponse:cN,isHeaders:hN,isUndefined:Fo,isDate:tN,isFile:nN,isBlob:rN,isRegExp:SN,isFunction:an,isStream:sN,isURLSearchParams:aN,isTypedArray:_N,isFileList:iN,forEach:Fl,merge:Yf,extend:fN,trim:dN,stripBOM:pN,inherits:mN,toFlatObject:gN,kindOf:yh,kindOfTest:Hn,endsWith:yN,toArray:vN,forEachEntry:wN,matchAll:EN,isHTMLForm:TN,hasOwnProperty:t_,hasOwnProp:t_,reduceDescriptors:t0,freezeMethods:AN,toObjectSet:RN,toCamelCase:IN,noop:CN,toFiniteNumber:PN,findKey:ZE,global:ds,isContextDefined:e0,isSpecCompliantForm:kN,toJSONObject:NN,isAsyncFn:xN,isThenable:bN,setImmediate:n0,asap:ON,isIterable:DN};function Ce(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const r0=Ce.prototype,i0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{i0[n]={value:n}});Object.defineProperties(Ce,i0);Object.defineProperty(r0,"isAxiosError",{value:!0});Ce.from=(n,e,t,i,o,l)=>{const c=Object.create(r0);q.toFlatObject(n,c,function(_){return _!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ce.call(c,d,p,t,i,o),n&&c.cause==null&&Object.defineProperty(c,"cause",{value:n,configurable:!0}),c.name=n&&n.name||"Error",l&&Object.assign(c,l),c};const LN=null;function Xf(n){return q.isPlainObject(n)||q.isArray(n)}function s0(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function n_(n,e,t){return n?n.concat(e).map(function(o,l){return o=s0(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function VN(n){return q.isArray(n)&&!n.some(Xf)}const MN=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function _h(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,x){return!q.isUndefined(x[M])});const i=t.metaTokens,o=t.visitor||_,l=t.dots,c=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(N){if(N===null)return"";if(q.isDate(N))return N.toISOString();if(q.isBoolean(N))return N.toString();if(!p&&q.isBlob(N))throw new Ce("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(N)||q.isTypedArray(N)?p&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function _(N,M,x){let Q=N;if(N&&!x&&typeof N=="object"){if(q.endsWith(M,"{}"))M=i?M:M.slice(0,-2),N=JSON.stringify(N);else if(q.isArray(N)&&VN(N)||(q.isFileList(N)||q.endsWith(M,"[]"))&&(Q=q.toArray(N)))return M=s0(M),Q.forEach(function(te,ae){!(q.isUndefined(te)||te===null)&&e.append(c===!0?n_([M],ae,l):c===null?M:M+"[]",y(te))}),!1}return Xf(N)?!0:(e.append(n_(x,M,l),y(N)),!1)}const E=[],A=Object.assign(MN,{defaultVisitor:_,convertValue:y,isVisitable:Xf});function U(N,M){if(!q.isUndefined(N)){if(E.indexOf(N)!==-1)throw Error("Circular reference detected in "+M.join("."));E.push(N),q.forEach(N,function(Q,ee){(!(q.isUndefined(Q)||Q===null)&&o.call(e,Q,q.isString(ee)?ee.trim():ee,M,A))===!0&&U(Q,M?M.concat(ee):[ee])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return U(n),e}function r_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function am(n,e){this._pairs=[],n&&_h(n,this,e)}const o0=am.prototype;o0.append=function(e,t){this._pairs.push([e,t])};o0.toString=function(e){const t=e?function(i){return e.call(this,i,r_)}:r_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function FN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function a0(n,e,t){if(!e)return n;const i=t&&t.encode||FN;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=q.isURLSearchParams(e)?e.toString():new am(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class i_{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const l0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UN=typeof URLSearchParams<"u"?URLSearchParams:am,jN=typeof FormData<"u"?FormData:null,BN=typeof Blob<"u"?Blob:null,zN={isBrowser:!0,classes:{URLSearchParams:UN,FormData:jN,Blob:BN},protocols:["http","https","file","blob","url","data"]},lm=typeof window<"u"&&typeof document<"u",Zf=typeof navigator=="object"&&navigator||void 0,$N=lm&&(!Zf||["ReactNative","NativeScript","NS"].indexOf(Zf.product)<0),qN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WN=lm&&window.location.href||"http://localhost",HN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lm,hasStandardBrowserEnv:$N,hasStandardBrowserWebWorkerEnv:qN,navigator:Zf,origin:WN},Symbol.toStringTag,{value:"Module"})),qt={...HN,...zN};function KN(n,e){return _h(n,new qt.classes.URLSearchParams,{visitor:function(t,i,o,l){return qt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function GN(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function QN(n){const e={},t=Object.keys(n);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=n[l];return e}function u0(n){function e(t,i,o,l){let c=t[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),p=l>=t.length;return c=!c&&q.isArray(o)?o.length:c,p?(q.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!d):((!o[c]||!q.isObject(o[c]))&&(o[c]=[]),e(t,i,o[c],l)&&q.isArray(o[c])&&(o[c]=QN(o[c])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(GN(i),o,t,0)}),t}return null}function JN(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ul={transitional:l0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=q.isObject(e);if(l&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(u0(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return KN(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return _h(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),JN(e)):e}],transformResponse:[function(e){const t=this.transitional||Ul.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?Ce.from(d,Ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Ul.headers[n]={}});const YN=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XN=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!t||e[t]&&YN[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},s_=Symbol("internals");function Ga(n){return n&&String(n).trim().toLowerCase()}function Ec(n){return n===!1||n==null?n:q.isArray(n)?n.map(Ec):String(n)}function ZN(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const ex=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function mf(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function tx(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function nx(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,l,c){return this[i].call(this,e,o,l,c)},configurable:!0})})}let ln=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(d,p,y){const _=Ga(p);if(!_)throw new Error("header name must be a non-empty string");const E=q.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=Ec(d))}const c=(d,p)=>q.forEach(d,(y,_)=>l(y,_,p));if(q.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(q.isString(e)&&(e=e.trim())&&!ex(e))c(XN(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},p,y;for(const _ of e){if(!q.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[y=_[0]]=(p=d[y])?q.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}c(d,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=Ga(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return ZN(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ga(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||mf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(c){if(c=Ga(c),c){const d=q.findKey(i,c);d&&(!t||mf(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||mf(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,l)=>{const c=q.findKey(i,l);if(c){t[c]=Ec(o),delete t[l];return}const d=e?tx(l):String(l).trim();d!==l&&delete t[l],t[d]=Ec(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[s_]=this[s_]={accessors:{}}).accessors,o=this.prototype;function l(c){const d=Ga(c);i[d]||(nx(o,c),i[d]=!0)}return q.isArray(e)?e.forEach(l):l(e),this}};ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(ln.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(ln);function gf(n,e){const t=this||Ul,i=e||t,o=ln.from(i.headers);let l=i.data;return q.forEach(n,function(d){l=d.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function c0(n){return!!(n&&n.__CANCEL__)}function Yo(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(Yo,Ce,{__CANCEL__:!0});function h0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function rx(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function ix(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),_=i[l];c||(c=y),t[o]=p,i[o]=y;let E=l,A=0;for(;E!==o;)A+=t[E++],E=E%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),y-c<e)return;const U=_&&y-_;return U?Math.round(A*1e3/U):void 0}}function sx(n,e){let t=0,i=1e3/e,o,l;const c=(y,_=Date.now())=>{t=_,o=null,l&&(clearTimeout(l),l=null),n(...y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?c(y,_):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},i-E)))},()=>o&&c(o)]}const $c=(n,e,t=3)=>{let i=0;const o=ix(50,250);return sx(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,p=c-i,y=o(p),_=c<=d;i=c;const E={loaded:c,total:d,progress:d?c/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&_?(d-c)/y:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},o_=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},a_=n=>(...e)=>q.asap(()=>n(...e)),ox=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,ax=qt.hasStandardBrowserEnv?{write(n,e,t,i,o,l){const c=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),q.isString(i)&&c.push("path="+i),q.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lx(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ux(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function d0(n,e,t){let i=!lx(e);return n&&(i||t==!1)?ux(n,e):e}const l_=n=>n instanceof ln?{...n}:n;function ws(n,e){e=e||{};const t={};function i(y,_,E,A){return q.isPlainObject(y)&&q.isPlainObject(_)?q.merge.call({caseless:A},y,_):q.isPlainObject(_)?q.merge({},_):q.isArray(_)?_.slice():_}function o(y,_,E,A){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y,E,A)}else return i(y,_,E,A)}function l(y,_){if(!q.isUndefined(_))return i(void 0,_)}function c(y,_){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const p={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(y,_,E)=>o(l_(y),l_(_),E,!0)};return q.forEach(Object.keys({...n,...e}),function(_){const E=p[_]||o,A=E(n[_],e[_],_);q.isUndefined(A)&&E!==d||(t[_]=A)}),t}const f0=n=>{const e=ws({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:d}=e;if(e.headers=c=ln.from(c),e.url=a0(d0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(q.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([_,E])=>{y.includes(_.toLowerCase())&&c.set(_,E)})}}if(qt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&ox(e.url))){const p=o&&l&&ax.read(l);p&&c.set(o,p)}return e},cx=typeof XMLHttpRequest<"u",hx=cx&&function(n){return new Promise(function(t,i){const o=f0(n);let l=o.data;const c=ln.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,_,E,A,U,N;function M(){U&&U(),N&&N(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let x=new XMLHttpRequest;x.open(o.method.toUpperCase(),o.url,!0),x.timeout=o.timeout;function Q(){if(!x)return;const te=ln.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),ne={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:te,config:n,request:x};h0(function(k){t(k),M()},function(k){i(k),M()},ne),x=null}"onloadend"in x?x.onloadend=Q:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(Q)},x.onabort=function(){x&&(i(new Ce("Request aborted",Ce.ECONNABORTED,n,x)),x=null)},x.onerror=function(ae){const ne=ae&&ae.message?ae.message:"Network Error",se=new Ce(ne,Ce.ERR_NETWORK,n,x);se.event=ae||null,i(se),x=null},x.ontimeout=function(){let ae=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const ne=o.transitional||l0;o.timeoutErrorMessage&&(ae=o.timeoutErrorMessage),i(new Ce(ae,ne.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,x)),x=null},l===void 0&&c.setContentType(null),"setRequestHeader"in x&&q.forEach(c.toJSON(),function(ae,ne){x.setRequestHeader(ne,ae)}),q.isUndefined(o.withCredentials)||(x.withCredentials=!!o.withCredentials),d&&d!=="json"&&(x.responseType=o.responseType),y&&([A,N]=$c(y,!0),x.addEventListener("progress",A)),p&&x.upload&&([E,U]=$c(p),x.upload.addEventListener("progress",E),x.upload.addEventListener("loadend",U)),(o.cancelToken||o.signal)&&(_=te=>{x&&(i(!te||te.type?new Yo(null,n,x):te),x.abort(),x=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const ee=rx(o.url);if(ee&&qt.protocols.indexOf(ee)===-1){i(new Ce("Unsupported protocol "+ee+":",Ce.ERR_BAD_REQUEST,n));return}x.send(l||null)})},dx=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof Ce?_:new Yo(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,l(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>q.asap(d),p}},fx=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},px=async function*(n,e){for await(const t of mx(n))yield*fx(t,e)},mx=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},u_=(n,e,t,i)=>{const o=px(n,e);let l=0,c,d=p=>{c||(c=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:_}=await o.next();if(y){d(),p.close();return}let E=_.byteLength;if(t){let A=l+=E;t(A)}p.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},c_=64*1024,{isFunction:lc}=q,gx=(({Request:n,Response:e})=>({Request:n,Response:e}))(q.global),{ReadableStream:h_,TextEncoder:d_}=q.global,f_=(n,...e)=>{try{return!!n(...e)}catch{return!1}},yx=n=>{n=q.merge.call({skipUndefined:!0},gx,n);const{fetch:e,Request:t,Response:i}=n,o=e?lc(e):typeof fetch=="function",l=lc(t),c=lc(i);if(!o)return!1;const d=o&&lc(h_),p=o&&(typeof d_=="function"?(N=>M=>N.encode(M))(new d_):async N=>new Uint8Array(await new t(N).arrayBuffer())),y=l&&d&&f_(()=>{let N=!1;const M=new t(qt.origin,{body:new h_,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!M}),_=c&&d&&f_(()=>q.isReadableStream(new i("").body)),E={stream:_&&(N=>N.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!E[N]&&(E[N]=(M,x)=>{let Q=M&&M[N];if(Q)return Q.call(M);throw new Ce(`Response type '${N}' is not supported`,Ce.ERR_NOT_SUPPORT,x)})});const A=async N=>{if(N==null)return 0;if(q.isBlob(N))return N.size;if(q.isSpecCompliantForm(N))return(await new t(qt.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(q.isArrayBufferView(N)||q.isArrayBuffer(N))return N.byteLength;if(q.isURLSearchParams(N)&&(N=N+""),q.isString(N))return(await p(N)).byteLength},U=async(N,M)=>{const x=q.toFiniteNumber(N.getContentLength());return x??A(M)};return async N=>{let{url:M,method:x,data:Q,signal:ee,cancelToken:te,timeout:ae,onDownloadProgress:ne,onUploadProgress:se,responseType:k,headers:I,withCredentials:S="same-origin",fetchOptions:P}=f0(N),L=e||fetch;k=k?(k+"").toLowerCase():"text";let D=dx([ee,te&&te.toAbortSignal()],ae),R=null;const ke=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let Ge;try{if(se&&y&&x!=="get"&&x!=="head"&&(Ge=await U(I,Q))!==0){let F=new t(M,{method:"POST",body:Q,duplex:"half"}),H;if(q.isFormData(Q)&&(H=F.headers.get("content-type"))&&I.setContentType(H),F.body){const[me,Se]=o_(Ge,$c(a_(se)));Q=u_(F.body,c_,me,Se)}}q.isString(S)||(S=S?"include":"omit");const be=l&&"credentials"in t.prototype,Fe={...P,signal:D,method:x.toUpperCase(),headers:I.normalize().toJSON(),body:Q,duplex:"half",credentials:be?S:void 0};R=l&&new t(M,Fe);let ie=await(l?L(R,P):L(M,Fe));const ye=_&&(k==="stream"||k==="response");if(_&&(ne||ye&&ke)){const F={};["status","statusText","headers"].forEach(Pe=>{F[Pe]=ie[Pe]});const H=q.toFiniteNumber(ie.headers.get("content-length")),[me,Se]=ne&&o_(H,$c(a_(ne),!0))||[];ie=new i(u_(ie.body,c_,me,()=>{Se&&Se(),ke&&ke()}),F)}k=k||"text";let le=await E[q.findKey(E,k)||"text"](ie,N);return!ye&&ke&&ke(),await new Promise((F,H)=>{h0(F,H,{data:le,headers:ln.from(ie.headers),status:ie.status,statusText:ie.statusText,config:N,request:R})})}catch(be){throw ke&&ke(),be&&be.name==="TypeError"&&/Load failed|fetch/i.test(be.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,N,R),{cause:be.cause||be}):Ce.from(be,be&&be.code,N,R)}}},vx=new Map,p0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,l=[i,o,t];let c=l.length,d=c,p,y,_=vx;for(;d--;)p=l[d],y=_.get(p),y===void 0&&_.set(p,y=d?new Map:yx(e)),_=y;return y};p0();const ep={http:LN,xhr:hx,fetch:{get:p0}};q.forEach(ep,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const p_=n=>`- ${n}`,_x=n=>q.isFunction(n)||n===null||n===!1,m0={getAdapter:(n,e)=>{n=q.isArray(n)?n:[n];const{length:t}=n;let i,o;const l={};for(let c=0;c<t;c++){i=n[c];let d;if(o=i,!_x(i)&&(o=ep[(d=String(i)).toLowerCase()],o===void 0))throw new Ce(`Unknown adapter '${d}'`);if(o&&(q.isFunction(o)||(o=o.get(e))))break;l[d||"#"+c]=o}if(!o){const c=Object.entries(l).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(p_).join(`
`):" "+p_(c[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:ep};function yf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yo(null,n)}function m_(n){return yf(n),n.headers=ln.from(n.headers),n.data=gf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),m0.getAdapter(n.adapter||Ul.adapter,n)(n).then(function(i){return yf(n),i.data=gf.call(n,n.transformResponse,i),i.headers=ln.from(i.headers),i},function(i){return c0(i)||(yf(n),i&&i.response&&(i.response.data=gf.call(n,n.transformResponse,i.response),i.response.headers=ln.from(i.response.headers))),Promise.reject(i)})}const g0="1.12.2",wh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{wh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const g_={};wh.transitional=function(e,t,i){function o(l,c){return"[Axios v"+g0+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,d)=>{if(e===!1)throw new Ce(o(c," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!g_[c]&&(g_[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,d):!0}};wh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function wx(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const l=i[o],c=e[l];if(c){const d=n[l],p=d===void 0||c(d,l,n);if(p!==!0)throw new Ce("option "+l+" must be "+p,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+l,Ce.ERR_BAD_OPTION)}}const Tc={assertOptions:wx,validators:wh},ir=Tc.validators;let ps=class{constructor(e){this.defaults=e||{},this.interceptors={request:new i_,response:new i_}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ws(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&Tc.assertOptions(i,{silentJSONParsing:ir.transitional(ir.boolean),forcedJSONParsing:ir.transitional(ir.boolean),clarifyTimeoutError:ir.transitional(ir.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:Tc.assertOptions(o,{encode:ir.function,serialize:ir.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Tc.assertOptions(t,{baseUrl:ir.spelling("baseURL"),withXsrfToken:ir.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&q.merge(l.common,l[t.method]);l&&q.forEach(["delete","get","head","post","put","patch","common"],N=>{delete l[N]}),t.headers=ln.concat(c,l);const d=[];let p=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(t)===!1||(p=p&&M.synchronous,d.unshift(M.fulfilled,M.rejected))});const y=[];this.interceptors.response.forEach(function(M){y.push(M.fulfilled,M.rejected)});let _,E=0,A;if(!p){const N=[m_.bind(this),void 0];for(N.unshift(...d),N.push(...y),A=N.length,_=Promise.resolve(t);E<A;)_=_.then(N[E++],N[E++]);return _}A=d.length;let U=t;for(;E<A;){const N=d[E++],M=d[E++];try{U=N(U)}catch(x){M.call(this,x);break}}try{_=m_.call(this,U)}catch(N){return Promise.reject(N)}for(E=0,A=y.length;E<A;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=ws(this.defaults,e);const t=d0(e.baseURL,e.url,e.allowAbsoluteUrls);return a0(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){ps.prototype[e]=function(t,i){return this.request(ws(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,d){return this.request(ws(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}ps.prototype[e]=t(),ps.prototype[e+"Form"]=t(!0)});let Ex=class y0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(d=>{i.subscribe(d),l=d}).then(o);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,d){i.reason||(i.reason=new Yo(l,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new y0(function(o){e=o}),cancel:e}}};function Tx(n){return function(t){return n.apply(null,t)}}function Ix(n){return q.isObject(n)&&n.isAxiosError===!0}const tp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tp).forEach(([n,e])=>{tp[e]=n});function v0(n){const e=new ps(n),t=QE(ps.prototype.request,e);return q.extend(t,ps.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return v0(ws(n,o))},t}const ht=v0(Ul);ht.Axios=ps;ht.CanceledError=Yo;ht.CancelToken=Ex;ht.isCancel=c0;ht.VERSION=g0;ht.toFormData=_h;ht.AxiosError=Ce;ht.Cancel=ht.CanceledError;ht.all=function(e){return Promise.all(e)};ht.spread=Tx;ht.isAxiosError=Ix;ht.mergeConfig=ws;ht.AxiosHeaders=ln;ht.formToJSON=n=>u0(q.isHTMLForm(n)?new FormData(n):n);ht.getAdapter=m0.getAdapter;ht.HttpStatusCode=tp;ht.default=ht;const{Axios:Fx,AxiosError:Ux,CanceledError:jx,isCancel:Bx,CancelToken:zx,VERSION:$x,all:qx,Cancel:Wx,isAxiosError:Hx,spread:Kx,toFormData:Gx,AxiosHeaders:Qx,HttpStatusCode:Jx,formToJSON:Yx,getAdapter:Xx,mergeConfig:Zx}=ht,_0=void 0,Sx=void 0,Ax=!!_0;async function Rx(n,e){if(!Ax){const l=encodeURIComponent(n.name||"demo");return await new Promise(c=>setTimeout(c,350)),`https://placehold.co/600x600?text=${l}`}const t=`https://api.cloudinary.com/v1_1/${_0}/image/upload`,i=new FormData;i.append("file",n),i.append("upload_preset",Sx),i.append("folder",e);const{data:o}=await ht.post(t,i);return o.secure_url}function Cx({onUploaded:n,disabled:e}){return O.jsxs("label",{className:`uploader-trigger${e?" disabled":""}`,children:[O.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:e,onChange:async t=>{const i=t.target.files?.[0];if(!i)return;const o=await Rx(i,"barberia");n(o),t.target.value=""}}),O.jsx("span",{children:"Subir imagen"})]})}const vf="clientes",y_="cuts";function Px(){const{id:n}=aI(),e=Tl(),{user:t,role:i,demoMode:o}=Qo(),[l,c]=K.useState([]),[d,p]=K.useState({fullName:"",phone:"",notes:""}),[y,_]=K.useState(!0),[E,A]=K.useState(!1),[U,N]=K.useState(!1),[M,x]=K.useState(null),Q=!He,ee=i==="admin"||i==="barbero";K.useEffect(()=>{if(!n)return;if(Q){const P=HE(n);if(!P){_(!1);return}_(!0),p({fullName:P.fullName,phone:P.phone==null?"":String(P.phone),notes:P.notes||""}),c(M1(n));return}const S=C1(Or(He,vf,n),P=>{if(!P.exists()){_(!1);return}const L=P.data();_(!0),p({fullName:L.fullName||"",phone:L.phone==null?"":String(L.phone),notes:L.notes||""})});return(async()=>{const P=zc(Ni(He,y_),Qf("clientId","==",n)),L=await mh(P),D=[];L.forEach(R=>{const ke=R.data();(ke.photos||[]).forEach(be=>D.push({url:be,createdAt:ke.createdAt}))}),D.sort((R,ke)=>{const Ge=R.createdAt?.toMillis?R.createdAt.toMillis():Number(R.createdAt)||0;return(ke.createdAt?.toMillis?ke.createdAt.toMillis():Number(ke.createdAt)||0)-Ge}),c(D.map(R=>R.url).slice(0,12))})(),()=>S()},[n,Q]);const te=K.useMemo(()=>Q?O.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[Q]),ae=async S=>{if(n){if(c(P=>[S,...P]),Q){F1(n,S);return}await im(Ni(He,y_),{clientId:n,barberId:t?.uid||"",photos:[S],createdAt:$E()})}},ne=async()=>{if(!n)return;const S=(d.fullName??"").toString().trim(),P=(d.phone??"").toString().trim();if(!S){x("El nombre es obligatorio.");return}A(!0),x(null);try{if(Q)L1(n,{fullName:S,phone:P||void 0,notes:d.notes});else{const L={fullName:S,fullName_lower:S.toLowerCase(),notes:d.notes};P?L.phone=P:L.phone=P1(),await Jf(Or(He,vf,n),L)}}catch(L){console.error("No pudimos actualizar el cliente",L),x("No pudimos actualizar el cliente.")}finally{A(!1)}},se=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){N(!0),x(null);try{Q?V1(n):await BE(Or(He,vf,n)),e("/clientes")}catch(P){console.error("No pudimos eliminar el cliente",P),x("No pudimos eliminar el cliente."),N(!1)}}};if(!y)return O.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const k=(d.fullName??"").toString().trim()||"Cliente sin nombre",I=(d.phone??"").toString().trim();return O.jsxs("div",{className:"panel space-y-8",children:[te,O.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),O.jsx("h1",{className:"detail-title",children:k}),O.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:I?`Tel. ${I}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),ee&&O.jsxs("div",{className:"flex flex-col items-end gap-2",children:[O.jsx(Cx,{onUploaded:ae}),O.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"})]})]}),O.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[O.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[O.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),O.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),O.jsx("input",{className:"input mt-1",value:d.fullName,onChange:S=>p(P=>({...P,fullName:S.target.value})),disabled:!ee})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),O.jsx("input",{className:"input mt-1",value:d.phone,onChange:S=>p(P=>({...P,phone:S.target.value})),disabled:!ee})]})]}),M&&O.jsx("p",{className:"text-xs text-red-500",children:M}),ee&&O.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.jsx("button",{className:"btn btn-primary",onClick:()=>void ne(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),O.jsx("button",{className:"btn btn-ghost",onClick:()=>void se(),disabled:U,children:U?"Eliminando...":"Eliminar"})]})]}),O.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("h2",{className:"detail-sub",children:"Galeria"}),l.length>0&&O.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[l.length," fotos"]})]}),O.jsx(Q1,{photos:l}),Q&&!o&&O.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Configura Cloudinary para guardar fotos reales."})]})]}),O.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[O.jsx("h2",{className:"detail-sub",children:"Notas"}),O.jsx("textarea",{className:"input min-h-[200px]",value:d.notes,onChange:S=>p(P=>({...P,notes:S.target.value})),disabled:!ee}),ee&&O.jsx("button",{onClick:()=>void ne(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]})]})}const v_={"auth/invalid-email":"El correo no tiene un formato valido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contrasena incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales invalidas. Verifica tu correo y contrasena.","auth/user-disabled":"La cuenta esta deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},kx=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in v_)return v_[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesion. Verifica tus datos."}return"No pudimos iniciar sesion. Verifica tu correo y contrasena."},uc=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al dia con las imagenes de cada servicio"}];function Nx(){const[n,e]=K.useState(""),[t,i]=K.useState(""),[o,l]=K.useState(!1),[c,d]=K.useState(null),p=Tl(),{user:y,role:_,loading:E}=Qo(),A=_==="admin"?"/admin/usuarios":"/clientes";K.useEffect(()=>{E||y&&p(A,{replace:!0})},[y,_,E,A,p]);const U=async N=>{if(N.preventDefault(),!!hs){l(!0),d(null);try{await hR(hs,n.trim(),t)}catch(M){console.error("No pudimos iniciar sesion",M),d(kx(M))}finally{l(!1)}}};return O.jsx("div",{className:"login-hero",children:O.jsxs("div",{className:"login-hero-inner",children:[O.jsxs("div",{className:"space-y-4 text-center",children:[O.jsx("span",{className:"login-eyebrow",children:"Acceso interno"}),O.jsx("h1",{className:"login-heading",children:"Barberia Prueba"}),O.jsx("p",{className:"text-base text-black/70 max-w-xl mx-auto",children:"Gestiona operaciones, clientes y equipo en un panel profesional disenado para administradores y barberos."})]}),O.jsxs("div",{className:"login-card",children:[O.jsxs("div",{className:"login-gallery",children:[O.jsx("div",{className:"login-gallery-top",children:uc.slice(0,2).map(N=>O.jsxs("figure",{children:[O.jsx("img",{src:N.src,alt:N.caption}),O.jsx("figcaption",{children:N.caption})]},N.caption))}),O.jsxs("figure",{children:[O.jsx("img",{src:uc[2].src,alt:uc[2].caption}),O.jsx("figcaption",{children:uc[2].caption})]})]}),O.jsxs("div",{className:"login-panel",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("h2",{children:"Inicia sesion"}),O.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automaticamente al modulo correspondiente segun tu rol."})]}),O.jsxs("form",{className:"login-form",onSubmit:U,children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),O.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:N=>e(N.target.value),type:"email",autoComplete:"email",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contrasena"}),O.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:N=>i(N.target.value),autoComplete:"current-password",required:!0})]}),c&&O.jsx("p",{className:"text-xs text-red-600",children:c}),O.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o||E,children:o?"Ingresando...":"Entrar"})]}),O.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[O.jsxs("p",{children:[O.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),O.jsxs("p",{children:[O.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galeria asignada."]}),O.jsxs("p",{children:["Soporte corporativo: ",O.jsx("span",{className:"font-semibold text-black/70",children:"soporte@barberia.dev"})]})]})]})]})]})})}const Qa="barberos",_f={displayName:"",email:"",role:"barbero"};function xx(){const{role:n,loading:e}=Qo(),t=!He,[i,o]=K.useState(()=>t?To():[]),[l,c]=K.useState(""),[d,p]=K.useState(!1),[y,_]=K.useState(!1),[E,A]=K.useState(_f),[U,N]=K.useState(null);K.useEffect(()=>{if(!He){o(To());return}(async()=>{const se=await mh(zc(Ni(He,Qa),I1("displayName")));o(se.docs.map(k=>({id:k.id,...k.data()})))})()},[He]);const M=l.trim().toLowerCase(),x=i.filter(ne=>{if(!M)return!0;const se=(ne.displayName||"").toLowerCase().includes(M),k=(ne.emailLower||ne.email?.toLowerCase()||"").includes(M);return se||k}),Q=ne=>{A(ne?{id:ne.id,displayName:ne.displayName||"",email:ne.email||"",role:ne.role||"barbero"}:_f),N(null),_(!0)},ee=async ne=>{ne.preventDefault();const se=E.displayName.trim(),k=E.email.trim();if(!se||!k){N("Nombre y correo son obligatorios.");return}const I=k.toLowerCase();p(!0),N(null);try{if(!He)E.id?Yv(E.id,{displayName:se,email:k,role:E.role}):U1({displayName:se,email:k,role:E.role}),o(To());else if(E.id)await Jf(Or(He,Qa,E.id),{displayName:se,email:k,emailLower:I,role:E.role}),o(S=>S.map(P=>P.id===E.id?{...P,displayName:se,email:k,emailLower:I,role:E.role}:P));else{const S=await im(Ni(He,Qa),{displayName:se,email:k,emailLower:I,role:E.role});o(P=>[{id:S.id,displayName:se,email:k,emailLower:I,role:E.role},...P])}_(!1),A(_f)}catch(S){console.error("No pudimos guardar el usuario",S),N("No pudimos guardar el usuario.")}finally{p(!1)}},te=async(ne,se)=>{if(!He){Yv(ne,{role:se}),o(To());return}await Jf(Or(He,Qa,ne),{role:se}),o(k=>k.map(I=>I.id===ne?{...I,role:se}:I))},ae=async ne=>{const se=i.find(S=>S.id===ne);if(!se||se.role!=="barbero"){window.alert("Solo puedes eliminar perfiles con rol barbero. Si necesitas quitar a un admin, cambia su rol primero.");return}const k=se.displayName||se.email||ne;if(window.confirm(`Seguro que deseas eliminar al barbero ${k}?`))try{He?(await BE(Or(He,Qa,ne)),o(S=>S.filter(P=>P.id!==ne))):(j1(ne),o(To()))}catch(S){console.error("No pudimos eliminar el usuario",S),alert("No pudimos eliminar el usuario.")}};return e?O.jsx("div",{className:"panel",children:"Cargando..."}):n!=="admin"?O.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta pagina."}):O.jsxs("div",{className:"panel space-y-6",children:[O.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),O.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Administracion de usuarios"}),O.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-2xl",children:"Agrega barberos, otorga permisos de administrador y manten actualizado el directorio interno."})]}),O.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.jsx("input",{className:"input w-60",placeholder:"Buscar",value:l,onChange:ne=>c(ne.target.value)}),O.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:()=>Q(),children:"Nuevo usuario"})]})]}),y&&O.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:ee,children:[O.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),O.jsx("input",{className:"input mt-1",value:E.displayName,onChange:ne=>A(se=>({...se,displayName:ne.target.value}))})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),O.jsx("input",{className:"input mt-1",value:E.email,onChange:ne=>A(se=>({...se,email:ne.target.value}))})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),O.jsxs("select",{className:"input mt-1",value:E.role,onChange:ne=>A(se=>({...se,role:ne.target.value})),children:[O.jsx("option",{value:"barbero",children:"barbero"}),O.jsx("option",{value:"admin",children:"admin"})]})]})]}),U&&O.jsx("p",{className:"text-xs text-red-500",children:U}),O.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),O.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>_(!1),children:"Cancelar"})]}),t&&O.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Datos de ejemplo: no requieren Firebase."})]}),O.jsxs("div",{className:"overflow-x-auto",children:[O.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[O.jsx("thead",{children:O.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[O.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre"}),O.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),O.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),O.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),O.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:x.map(ne=>O.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[O.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre",children:ne.displayName||"-"}),O.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:ne.email||"-"}),O.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:ne.role}),O.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:O.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[O.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:ne.role,onChange:se=>te(ne.id,se.target.value),children:[O.jsx("option",{value:"barbero",children:"barbero"}),O.jsx("option",{value:"admin",children:"admin"})]}),O.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Q(ne),children:"Editar"}),ne.role==="barbero"&&O.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>void ae(ne.id),children:"Eliminar"})]})})]},ne.id))})]}),!x.length&&O.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),O.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Nota: la creacion de usuarios (Auth) se hace desde Firebase console; aqui administras los perfiles y roles."})]})}function wf({children:n}){const{role:e,logout:t,user:i,profileName:o}=Qo(),l=e?e.charAt(0).toUpperCase()+e.slice(1):null,c=o||i?.displayName||i?.email||l||"Perfil",d=Tl(),[p,y]=K.useState(!1),_=({isActive:M})=>`nav-pill${M?" active":""}`,E=e==="admin"?"/admin/usuarios":"/clientes",A=async()=>{await t(),d("/login"),y(!1)},U=()=>y(!1),N=()=>y(M=>!M);return O.jsxs("div",{className:"app-shell",children:[O.jsx("nav",{className:"navbar",children:O.jsxs("div",{className:"inner",children:[O.jsxs("div",{className:"navbar-heading",children:[O.jsx(sp,{to:E,className:"brand",onClick:U,children:"Barberia Prueba"}),O.jsxs("button",{type:"button",className:"navbar-toggle",onClick:N,"aria-expanded":p,"aria-controls":"primary-nav",children:[O.jsx("span",{className:"sr-only",children:"Abrir menu"}),O.jsx("span",{className:"line"}),O.jsx("span",{className:"line"}),O.jsx("span",{className:"line"})]})]}),O.jsxs("div",{id:"primary-nav",className:`nav-links${p?" open":""}`,children:[O.jsx(Ny,{to:"/clientes",className:_,onClick:U,children:"Clientes"}),e==="admin"&&O.jsx(Ny,{to:"/admin/usuarios",className:_,onClick:U,children:"Dashboard"}),i&&O.jsx("span",{className:"nav-pill",children:c}),i&&O.jsx("button",{type:"button",className:"nav-pill",onClick:A,children:"Salir"})]})]})}),O.jsx("main",{className:"page-container",children:n})]})}function bx(){return O.jsx(H1,{children:O.jsxs(II,{children:[O.jsx(vo,{path:"/",element:O.jsx(If,{to:"/clientes",replace:!0})}),O.jsx(vo,{path:"/login",element:O.jsx(Nx,{})}),O.jsx(vo,{path:"/clientes",element:O.jsx(pf,{children:O.jsx(wf,{children:O.jsx(G1,{})})})}),O.jsx(vo,{path:"/clientes/:id",element:O.jsx(pf,{children:O.jsx(wf,{children:O.jsx(Px,{})})})}),O.jsx(vo,{path:"/admin/usuarios",element:O.jsx(pf,{allowedRoles:["admin"],children:O.jsx(wf,{children:O.jsx(xx,{})})})})]})})}OT.createRoot(document.getElementById("root")).render(O.jsx(w_.StrictMode,{children:O.jsx(xI,{children:O.jsx(bx,{})})}));
