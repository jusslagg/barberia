function JT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Fv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uf={exports:{}},Ya={},cf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function YT(){if(xy)return xe;xy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=E&&x[E]||x["@@iterator"],typeof x=="function"?x:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,U={};function R(x,H,de){this.props=x,this.context=H,this.refs=U,this.updater=de||F}R.prototype.isReactComponent={},R.prototype.setState=function(x,H){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,H,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Y(){}Y.prototype=R.prototype;function Z(x,H,de){this.props=x,this.context=H,this.refs=U,this.updater=de||F}var X=Z.prototype=new Y;X.constructor=Z,P(X,R.prototype),X.isPureReactComponent=!0;var ie=Array.isArray,K=Object.prototype.hasOwnProperty,ee={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(x,H,de){var _e,ve={},Pe=null,be=null;if(H!=null)for(_e in H.ref!==void 0&&(be=H.ref),H.key!==void 0&&(Pe=""+H.key),H)K.call(H,_e)&&!N.hasOwnProperty(_e)&&(ve[_e]=H[_e]);var Ue=arguments.length-2;if(Ue===1)ve.children=de;else if(1<Ue){for(var We=Array(Ue),Xe=0;Xe<Ue;Xe++)We[Xe]=arguments[Xe+2];ve.children=We}if(x&&x.defaultProps)for(_e in Ue=x.defaultProps,Ue)ve[_e]===void 0&&(ve[_e]=Ue[_e]);return{$$typeof:n,type:x,key:Pe,ref:be,props:ve,_owner:ee.current}}function C(x,H){return{$$typeof:n,type:x.type,key:H,ref:x.ref,props:x.props,_owner:x._owner}}function O(x){return typeof x=="object"&&x!==null&&x.$$typeof===n}function V(x){var H={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(de){return H[de]})}var L=/\/+/g;function A(x,H){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):H.toString(36)}function ke(x,H,de,_e,ve){var Pe=typeof x;(Pe==="undefined"||Pe==="boolean")&&(x=null);var be=!1;if(x===null)be=!0;else switch(Pe){case"string":case"number":be=!0;break;case"object":switch(x.$$typeof){case n:case e:be=!0}}if(be)return be=x,ve=ve(be),x=_e===""?"."+A(be,0):_e,ie(ve)?(de="",x!=null&&(de=x.replace(L,"$&/")+"/"),ke(ve,H,de,"",function(Xe){return Xe})):ve!=null&&(O(ve)&&(ve=C(ve,de+(!ve.key||be&&be.key===ve.key?"":(""+ve.key).replace(L,"$&/")+"/")+x)),H.push(ve)),1;if(be=0,_e=_e===""?".":_e+":",ie(x))for(var Ue=0;Ue<x.length;Ue++){Pe=x[Ue];var We=_e+A(Pe,Ue);be+=ke(Pe,H,de,We,ve)}else if(We=S(x),typeof We=="function")for(x=We.call(x),Ue=0;!(Pe=x.next()).done;)Pe=Pe.value,We=_e+A(Pe,Ue++),be+=ke(Pe,H,de,We,ve);else if(Pe==="object")throw H=String(x),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return be}function Qe(x,H,de){if(x==null)return x;var _e=[],ve=0;return ke(x,_e,"","",function(Pe){return H.call(de,Pe,ve++)}),_e}function Fe(x){if(x._status===-1){var H=x._result;H=H(),H.then(function(de){(x._status===0||x._status===-1)&&(x._status=1,x._result=de)},function(de){(x._status===0||x._status===-1)&&(x._status=2,x._result=de)}),x._status===-1&&(x._status=0,x._result=H)}if(x._status===1)return x._result.default;throw x._result}var Le={current:null},ae={transition:null},te={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ee};function J(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Qe,forEach:function(x,H,de){Qe(x,function(){H.apply(this,arguments)},de)},count:function(x){var H=0;return Qe(x,function(){H++}),H},toArray:function(x){return Qe(x,function(H){return H})||[]},only:function(x){if(!O(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},xe.Component=R,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=Z,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,xe.act=J,xe.cloneElement=function(x,H,de){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var _e=P({},x.props),ve=x.key,Pe=x.ref,be=x._owner;if(H!=null){if(H.ref!==void 0&&(Pe=H.ref,be=ee.current),H.key!==void 0&&(ve=""+H.key),x.type&&x.type.defaultProps)var Ue=x.type.defaultProps;for(We in H)K.call(H,We)&&!N.hasOwnProperty(We)&&(_e[We]=H[We]===void 0&&Ue!==void 0?Ue[We]:H[We])}var We=arguments.length-2;if(We===1)_e.children=de;else if(1<We){Ue=Array(We);for(var Xe=0;Xe<We;Xe++)Ue[Xe]=arguments[Xe+2];_e.children=Ue}return{$$typeof:n,type:x.type,key:ve,ref:Pe,props:_e,_owner:be}},xe.createContext=function(x){return x={$$typeof:u,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:a,_context:x},x.Consumer=x},xe.createElement=I,xe.createFactory=function(x){var H=I.bind(null,x);return H.type=x,H},xe.createRef=function(){return{current:null}},xe.forwardRef=function(x){return{$$typeof:d,render:x}},xe.isValidElement=O,xe.lazy=function(x){return{$$typeof:v,_payload:{_status:-1,_result:x},_init:Fe}},xe.memo=function(x,H){return{$$typeof:y,type:x,compare:H===void 0?null:H}},xe.startTransition=function(x){var H=ae.transition;ae.transition={};try{x()}finally{ae.transition=H}},xe.unstable_act=J,xe.useCallback=function(x,H){return Le.current.useCallback(x,H)},xe.useContext=function(x){return Le.current.useContext(x)},xe.useDebugValue=function(){},xe.useDeferredValue=function(x){return Le.current.useDeferredValue(x)},xe.useEffect=function(x,H){return Le.current.useEffect(x,H)},xe.useId=function(){return Le.current.useId()},xe.useImperativeHandle=function(x,H,de){return Le.current.useImperativeHandle(x,H,de)},xe.useInsertionEffect=function(x,H){return Le.current.useInsertionEffect(x,H)},xe.useLayoutEffect=function(x,H){return Le.current.useLayoutEffect(x,H)},xe.useMemo=function(x,H){return Le.current.useMemo(x,H)},xe.useReducer=function(x,H,de){return Le.current.useReducer(x,H,de)},xe.useRef=function(x){return Le.current.useRef(x)},xe.useState=function(x){return Le.current.useState(x)},xe.useSyncExternalStore=function(x,H,de){return Le.current.useSyncExternalStore(x,H,de)},xe.useTransition=function(){return Le.current.useTransition()},xe.version="18.3.1",xe}var by;function vp(){return by||(by=1,cf.exports=YT()),cf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function XT(){if(Oy)return Ya;Oy=1;var n=vp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,y){var v,E={},S=null,F=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(F=p.ref);for(v in p)i.call(p,v)&&!a.hasOwnProperty(v)&&(E[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)E[v]===void 0&&(E[v]=p[v]);return{$$typeof:e,type:d,key:S,ref:F,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=u,Ya.jsxs=u,Ya}var Dy;function ZT(){return Dy||(Dy=1,uf.exports=XT()),uf.exports}var b=ZT(),G=vp();const Uv=Fv(G),eI=JT({__proto__:null,default:Uv},[G]);var hc={},hf={exports:{}},sn={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function tI(){return Ly||(Ly=1,(function(n){function e(ae,te){var J=ae.length;ae.push(te);e:for(;0<J;){var x=J-1>>>1,H=ae[x];if(0<o(H,te))ae[x]=te,ae[J]=H,J=x;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var te=ae[0],J=ae.pop();if(J!==te){ae[0]=J;e:for(var x=0,H=ae.length,de=H>>>1;x<de;){var _e=2*(x+1)-1,ve=ae[_e],Pe=_e+1,be=ae[Pe];if(0>o(ve,J))Pe<H&&0>o(be,ve)?(ae[x]=be,ae[Pe]=J,x=Pe):(ae[x]=ve,ae[_e]=J,x=_e);else if(Pe<H&&0>o(be,J))ae[x]=be,ae[Pe]=J,x=Pe;else break e}}return te}function o(ae,te){var J=ae.sortIndex-te.sortIndex;return J!==0?J:ae.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],y=[],v=1,E=null,S=3,F=!1,P=!1,U=!1,R=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(ae){for(var te=t(y);te!==null;){if(te.callback===null)i(y);else if(te.startTime<=ae)i(y),te.sortIndex=te.expirationTime,e(p,te);else break;te=t(y)}}function ie(ae){if(U=!1,X(ae),!P)if(t(p)!==null)P=!0,Fe(K);else{var te=t(y);te!==null&&Le(ie,te.startTime-ae)}}function K(ae,te){P=!1,U&&(U=!1,Y(I),I=-1),F=!0;var J=S;try{for(X(te),E=t(p);E!==null&&(!(E.expirationTime>te)||ae&&!V());){var x=E.callback;if(typeof x=="function"){E.callback=null,S=E.priorityLevel;var H=x(E.expirationTime<=te);te=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(p)&&i(p),X(te)}else i(p);E=t(p)}if(E!==null)var de=!0;else{var _e=t(y);_e!==null&&Le(ie,_e.startTime-te),de=!1}return de}finally{E=null,S=J,F=!1}}var ee=!1,N=null,I=-1,C=5,O=-1;function V(){return!(n.unstable_now()-O<C)}function L(){if(N!==null){var ae=n.unstable_now();O=ae;var te=!0;try{te=N(!0,ae)}finally{te?A():(ee=!1,N=null)}}else ee=!1}var A;if(typeof Z=="function")A=function(){Z(L)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Qe=ke.port2;ke.port1.onmessage=L,A=function(){Qe.postMessage(null)}}else A=function(){R(L,0)};function Fe(ae){N=ae,ee||(ee=!0,A())}function Le(ae,te){I=R(function(){ae(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){P||F||(P=!0,Fe(K))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var te=3;break;default:te=S}var J=S;S=te;try{return ae()}finally{S=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var J=S;S=ae;try{return te()}finally{S=J}},n.unstable_scheduleCallback=function(ae,te,J){var x=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?x+J:x):J=x,ae){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=J+H,ae={id:v++,callback:te,priorityLevel:ae,startTime:J,expirationTime:H,sortIndex:-1},J>x?(ae.sortIndex=J,e(y,ae),t(p)===null&&ae===t(y)&&(U?(Y(I),I=-1):U=!0,Le(ie,J-x))):(ae.sortIndex=H,e(p,ae),P||F||(P=!0,Fe(K))),ae},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ae){var te=S;return function(){var J=S;S=te;try{return ae.apply(this,arguments)}finally{S=J}}}})(ff)),ff}var Vy;function nI(){return Vy||(Vy=1,df.exports=tI()),df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function rI(){if(My)return sn;My=1;var n=vp(),e=nI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(r){return p.call(E,r)?!0:p.call(v,r)?!1:y.test(r)?E[r]=!0:(v[r]=!0,!1)}function F(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,s,l,h){if(s===null||typeof s>"u"||F(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,l,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){R[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];R[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){R[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){R[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){R[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){R[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){R[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){R[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){R[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Y,Z);R[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Y,Z);R[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Y,Z);R[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){R[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),R.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){R[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,l,h){var f=R.hasOwnProperty(s)?R[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ee=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Qe=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),ae=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,x;function H(r){if(x===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);x=s&&s[1]||""}return`
`+x+r}var de=!1;function _e(r,s){if(!r||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,k=g.length-1;1<=w&&0<=k&&f[w]!==g[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==g[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==g[k]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=k);break}}}finally{de=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?H(r):""}function ve(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=_e(r.type,!1),r;case 11:return r=_e(r.type.render,!1),r;case 1:return r=_e(r.type,!0),r;default:return""}}function Pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case ee:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case ke:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Qe:return s=r.displayName||null,s!==null?s:Pe(r.type)||"Memo";case Fe:s=r._payload,r=r._init;try{return Pe(r(s))}catch{}}return null}function be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xe(r){var s=We(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function wn(r){r._valueTracker||(r._valueTracker=Xe(r))}function Os(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=We(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Yr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function zi(r,s){var l=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ds(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ue(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ra(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ia(r,s){ra(r,s);var l=Ue(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ls(r,s.type,l):s.hasOwnProperty("defaultValue")&&Ls(r,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Jl(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ls(r,s,l){(s!=="number"||Yr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var vr=Array.isArray;function wr(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Ue(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function sa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Vs(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(vr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Ue(l)}}function Ms(r,s){var l=Ue(s.value),h=Ue(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function oa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Er,aa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Er.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Xr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qi=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(r){qi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),$i[s]=$i[r]})});function la(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||$i.hasOwnProperty(r)&&$i[r]?(""+s).trim():s+"px"}function ua(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=la(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ca=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(r,s){if(s){if(ca[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function Fs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Us=null,En=null,Yn=null;function js(r){if(r=Va(r)){if(typeof Us!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Au(s),Us(r.stateNode,r.type,s))}}function Xn(r){En?Yn?Yn.push(r):Yn=[r]:En=r}function fa(){if(En){var r=En,s=Yn;if(Yn=En=null,js(r),s)for(r=0;r<s.length;r++)js(s[r])}}function Hi(r,s){return r(s)}function pa(){}var Tr=!1;function ma(r,s,l){if(Tr)return r(s,l);Tr=!0;try{return Hi(r,s,l)}finally{Tr=!1,(En!==null||Yn!==null)&&(pa(),fa())}}function ct(r,s){var l=r.stateNode;if(l===null)return null;var h=Au(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Bs=!1;if(d)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Bs=!1}function Ki(r,s,l,h,f,g,w,k,D){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(re){this.onError(re)}}var Gi=!1,zs=null,On=!1,ga=null,Vh={onError:function(r){Gi=!0,zs=r}};function $s(r,s,l,h,f,g,w,k,D){Gi=!1,zs=null,Ki.apply(Vh,arguments)}function Yl(r,s,l,h,f,g,w,k,D){if($s.apply(this,arguments),Gi){if(Gi){var $=zs;Gi=!1,zs=null}else throw Error(t(198));On||(On=!0,ga=$)}}function Dn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Qi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ln(r){if(Dn(r)!==r)throw Error(t(188))}function Xl(r){var s=r.alternate;if(!s){if(s=Dn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Ln(f),r;if(g===h)return Ln(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var w=!1,k=f.child;k;){if(k===l){w=!0,l=f,h=g;break}if(k===h){w=!0,h=f,l=g;break}k=k.sibling}if(!w){for(k=g.child;k;){if(k===l){w=!0,l=g,h=f;break}if(k===h){w=!0,h=g,l=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ya(r){return r=Xl(r),r!==null?qs(r):null}function qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=qs(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,_a=e.unstable_cancelCallback,Zl=e.unstable_shouldYield,Mh=e.unstable_requestPaint,Je=e.unstable_now,eu=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,va=e.unstable_LowPriority,tu=e.unstable_IdlePriority,Yi=null,hn=null;function nu(r){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Yi,r,void 0,(r.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:iu,wa=Math.log,ru=Math.LN2;function iu(r){return r>>>=0,r===0?32:31-(wa(r)/ru|0)|0}var Hs=64,Ks=4194304;function ei(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Xi(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=l&268435455;if(w!==0){var k=w&~f;k!==0?h=ei(k):(g&=w,g!==0&&(h=ei(g)))}else w=l&~f,w!==0?h=ei(w):g!==0&&(h=ei(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Kt(s),f=1<<l,h|=r[l],s&=~f;return h}function Fh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Kt(g),k=1<<w,D=f[w];D===-1?((k&l)===0||(k&h)!==0)&&(f[w]=Fh(k,s)):D<=s&&(r.expiredLanes|=k),g&=~k}}function dn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Zi(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function ti(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function ni(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Kt(s),r[s]=l}function Ge(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Kt(l),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~g}}function ri(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Kt(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Ve=0;function ii(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var su,Gs,ou,au,lu,Ea=!1,Zn=[],Pt=null,Vn=null,Mn=null,si=new Map,In=new Map,er=[],Uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(r,s){switch(r){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":si.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(s.pointerId)}}function Yt(r,s,l,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Va(s),s!==null&&Gs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function jh(r,s,l,h,f){switch(s){case"focusin":return Pt=Yt(Pt,r,s,l,h,f),!0;case"dragenter":return Vn=Yt(Vn,r,s,l,h,f),!0;case"mouseover":return Mn=Yt(Mn,r,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return si.set(g,Yt(si.get(g)||null,r,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,In.set(g,Yt(In.get(g)||null,r,s,l,h,f)),!0}return!1}function cu(r){var s=is(r.target);if(s!==null){var l=Dn(s);if(l!==null){if(s=l.tag,s===13){if(s=Qi(l),s!==null){r.blockedOn=s,lu(r.priority,function(){ou(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Wi=h,l.target.dispatchEvent(h),Wi=null}else return s=Va(l),s!==null&&Gs(s),r.blockedOn=l,!1;s.shift()}return!0}function es(r,s,l){Sr(r)&&l.delete(s)}function hu(){Ea=!1,Pt!==null&&Sr(Pt)&&(Pt=null),Vn!==null&&Sr(Vn)&&(Vn=null),Mn!==null&&Sr(Mn)&&(Mn=null),si.forEach(es),In.forEach(es)}function Fn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hu)))}function Un(r){function s(f){return Fn(f,r)}if(0<Zn.length){Fn(Zn[0],r);for(var l=1;l<Zn.length;l++){var h=Zn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Pt!==null&&Fn(Pt,r),Vn!==null&&Fn(Vn,r),Mn!==null&&Fn(Mn,r),si.forEach(s),In.forEach(s),l=0;l<er.length;l++)h=er[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<er.length&&(l=er[0],l.blockedOn===null);)cu(l),l.blockedOn===null&&er.shift()}var Rr=ie.ReactCurrentBatchConfig,oi=!0;function nt(r,s,l,h){var f=Ve,g=Rr.transition;Rr.transition=null;try{Ve=1,Ta(r,s,l,h)}finally{Ve=f,Rr.transition=g}}function Bh(r,s,l,h){var f=Ve,g=Rr.transition;Rr.transition=null;try{Ve=4,Ta(r,s,l,h)}finally{Ve=f,Rr.transition=g}}function Ta(r,s,l,h){if(oi){var f=Qs(r,s,l,h);if(f===null)Xh(r,s,h,ts,l),uu(r,h);else if(jh(f,r,s,l,h))h.stopPropagation();else if(uu(r,h),s&4&&-1<Uh.indexOf(r)){for(;f!==null;){var g=Va(f);if(g!==null&&su(g),g=Qs(r,s,l,h),g===null&&Xh(r,s,h,ts,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else Xh(r,s,h,null,l)}}var ts=null;function Qs(r,s,l,h){if(ts=null,r=Fs(h),r=is(r),r!==null)if(s=Dn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Qi(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return ts=r,null}function Ia(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eu()){case Ji:return 1;case Zr:return 4;case Tn:case va:return 16;case tu:return 536870912;default:return 16}default:return 16}}var fn=null,Js=null,Xt=null;function Sa(){if(Xt)return Xt;var r,s=Js,l=s.length,h,f="value"in fn?fn.value:fn.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(h=1;h<=w&&s[l-h]===f[g-h];h++);return Xt=f.slice(r,1<h?1-h:void 0)}function Ys(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function tr(){return!0}function Ra(){return!1}function Nt(r){function s(l,h,f,g,w){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?tr:Ra,this.isPropagationStopped=Ra,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Nt(jn),nr=J({},jn,{view:0,detail:0}),zh=Nt(nr),Zs,Ar,ai,ns=J({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(Zs=r.screenX-ai.screenX,Ar=r.screenY-ai.screenY):Ar=Zs=0,ai=r),Zs)},movementY:function(r){return"movementY"in r?r.movementY:Ar}}),eo=Nt(ns),Aa=J({},ns,{dataTransfer:0}),du=Nt(Aa),to=J({},nr,{relatedTarget:0}),no=Nt(to),fu=J({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Cr=Nt(fu),pu=J({},jn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mu=Nt(pu),gu=J({},jn,{data:0}),Ca=Nt(gu),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=yu[r])?!!s[r]:!1}function rr(){return _u}var c=J({},nr,{key:function(r){if(r.key){var s=ro[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(r){return r.type==="keypress"?Ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Nt(c),_=J({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(_),j=J({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),W=Nt(j),ue=J({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Nt(ue),wt=J({},ns,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Nt(wt),St=[9,13,27,32],ft=d&&"CompositionEvent"in window,Sn=null;d&&"documentMode"in document&&(Sn=document.documentMode);var pn=d&&"TextEvent"in window&&!Sn,rs=d&&(!ft||Sn&&8<Sn&&11>=Sn),io=" ",Rm=!1;function Am(r,s){switch(r){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function K0(r,s){switch(r){case"compositionend":return Cm(s);case"keypress":return s.which!==32?null:(Rm=!0,io);case"textInput":return r=s.data,r===io&&Rm?null:r;default:return null}}function G0(r,s){if(so)return r==="compositionend"||!ft&&Am(r,s)?(r=Sa(),Xt=Js=fn=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rs&&s.locale!=="ko"?null:s.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function km(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Q0[r.type]:s==="textarea"}function Pm(r,s,l,h){Xn(h),s=Iu(s,"onChange"),0<s.length&&(l=new Xs("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ka=null,Pa=null;function J0(r){Km(r,0)}function vu(r){var s=co(r);if(Os(s))return r}function Y0(r,s){if(r==="change")return s}var Nm=!1;if(d){var $h;if(d){var qh="oninput"in document;if(!qh){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),qh=typeof xm.oninput=="function"}$h=qh}else $h=!1;Nm=$h&&(!document.documentMode||9<document.documentMode)}function bm(){ka&&(ka.detachEvent("onpropertychange",Om),Pa=ka=null)}function Om(r){if(r.propertyName==="value"&&vu(Pa)){var s=[];Pm(s,Pa,r,Fs(r)),ma(J0,s)}}function X0(r,s,l){r==="focusin"?(bm(),ka=s,Pa=l,ka.attachEvent("onpropertychange",Om)):r==="focusout"&&bm()}function Z0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Pa)}function eT(r,s){if(r==="click")return vu(s)}function tT(r,s){if(r==="input"||r==="change")return vu(s)}function nT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Bn=typeof Object.is=="function"?Object.is:nT;function Na(r,s){if(Bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Bn(r[f],s[f]))return!1}return!0}function Dm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lm(r,s){var l=Dm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dm(l)}}function Vm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Vm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Mm(){for(var r=window,s=Yr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Yr(r.document)}return s}function Wh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function rT(r){var s=Mm(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Vm(l.ownerDocument.documentElement,l)){if(h!==null&&Wh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Lm(l,g);var w=Lm(l,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var iT=d&&"documentMode"in document&&11>=document.documentMode,oo=null,Hh=null,xa=null,Kh=!1;function Fm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kh||oo==null||oo!==Yr(h)||(h=oo,"selectionStart"in h&&Wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xa&&Na(xa,h)||(xa=h,h=Iu(Hh,"onSelect"),0<h.length&&(s=new Xs("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=oo)))}function wu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ao={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Gh={},Um={};d&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Eu(r){if(Gh[r])return Gh[r];if(!ao[r])return r;var s=ao[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Um)return Gh[r]=s[l];return r}var jm=Eu("animationend"),Bm=Eu("animationiteration"),zm=Eu("animationstart"),$m=Eu("transitionend"),qm=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(r,s){qm.set(r,s),a(s,[r])}for(var Qh=0;Qh<Wm.length;Qh++){var Jh=Wm[Qh],sT=Jh.toLowerCase(),oT=Jh[0].toUpperCase()+Jh.slice(1);li(sT,"on"+oT)}li(jm,"onAnimationEnd"),li(Bm,"onAnimationIteration"),li(zm,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li($m,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Hm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Yl(h,s,void 0,r),r.currentTarget=null}function Km(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var k=h[w],D=k.instance,$=k.currentTarget;if(k=k.listener,D!==g&&f.isPropagationStopped())break e;Hm(f,k,$),g=D}else for(w=0;w<h.length;w++){if(k=h[w],D=k.instance,$=k.currentTarget,k=k.listener,D!==g&&f.isPropagationStopped())break e;Hm(f,k,$),g=D}}}if(On)throw r=ga,On=!1,ga=null,r}function Ze(r,s){var l=s[id];l===void 0&&(l=s[id]=new Set);var h=r+"__bubble";l.has(h)||(Gm(s,r,2,!1),l.add(h))}function Yh(r,s,l){var h=0;s&&(h|=4),Gm(l,r,h,s)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Oa(r){if(!r[Tu]){r[Tu]=!0,i.forEach(function(l){l!=="selectionchange"&&(aT.has(l)||Yh(l,!1,r),Yh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Tu]||(s[Tu]=!0,Yh("selectionchange",!1,s))}}function Gm(r,s,l,h){switch(Ia(s)){case 1:var f=nt;break;case 4:f=Bh;break;default:f=Ta}l=f.bind(null,s,l,r),f=void 0,!Bs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Xh(r,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;k!==null;){if(w=is(k),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}k=k.parentNode}}h=h.return}ma(function(){var $=g,re=Fs(l),oe=[];e:{var ne=qm.get(r);if(ne!==void 0){var he=Xs,pe=r;switch(r){case"keypress":if(Ys(l)===0)break e;case"keydown":case"keyup":he=m;break;case"focusin":pe="focus",he=no;break;case"focusout":pe="blur",he=no;break;case"beforeblur":case"afterblur":he=no;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=W;break;case jm:case Bm:case zm:he=Cr;break;case $m:he=He;break;case"scroll":he=zh;break;case"wheel":he=je;break;case"copy":case"cut":case"paste":he=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=T}var me=(s&4)!==0,ht=!me&&r==="scroll",B=me?ne!==null?ne+"Capture":null:ne;me=[];for(var M=$,z;M!==null;){z=M;var le=z.stateNode;if(z.tag===5&&le!==null&&(z=le,B!==null&&(le=ct(M,B),le!=null&&me.push(Da(M,le,z)))),ht)break;M=M.return}0<me.length&&(ne=new he(ne,pe,null,l,re),oe.push({event:ne,listeners:me}))}}if((s&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",ne&&l!==Wi&&(pe=l.relatedTarget||l.fromElement)&&(is(pe)||pe[kr]))break e;if((he||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,he?(pe=l.relatedTarget||l.toElement,he=$,pe=pe?is(pe):null,pe!==null&&(ht=Dn(pe),pe!==ht||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(he=null,pe=$),he!==pe)){if(me=eo,le="onMouseLeave",B="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(me=T,le="onPointerLeave",B="onPointerEnter",M="pointer"),ht=he==null?ne:co(he),z=pe==null?ne:co(pe),ne=new me(le,M+"leave",he,l,re),ne.target=ht,ne.relatedTarget=z,le=null,is(re)===$&&(me=new me(B,M+"enter",pe,l,re),me.target=z,me.relatedTarget=ht,le=me),ht=le,he&&pe)t:{for(me=he,B=pe,M=0,z=me;z;z=lo(z))M++;for(z=0,le=B;le;le=lo(le))z++;for(;0<M-z;)me=lo(me),M--;for(;0<z-M;)B=lo(B),z--;for(;M--;){if(me===B||B!==null&&me===B.alternate)break t;me=lo(me),B=lo(B)}me=null}else me=null;he!==null&&Qm(oe,ne,he,me,!1),pe!==null&&ht!==null&&Qm(oe,ht,pe,me,!0)}}e:{if(ne=$?co($):window,he=ne.nodeName&&ne.nodeName.toLowerCase(),he==="select"||he==="input"&&ne.type==="file")var ye=Y0;else if(km(ne))if(Nm)ye=tT;else{ye=Z0;var Ee=X0}else(he=ne.nodeName)&&he.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(ye=eT);if(ye&&(ye=ye(r,$))){Pm(oe,ye,l,re);break e}Ee&&Ee(r,ne,$),r==="focusout"&&(Ee=ne._wrapperState)&&Ee.controlled&&ne.type==="number"&&Ls(ne,"number",ne.value)}switch(Ee=$?co($):window,r){case"focusin":(km(Ee)||Ee.contentEditable==="true")&&(oo=Ee,Hh=$,xa=null);break;case"focusout":xa=Hh=oo=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Fm(oe,l,re);break;case"selectionchange":if(iT)break;case"keydown":case"keyup":Fm(oe,l,re)}var Te;if(ft)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else so?Am(r,l)&&(Se="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(rs&&l.locale!=="ko"&&(so||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&so&&(Te=Sa()):(fn=re,Js="value"in fn?fn.value:fn.textContent,so=!0)),Ee=Iu($,Se),0<Ee.length&&(Se=new Ca(Se,r,null,l,re),oe.push({event:Se,listeners:Ee}),Te?Se.data=Te:(Te=Cm(l),Te!==null&&(Se.data=Te)))),(Te=pn?K0(r,l):G0(r,l))&&($=Iu($,"onBeforeInput"),0<$.length&&(re=new Ca("onBeforeInput","beforeinput",null,l,re),oe.push({event:re,listeners:$}),re.data=Te))}Km(oe,s)})}function Da(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Iu(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ct(r,l),g!=null&&h.unshift(Da(r,g,f)),g=ct(r,s),g!=null&&h.push(Da(r,g,f))),r=r.return}return h}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qm(r,s,l,h,f){for(var g=s._reactName,w=[];l!==null&&l!==h;){var k=l,D=k.alternate,$=k.stateNode;if(D!==null&&D===h)break;k.tag===5&&$!==null&&(k=$,f?(D=ct(l,g),D!=null&&w.unshift(Da(l,D,k))):f||(D=ct(l,g),D!=null&&w.push(Da(l,D,k)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var lT=/\r\n?/g,uT=/\u0000|\uFFFD/g;function Jm(r){return(typeof r=="string"?r:""+r).replace(lT,`
`).replace(uT,"")}function Su(r,s,l){if(s=Jm(s),Jm(r)!==s&&l)throw Error(t(425))}function Ru(){}var Zh=null,ed=null;function td(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,hT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(r){return Ym.resolve(null).then(r).catch(dT)}:nd;function dT(r){setTimeout(function(){throw r})}function rd(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Un(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Un(s)}function ui(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Xm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var uo=Math.random().toString(36).slice(2),ir="__reactFiber$"+uo,La="__reactProps$"+uo,kr="__reactContainer$"+uo,id="__reactEvents$"+uo,fT="__reactListeners$"+uo,pT="__reactHandles$"+uo;function is(r){var s=r[ir];if(s)return s;for(var l=r.parentNode;l;){if(s=l[kr]||l[ir]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Xm(r);r!==null;){if(l=r[ir])return l;r=Xm(r)}return s}r=l,l=r.parentNode}return null}function Va(r){return r=r[ir]||r[kr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Au(r){return r[La]||null}var sd=[],ho=-1;function ci(r){return{current:r}}function et(r){0>ho||(r.current=sd[ho],sd[ho]=null,ho--)}function Ye(r,s){ho++,sd[ho]=r.current,r.current=s}var hi={},Mt=ci(hi),Zt=ci(!1),ss=hi;function fo(r,s){var l=r.type.contextTypes;if(!l)return hi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function Cu(){et(Zt),et(Mt)}function Zm(r,s,l){if(Mt.current!==hi)throw Error(t(168));Ye(Mt,s),Ye(Zt,l)}function eg(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,be(r)||"Unknown",f));return J({},l,h)}function ku(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hi,ss=Mt.current,Ye(Mt,r),Ye(Zt,Zt.current),!0}function tg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=eg(r,s,ss),h.__reactInternalMemoizedMergedChildContext=r,et(Zt),et(Mt),Ye(Mt,r)):et(Zt),Ye(Zt,l)}var Pr=null,Pu=!1,od=!1;function ng(r){Pr===null?Pr=[r]:Pr.push(r)}function mT(r){Pu=!0,ng(r)}function di(){if(!od&&Pr!==null){od=!0;var r=0,s=Ve;try{var l=Pr;for(Ve=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Pr=null,Pu=!1}catch(f){throw Pr!==null&&(Pr=Pr.slice(r+1)),Ws(Ji,di),f}finally{Ve=s,od=!1}}return null}var po=[],mo=0,Nu=null,xu=0,Rn=[],An=0,os=null,Nr=1,xr="";function as(r,s){po[mo++]=xu,po[mo++]=Nu,Nu=r,xu=s}function rg(r,s,l){Rn[An++]=Nr,Rn[An++]=xr,Rn[An++]=os,os=r;var h=Nr;r=xr;var f=32-Kt(h)-1;h&=~(1<<f),l+=1;var g=32-Kt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Nr=1<<32-Kt(s)+f|l<<f|h,xr=g+r}else Nr=1<<g|l<<f|h,xr=r}function ad(r){r.return!==null&&(as(r,1),rg(r,1,0))}function ld(r){for(;r===Nu;)Nu=po[--mo],po[mo]=null,xu=po[--mo],po[mo]=null;for(;r===os;)os=Rn[--An],Rn[An]=null,xr=Rn[--An],Rn[An]=null,Nr=Rn[--An],Rn[An]=null}var mn=null,gn=null,rt=!1,zn=null;function ig(r,s){var l=Nn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function sg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,mn=r,gn=ui(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,mn=r,gn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=os!==null?{id:Nr,overflow:xr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Nn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,mn=r,gn=null,!0):!1;default:return!1}}function ud(r){return(r.mode&1)!==0&&(r.flags&128)===0}function cd(r){if(rt){var s=gn;if(s){var l=s;if(!sg(r,s)){if(ud(r))throw Error(t(418));s=ui(l.nextSibling);var h=mn;s&&sg(r,s)?ig(h,l):(r.flags=r.flags&-4097|2,rt=!1,mn=r)}}else{if(ud(r))throw Error(t(418));r.flags=r.flags&-4097|2,rt=!1,mn=r}}}function og(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mn=r}function bu(r){if(r!==mn)return!1;if(!rt)return og(r),rt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!td(r.type,r.memoizedProps)),s&&(s=gn)){if(ud(r))throw ag(),Error(t(418));for(;s;)ig(r,s),s=ui(s.nextSibling)}if(og(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){gn=ui(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}gn=null}}else gn=mn?ui(r.stateNode.nextSibling):null;return!0}function ag(){for(var r=gn;r;)r=ui(r.nextSibling)}function go(){gn=mn=null,rt=!1}function hd(r){zn===null?zn=[r]:zn.push(r)}var gT=ie.ReactCurrentBatchConfig;function Ma(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var k=f.refs;w===null?delete k[g]:k[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Ou(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function lg(r){var s=r._init;return s(r._payload)}function ug(r){function s(B,M){if(r){var z=B.deletions;z===null?(B.deletions=[M],B.flags|=16):z.push(M)}}function l(B,M){if(!r)return null;for(;M!==null;)s(B,M),M=M.sibling;return null}function h(B,M){for(B=new Map;M!==null;)M.key!==null?B.set(M.key,M):B.set(M.index,M),M=M.sibling;return B}function f(B,M){return B=wi(B,M),B.index=0,B.sibling=null,B}function g(B,M,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<M?(B.flags|=2,M):z):(B.flags|=2,M)):(B.flags|=1048576,M)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function k(B,M,z,le){return M===null||M.tag!==6?(M=nf(z,B.mode,le),M.return=B,M):(M=f(M,z),M.return=B,M)}function D(B,M,z,le){var ye=z.type;return ye===N?re(B,M,z.props.children,le,z.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Fe&&lg(ye)===M.type)?(le=f(M,z.props),le.ref=Ma(B,M,z),le.return=B,le):(le=rc(z.type,z.key,z.props,null,B.mode,le),le.ref=Ma(B,M,z),le.return=B,le)}function $(B,M,z,le){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=rf(z,B.mode,le),M.return=B,M):(M=f(M,z.children||[]),M.return=B,M)}function re(B,M,z,le,ye){return M===null||M.tag!==7?(M=ms(z,B.mode,le,ye),M.return=B,M):(M=f(M,z),M.return=B,M)}function oe(B,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=nf(""+M,B.mode,z),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case K:return z=rc(M.type,M.key,M.props,null,B.mode,z),z.ref=Ma(B,null,M),z.return=B,z;case ee:return M=rf(M,B.mode,z),M.return=B,M;case Fe:var le=M._init;return oe(B,le(M._payload),z)}if(vr(M)||te(M))return M=ms(M,B.mode,z,null),M.return=B,M;Ou(B,M)}return null}function ne(B,M,z,le){var ye=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:k(B,M,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case K:return z.key===ye?D(B,M,z,le):null;case ee:return z.key===ye?$(B,M,z,le):null;case Fe:return ye=z._init,ne(B,M,ye(z._payload),le)}if(vr(z)||te(z))return ye!==null?null:re(B,M,z,le,null);Ou(B,z)}return null}function he(B,M,z,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number")return B=B.get(z)||null,k(M,B,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case K:return B=B.get(le.key===null?z:le.key)||null,D(M,B,le,ye);case ee:return B=B.get(le.key===null?z:le.key)||null,$(M,B,le,ye);case Fe:var Ee=le._init;return he(B,M,z,Ee(le._payload),ye)}if(vr(le)||te(le))return B=B.get(z)||null,re(M,B,le,ye,null);Ou(M,le)}return null}function pe(B,M,z,le){for(var ye=null,Ee=null,Te=M,Se=M=0,Ct=null;Te!==null&&Se<z.length;Se++){Te.index>Se?(Ct=Te,Te=null):Ct=Te.sibling;var $e=ne(B,Te,z[Se],le);if($e===null){Te===null&&(Te=Ct);break}r&&Te&&$e.alternate===null&&s(B,Te),M=g($e,M,Se),Ee===null?ye=$e:Ee.sibling=$e,Ee=$e,Te=Ct}if(Se===z.length)return l(B,Te),rt&&as(B,Se),ye;if(Te===null){for(;Se<z.length;Se++)Te=oe(B,z[Se],le),Te!==null&&(M=g(Te,M,Se),Ee===null?ye=Te:Ee.sibling=Te,Ee=Te);return rt&&as(B,Se),ye}for(Te=h(B,Te);Se<z.length;Se++)Ct=he(Te,B,Se,z[Se],le),Ct!==null&&(r&&Ct.alternate!==null&&Te.delete(Ct.key===null?Se:Ct.key),M=g(Ct,M,Se),Ee===null?ye=Ct:Ee.sibling=Ct,Ee=Ct);return r&&Te.forEach(function(Ei){return s(B,Ei)}),rt&&as(B,Se),ye}function me(B,M,z,le){var ye=te(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var Ee=ye=null,Te=M,Se=M=0,Ct=null,$e=z.next();Te!==null&&!$e.done;Se++,$e=z.next()){Te.index>Se?(Ct=Te,Te=null):Ct=Te.sibling;var Ei=ne(B,Te,$e.value,le);if(Ei===null){Te===null&&(Te=Ct);break}r&&Te&&Ei.alternate===null&&s(B,Te),M=g(Ei,M,Se),Ee===null?ye=Ei:Ee.sibling=Ei,Ee=Ei,Te=Ct}if($e.done)return l(B,Te),rt&&as(B,Se),ye;if(Te===null){for(;!$e.done;Se++,$e=z.next())$e=oe(B,$e.value,le),$e!==null&&(M=g($e,M,Se),Ee===null?ye=$e:Ee.sibling=$e,Ee=$e);return rt&&as(B,Se),ye}for(Te=h(B,Te);!$e.done;Se++,$e=z.next())$e=he(Te,B,Se,$e.value,le),$e!==null&&(r&&$e.alternate!==null&&Te.delete($e.key===null?Se:$e.key),M=g($e,M,Se),Ee===null?ye=$e:Ee.sibling=$e,Ee=$e);return r&&Te.forEach(function(QT){return s(B,QT)}),rt&&as(B,Se),ye}function ht(B,M,z,le){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case K:e:{for(var ye=z.key,Ee=M;Ee!==null;){if(Ee.key===ye){if(ye=z.type,ye===N){if(Ee.tag===7){l(B,Ee.sibling),M=f(Ee,z.props.children),M.return=B,B=M;break e}}else if(Ee.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Fe&&lg(ye)===Ee.type){l(B,Ee.sibling),M=f(Ee,z.props),M.ref=Ma(B,Ee,z),M.return=B,B=M;break e}l(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}z.type===N?(M=ms(z.props.children,B.mode,le,z.key),M.return=B,B=M):(le=rc(z.type,z.key,z.props,null,B.mode,le),le.ref=Ma(B,M,z),le.return=B,B=le)}return w(B);case ee:e:{for(Ee=z.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){l(B,M.sibling),M=f(M,z.children||[]),M.return=B,B=M;break e}else{l(B,M);break}else s(B,M);M=M.sibling}M=rf(z,B.mode,le),M.return=B,B=M}return w(B);case Fe:return Ee=z._init,ht(B,M,Ee(z._payload),le)}if(vr(z))return pe(B,M,z,le);if(te(z))return me(B,M,z,le);Ou(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(l(B,M.sibling),M=f(M,z),M.return=B,B=M):(l(B,M),M=nf(z,B.mode,le),M.return=B,B=M),w(B)):l(B,M)}return ht}var yo=ug(!0),cg=ug(!1),Du=ci(null),Lu=null,_o=null,dd=null;function fd(){dd=_o=Lu=null}function pd(r){var s=Du.current;et(Du),r._currentValue=s}function md(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function vo(r,s){Lu=r,dd=_o=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function Cn(r){var s=r._currentValue;if(dd!==r)if(r={context:r,memoizedValue:s,next:null},_o===null){if(Lu===null)throw Error(t(308));_o=r,Lu.dependencies={lanes:0,firstContext:r}}else _o=_o.next=r;return s}var ls=null;function gd(r){ls===null?ls=[r]:ls.push(r)}function hg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,gd(s)):(l.next=f.next,f.next=l),s.interleaved=l,br(r,h)}function br(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var fi=!1;function yd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Or(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function pi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ze&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,br(r,l)}return f=h.interleaved,f===null?(s.next=s,gd(h)):(s.next=f.next,f.next=s),h.interleaved=s,br(r,l)}function Vu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ri(r,l)}}function fg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Mu(r,s,l,h){var f=r.updateQueue;fi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,$=D.next;D.next=null,w===null?g=$:w.next=$,w=D;var re=r.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==w&&(k===null?re.firstBaseUpdate=$:k.next=$,re.lastBaseUpdate=D))}if(g!==null){var oe=f.baseState;w=0,re=$=D=null,k=g;do{var ne=k.lane,he=k.eventTime;if((h&ne)===ne){re!==null&&(re=re.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=r,me=k;switch(ne=s,he=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){oe=pe.call(he,oe,ne);break e}oe=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ne=typeof pe=="function"?pe.call(he,oe,ne):pe,ne==null)break e;oe=J({},oe,ne);break e;case 2:fi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,ne=f.effects,ne===null?f.effects=[k]:ne.push(k))}else he={eventTime:he,lane:ne,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?($=re=he,D=oe):re=re.next=he,w|=ne;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(re===null&&(D=oe),f.baseState=D,f.firstBaseUpdate=$,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);hs|=w,r.lanes=w,r.memoizedState=oe}}function pg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Fa={},sr=ci(Fa),Ua=ci(Fa),ja=ci(Fa);function us(r){if(r===Fa)throw Error(t(174));return r}function _d(r,s){switch(Ye(ja,s),Ye(Ua,r),Ye(sr,Fa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}et(sr),Ye(sr,s)}function wo(){et(sr),et(Ua),et(ja)}function mg(r){us(ja.current);var s=us(sr.current),l=vt(s,r.type);s!==l&&(Ye(Ua,r),Ye(sr,l))}function vd(r){Ua.current===r&&(et(sr),et(Ua))}var it=ci(0);function Fu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wd=[];function Ed(){for(var r=0;r<wd.length;r++)wd[r]._workInProgressVersionPrimary=null;wd.length=0}var Uu=ie.ReactCurrentDispatcher,Td=ie.ReactCurrentBatchConfig,cs=0,st=null,Et=null,Rt=null,ju=!1,Ba=!1,za=0,yT=0;function Ft(){throw Error(t(321))}function Id(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Bn(r[l],s[l]))return!1;return!0}function Sd(r,s,l,h,f,g){if(cs=g,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uu.current=r===null||r.memoizedState===null?ET:TT,r=l(h,f),Ba){g=0;do{if(Ba=!1,za=0,25<=g)throw Error(t(301));g+=1,Rt=Et=null,s.updateQueue=null,Uu.current=IT,r=l(h,f)}while(Ba)}if(Uu.current=$u,s=Et!==null&&Et.next!==null,cs=0,Rt=Et=st=null,ju=!1,s)throw Error(t(300));return r}function Rd(){var r=za!==0;return za=0,r}function or(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?st.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function kn(){if(Et===null){var r=st.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var s=Rt===null?st.memoizedState:Rt.next;if(s!==null)Rt=s,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?st.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function $a(r,s){return typeof s=="function"?s(r):s}function Ad(r){var s=kn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Et,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var k=w=null,D=null,$=g;do{var re=$.lane;if((cs&re)===re)D!==null&&(D=D.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var oe={lane:re,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};D===null?(k=D=oe,w=h):D=D.next=oe,st.lanes|=re,hs|=re}$=$.next}while($!==null&&$!==g);D===null?w=h:D.next=k,Bn(h,s.memoizedState)||(tn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do g=f.lane,st.lanes|=g,hs|=g,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Cd(r){var s=kn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Bn(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function gg(){}function yg(r,s){var l=st,h=kn(),f=s(),g=!Bn(h.memoizedState,f);if(g&&(h.memoizedState=f,tn=!0),h=h.queue,kd(wg.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,qa(9,vg.bind(null,l,h,f,s),void 0,null),At===null)throw Error(t(349));(cs&30)!==0||_g(l,s,f)}return f}function _g(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function vg(r,s,l,h){s.value=l,s.getSnapshot=h,Eg(s)&&Tg(r)}function wg(r,s,l){return l(function(){Eg(s)&&Tg(r)})}function Eg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Bn(r,l)}catch{return!0}}function Tg(r){var s=br(r,1);s!==null&&Hn(s,r,1,-1)}function Ig(r){var s=or();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},s.queue=r,r=r.dispatch=wT.bind(null,st,r),[s.memoizedState,r]}function qa(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Sg(){return kn().memoizedState}function Bu(r,s,l,h){var f=or();st.flags|=r,f.memoizedState=qa(1|s,l,void 0,h===void 0?null:h)}function zu(r,s,l,h){var f=kn();h=h===void 0?null:h;var g=void 0;if(Et!==null){var w=Et.memoizedState;if(g=w.destroy,h!==null&&Id(h,w.deps)){f.memoizedState=qa(s,l,g,h);return}}st.flags|=r,f.memoizedState=qa(1|s,l,g,h)}function Rg(r,s){return Bu(8390656,8,r,s)}function kd(r,s){return zu(2048,8,r,s)}function Ag(r,s){return zu(4,2,r,s)}function Cg(r,s){return zu(4,4,r,s)}function kg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Pg(r,s,l){return l=l!=null?l.concat([r]):null,zu(4,4,kg.bind(null,s,r),l)}function Pd(){}function Ng(r,s){var l=kn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function xg(r,s){var l=kn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function bg(r,s,l){return(cs&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=l):(Bn(l,s)||(l=Zi(),st.lanes|=l,hs|=l,r.baseState=!0),s)}function _T(r,s){var l=Ve;Ve=l!==0&&4>l?l:4,r(!0);var h=Td.transition;Td.transition={};try{r(!1),s()}finally{Ve=l,Td.transition=h}}function Og(){return kn().memoizedState}function vT(r,s,l){var h=_i(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Dg(r))Lg(s,l);else if(l=hg(r,s,l,h),l!==null){var f=Jt();Hn(l,r,h,f),Vg(l,s,h)}}function wT(r,s,l){var h=_i(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dg(r))Lg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,k=g(w,l);if(f.hasEagerState=!0,f.eagerState=k,Bn(k,w)){var D=s.interleaved;D===null?(f.next=f,gd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}l=hg(r,s,f,h),l!==null&&(f=Jt(),Hn(l,r,h,f),Vg(l,s,h))}}function Dg(r){var s=r.alternate;return r===st||s!==null&&s===st}function Lg(r,s){Ba=ju=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Vg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ri(r,l)}}var $u={readContext:Cn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},ET={readContext:Cn,useCallback:function(r,s){return or().memoizedState=[r,s===void 0?null:s],r},useContext:Cn,useEffect:Rg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Bu(4194308,4,kg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Bu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Bu(4,2,r,s)},useMemo:function(r,s){var l=or();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=or();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=vT.bind(null,st,r),[h.memoizedState,r]},useRef:function(r){var s=or();return r={current:r},s.memoizedState=r},useState:Ig,useDebugValue:Pd,useDeferredValue:function(r){return or().memoizedState=r},useTransition:function(){var r=Ig(!1),s=r[0];return r=_T.bind(null,r[1]),or().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=st,f=or();if(rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),At===null)throw Error(t(349));(cs&30)!==0||_g(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,Rg(wg.bind(null,h,g,r),[r]),h.flags|=2048,qa(9,vg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=or(),s=At.identifierPrefix;if(rt){var l=xr,h=Nr;l=(h&~(1<<32-Kt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=za++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=yT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},TT={readContext:Cn,useCallback:Ng,useContext:Cn,useEffect:kd,useImperativeHandle:Pg,useInsertionEffect:Ag,useLayoutEffect:Cg,useMemo:xg,useReducer:Ad,useRef:Sg,useState:function(){return Ad($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=kn();return bg(s,Et.memoizedState,r)},useTransition:function(){var r=Ad($a)[0],s=kn().memoizedState;return[r,s]},useMutableSource:gg,useSyncExternalStore:yg,useId:Og,unstable_isNewReconciler:!1},IT={readContext:Cn,useCallback:Ng,useContext:Cn,useEffect:kd,useImperativeHandle:Pg,useInsertionEffect:Ag,useLayoutEffect:Cg,useMemo:xg,useReducer:Cd,useRef:Sg,useState:function(){return Cd($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=kn();return Et===null?s.memoizedState=r:bg(s,Et.memoizedState,r)},useTransition:function(){var r=Cd($a)[0],s=kn().memoizedState;return[r,s]},useMutableSource:gg,useSyncExternalStore:yg,useId:Og,unstable_isNewReconciler:!1};function $n(r,s){if(r&&r.defaultProps){s=J({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Nd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:J({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var qu={isMounted:function(r){return(r=r._reactInternals)?Dn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Jt(),f=_i(r),g=Or(h,f);g.payload=s,l!=null&&(g.callback=l),s=pi(r,g,f),s!==null&&(Hn(s,r,f,h),Vu(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Jt(),f=_i(r),g=Or(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=pi(r,g,f),s!==null&&(Hn(s,r,f,h),Vu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Jt(),h=_i(r),f=Or(l,h);f.tag=2,s!=null&&(f.callback=s),s=pi(r,f,h),s!==null&&(Hn(s,r,h,l),Vu(s,r,h))}};function Mg(r,s,l,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Na(l,h)||!Na(f,g):!0}function Fg(r,s,l){var h=!1,f=hi,g=s.contextType;return typeof g=="object"&&g!==null?g=Cn(g):(f=en(s)?ss:Mt.current,h=s.contextTypes,g=(h=h!=null)?fo(r,f):hi),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=qu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Ug(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&qu.enqueueReplaceState(s,s.state,null)}function xd(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},yd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Cn(g):(g=en(s)?ss:Mt.current,f.context=fo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Nd(r,s,g,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&qu.enqueueReplaceState(f,f.state,null),Mu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Eo(r,s){try{var l="",h=s;do l+=ve(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function bd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Od(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var ST=typeof WeakMap=="function"?WeakMap:Map;function jg(r,s,l){l=Or(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Yu||(Yu=!0,Gd=h),Od(r,s)},l}function Bg(r,s,l){l=Or(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Od(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Od(r,s),typeof h!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function zg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new ST;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=FT.bind(null,r,s,l),s.then(r,r))}function $g(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function qg(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Or(-1,1),s.tag=2,pi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var RT=ie.ReactCurrentOwner,tn=!1;function Qt(r,s,l,h){s.child=r===null?cg(s,null,l,h):yo(s,r.child,l,h)}function Wg(r,s,l,h,f){l=l.render;var g=s.ref;return vo(s,f),h=Sd(r,s,l,h,g,f),l=Rd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Dr(r,s,f)):(rt&&l&&ad(s),s.flags|=1,Qt(r,s,h,f),s.child)}function Hg(r,s,l,h,f){if(r===null){var g=l.type;return typeof g=="function"&&!tf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Kg(r,s,g,h,f)):(r=rc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Na,l(w,h)&&r.ref===s.ref)return Dr(r,s,f)}return s.flags|=1,r=wi(g,h),r.ref=s.ref,r.return=s,s.child=r}function Kg(r,s,l,h,f){if(r!==null){var g=r.memoizedProps;if(Na(g,h)&&r.ref===s.ref)if(tn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,Dr(r,s,f)}return Dd(r,s,l,h,f)}function Gg(r,s,l){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Io,yn),yn|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(Io,yn),yn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Ye(Io,yn),yn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Ye(Io,yn),yn|=h;return Qt(r,s,f,l),s.child}function Qg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Dd(r,s,l,h,f){var g=en(l)?ss:Mt.current;return g=fo(s,g),vo(s,f),l=Sd(r,s,l,h,g,f),h=Rd(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Dr(r,s,f)):(rt&&h&&ad(s),s.flags|=1,Qt(r,s,l,f),s.child)}function Jg(r,s,l,h,f){if(en(l)){var g=!0;ku(s)}else g=!1;if(vo(s,f),s.stateNode===null)Hu(r,s),Fg(s,l,h),xd(s,l,h,f),h=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var D=w.context,$=l.contextType;typeof $=="object"&&$!==null?$=Cn($):($=en(l)?ss:Mt.current,$=fo(s,$));var re=l.getDerivedStateFromProps,oe=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||D!==$)&&Ug(s,w,h,$),fi=!1;var ne=s.memoizedState;w.state=ne,Mu(s,h,w,f),D=s.memoizedState,k!==h||ne!==D||Zt.current||fi?(typeof re=="function"&&(Nd(s,l,re,h),D=s.memoizedState),(k=fi||Mg(s,l,k,h,ne,D,$))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=$,h=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,dg(r,s),k=s.memoizedProps,$=s.type===s.elementType?k:$n(s.type,k),w.props=$,oe=s.pendingProps,ne=w.context,D=l.contextType,typeof D=="object"&&D!==null?D=Cn(D):(D=en(l)?ss:Mt.current,D=fo(s,D));var he=l.getDerivedStateFromProps;(re=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==oe||ne!==D)&&Ug(s,w,h,D),fi=!1,ne=s.memoizedState,w.state=ne,Mu(s,h,w,f);var pe=s.memoizedState;k!==oe||ne!==pe||Zt.current||fi?(typeof he=="function"&&(Nd(s,l,he,h),pe=s.memoizedState),($=fi||Mg(s,l,$,h,ne,pe,D)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,pe,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,pe,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=pe),w.props=h,w.state=pe,w.context=D,h=$):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),h=!1)}return Ld(r,s,l,h,g,f)}function Ld(r,s,l,h,f,g){Qg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&tg(s,l,!1),Dr(r,s,g);h=s.stateNode,RT.current=s;var k=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=yo(s,r.child,null,g),s.child=yo(s,null,k,g)):Qt(r,s,k,g),s.memoizedState=h.state,f&&tg(s,l,!0),s.child}function Yg(r){var s=r.stateNode;s.pendingContext?Zm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Zm(r,s.context,!1),_d(r,s.containerInfo)}function Xg(r,s,l,h,f){return go(),hd(f),s.flags|=256,Qt(r,s,l,h),s.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Md(r){return{baseLanes:r,cachePool:null,transitions:null}}function Zg(r,s,l){var h=s.pendingProps,f=it.current,g=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(it,f&1),r===null)return cd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ic(w,h,0,null),r=ms(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Md(l),s.memoizedState=Vd,r):Fd(s,w));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return AT(r,s,w,h,k,f,l);if(g){g=h.fallback,w=s.mode,f=r.child,k=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=wi(f,D),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=wi(k,g):(g=ms(g,w,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Md(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~l,s.memoizedState=Vd,h}return g=r.child,r=g.sibling,h=wi(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Fd(r,s){return s=ic({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Wu(r,s,l,h){return h!==null&&hd(h),yo(s,r.child,null,l),r=Fd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function AT(r,s,l,h,f,g,w){if(l)return s.flags&256?(s.flags&=-257,h=bd(Error(t(422))),Wu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=ic({mode:"visible",children:h.children},f,0,null),g=ms(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&yo(s,r.child,null,w),s.child.memoizedState=Md(w),s.memoizedState=Vd,g);if((s.mode&1)===0)return Wu(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=bd(g,h,void 0),Wu(r,s,w,h)}if(k=(w&r.childLanes)!==0,tn||k){if(h=At,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,br(r,f),Hn(h,r,f,-1))}return ef(),h=bd(Error(t(421))),Wu(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=UT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,gn=ui(f.nextSibling),mn=s,rt=!0,zn=null,r!==null&&(Rn[An++]=Nr,Rn[An++]=xr,Rn[An++]=os,Nr=r.id,xr=r.overflow,os=s),s=Fd(s,h.children),s.flags|=4096,s)}function ey(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),md(r.return,s,l)}function Ud(r,s,l,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function ty(r,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Qt(r,s,h.children,l),h=it.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ey(r,l,s);else if(r.tag===19)ey(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(it,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Fu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Ud(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Fu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Ud(s,!0,l,null,g);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Dr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),hs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=wi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=wi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function CT(r,s,l){switch(s.tag){case 3:Yg(s),go();break;case 5:mg(s);break;case 1:en(s.type)&&ku(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(Du,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(it,it.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Zg(r,s,l):(Ye(it,it.current&1),r=Dr(r,s,l),r!==null?r.sibling:null);Ye(it,it.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return ty(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(it,it.current),h)break;return null;case 22:case 23:return s.lanes=0,Gg(r,s,l)}return Dr(r,s,l)}var ny,jd,ry,iy;ny=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jd=function(){},ry=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,us(sr.current);var g=null;switch(l){case"input":f=zi(r,f),h=zi(r,h),g=[];break;case"select":f=J({},f,{value:void 0}),h=J({},h,{value:void 0}),g=[];break;case"textarea":f=sa(r,f),h=sa(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Ru)}ha(l,h);var w;l=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var k=f[$];for(w in k)k.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var D=h[$];if(k=f?.[$],h.hasOwnProperty($)&&D!==k&&(D!=null||k!=null))if($==="style")if(k){for(w in k)!k.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in D)D.hasOwnProperty(w)&&k[w]!==D[w]&&(l||(l={}),l[w]=D[w])}else l||(g||(g=[]),g.push($,l)),l=D;else $==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(g=g||[]).push($,D)):$==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push($,""+D):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(D!=null&&$==="onScroll"&&Ze("scroll",r),g||k===D||(g=[])):(g=g||[]).push($,D))}l&&(g=g||[]).push("style",l);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},iy=function(r,s,l,h){l!==h&&(s.flags|=4)};function Wa(r,s){if(!rt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function kT(r,s,l){var h=s.pendingProps;switch(ld(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return en(s.type)&&Cu(),Ut(s),null;case 3:return h=s.stateNode,wo(),et(Zt),et(Mt),Ed(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(bu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zn!==null&&(Yd(zn),zn=null))),jd(r,s),Ut(s),null;case 5:vd(s);var f=us(ja.current);if(l=s.type,r!==null&&s.stateNode!=null)ry(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=us(sr.current),bu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[ir]=s,h[La]=g,r=(s.mode&1)!==0,l){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(f=0;f<ba.length;f++)Ze(ba[f],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":Ds(h,g),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ze("invalid",h);break;case"textarea":Vs(h,g),Ze("invalid",h)}ha(l,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var k=g[w];w==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&Ze("scroll",h)}switch(l){case"input":wn(h),Jl(h,g,!0);break;case"textarea":wn(h),oa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ru)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(l,{is:h.is}):(r=w.createElement(l),l==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,l),r[ir]=s,r[La]=h,ny(r,s,!1,!1),s.stateNode=r;e:{switch(w=da(l,h),l){case"dialog":Ze("cancel",r),Ze("close",r),f=h;break;case"iframe":case"object":case"embed":Ze("load",r),f=h;break;case"video":case"audio":for(f=0;f<ba.length;f++)Ze(ba[f],r);f=h;break;case"source":Ze("error",r),f=h;break;case"img":case"image":case"link":Ze("error",r),Ze("load",r),f=h;break;case"details":Ze("toggle",r),f=h;break;case"input":Ds(r,h),f=zi(r,h),Ze("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=J({},h,{value:void 0}),Ze("invalid",r);break;case"textarea":Vs(r,h),f=sa(r,h),Ze("invalid",r);break;default:f=h}ha(l,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var D=k[g];g==="style"?ua(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&aa(r,D)):g==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Xr(r,D):typeof D=="number"&&Xr(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&Ze("scroll",r):D!=null&&X(r,g,D,w))}switch(l){case"input":wn(r),Jl(r,h,!1);break;case"textarea":wn(r),oa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ue(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?wr(r,!!h.multiple,g,!1):h.defaultValue!=null&&wr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Ru)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)iy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=us(ja.current),us(sr.current),bu(s)){if(h=s.stateNode,l=s.memoizedProps,h[ir]=s,(g=h.nodeValue!==l)&&(r=mn,r!==null))switch(r.tag){case 3:Su(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[ir]=s,s.stateNode=h}return Ut(s),null;case 13:if(et(it),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rt&&gn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ag(),go(),s.flags|=98560,g=!1;else if(g=bu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ir]=s}else go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else zn!==null&&(Yd(zn),zn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(it.current&1)!==0?Tt===0&&(Tt=3):ef())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return wo(),jd(r,s),r===null&&Oa(s.stateNode.containerInfo),Ut(s),null;case 10:return pd(s.type._context),Ut(s),null;case 17:return en(s.type)&&Cu(),Ut(s),null;case 19:if(et(it),g=s.memoizedState,g===null)return Ut(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Wa(g,!1);else{if(Tt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Fu(r),w!==null){for(s.flags|=128,Wa(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(it,it.current&1|2),s.child}r=r.sibling}g.tail!==null&&Je()>So&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304)}else{if(!h)if(r=Fu(w),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!rt)return Ut(s),null}else 2*Je()-g.renderingStartTime>So&&l!==1073741824&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(l=g.last,l!==null?l.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,l=it.current,Ye(it,h?l&1|2:l&1),s):(Ut(s),null);case 22:case 23:return Zd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(yn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function PT(r,s){switch(ld(s),s.tag){case 1:return en(s.type)&&Cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return wo(),et(Zt),et(Mt),Ed(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return vd(s),null;case 13:if(et(it),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return et(it),null;case 4:return wo(),null;case 10:return pd(s.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var Ku=!1,jt=!1,NT=typeof WeakSet=="function"?WeakSet:Set,fe=null;function To(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ut(r,s,h)}else l.current=null}function Bd(r,s,l){try{l()}catch(h){ut(r,s,h)}}var sy=!1;function xT(r,s){if(Zh=oi,r=Mm(),Wh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,k=-1,D=-1,$=0,re=0,oe=r,ne=null;t:for(;;){for(var he;oe!==l||f!==0&&oe.nodeType!==3||(k=w+f),oe!==g||h!==0&&oe.nodeType!==3||(D=w+h),oe.nodeType===3&&(w+=oe.nodeValue.length),(he=oe.firstChild)!==null;)ne=oe,oe=he;for(;;){if(oe===r)break t;if(ne===l&&++$===f&&(k=w),ne===g&&++re===h&&(D=w),(he=oe.nextSibling)!==null)break;oe=ne,ne=oe.parentNode}oe=he}l=k===-1||D===-1?null:{start:k,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ed={focusedElem:r,selectionRange:l},oi=!1,fe=s;fe!==null;)if(s=fe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,fe=r;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ht=pe.memoizedState,B=s.stateNode,M=B.getSnapshotBeforeUpdate(s.elementType===s.type?me:$n(s.type,me),ht);B.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){ut(s,s.return,le)}if(r=s.sibling,r!==null){r.return=s.return,fe=r;break}fe=s.return}return pe=sy,sy=!1,pe}function Ha(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Bd(s,l,g)}f=f.next}while(f!==h)}}function Gu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function zd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function oy(r){var s=r.alternate;s!==null&&(r.alternate=null,oy(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ir],delete s[La],delete s[id],delete s[fT],delete s[pT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ay(r){return r.tag===5||r.tag===3||r.tag===4}function ly(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ay(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $d(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ru));else if(h!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}function qd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(qd(r,s,l),r=r.sibling;r!==null;)qd(r,s,l),r=r.sibling}var xt=null,qn=!1;function mi(r,s,l){for(l=l.child;l!==null;)uy(r,s,l),l=l.sibling}function uy(r,s,l){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Yi,l)}catch{}switch(l.tag){case 5:jt||To(l,s);case 6:var h=xt,f=qn;xt=null,mi(r,s,l),xt=h,qn=f,xt!==null&&(qn?(r=xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):xt.removeChild(l.stateNode));break;case 18:xt!==null&&(qn?(r=xt,l=l.stateNode,r.nodeType===8?rd(r.parentNode,l):r.nodeType===1&&rd(r,l),Un(r)):rd(xt,l.stateNode));break;case 4:h=xt,f=qn,xt=l.stateNode.containerInfo,qn=!0,mi(r,s,l),xt=h,qn=f;break;case 0:case 11:case 14:case 15:if(!jt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Bd(l,s,w),f=f.next}while(f!==h)}mi(r,s,l);break;case 1:if(!jt&&(To(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){ut(l,s,k)}mi(r,s,l);break;case 21:mi(r,s,l);break;case 22:l.mode&1?(jt=(h=jt)||l.memoizedState!==null,mi(r,s,l),jt=h):mi(r,s,l);break;default:mi(r,s,l)}}function cy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new NT),s.forEach(function(h){var f=jT.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Wn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:xt=k.stateNode,qn=!1;break e;case 3:xt=k.stateNode.containerInfo,qn=!0;break e;case 4:xt=k.stateNode.containerInfo,qn=!0;break e}k=k.return}if(xt===null)throw Error(t(160));uy(g,w,f),xt=null,qn=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch($){ut(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hy(s,r),s=s.sibling}function hy(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Wn(s,r),ar(r),h&4){try{Ha(3,r,r.return),Gu(3,r)}catch(me){ut(r,r.return,me)}try{Ha(5,r,r.return)}catch(me){ut(r,r.return,me)}}break;case 1:Wn(s,r),ar(r),h&512&&l!==null&&To(l,l.return);break;case 5:if(Wn(s,r),ar(r),h&512&&l!==null&&To(l,l.return),r.flags&32){var f=r.stateNode;try{Xr(f,"")}catch(me){ut(r,r.return,me)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=l!==null?l.memoizedProps:g,k=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&ra(f,g),da(k,w);var $=da(k,g);for(w=0;w<D.length;w+=2){var re=D[w],oe=D[w+1];re==="style"?ua(f,oe):re==="dangerouslySetInnerHTML"?aa(f,oe):re==="children"?Xr(f,oe):X(f,re,oe,$)}switch(k){case"input":ia(f,g);break;case"textarea":Ms(f,g);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var he=g.value;he!=null?wr(f,!!g.multiple,he,!1):ne!==!!g.multiple&&(g.defaultValue!=null?wr(f,!!g.multiple,g.defaultValue,!0):wr(f,!!g.multiple,g.multiple?[]:"",!1))}f[La]=g}catch(me){ut(r,r.return,me)}}break;case 6:if(Wn(s,r),ar(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(me){ut(r,r.return,me)}}break;case 3:if(Wn(s,r),ar(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Un(s.containerInfo)}catch(me){ut(r,r.return,me)}break;case 4:Wn(s,r),ar(r);break;case 13:Wn(s,r),ar(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Kd=Je())),h&4&&cy(r);break;case 22:if(re=l!==null&&l.memoizedState!==null,r.mode&1?(jt=($=jt)||re,Wn(s,r),jt=$):Wn(s,r),ar(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!re&&(r.mode&1)!==0)for(fe=r,re=r.child;re!==null;){for(oe=fe=re;fe!==null;){switch(ne=fe,he=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ha(4,ne,ne.return);break;case 1:To(ne,ne.return);var pe=ne.stateNode;if(typeof pe.componentWillUnmount=="function"){h=ne,l=ne.return;try{s=h,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(me){ut(h,l,me)}}break;case 5:To(ne,ne.return);break;case 22:if(ne.memoizedState!==null){py(oe);continue}}he!==null?(he.return=ne,fe=he):py(oe)}re=re.sibling}e:for(re=null,oe=r;;){if(oe.tag===5){if(re===null){re=oe;try{f=oe.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=oe.stateNode,D=oe.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=la("display",w))}catch(me){ut(r,r.return,me)}}}else if(oe.tag===6){if(re===null)try{oe.stateNode.nodeValue=$?"":oe.memoizedProps}catch(me){ut(r,r.return,me)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===r)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===r)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===r)break e;re===oe&&(re=null),oe=oe.return}re===oe&&(re=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:Wn(s,r),ar(r),h&4&&cy(r);break;case 21:break;default:Wn(s,r),ar(r)}}function ar(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(ay(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Xr(f,""),h.flags&=-33);var g=ly(r);qd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,k=ly(r);$d(r,k,w);break;default:throw Error(t(161))}}catch(D){ut(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function bT(r,s,l){fe=r,dy(r)}function dy(r,s,l){for(var h=(r.mode&1)!==0;fe!==null;){var f=fe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Ku;if(!w){var k=f.alternate,D=k!==null&&k.memoizedState!==null||jt;k=Ku;var $=jt;if(Ku=w,(jt=D)&&!$)for(fe=f;fe!==null;)w=fe,D=w.child,w.tag===22&&w.memoizedState!==null?my(f):D!==null?(D.return=w,fe=D):my(f);for(;g!==null;)fe=g,dy(g),g=g.sibling;fe=f,Ku=k,jt=$}fy(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,fe=g):fy(r)}}function fy(r){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||Gu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:$n(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&pg(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}pg(s,w,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var re=$.memoizedState;if(re!==null){var oe=re.dehydrated;oe!==null&&Un(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&zd(s)}catch(ne){ut(s,s.return,ne)}}if(s===r){fe=null;break}if(l=s.sibling,l!==null){l.return=s.return,fe=l;break}fe=s.return}}function py(r){for(;fe!==null;){var s=fe;if(s===r){fe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,fe=l;break}fe=s.return}}function my(r){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Gu(4,s)}catch(D){ut(s,l,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){ut(s,f,D)}}var g=s.return;try{zd(s)}catch(D){ut(s,g,D)}break;case 5:var w=s.return;try{zd(s)}catch(D){ut(s,w,D)}}}catch(D){ut(s,s.return,D)}if(s===r){fe=null;break}var k=s.sibling;if(k!==null){k.return=s.return,fe=k;break}fe=s.return}}var OT=Math.ceil,Qu=ie.ReactCurrentDispatcher,Wd=ie.ReactCurrentOwner,Pn=ie.ReactCurrentBatchConfig,ze=0,At=null,pt=null,bt=0,yn=0,Io=ci(0),Tt=0,Ka=null,hs=0,Ju=0,Hd=0,Ga=null,nn=null,Kd=0,So=1/0,Lr=null,Yu=!1,Gd=null,gi=null,Xu=!1,yi=null,Zu=0,Qa=0,Qd=null,ec=-1,tc=0;function Jt(){return(ze&6)!==0?Je():ec!==-1?ec:ec=Je()}function _i(r){return(r.mode&1)===0?1:(ze&2)!==0&&bt!==0?bt&-bt:gT.transition!==null?(tc===0&&(tc=Zi()),tc):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:Ia(r.type)),r)}function Hn(r,s,l,h){if(50<Qa)throw Qa=0,Qd=null,Error(t(185));ni(r,l,h),((ze&2)===0||r!==At)&&(r===At&&((ze&2)===0&&(Ju|=l),Tt===4&&vi(r,bt)),rn(r,h),l===1&&ze===0&&(s.mode&1)===0&&(So=Je()+500,Pu&&di()))}function rn(r,s){var l=r.callbackNode;Ir(r,s);var h=Xi(r,r===At?bt:0);if(h===0)l!==null&&_a(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&_a(l),s===1)r.tag===0?mT(yy.bind(null,r)):ng(yy.bind(null,r)),hT(function(){(ze&6)===0&&di()}),l=null;else{switch(ii(h)){case 1:l=Ji;break;case 4:l=Zr;break;case 16:l=Tn;break;case 536870912:l=tu;break;default:l=Tn}l=Ry(l,gy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function gy(r,s){if(ec=-1,tc=0,(ze&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Ro()&&r.callbackNode!==l)return null;var h=Xi(r,r===At?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=nc(r,h);else{s=h;var f=ze;ze|=2;var g=vy();(At!==r||bt!==s)&&(Lr=null,So=Je()+500,fs(r,s));do try{VT();break}catch(k){_y(r,k)}while(!0);fd(),Qu.current=g,ze=f,pt!==null?s=0:(At=null,bt=0,s=Tt)}if(s!==0){if(s===2&&(f=dn(r),f!==0&&(h=f,s=Jd(r,f))),s===1)throw l=Ka,fs(r,0),vi(r,h),rn(r,Je()),l;if(s===6)vi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!DT(f)&&(s=nc(r,h),s===2&&(g=dn(r),g!==0&&(h=g,s=Jd(r,g))),s===1))throw l=Ka,fs(r,0),vi(r,h),rn(r,Je()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ps(r,nn,Lr);break;case 3:if(vi(r,h),(h&130023424)===h&&(s=Kd+500-Je(),10<s)){if(Xi(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Jt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=nd(ps.bind(null,r,nn,Lr),s);break}ps(r,nn,Lr);break;case 4:if(vi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Kt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*OT(h/1960))-h,10<h){r.timeoutHandle=nd(ps.bind(null,r,nn,Lr),h);break}ps(r,nn,Lr);break;case 5:ps(r,nn,Lr);break;default:throw Error(t(329))}}}return rn(r,Je()),r.callbackNode===l?gy.bind(null,r):null}function Jd(r,s){var l=Ga;return r.current.memoizedState.isDehydrated&&(fs(r,s).flags|=256),r=nc(r,s),r!==2&&(s=nn,nn=l,s!==null&&Yd(s)),r}function Yd(r){nn===null?nn=r:nn.push.apply(nn,r)}function DT(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Bn(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vi(r,s){for(s&=~Hd,s&=~Ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Kt(s),h=1<<l;r[l]=-1,s&=~h}}function yy(r){if((ze&6)!==0)throw Error(t(327));Ro();var s=Xi(r,0);if((s&1)===0)return rn(r,Je()),null;var l=nc(r,s);if(r.tag!==0&&l===2){var h=dn(r);h!==0&&(s=h,l=Jd(r,h))}if(l===1)throw l=Ka,fs(r,0),vi(r,s),rn(r,Je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ps(r,nn,Lr),rn(r,Je()),null}function Xd(r,s){var l=ze;ze|=1;try{return r(s)}finally{ze=l,ze===0&&(So=Je()+500,Pu&&di())}}function ds(r){yi!==null&&yi.tag===0&&(ze&6)===0&&Ro();var s=ze;ze|=1;var l=Pn.transition,h=Ve;try{if(Pn.transition=null,Ve=1,r)return r()}finally{Ve=h,Pn.transition=l,ze=s,(ze&6)===0&&di()}}function Zd(){yn=Io.current,et(Io)}function fs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,cT(l)),pt!==null)for(l=pt.return;l!==null;){var h=l;switch(ld(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cu();break;case 3:wo(),et(Zt),et(Mt),Ed();break;case 5:vd(h);break;case 4:wo();break;case 13:et(it);break;case 19:et(it);break;case 10:pd(h.type._context);break;case 22:case 23:Zd()}l=l.return}if(At=r,pt=r=wi(r.current,null),bt=yn=s,Tt=0,Ka=null,Hd=Ju=hs=0,nn=Ga=null,ls!==null){for(s=0;s<ls.length;s++)if(l=ls[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}l.pending=h}ls=null}return r}function _y(r,s){do{var l=pt;try{if(fd(),Uu.current=$u,ju){for(var h=st.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}ju=!1}if(cs=0,Rt=Et=st=null,Ba=!1,za=0,Wd.current=null,l===null||l.return===null){Tt=1,Ka=s,pt=null;break}e:{var g=r,w=l.return,k=l,D=s;if(s=bt,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=D,re=k,oe=re.tag;if((re.mode&1)===0&&(oe===0||oe===11||oe===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var he=$g(w);if(he!==null){he.flags&=-257,qg(he,w,k,g,s),he.mode&1&&zg(g,$,s),s=he,D=$;var pe=s.updateQueue;if(pe===null){var me=new Set;me.add(D),s.updateQueue=me}else pe.add(D);break e}else{if((s&1)===0){zg(g,$,s),ef();break e}D=Error(t(426))}}else if(rt&&k.mode&1){var ht=$g(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),qg(ht,w,k,g,s),hd(Eo(D,k));break e}}g=D=Eo(D,k),Tt!==4&&(Tt=2),Ga===null?Ga=[g]:Ga.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=jg(g,D,s);fg(g,B);break e;case 1:k=D;var M=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(gi===null||!gi.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var le=Bg(g,k,s);fg(g,le);break e}}g=g.return}while(g!==null)}Ey(l)}catch(ye){s=ye,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function vy(){var r=Qu.current;return Qu.current=$u,r===null?$u:r}function ef(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||(hs&268435455)===0&&(Ju&268435455)===0||vi(At,bt)}function nc(r,s){var l=ze;ze|=2;var h=vy();(At!==r||bt!==s)&&(Lr=null,fs(r,s));do try{LT();break}catch(f){_y(r,f)}while(!0);if(fd(),ze=l,Qu.current=h,pt!==null)throw Error(t(261));return At=null,bt=0,Tt}function LT(){for(;pt!==null;)wy(pt)}function VT(){for(;pt!==null&&!Zl();)wy(pt)}function wy(r){var s=Sy(r.alternate,r,yn);r.memoizedProps=r.pendingProps,s===null?Ey(r):pt=s,Wd.current=null}function Ey(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=kT(l,s,yn),l!==null){pt=l;return}}else{if(l=PT(l,s),l!==null){l.flags&=32767,pt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Tt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=r}while(s!==null);Tt===0&&(Tt=5)}function ps(r,s,l){var h=Ve,f=Pn.transition;try{Pn.transition=null,Ve=1,MT(r,s,l,h)}finally{Pn.transition=f,Ve=h}return null}function MT(r,s,l,h){do Ro();while(yi!==null);if((ze&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Ge(r,g),r===At&&(pt=At=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,Ry(Tn,function(){return Ro(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=Pn.transition,Pn.transition=null;var w=Ve;Ve=1;var k=ze;ze|=4,Wd.current=null,xT(r,l),hy(l,r),rT(ed),oi=!!Zh,ed=Zh=null,r.current=l,bT(l),Mh(),ze=k,Ve=w,Pn.transition=g}else r.current=l;if(Xu&&(Xu=!1,yi=r,Zu=f),g=r.pendingLanes,g===0&&(gi=null),nu(l.stateNode),rn(r,Je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Yu)throw Yu=!1,r=Gd,Gd=null,r;return(Zu&1)!==0&&r.tag!==0&&Ro(),g=r.pendingLanes,(g&1)!==0?r===Qd?Qa++:(Qa=0,Qd=r):Qa=0,di(),null}function Ro(){if(yi!==null){var r=ii(Zu),s=Pn.transition,l=Ve;try{if(Pn.transition=null,Ve=16>r?16:r,yi===null)var h=!1;else{if(r=yi,yi=null,Zu=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,fe=r.current;fe!==null;){var g=fe,w=g.child;if((fe.flags&16)!==0){var k=g.deletions;if(k!==null){for(var D=0;D<k.length;D++){var $=k[D];for(fe=$;fe!==null;){var re=fe;switch(re.tag){case 0:case 11:case 15:Ha(8,re,g)}var oe=re.child;if(oe!==null)oe.return=re,fe=oe;else for(;fe!==null;){re=fe;var ne=re.sibling,he=re.return;if(oy(re),re===$){fe=null;break}if(ne!==null){ne.return=he,fe=ne;break}fe=he}}}var pe=g.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ht=me.sibling;me.sibling=null,me=ht}while(me!==null)}}fe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,fe=w;else e:for(;fe!==null;){if(g=fe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ha(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,fe=B;break e}fe=g.return}}var M=r.current;for(fe=M;fe!==null;){w=fe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,fe=z;else e:for(w=M;fe!==null;){if(k=fe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Gu(9,k)}}catch(ye){ut(k,k.return,ye)}if(k===w){fe=null;break e}var le=k.sibling;if(le!==null){le.return=k.return,fe=le;break e}fe=k.return}}if(ze=f,di(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Yi,r)}catch{}h=!0}return h}finally{Ve=l,Pn.transition=s}}return!1}function Ty(r,s,l){s=Eo(l,s),s=jg(r,s,1),r=pi(r,s,1),s=Jt(),r!==null&&(ni(r,1,s),rn(r,s))}function ut(r,s,l){if(r.tag===3)Ty(r,r,l);else for(;s!==null;){if(s.tag===3){Ty(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(gi===null||!gi.has(h))){r=Eo(l,r),r=Bg(s,r,1),s=pi(s,r,1),r=Jt(),s!==null&&(ni(s,1,r),rn(s,r));break}}s=s.return}}function FT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Jt(),r.pingedLanes|=r.suspendedLanes&l,At===r&&(bt&l)===l&&(Tt===4||Tt===3&&(bt&130023424)===bt&&500>Je()-Kd?fs(r,0):Hd|=l),rn(r,s)}function Iy(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ks,Ks<<=1,(Ks&130023424)===0&&(Ks=4194304)));var l=Jt();r=br(r,s),r!==null&&(ni(r,s,l),rn(r,l))}function UT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Iy(r,l)}function jT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Iy(r,l)}var Sy;Sy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return tn=!1,CT(r,s,l);tn=(r.flags&131072)!==0}else tn=!1,rt&&(s.flags&1048576)!==0&&rg(s,xu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Hu(r,s),r=s.pendingProps;var f=fo(s,Mt.current);vo(s,l),f=Sd(null,s,h,r,f,l);var g=Rd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(h)?(g=!0,ku(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,yd(s),f.updater=qu,s.stateNode=f,f._reactInternals=s,xd(s,h,r,l),s=Ld(null,s,h,!0,g,l)):(s.tag=0,rt&&g&&ad(s),Qt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Hu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=zT(h),r=$n(h,r),f){case 0:s=Dd(null,s,h,r,l);break e;case 1:s=Jg(null,s,h,r,l);break e;case 11:s=Wg(null,s,h,r,l);break e;case 14:s=Hg(null,s,h,$n(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Dd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Jg(r,s,h,f,l);case 3:e:{if(Yg(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,dg(r,s),Mu(s,h,null,l);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Eo(Error(t(423)),s),s=Xg(r,s,h,l,f);break e}else if(h!==f){f=Eo(Error(t(424)),s),s=Xg(r,s,h,l,f);break e}else for(gn=ui(s.stateNode.containerInfo.firstChild),mn=s,rt=!0,zn=null,l=cg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(go(),h===f){s=Dr(r,s,l);break e}Qt(r,s,h,l)}s=s.child}return s;case 5:return mg(s),r===null&&cd(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,td(h,f)?w=null:g!==null&&td(h,g)&&(s.flags|=32),Qg(r,s),Qt(r,s,w,l),s.child;case 6:return r===null&&cd(s),null;case 13:return Zg(r,s,l);case 4:return _d(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=yo(s,null,h,l):Qt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Wg(r,s,h,f,l);case 7:return Qt(r,s,s.pendingProps,l),s.child;case 8:return Qt(r,s,s.pendingProps.children,l),s.child;case 12:return Qt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ye(Du,h._currentValue),h._currentValue=w,g!==null)if(Bn(g.value,w)){if(g.children===f.children&&!Zt.current){s=Dr(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){w=g.child;for(var D=k.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Or(-1,l&-l),D.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var re=$.pending;re===null?D.next=D:(D.next=re.next,re.next=D),$.pending=D}}g.lanes|=l,D=g.alternate,D!==null&&(D.lanes|=l),md(g.return,l,s),k.lanes|=l;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),md(w,l,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Qt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,vo(s,l),f=Cn(f),h=h(f),s.flags|=1,Qt(r,s,h,l),s.child;case 14:return h=s.type,f=$n(h,s.pendingProps),f=$n(h.type,f),Hg(r,s,h,f,l);case 15:return Kg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Hu(r,s),s.tag=1,en(h)?(r=!0,ku(s)):r=!1,vo(s,l),Fg(s,h,f),xd(s,h,f,l),Ld(null,s,h,!0,r,l);case 19:return ty(r,s,l);case 22:return Gg(r,s,l)}throw Error(t(156,s.tag))};function Ry(r,s){return Ws(r,s)}function BT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,l,h){return new BT(r,s,l,h)}function tf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function zT(r){if(typeof r=="function")return tf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===L)return 11;if(r===Qe)return 14}return 2}function wi(r,s){var l=r.alternate;return l===null?(l=Nn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rc(r,s,l,h,f,g){var w=2;if(h=r,typeof r=="function")tf(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case N:return ms(l.children,f,g,s);case I:w=8,f|=8;break;case C:return r=Nn(12,l,s,f|2),r.elementType=C,r.lanes=g,r;case A:return r=Nn(13,l,s,f),r.elementType=A,r.lanes=g,r;case ke:return r=Nn(19,l,s,f),r.elementType=ke,r.lanes=g,r;case Le:return ic(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case V:w=9;break e;case L:w=11;break e;case Qe:w=14;break e;case Fe:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Nn(w,l,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function ms(r,s,l,h){return r=Nn(7,r,h,s),r.lanes=l,r}function ic(r,s,l,h){return r=Nn(22,r,h,s),r.elementType=Le,r.lanes=l,r.stateNode={isHidden:!1},r}function nf(r,s,l){return r=Nn(6,r,null,s),r.lanes=l,r}function rf(r,s,l){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function $T(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ti(0),this.expirationTimes=ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function sf(r,s,l,h,f,g,w,k,D){return r=new $T(r,s,l,k,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(g),r}function qT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function Ay(r){if(!r)return hi;r=r._reactInternals;e:{if(Dn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(en(l))return eg(r,l,s)}return s}function Cy(r,s,l,h,f,g,w,k,D){return r=sf(l,h,!0,r,f,g,w,k,D),r.context=Ay(null),l=r.current,h=Jt(),f=_i(l),g=Or(h,f),g.callback=s??null,pi(l,g,f),r.current.lanes=f,ni(r,f,h),rn(r,h),r}function sc(r,s,l,h){var f=s.current,g=Jt(),w=_i(f);return l=Ay(l),s.context===null?s.context=l:s.pendingContext=l,s=Or(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=pi(f,s,w),r!==null&&(Hn(r,f,w,g),Vu(r,f,w)),w}function oc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ky(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function of(r,s){ky(r,s),(r=r.alternate)&&ky(r,s)}function WT(){return null}var Py=typeof reportError=="function"?reportError:function(r){console.error(r)};function af(r){this._internalRoot=r}ac.prototype.render=af.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));sc(r,s,null,null)},ac.prototype.unmount=af.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ds(function(){sc(null,r,null,null)}),s[kr]=null}};function ac(r){this._internalRoot=r}ac.prototype.unstable_scheduleHydration=function(r){if(r){var s=au();r={blockedOn:null,target:r,priority:s};for(var l=0;l<er.length&&s!==0&&s<er[l].priority;l++);er.splice(l,0,r),l===0&&cu(r)}};function lf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ny(){}function HT(r,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=oc(w);g.call($)}}var w=Cy(s,h,r,0,null,!1,!1,"",Ny);return r._reactRootContainer=w,r[kr]=w.current,Oa(r.nodeType===8?r.parentNode:r),ds(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var $=oc(D);k.call($)}}var D=sf(r,0,!1,null,null,!1,!1,"",Ny);return r._reactRootContainer=D,r[kr]=D.current,Oa(r.nodeType===8?r.parentNode:r),ds(function(){sc(s,D,l,h)}),D}function uc(r,s,l,h,f){var g=l._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var k=f;f=function(){var D=oc(w);k.call(D)}}sc(s,w,r,f)}else w=HT(l,s,r,f,h);return oc(w)}su=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=ei(s.pendingLanes);l!==0&&(ri(s,l|1),rn(s,Je()),(ze&6)===0&&(So=Je()+500,di()))}break;case 13:ds(function(){var h=br(r,1);if(h!==null){var f=Jt();Hn(h,r,1,f)}}),of(r,1)}},Gs=function(r){if(r.tag===13){var s=br(r,134217728);if(s!==null){var l=Jt();Hn(s,r,134217728,l)}of(r,134217728)}},ou=function(r){if(r.tag===13){var s=_i(r),l=br(r,s);if(l!==null){var h=Jt();Hn(l,r,s,h)}of(r,s)}},au=function(){return Ve},lu=function(r,s){var l=Ve;try{return Ve=r,s()}finally{Ve=l}},Us=function(r,s,l){switch(s){case"input":if(ia(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Au(h);if(!f)throw Error(t(90));Os(h),ia(h,f)}}}break;case"textarea":Ms(r,l);break;case"select":s=l.value,s!=null&&wr(r,!!l.multiple,s,!1)}},Hi=Xd,pa=ds;var KT={usingClientEntryPoint:!1,Events:[Va,co,Au,Xn,fa,Xd]},Ja={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GT={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ya(r),r===null?null:r.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Yi=cc.inject(GT),hn=cc}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT,sn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(s))throw Error(t(200));return qT(r,s,null,l)},sn.createRoot=function(r,s){if(!lf(r))throw Error(t(299));var l=!1,h="",f=Py;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=sf(r,1,!1,null,null,l,!1,h,f),r[kr]=s.current,Oa(r.nodeType===8?r.parentNode:r),new af(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ya(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return ds(r)},sn.hydrate=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!0,l)},sn.hydrateRoot=function(r,s,l){if(!lf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",w=Py;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=Cy(s,null,r,1,l??null,f,!1,g,w),r[kr]=s.current,Oa(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new ac(s)},sn.render=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!1,l)},sn.unmountComponentAtNode=function(r){if(!lc(r))throw Error(t(40));return r._reactRootContainer?(ds(function(){uc(null,null,r,!1,function(){r._reactRootContainer=null,r[kr]=null})}),!0):!1},sn.unstable_batchedUpdates=Xd,sn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!lc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return uc(r,s,l,!1,h)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var Fy;function jv(){if(Fy)return hf.exports;Fy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hf.exports=rI(),hf.exports}var Uy;function iI(){if(Uy)return hc;Uy=1;var n=jv();return hc.createRoot=n.createRoot,hc.hydrateRoot=n.hydrateRoot,hc}var sI=iI();const oI=Fv(sI);var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,F=y&63;p||(F=64,u||(S=64)),i.push(t[v],t[E],t[S],t[F])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||E==null)throw new lI;const S=a<<2|d>>4;if(i.push(S),y!==64){const F=d<<4&240|y>>2;if(i.push(F),E!==64){const P=y<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uI=function(n){const e=Bv(n);return zv.encodeByteArray(e,!0)},Lc=function(n){return uI(n).replace(/\./g,"")},$v=function(n){try{return zv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=()=>cI().__FIREBASE_DEFAULTS__,dI=()=>{if(typeof process>"u"||typeof jy>"u")return;const n=jy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$v(n[1]);return e&&JSON.parse(e)},ih=()=>{try{return hI()||dI()||fI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qv=n=>{var e,t;return(t=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Wv=n=>{const e=qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Hv=()=>{var n;return(n=ih())===null||n===void 0?void 0:n.config},Kv=n=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lc(JSON.stringify(t)),Lc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function gI(){var n;const e=(n=ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _I(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wI(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function EI(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="FirebaseError";class yr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=SI,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?RI(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new yr(o,d,i)}}function RI(n,e){return n.replace(AI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const AI=/\{\$([^}]+)}/g;function CI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(By(a)&&By(u)){if(!Lo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function By(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function sl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kI(n,e){const t=new PI(n,e);return t.subscribe.bind(t)}class PI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");NI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pf),o.error===void 0&&(o.error=pf),o.complete===void 0&&(o.complete=pf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class Li{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new pI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OI(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bI(n){return n===gs?void 0:n}function OI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const LI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},VI=Me.INFO,MI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},FI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=MI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=VI,this._logHandler=FI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const UI=(n,e)=>e.some(t=>n instanceof t);let zy,$y;function jI(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BI(){return $y||($y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qv=new WeakMap,Ff=new WeakMap,Jv=new WeakMap,mf=new WeakMap,Ep=new WeakMap;function zI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Pi(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Qv.set(t,n)}).catch(()=>{}),Ep.set(e,n),e}function $I(n){if(Ff.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ff.set(n,e)}let Uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ff.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Jv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qI(n){Uf=n(Uf)}function WI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(gf(this),e,...t);return Jv.set(i,e.sort?e.sort():[e]),Pi(i)}:BI().includes(n)?function(...e){return n.apply(gf(this),e),Pi(Qv.get(this))}:function(...e){return Pi(n.apply(gf(this),e))}}function HI(n){return typeof n=="function"?WI(n):(n instanceof IDBTransaction&&$I(n),UI(n,jI())?new Proxy(n,Uf):n)}function Pi(n){if(n instanceof IDBRequest)return zI(n);if(mf.has(n))return mf.get(n);const e=HI(n);return e!==n&&(mf.set(n,e),Ep.set(e,n)),e}const gf=n=>Ep.get(n);function KI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Pi(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Pi(u.result),p.oldVersion,p.newVersion,Pi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const GI=["get","getKey","getAll","getAllKeys","count"],QI=["put","add","delete","clear"],yf=new Map;function qy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=QI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||GI.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return yf.set(e,a),a}qI(n=>({...n,get:(e,t,i)=>qy(e,t)||n.get(e,t,i),has:(e,t)=>!!qy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function YI(n){const e=n.getComponent();return e?.type==="VERSION"}const jf="@firebase/app",Wy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new wp("@firebase/app"),XI="@firebase/app-compat",ZI="@firebase/analytics-compat",eS="@firebase/analytics",tS="@firebase/app-check-compat",nS="@firebase/app-check",rS="@firebase/auth",iS="@firebase/auth-compat",sS="@firebase/database",oS="@firebase/data-connect",aS="@firebase/database-compat",lS="@firebase/functions",uS="@firebase/functions-compat",cS="@firebase/installations",hS="@firebase/installations-compat",dS="@firebase/messaging",fS="@firebase/messaging-compat",pS="@firebase/performance",mS="@firebase/performance-compat",gS="@firebase/remote-config",yS="@firebase/remote-config-compat",_S="@firebase/storage",vS="@firebase/storage-compat",wS="@firebase/firestore",ES="@firebase/vertexai-preview",TS="@firebase/firestore-compat",IS="firebase",SS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",RS={[jf]:"fire-core",[XI]:"fire-core-compat",[eS]:"fire-analytics",[ZI]:"fire-analytics-compat",[nS]:"fire-app-check",[tS]:"fire-app-check-compat",[rS]:"fire-auth",[iS]:"fire-auth-compat",[sS]:"fire-rtdb",[oS]:"fire-data-connect",[aS]:"fire-rtdb-compat",[lS]:"fire-fn",[uS]:"fire-fn-compat",[cS]:"fire-iid",[hS]:"fire-iid-compat",[dS]:"fire-fcm",[fS]:"fire-fcm-compat",[pS]:"fire-perf",[mS]:"fire-perf-compat",[gS]:"fire-rc",[yS]:"fire-rc-compat",[_S]:"fire-gcs",[vS]:"fire-gcs-compat",[wS]:"fire-fst",[TS]:"fire-fst-compat",[ES]:"fire-vertex","fire-js":"fire-js",[IS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,AS=new Map,zf=new Map;function Hy(n,e){try{n.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Es(n){const e=n.name;if(zf.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(const t of gl.values())Hy(t,n);for(const t of AS.values())Hy(t,n);return!0}function bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ur(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new Nl("app","Firebase",CS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=SS;function Yv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ni.create("bad-app-name",{appName:String(o)});if(t||(t=Hv()),!t)throw Ni.create("no-options");const a=gl.get(o);if(a){if(Lo(t,a.options)&&Lo(i,a.config))return a;throw Ni.create("duplicate-app",{appName:o})}const u=new DI(o);for(const p of zf.values())u.addComponent(p);const d=new kS(t,i,u);return gl.set(o,d),d}function sh(n=Bf){const e=gl.get(n);if(!e&&n===Bf&&Hv())return Yv();if(!e)throw Ni.create("no-app",{appName:n});return e}function PS(){return Array.from(gl.values())}function cr(n,e,t){var i;let o=(i=RS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(d.join(" "));return}Es(new Li(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firebase-heartbeat-database",xS=1,yl="firebase-heartbeat-store";let _f=null;function Xv(){return _f||(_f=KI(NS,xS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ni.create("idb-open",{originalErrorMessage:n.message})})),_f}async function bS(n){try{const t=(await Xv()).transaction(yl),i=await t.objectStore(yl).get(Zv(n));return await t.done,i}catch(e){if(e instanceof yr)Br.warn(e.message);else{const t=Ni.create("idb-get",{originalErrorMessage:e?.message});Br.warn(t.message)}}}async function Ky(n,e){try{const i=(await Xv()).transaction(yl,"readwrite");await i.objectStore(yl).put(e,Zv(n)),await i.done}catch(t){if(t instanceof yr)Br.warn(t.message);else{const i=Ni.create("idb-set",{originalErrorMessage:t?.message});Br.warn(i.message)}}}function Zv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=1024,DS=720*60*60*1e3;class LS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Gy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=DS}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gy(),{heartbeatsToSend:i,unsentEntries:o}=VS(this._heartbeatsCache.heartbeats),a=Lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Br.warn(t),""}}}function Gy(){return new Date().toISOString().substring(0,10)}function VS(n,e=OS){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Qy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Qy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class MS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Qy(n){return Lc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n){Es(new Li("platform-logger",e=>new JI(e),"PRIVATE")),Es(new Li("heartbeat",e=>new LS(e),"PRIVATE")),cr(jf,Wy,n),cr(jf,Wy,"esm2017"),cr("fire-js","")}FS("");function Tp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const US=ew,tw=new Nl("auth","Firebase",ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new wp("@firebase/auth");function jS(n,...e){Vc.logLevel<=Me.WARN&&Vc.warn(`Auth (${Ps}): ${n}`,...e)}function Ec(n,...e){Vc.logLevel<=Me.ERROR&&Vc.error(`Auth (${Ps}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(n,...e){throw Ip(n,...e)}function hr(n,...e){return Ip(n,...e)}function nw(n,e,t){const i=Object.assign(Object.assign({},US()),{[e]:t});return new Nl("auth","Firebase",i).create(e,{appName:n.name})}function Ur(n){return nw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ip(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return tw.create(n,...e)}function Ie(n,e,...t){if(!n)throw Ip(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function zr(n,e){n||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function BS(){return Jy()==="http:"||Jy()==="https:"}function Jy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||_I()||"connection"in navigator)?navigator.onLine:!0}function $S(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=mI()||vI()}get(){return zS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(n,e){zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Ol(3e4,6e4);function Hr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Kr(n,e,t,i,o={}){return iw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=xl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return yI()||(y.referrerPolicy="no-referrer"),rw.fetch()(sw(n,n.config.apiHost,t,d),y)})}async function iw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},qS),e);try{const o=new KS(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw dc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw dc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw dc(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw nw(n,v,y);Gn(n,v)}}catch(o){if(o instanceof yr)throw o;Gn(n,"network-request-failed",{message:String(o)})}}async function Dl(n,e,t,i,o={}){const a=await Kr(n,e,t,i,o);return"mfaPendingCredential"in a&&Gn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function sw(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Sp(n.config,o):`${n.config.apiScheme}://${o}`}function HS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hr(this.auth,"network-request-failed")),WS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hr(n,e,i);return o.customData._tokenResponse=t,o}function Yy(n){return n!==void 0&&n.enterprise!==void 0}class GS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QS(n,e){return Kr(n,"GET","/v2/recaptchaConfig",Hr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(n,e){return Kr(n,"POST","/v1/accounts:delete",e)}async function ow(n,e){return Kr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YS(n,e=!1){const t=yt(n),i=await t.getIdToken(e),o=Rp(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:cl(vf(o.auth_time)),issuedAtTime:cl(vf(o.iat)),expirationTime:cl(vf(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function vf(n){return Number(n)*1e3}function Rp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=$v(t);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Xy(n){const e=Rp(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof yr&&XS(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function XS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await _l(n,ow(t,{idToken:i}));Ie(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?aw(a.providerUserInfo):[],d=tR(n.providerData,u),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!d?.length,v=p?y:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new qf(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function eR(n){const e=yt(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function aw(n){return n.map(e=>{var{providerId:t}=e,i=Tp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(n,e){const t=await iw(n,{},async()=>{const i=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=sw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",rw.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rR(n,e){return Kr(n,"POST","/v2/accounts:revokeToken",Hr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Xy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await nR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new xo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Tp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YS(this,e)}reload(){return eR(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await _l(this,JS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,y,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,F=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,P=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(d=t.tenantId)!==null&&d!==void 0?d:void 0,R=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Z=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:X,emailVerified:ie,isAnonymous:K,providerData:ee,stsTokenManager:N}=t;Ie(X&&N,e,"internal-error");const I=xo.fromJSON(this.name,N);Ie(typeof X=="string",e,"internal-error"),Ti(E,e.name),Ti(S,e.name),Ie(typeof ie=="boolean",e,"internal-error"),Ie(typeof K=="boolean",e,"internal-error"),Ti(F,e.name),Ti(P,e.name),Ti(U,e.name),Ti(R,e.name),Ti(Y,e.name),Ti(Z,e.name);const C=new Mr({uid:X,auth:e,email:S,emailVerified:ie,displayName:E,isAnonymous:K,photoURL:P,phoneNumber:F,tenantId:U,stsTokenManager:I,createdAt:Y,lastLoginAt:Z});return ee&&Array.isArray(ee)&&(C.providerData=ee.map(O=>Object.assign({},O))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new xo;o.updateFromServerResponse(t);const a=new Mr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?aw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new xo;d.updateFromIdToken(i);const p=new Mr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new Map;function Fr(n){zr(n instanceof Function,"Expected a class definition");let e=Zy.get(n);return e?(zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Zy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lw.type="NONE";const e_=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n,e,t){return`firebase:${n}:${e}:${t}`}class bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Tc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new bo(Fr(e_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Fr(e_);const u=Tc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const v=await y._get(u);if(v){const E=Mr._fromJSON(e,v);y!==a&&(d=E),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new bo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new bo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(cw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function uw(n=Ht()){return/firefox\//i.test(n)}function cw(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(n=Ht()){return/crios\//i.test(n)}function dw(n=Ht()){return/iemobile/i.test(n)}function fw(n=Ht()){return/android/i.test(n)}function pw(n=Ht()){return/blackberry/i.test(n)}function mw(n=Ht()){return/webos/i.test(n)}function Ap(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iR(n=Ht()){var e;return Ap(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sR(){return wI()&&document.documentMode===10}function gw(n=Ht()){return Ap(n)||fw(n)||mw(n)||pw(n)||/windows phone/i.test(n)||dw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n,e=[]){let t;switch(n){case"Browser":t=t_(Ht());break;case"Worker":t=`${t_(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ps}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n,e={}){return Kr(n,"GET","/v2/passwordPolicy",Hr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=6;class uR{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:lR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n_(this),this.idTokenSubscription=new n_(this),this.beforeStateQueue=new oR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ow(this,{idToken:e}),i=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ur(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$S()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(Ur(this));const t=e?yt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aR(this),t=new uR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await rR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&jS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ji(n){return yt(n)}class n_{constructor(e){this.auth=e,this.observer=null,this.addObserver=kI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hR(n){oh=n}function _w(n){return oh.loadJS(n)}function dR(){return oh.recaptchaEnterpriseScript}function fR(){return oh.gapiScript}function pR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const mR="recaptcha-enterprise",gR="NO_RECAPTCHA";class yR{constructor(e){this.type=mR,this.auth=ji(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{QS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new GS(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;Yy(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(gR)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&Yy(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=dR();p.length!==0&&(p+=d),_w(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function r_(n,e,t,i=!1){const o=new yR(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fc(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await r_(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await r_(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n,e){const t=bl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Lo(a,e??{}))return o;Gn(o,"already-initialized")}return t.initialize({options:e})}function vR(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function wR(n,e,t){const i=ji(n);Ie(i._canInitEmulator,i,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=vw(e),{host:u,port:d}=ER(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),TR()}function vw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ER(n){const e=vw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:i_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:i_(u)}}}function i_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function IR(n,e){return Kr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(n,e){return Dl(n,"POST","/v1/accounts:signInWithPassword",Hr(n,e))}async function RR(n,e){return Kr(n,"POST","/v1/accounts:sendOobCode",Hr(n,e))}async function AR(n,e){return RR(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Hr(n,e))}async function kR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Hr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Cp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,t,"signInWithPassword",SR);case"emailLink":return CR(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,i,"signUpPassword",IR);case"emailLink":return kR(e,{idToken:t,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return Dl(n,"POST","/v1/accounts:signInWithIdp",Hr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="http://localhost";class Ts extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Tp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Ts(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:PR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xR(n){const e=il(sl(n)).link,t=e?il(sl(e)).deep_link_id:null,i=il(sl(n)).deep_link_id;return(i?il(sl(i)).link:null)||i||t||e||n}class kp{constructor(e){var t,i,o,a,u,d;const p=il(sl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,E=NR((o=p.mode)!==null&&o!==void 0?o:null);Ie(y&&v&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=xR(e);try{return new kp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,t){return vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=kp.parseLink(t);return Ie(i,"argument-error"),vl._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Ll{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ts._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Si.credential(t,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Ll{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Ll{constructor(){super("twitter.com")}static credential(e,t){return Ts._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e){return Dl(n,"POST","/v1/accounts:signUp",Hr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Mr._fromIdTokenResponse(e,i,o),u=s_(i);return new Is({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=s_(i);return new Is({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function s_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends yr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Uc(e,t,i,o)}}function Ew(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(n,a,e,i):a})}async function OR(n,e,t=!1){const i=await _l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Is._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e,t=!1){const{auth:i}=n;if(ur(i.app))return Promise.reject(Ur(i));const o="reauthenticate";try{const a=await _l(n,Ew(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=Rp(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),Is._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Gn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(n,e,t=!1){if(ur(n.app))return Promise.reject(Ur(n));const i="signIn",o=await Ew(n,i,e),a=await Is._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function LR(n,e){return Tw(ji(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(n){const e=ji(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VR(n,e,t){const i=ji(n);await Fc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AR)}async function MR(n,e,t){if(ur(n.app))return Promise.reject(Ur(n));const i=ji(n),u=await Fc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Iw(n),p}),d=await Is._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function FR(n,e,t){return ur(n.app)?Promise.reject(Ur(n)):LR(yt(n),Ho.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Iw(n),i})}function UR(n,e,t,i){return yt(n).onIdTokenChanged(e,t,i)}function jR(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function BR(n,e,t,i){return yt(n).onAuthStateChanged(e,t,i)}function zR(n){return yt(n).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=1e3,qR=10;class Rw extends Sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);sR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,qR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$R)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rw.type="LOCAL";const WR=Rw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Aw.type="SESSION";const Cw=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ah(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await HR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Pp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function GR(n){dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function QR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function YR(){return kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firebaseLocalStorageDb",XR=1,Bc="firebaseLocalStorage",Nw="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lh(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function ZR(){const n=indexedDB.deleteDatabase(Pw);return new Vl(n).toPromise()}function Wf(){const n=indexedDB.open(Pw,XR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Bc,{keyPath:Nw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),await ZR(),e(await Wf()))})})}async function o_(n,e,t){const i=lh(n,!0).put({[Nw]:e,value:t});return new Vl(i).toPromise()}async function eA(n,e){const t=lh(n,!1).get(e),i=await new Vl(t).toPromise();return i===void 0?null:i.value}function a_(n,e){const t=lh(n,!0).delete(e);return new Vl(t).toPromise()}const tA=800,nA=3;class xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>nA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(YR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QR(),!this.activeServiceWorker)return;this.sender=new KR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await o_(e,jc,"1"),await a_(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>o_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>eA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>a_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=lh(o,!1).getAll();return new Vl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xw.type="LOCAL";const rA=xw;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n,e){return e?Fr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sA(n){return Tw(n.auth,new Np(n),n.bypassAuthState)}function oA(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),DR(t,new Np(n),n.bypassAuthState)}async function aA(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),OR(t,new Np(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sA;case"linkViaPopup":case"linkViaRedirect":return aA;case"reauthViaPopup":case"reauthViaRedirect":return oA;default:Gn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Ol(2e3,1e4);class No extends bw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lA.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="pendingRedirect",Ic=new Map;class cA extends bw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const i=await hA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hA(n,e){const t=pA(e),i=fA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function dA(n,e){Ic.set(n._key(),e)}function fA(n){return Fr(n._redirectPersistence)}function pA(n){return Tc(uA,n.config.apiKey,n.name)}async function mA(n,e,t=!1){if(ur(n.app))return Promise.reject(Ur(n));const i=ji(n),o=iA(i,e),u=await new cA(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=600*1e3;class yA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_A(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ow(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(hr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gA&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(e))}saveEventToCache(e){this.cachedEventUids.add(l_(e)),this.lastProcessedEventTime=Date.now()}}function l_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ow({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _A(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ow(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(n,e={}){return Kr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EA=/^https?/;async function TA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await vA(n);for(const t of e)try{if(IA(t))return}catch{}Gn(n,"unauthorized-domain")}function IA(n){const e=$f(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!EA.test(t))return!1;if(wA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new Ol(3e4,6e4);function u_(){const n=dr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function RA(n){return new Promise((e,t)=>{var i,o,a;function u(){u_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u_(),t(hr(n,"network-request-failed"))},timeout:SA.get()})}if(!((o=(i=dr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=dr().gapi)===null||a===void 0)&&a.load)u();else{const d=pR("iframefcb");return dr()[d]=()=>{gapi.load?u():t(hr(n,"network-request-failed"))},_w(`${fR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function AA(n){return Sc=Sc||RA(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Ol(5e3,15e3),kA="__/auth/iframe",PA="emulator/auth/iframe",NA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bA(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Sp(e,PA):`https://${n.config.authDomain}/${kA}`,i={apiKey:e.apiKey,appName:n.name,v:Ps},o=xA.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${xl(i).slice(1)}`}async function OA(n){const e=await AA(n),t=dr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:bA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=hr(n,"network-request-failed"),d=dr().setTimeout(()=>{a(u)},CA.get());function p(){dr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LA=500,VA=600,MA="_blank",FA="http://localhost";class c_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UA(n,e,t,i=LA,o=VA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},DA),{width:i.toString(),height:o.toString(),top:a,left:u}),y=Ht().toLowerCase();t&&(d=hw(y)?MA:t),uw(y)&&(e=e||FA,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[F,P])=>`${S}${F}=${P},`,"");if(iR(y)&&d!=="_self")return jA(e||"",d),new c_(null);const E=window.open(e||"",d,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new c_(E)}function jA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="__/auth/handler",zA="emulator/auth/handler",$A=encodeURIComponent("fac");async function h_(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ps,eventId:o};if(e instanceof ww){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",CI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Ll){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),y=p?`#${$A}=${encodeURIComponent(p)}`:"";return`${qA(n)}?${xl(d).slice(1)}${y}`}function qA({config:n}){return n.emulator?Sp(n,zA):`https://${n.authDomain}/${BA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class WA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cw,this._completeRedirectFn=mA,this._overrideRedirectResult=dA}async _openPopup(e,t,i,o){var a;zr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await h_(e,t,i,$f(),o);return UA(e,u,Pp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await h_(e,t,i,$f(),o);return GR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(zr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await OA(e),i=new yA(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wf,{type:wf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[wf];u!==void 0&&t(!!u),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gw()||cw()||Ap()}}const HA=WA;var d_="@firebase/auth",f_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QA(n){Es(new Li("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(n)},y=new cR(i,o,a,p);return vR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Es(new Li("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(i=>new KA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(d_,f_,GA(n)),cr(d_,f_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=300,YA=Kv("authIdTokenMaxAge")||JA;let p_=null;const XA=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>YA)return;const o=t?.token;p_!==o&&(p_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ZA(n=sh()){const e=bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_R(n,{popupRedirectResolver:HA,persistence:[rA,WR,Cw]}),i=Kv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=XA(a.toString());jR(t,u,()=>u(t.currentUser)),UR(t,d=>u(d))}}const o=qv("auth");return o&&wR(t,`http://${o}`),t}function eC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}hR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=hr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",eC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QA("Browser");var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Dw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function C(){}C.prototype=I.prototype,N.D=I.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(O,V,L){for(var A=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)A[ke-2]=arguments[ke];return I.prototype[V].apply(O,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,C){C||(C=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(V=0;16>V;++V)O[V]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=N.g[0],C=N.g[1],V=N.g[2];var L=N.g[3],A=I+(L^C&(V^L))+O[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[1]+3905402710&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[2]+606105819&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[3]+3250441966&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[5]+1200080426&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[6]+2821735955&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[7]+4249261313&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[9]+2336552879&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[10]+4294925233&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[11]+2304563134&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[13]+4254626195&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[14]+2792965006&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[15]+1236535329&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(V^L&(C^V))+O[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[6]+3225465664&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[11]+643717713&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[0]+3921069994&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[10]+38016083&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[15]+3634488961&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[4]+3889429448&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[14]+3275163606&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[3]+4107603335&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[8]+1163531501&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[2]+4243563512&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[7]+1735328473&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[12]+2368359562&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(C^V^L)+O[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[8]+2272392833&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[11]+1839030562&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[14]+4259657740&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[4]+1272893353&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[7]+4139469664&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[10]+3200236656&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[0]+3936430074&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[3]+3572445317&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[6]+76029189&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[12]+3873151461&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[15]+530742520&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[2]+3299628645&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(V^(C|~L))+O[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[7]+1126891415&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[14]+2878612391&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[5]+4237533241&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[3]+2399980690&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[10]+4293915773&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[1]+2240044497&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[15]+4264355552&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[6]+2734768916&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[13]+1309151649&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[11]+3174756917&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[2]+718787259&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var C=I-this.blockSize,O=this.B,V=this.h,L=0;L<I;){if(V==0)for(;L<=C;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<I;)if(O[V++]=N.charCodeAt(L++),V==this.blockSize){o(this,O),V=0;break}}else for(;L<I;)if(O[V++]=N[L++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var C=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=C&255,C/=256;for(this.u(N),N=Array(16),I=C=0;4>I;++I)for(var O=0;32>O;O+=8)N[C++]=this.g[I]>>>O&255;return N};function a(N,I){var C=d;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=I(N)}function u(N,I){this.h=I;for(var C=[],O=!0,V=N.length-1;0<=V;V--){var L=N[V]|0;O&&L==I||(C[V]=L,O=!1)}this.g=C}var d={};function p(N){return-128<=N&&128>N?a(N,function(I){return new u([I|0],0>I?-1:0)}):new u([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return R(y(-N));for(var I=[],C=1,O=0;N>=C;O++)I[O]=N/C|0,C*=4294967296;return new u(I,0)}function v(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return R(v(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(I,8)),O=E,V=0;V<N.length;V+=8){var L=Math.min(8,N.length-V),A=parseInt(N.substring(V,V+L),I);8>L?(L=y(Math.pow(I,L)),O=O.j(L).add(y(A))):(O=O.j(C),O=O.add(y(A)))}return O}var E=p(0),S=p(1),F=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-R(this).m();for(var N=0,I=1,C=0;C<this.g.length;C++){var O=this.i(C);N+=(0<=O?O:4294967296+O)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(U(this))return"-"+R(this).toString(N);for(var I=y(Math.pow(N,6)),C=this,O="";;){var V=ie(C,I).g;C=Y(C,V.j(I));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=V,P(C))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=Y(this,N),U(N)?-1:P(N)?0:1};function R(N){for(var I=N.g.length,C=[],O=0;O<I;O++)C[O]=~N.g[O];return new u(C,~N.h).add(S)}n.abs=function(){return U(this)?R(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0,V=0;V<=I;V++){var L=O+(this.i(V)&65535)+(N.i(V)&65535),A=(L>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);O=A>>>16,L&=65535,A&=65535,C[V]=A<<16|L}return new u(C,C[C.length-1]&-2147483648?-1:0)};function Y(N,I){return N.add(R(I))}n.j=function(N){if(P(this)||P(N))return E;if(U(this))return U(N)?R(this).j(R(N)):R(R(this).j(N));if(U(N))return R(this.j(R(N)));if(0>this.l(F)&&0>N.l(F))return y(this.m()*N.m());for(var I=this.g.length+N.g.length,C=[],O=0;O<2*I;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<N.g.length;V++){var L=this.i(O)>>>16,A=this.i(O)&65535,ke=N.i(V)>>>16,Qe=N.i(V)&65535;C[2*O+2*V]+=A*Qe,Z(C,2*O+2*V),C[2*O+2*V+1]+=L*Qe,Z(C,2*O+2*V+1),C[2*O+2*V+1]+=A*ke,Z(C,2*O+2*V+1),C[2*O+2*V+2]+=L*ke,Z(C,2*O+2*V+2)}for(O=0;O<I;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=I;O<2*I;O++)C[O]=0;return new u(C,0)};function Z(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function X(N,I){this.g=N,this.h=I}function ie(N,I){if(P(I))throw Error("division by zero");if(P(N))return new X(E,E);if(U(N))return I=ie(R(N),I),new X(R(I.g),R(I.h));if(U(I))return I=ie(N,R(I)),new X(R(I.g),I.h);if(30<N.g.length){if(U(N)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=I;0>=O.l(N);)C=K(C),O=K(O);var V=ee(C,1),L=ee(O,1);for(O=ee(O,2),C=ee(C,2);!P(O);){var A=L.add(O);0>=A.l(N)&&(V=V.add(C),L=A),O=ee(O,1),C=ee(C,1)}return I=Y(N,V.j(I)),new X(V,I)}for(V=E;0<=N.l(I);){for(C=Math.max(1,Math.floor(N.m()/I.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=y(C),A=L.j(I);U(A)||0<A.l(N);)C-=O,L=y(C),A=L.j(I);P(L)&&(L=S),V=V.add(L),N=Y(N,A)}return new X(V,N)}n.A=function(N){return ie(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)&N.i(O);return new u(C,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)|N.i(O);return new u(C,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)^N.i(O);return new u(C,this.h^N.h)};function K(N){for(var I=N.g.length+1,C=[],O=0;O<I;O++)C[O]=N.i(O)<<1|N.i(O-1)>>>31;return new u(C,N.h)}function ee(N,I){var C=I>>5;I%=32;for(var O=N.g.length-C,V=[],L=0;L<O;L++)V[L]=0<I?N.i(L+C)>>>I|N.i(L+C+1)<<32-I:N.i(L+C);return new u(V,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Dw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,vs=u}).apply(typeof m_<"u"?m_:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lw,ol,Vw,Rc,Hf,Mw,Fw,Uw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var _=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var j=c[T];if(!(j in _))break e;_=_[j]}c=c[c.length-1],T=_[c],m=m(T),m!=T&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var _=0,T=!1,j={next:function(){if(!T&&_<c.length){var W=_++;return{value:m(W,c[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function v(c,m,_){return c.call.apply(c.bind,arguments)}function E(c,m,_){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function S(c,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function F(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function P(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(T,j,W){for(var ue=Array(arguments.length-2),He=2;He<arguments.length;He++)ue[He-2]=arguments[He];return m.prototype[j].apply(T,ue)}}function U(c){const m=c.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=c[T];return _}return[]}function R(c,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const j=c.length||0,W=T.length||0;c.length=j+W;for(let ue=0;ue<W;ue++)c[j+ue]=T[ue]}else c.push(T)}}class Y{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var K=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ee(c,m,_){for(const T in c)m.call(_,c[T],T,c)}function N(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function I(c){const m={};for(const _ in c)m[_]=c[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)c[_]=T[_];for(let W=0;W<C.length;W++)_=C[W],Object.prototype.hasOwnProperty.call(T,_)&&(c[_]=T[_])}}function V(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function L(c){d.setTimeout(()=>{throw c},0)}function A(){var c=te;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ke{constructor(){this.h=this.g=null}add(m,_){const T=Qe.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new Y(()=>new Fe,c=>c.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ae=!1,te=new ke,J=()=>{const c=d.Promise.resolve(void 0);Le=()=>{c.then(x)}};var x=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){L(_)}var m=Qe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}ae=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return c})();function ve(c,m){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(K){e:{try{ie(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ve.aa.h.call(this)}}P(ve,de);var Pe={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function We(c,m,_,T,j){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=j,this.key=++Ue,this.da=this.fa=!1}function Xe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wn(c){this.src=c,this.g={},this.h=0}wn.prototype.add=function(c,m,_,T,j){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ue=Yr(c,m,T,j);return-1<ue?(m=c[ue],_||(m.fa=!1)):(m=new We(m,this.src,W,!!T,j),m.fa=_,c.push(m)),m};function Os(c,m){var _=m.type;if(_ in c.g){var T=c.g[_],j=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(T,j,1),W&&(Xe(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Yr(c,m,_,T){for(var j=0;j<c.length;++j){var W=c[j];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==T)return j}return-1}var zi="closure_lm_"+(1e6*Math.random()|0),Ds={};function ra(c,m,_,T,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)ra(c,m[W],_,T,j);return null}return _=oa(_),c&&c[be]?c.K(m,_,y(T)?!!T.capture:!1,j):ia(c,m,_,!1,T,j)}function ia(c,m,_,T,j,W){if(!m)throw Error("Invalid event type");var ue=y(j)?!!j.capture:!!j,He=Vs(c);if(He||(c[zi]=He=new wn(c)),_=He.add(m,_,T,ue,W),_.proxy)return _;if(T=Jl(),_.proxy=T,T.src=c,T.listener=_,c.addEventListener)_e||(j=ue),j===void 0&&(j=!1),c.addEventListener(m.toString(),T,j);else if(c.attachEvent)c.attachEvent(wr(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Jl(){function c(_){return m.call(c.src,c.listener,_)}const m=sa;return c}function Ls(c,m,_,T,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)Ls(c,m[W],_,T,j);else T=y(T)?!!T.capture:!!T,_=oa(_),c&&c[be]?(c=c.i,m=String(m).toString(),m in c.g&&(W=c.g[m],_=Yr(W,_,T,j),-1<_&&(Xe(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete c.g[m],c.h--)))):c&&(c=Vs(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Yr(m,_,T,j)),(_=-1<c?m[c]:null)&&vr(_))}function vr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[be])Os(m.i,c);else{var _=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(_,T,c.capture):m.detachEvent?m.detachEvent(wr(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Vs(m))?(Os(_,c),_.h==0&&(_.src=null,m[zi]=null)):Xe(c)}}}function wr(c){return c in Ds?Ds[c]:Ds[c]="on"+c}function sa(c,m){if(c.da)c=!0;else{m=new ve(m,this);var _=c.listener,T=c.ha||c.src;c.fa&&vr(c),c=_.call(T,m)}return c}function Vs(c){return c=c[zi],c instanceof wn?c:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(m){return c.handleEvent(m)}),c[Ms])}function _t(){H.call(this),this.i=new wn(this),this.M=this,this.F=null}P(_t,H),_t.prototype[be]=!0,_t.prototype.removeEventListener=function(c,m,_,T){Ls(this,c,m,_,T)};function vt(c,m){var _,T=c.F;if(T)for(_=[];T;T=T.F)_.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new de(m,c);else if(m instanceof de)m.target=m.target||c;else{var j=m;m=new de(T,c),O(m,j)}if(j=!0,_)for(var W=_.length-1;0<=W;W--){var ue=m.g=_[W];j=Er(ue,T,!0,m)&&j}if(ue=m.g=c,j=Er(ue,T,!0,m)&&j,j=Er(ue,T,!1,m)&&j,_)for(W=0;W<_.length;W++)ue=m.g=_[W],j=Er(ue,T,!1,m)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],T=0;T<_.length;T++)Xe(_[T]);delete c.g[m],c.h--}}this.F=null},_t.prototype.K=function(c,m,_,T){return this.i.add(String(c),m,!1,_,T)},_t.prototype.L=function(c,m,_,T){return this.i.add(String(c),m,!0,_,T)};function Er(c,m,_,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var ue=m[W];if(ue&&!ue.da&&ue.capture==_){var He=ue.listener,wt=ue.ha||ue.src;ue.fa&&Os(c.i,ue),j=He.call(wt,T)!==!1&&j}}return j&&!T.defaultPrevented}function aa(c,m,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function Xr(c){c.g=aa(()=>{c.g=null,c.i&&(c.i=!1,Xr(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class $i extends H{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(c){H.call(this),this.h=c,this.g={}}P(qi,H);var la=[];function ua(c){ee(c.g,function(m,_){this.g.hasOwnProperty(_)&&vr(m)},c),c.g={}}qi.prototype.N=function(){qi.aa.N.call(this),ua(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Wi(){}Wi.prototype.h=null;function Fs(c){return c.h||(c.h=c.i())}function Us(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){de.call(this,"d")}P(Yn,de);function js(){de.call(this,"c")}P(js,de);var Xn={},fa=null;function Hi(){return fa=fa||new _t}Xn.La="serverreachability";function pa(c){de.call(this,Xn.La,c)}P(pa,de);function Tr(c){const m=Hi();vt(m,new pa(m))}Xn.STAT_EVENT="statevent";function ma(c,m){de.call(this,Xn.STAT_EVENT,c),this.stat=m}P(ma,de);function ct(c){const m=Hi();vt(m,new ma(m,c))}Xn.Ma="timingevent";function Bs(c,m){de.call(this,Xn.Ma,c),this.size=m}P(Bs,de);function bn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Gi(c,m,_,T,j,W){c.info(function(){if(c.g)if(W)for(var ue="",He=W.split("&"),wt=0;wt<He.length;wt++){var je=He[wt].split("=");if(1<je.length){var St=je[0];je=je[1];var ft=St.split("_");ue=2<=ft.length&&ft[1]=="type"?ue+(St+"="+je+"&"):ue+(St+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+_+`
`+ue})}function zs(c,m,_,T,j,W,ue){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+_+`
`+W+" "+ue})}function On(c,m,_,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vh(c,_)+(T?" "+T:"")})}function ga(c,m){c.info(function(){return"TIMEOUT: "+m})}Ki.prototype.info=function(){};function Vh(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var T=_[c];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return ca(_)}catch{return m}}var $s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Qi(){}P(Qi,Wi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},Dn=new Qi;function Ln(c,m,_,T){this.j=c,this.i=m,this.l=_,this.R=T||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}var ya={},qs={};function Ws(c,m,_){c.L=1,c.v=ri(dn(m)),c.m=_,c.P=!0,_a(c,null)}function _a(c,m){c.F=Date.now(),Je(c),c.A=dn(c.v);var _=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),si(_.i,"t",T),c.C=0,_=c.j.J,c.h=new Xl,c.g=gu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new $i(S(c.Y,c,c.g),c.O)),m=c.U,_=c.g,T=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(la[0]=j.toString()),j=la);for(var W=0;W<j.length;W++){var ue=ra(_,j[W],T||m.handleEvent,!1,m.h||m);if(!ue)break;m.g[ue.key]=ue}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Tr(),Gi(c.i,c.u,c.A,c.l,c.R,c.m)}Ln.prototype.ca=function(c){c=c.target;const m=this.M;m&&Xt(c)==3?m.j():this.Y(c)},Ln.prototype.Y=function(c){try{if(c==this.g)e:{const ft=Xt(this.g);var m=this.g.Ba();const Sn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||ft!=4||m==7||(m==8||0>=Sn?Tr(3):Tr(2)),Ji(this);var _=this.g.Z();this.X=_;t:if(Zl(this)){var T=Sa(this.g);c="";var j=T.length,W=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Zr(this);var ue="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(W&&m==j-1)});T.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=_==200,zs(this.i,this.u,this.A,this.l,this.R,ft,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,wt=this.g;if((He=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(He)){var je=He;break t}}je=null}if(_=je)On(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,_);else{this.o=!1,this.s=3,ct(12),Tn(this),Zr(this);break e}}if(this.P){_=!0;let pn;for(;!this.J&&this.C<ue.length;)if(pn=Mh(this,ue),pn==qs){ft==4&&(this.s=4,ct(14),_=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==ya){this.s=4,ct(15),On(this.i,this.l,ue,"[Invalid Chunk]"),_=!1;break}else On(this.i,this.l,pn,null),va(this,pn);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||ue.length!=0||this.h.h||(this.s=1,ct(16),_=!1),this.o=this.o&&_,!_)On(this.i,this.l,ue,"[Invalid Chunked Response]"),Tn(this),Zr(this);else if(0<ue.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Aa(St),St.M=!0,ct(11))}}else On(this.i,this.l,ue,null),va(this,ue);ft==4&&Tn(this),this.o&&!this.J&&(ft==4?no(this.j,this):(this.o=!1,Je(this)))}else Ys(this.g),_==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Tn(this),Zr(this)}}}catch{}finally{}};function Zl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Mh(c,m){var _=c.C,T=m.indexOf(`
`,_);return T==-1?qs:(_=Number(m.substring(_,T)),isNaN(_)?ya:(T+=1,T+_>m.length?qs:(m=m.slice(T,T+_),c.C=T+_,m)))}Ln.prototype.cancel=function(){this.J=!0,Tn(this)};function Je(c){c.S=Date.now()+c.I,eu(c,c.I)}function eu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=bn(S(c.ba,c),m)}function Ji(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Ln.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ga(this.i,this.A),this.L!=2&&(Tr(),ct(17)),Tn(this),this.s=2,Zr(this)):eu(this,this.S-c)};function Zr(c){c.j.G==0||c.J||no(c.j,c)}function Tn(c){Ji(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ua(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function va(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||Kt(_.h,c))){if(!c.K&&Kt(_.h,c)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)to(_),jn(_);else break e;eo(_),ct(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=bn(S(_.Za,_),6e3));if(1>=nu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Cr(_,11)}else if((c.K||_.g==c)&&to(_),!Z(m))for(j=_.Da.g.parse(m),m=0;m<j.length;m++){let je=j[m];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const St=je[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const ft=je[4];ft!=null&&(_.Aa=ft,_.j.info("SVER="+_.Aa));const Sn=je[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(T=1.5*Sn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const pn=c.g;if(pn){const rs=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rs){var W=T.h;W.g||rs.indexOf("spdy")==-1&&rs.indexOf("quic")==-1&&rs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wa(W,W.h),W.h=null))}if(T.D){const io=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(T.ya=io,Ge(T.I,T.D,io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ue=c;if(T.qa=mu(T,T.J?T.ia:null,T.W),ue.K){ru(T.h,ue);var He=ue,wt=T.L;wt&&(He.I=wt),He.B&&(Ji(He),Je(He)),T.g=ue}else ns(T);0<_.i.length&&nr(_)}else je[0]!="stop"&&je[0]!="close"||Cr(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Cr(_,7):Nt(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}Tr(4)}catch{}}var tu=class{constructor(c,m){this.g=c,this.map=m}};function Yi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nu(c){return c.h?1:c.g?c.g.size:0}function Kt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function wa(c,m){c.g?c.g.add(m):c.h=m}function ru(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Yi.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function iu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return U(c.i)}function Hs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],_=c.length,T=0;T<_;T++)m.push(c[T]);return m}m=[],_=0;for(T in c)m[_++]=c[T];return m}function Ks(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const T in c)m[_++]=T;return m}}}function ei(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=Ks(c),T=Hs(c),j=T.length,W=0;W<j;W++)m.call(void 0,T[W],_&&_[W],c)}var Xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fh(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var T=c[_].indexOf("="),j=null;if(0<=T){var W=c[_].substring(0,T);j=c[_].substring(T+1)}else W=c[_];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ir(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ir){this.h=c.h,Zi(this,c.j),this.o=c.o,this.g=c.g,ti(this,c.s),this.l=c.l;var m=c.i,_=new Zn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),ni(this,_),this.m=c.m}else c&&(m=String(c).match(Xi))?(this.h=!1,Zi(this,m[1]||"",!0),this.o=Ve(m[2]||""),this.g=Ve(m[3]||"",!0),ti(this,m[4]),this.l=Ve(m[5]||"",!0),ni(this,m[6]||"",!0),this.m=Ve(m[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}Ir.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ii(m,Gs,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ii(m,Gs,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ii(_,_.charAt(0)=="/"?au:ou,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ii(_,Ea)),c.join("")};function dn(c){return new Ir(c)}function Zi(c,m,_){c.j=_?Ve(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ti(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function ni(c,m,_){m instanceof Zn?(c.i=m,er(c.i,c.h)):(_||(m=ii(m,lu)),c.i=new Zn(m,c.h))}function Ge(c,m,_){c.i.set(m,_)}function ri(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ii(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,su),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function su(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Gs=/[#\/\?@]/g,ou=/[#\?:]/g,au=/[#\?]/g,lu=/[#\?@]/g,Ea=/#/g;function Zn(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Pt(c){c.g||(c.g=new Map,c.h=0,c.i&&Fh(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=Zn.prototype,n.add=function(c,m){Pt(this),this.i=null,c=In(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function Vn(c,m){Pt(c),m=In(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Mn(c,m){return Pt(c),m=In(c,m),c.g.has(m)}n.forEach=function(c,m){Pt(this),this.g.forEach(function(_,T){_.forEach(function(j){c.call(m,j,T,this)},this)},this)},n.na=function(){Pt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const j=c[T];for(let W=0;W<j.length;W++)_.push(m[T])}return _},n.V=function(c){Pt(this);let m=[];if(typeof c=="string")Mn(this,c)&&(m=m.concat(this.g.get(In(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},n.set=function(c,m){return Pt(this),this.i=null,c=In(this,c),Mn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function si(c,m,_){Vn(c,m),0<_.length&&(c.i=null,c.g.set(In(c,m),U(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const W=encodeURIComponent(String(T)),ue=this.V(T);for(T=0;T<ue.length;T++){var j=W;ue[T]!==""&&(j+="="+encodeURIComponent(String(ue[T]))),c.push(j)}}return this.i=c.join("&")};function In(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function er(c,m){m&&!c.j&&(Pt(c),c.i=null,c.g.forEach(function(_,T){var j=T.toLowerCase();T!=j&&(Vn(this,T),si(this,j,_))},c)),c.j=m}function Uh(c,m){const _=new Ki;if(d.Image){const T=new Image;T.onload=F(Yt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=F(Yt,_,"TestLoadImage: error",!1,m,T),T.onabort=F(Yt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=F(Yt,_,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function uu(c,m){const _=new Ki,T=new AbortController,j=setTimeout(()=>{T.abort(),Yt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(W=>{clearTimeout(j),W.ok?Yt(_,"TestPingServer: ok",!0,m):Yt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Yt(_,"TestPingServer: error",!1,m)})}function Yt(c,m,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function jh(){this.g=new da}function cu(c,m,_){const T=_||"";try{ei(c,function(j,W){let ue=j;y(j)&&(ue=ca(j)),m.push(T+W+"="+encodeURIComponent(ue))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function Sr(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Sr,Wi),Sr.prototype.g=function(){return new es(this.l,this.j)},Sr.prototype.i=(function(c){return function(){return c}})({});function es(c,m){_t.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(es,_t),n=es.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Un(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Fn(this):Un(this),this.readyState==3&&hu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Fn(this))},n.Qa=function(c){this.g&&(this.response=c,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Un(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Un(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rr(c){let m="";return ee(c,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function oi(c,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Rr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ge(c,m,_))}function nt(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(nt,_t);var Bh=/^https?$/i,Ta=["POST","PUT"];n=nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Fs(this.o):Fs(Dn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(W){ts(this,W);return}if(c=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),j=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ta,m,void 0))||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of _)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ts(this,W)}};function ts(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Qs(c),fn(c)}function Qs(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),fn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Xt(c)!=4||c.Z()!=2)){if(c.u&&Xt(c)==4)aa(c.Ea,0,c);else if(vt(c,"readystatechange"),Xt(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=ue===0){var j=String(c.D).match(Xi)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Bh.test(j?j.toLowerCase():"")}_=T}if(_)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var W=2<Xt(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Qs(c)}}finally{fn(c)}}}}function fn(c,m){if(c.g){Js(c);const _=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||vt(c,"ready");try{_.onreadystatechange=T}catch{}}}function Js(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Xt(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ha(m)}};function Sa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(c){const m={};c=(c.g&&2<=Xt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(Z(c[T]))continue;var _=V(c[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[j]||[];m[j]=W,W.push(_)}N(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function Ra(c){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,c),this.cb=tr("retryDelaySeedMs",1e4,c),this.Wa=tr("forwardChannelMaxRetries",2,c),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(c&&c.concurrentRequestLimit),this.Da=new jh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ra.prototype,n.la=8,n.G=1,n.connect=function(c,m,_,T){ct(0),this.W=c,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=mu(this,null,this.W),nr(this)};function Nt(c){if(Xs(c),c.G==3){var m=c.U++,_=dn(c.I);if(Ge(_,"SID",c.K),Ge(_,"RID",m),Ge(_,"TYPE","terminate"),Ar(c,_),m=new Ln(c,c.j,m),m.L=2,m.v=ri(dn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}pu(c)}function jn(c){c.g&&(Aa(c),c.g.cancel(),c.g=null)}function Xs(c){jn(c),c.u&&(d.clearTimeout(c.u),c.u=null),to(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function nr(c){if(!hn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Le||J(),ae||(Le(),ae=!0),te.add(m,c),c.B=0}}function zh(c,m){return nu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=bn(S(c.Ga,c,m),fu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Ln(this,this.j,c);let W=this.o;if(this.S&&(W?(W=I(W),O(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ai(this,j,m),_=dn(this.I),Ge(_,"RID",c),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),Ar(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(Rr(W)))+"&"+m:this.m&&oi(_,this.m,W)),wa(this.h,j),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",m),Ge(_,"SID","null"),j.T=!0,Ws(j,_,null)):Ws(j,_,m),this.G=2}}else this.G==3&&(c?Zs(this,c):this.i.length==0||hn(this.h)||Zs(this))};function Zs(c,m){var _;m?_=m.l:_=c.U++;const T=dn(c.I);Ge(T,"SID",c.K),Ge(T,"RID",_),Ge(T,"AID",c.T),Ar(c,T),c.m&&c.o&&oi(T,c.m,c.o),_=new Ln(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ai(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wa(c.h,_),Ws(_,T,m)}function Ar(c,m){c.H&&ee(c.H,function(_,T){Ge(m,T,_)}),c.l&&ei({},function(_,T){Ge(m,T,_)})}function ai(c,m,_){_=Math.min(c.i.length,_);var T=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let W=-1;for(;;){const ue=["count="+_];W==-1?0<_?(W=j[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let He=!0;for(let wt=0;wt<_;wt++){let je=j[wt].g;const St=j[wt].map;if(je-=W,0>je)W=Math.max(0,j[wt].g-100),He=!1;else try{cu(St,ue,"req"+je+"_")}catch{T&&T(St)}}if(He){T=ue.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,T}function ns(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Le||J(),ae||(Le(),ae=!0),te.add(m,c),c.v=0}}function eo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=bn(S(c.Fa,c),fu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=bn(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),jn(this),du(this))};function Aa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function du(c){c.g=new Ln(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=dn(c.qa);Ge(m,"RID","rpc"),Ge(m,"SID",c.K),Ge(m,"AID",c.T),Ge(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(m,"TO",c.ja),Ge(m,"TYPE","xmlhttp"),Ar(c,m),c.m&&c.o&&oi(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ri(dn(m)),_.m=null,_.P=!0,_a(_,c)}n.Za=function(){this.C!=null&&(this.C=null,jn(this),eo(this),ct(19))};function to(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function no(c,m){var _=null;if(c.g==m){to(c),Aa(c),c.g=null;var T=2}else if(Kt(c.h,m))_=m.D,ru(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;T=Hi(),vt(T,new Bs(T,_)),nr(c)}else ns(c);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&zh(c,m)||T==2&&eo(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),j){case 1:Cr(c,5);break;case 4:Cr(c,10);break;case 3:Cr(c,6);break;default:Cr(c,2)}}}function fu(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function Cr(c,m){if(c.j.info("Error code "+m),m==2){var _=S(c.fb,c),T=c.Xa;const j=!T;T=new Ir(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Zi(T,"https"),ri(T),j?Uh(T.toString(),_):uu(T.toString(),_)}else ct(2);c.G=0,c.l&&c.l.sa(m),pu(c),Xs(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const m=iu(c.h);(m.length!=0||c.i.length!=0)&&(R(c.ka,m),R(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function mu(c,m,_){var T=_ instanceof Ir?dn(_):new Ir(_);if(T.g!="")m&&(T.g=m+"."+T.g),ti(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new Ir(null);T&&Zi(W,T),m&&(W.g=m),j&&ti(W,j),_&&(W.l=_),T=W}return _=c.D,m=c.ya,_&&m&&Ge(T,_,m),Ge(T,"VER",c.la),Ar(c,T),T}function gu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new nt(new Sr({eb:_})):new nt(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}n=Ca.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ro(){}ro.prototype.g=function(c,m){return new Gt(c,m)};function Gt(c,m){_t.call(this),this.g=new Ra(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!Z(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new rr(this)}P(Gt,_t),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Nt(this.g)},Gt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ca(c),c=_);m.i.push(new tu(m.Ya++,c)),m.G==3&&nr(m)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Gt.aa.N.call(this)};function yu(c){Yn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}P(yu,Yn);function _u(){js.call(this),this.status=1}P(_u,js);function rr(c){this.g=c}P(rr,Ca),rr.prototype.ua=function(){vt(this.g,"a")},rr.prototype.ta=function(c){vt(this.g,new yu(c))},rr.prototype.sa=function(c){vt(this.g,new _u)},rr.prototype.ra=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Uw=function(){return new ro},Fw=function(){return Hi()},Mw=Xn,Hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,Rc=$s,Yl.COMPLETE="complete",Vw=Yl,Us.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ol=Us,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Lw=nt}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const g_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new wp("@firebase/firestore");function Xa(){return Ss.logLevel}function ge(n,...e){if(Ss.logLevel<=Me.DEBUG){const t=e.map(xp);Ss.debug(`Firestore (${Ko}): ${n}`,...t)}}function $r(n,...e){if(Ss.logLevel<=Me.ERROR){const t=e.map(xp);Ss.error(`Firestore (${Ko}): ${n}`,...t)}}function Vo(n,...e){if(Ss.logLevel<=Me.WARN){const t=e.map(xp);Ss.warn(`Firestore (${Ko}): ${n}`,...t)}}function xp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Ke(n,e){n||Re()}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class nC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new jr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new jr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new jw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new zt(e)}}class iC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new iC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new oC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=lC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Mo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new It(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new It(0,0))}static max(){return new Ae(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(),i===void 0?i=e.length-t:i>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tt extends wl{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const uC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends wl{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return uC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(tt.fromString(e))}static fromName(e){return new we(tt.fromString(e).popFirst(5))}static empty(){return new we(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new tt(e.slice()))}}function cC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new Vi(o,we.empty(),e)}function hC(n){return new Vi(n.readTime,n.key,-1)}class Vi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vi(Ae.min(),we.empty(),-1)}static max(){return new Vi(Ae.max(),we.empty(),-1)}}function dC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==fC)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((v=>{u[y]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function mC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bp.oe=-1;function uh(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function gC(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new __(this.data.getIterator())}getIteratorFrom(e){return new __(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class __{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new _n([])}unionWith(e){let t=new Lt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $w("Invalid base64 string: "+a):a}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const yC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=yC.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rs(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Dp(n){const e=n.mapValue.fields.__previous_value__;return Op(e)?Dp(e):e}function El(n){const e=Mi(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,i,o,a,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc={mapValue:{}};function As(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Op(n)?4:wC(n)?9007199254740991:vC(n)?10:11:Re()}function mr(n,e){if(n===e)return!0;const t=As(n);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Mi(o.timestampValue),d=Mi(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Rs(o.bytesValue).isEqual(Rs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return dt(o.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return dt(o.integerValue)===dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=dt(o.doubleValue),d=dt(a.doubleValue);return u===d?zc(u)===zc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Mo(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(y_(u)!==y_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!mr(u[p],d[p])))return!1;return!0})(n,e);default:return Re()}}function Il(n,e){return(n.values||[]).find((t=>mr(t,e)))!==void 0}function Fo(n,e){if(n===e)return 0;const t=As(n),i=As(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=dt(a.integerValue||a.doubleValue),p=dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return v_(n.timestampValue,e.timestampValue);case 4:return v_(El(n),El(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Rs(a),p=Rs(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const v=qe(d[y],p[y]);if(v!==0)return v}return qe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(dt(a.latitude),dt(u.latitude));return d!==0?d:qe(dt(a.longitude),dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return w_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,y,v;const E=a.fields||{},S=u.fields||{},F=(d=E.value)===null||d===void 0?void 0:d.arrayValue,P=(p=S.value)===null||p===void 0?void 0:p.arrayValue,U=qe(((y=F?.values)===null||y===void 0?void 0:y.length)||0,((v=P?.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:w_(F,P)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===mc.mapValue&&u===mc.mapValue)return 0;if(a===mc.mapValue)return 1;if(u===mc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=qe(p[E],v[E]);if(S!==0)return S;const F=Fo(d[p[E]],y[v[E]]);if(F!==0)return F}return qe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Re()}}function v_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Mi(n),i=Mi(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function w_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Fo(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Uo(n){return Kf(n)}function Kf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Mi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Rs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Kf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Kf(t.fields[u])}`;return o+"}"})(n.mapValue):Re()}function E_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gf(n){return!!n&&"integerValue"in n}function Lp(n){return!!n&&"arrayValue"in n}function T_(n){return!!n&&"nullValue"in n}function I_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ac(n){return!!n&&"mapValue"in n}function vC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=hl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ns(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new on(hl(this.value))}}function qw(n){const e=[];return Ns(n.fields,((t,i)=>{const o=new Dt([t]);if(Ac(i)){const a=qw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),on.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ae.min(),Ae.min(),on.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ae.min(),Ae.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.position=e,this.inclusive=t}}function S_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=Fo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function R_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function EC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class gt extends Ww{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new IC(e,t,i):t==="array-contains"?new AC(e,i):t==="in"?new CC(e,i):t==="not-in"?new kC(e,i):t==="array-contains-any"?new PC(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new SC(e,i):new RC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fo(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends Ww{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Qn(e,t)}matches(e){return Hw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hw(n){return n.op==="and"}function Kw(n){return TC(n)&&Hw(n)}function TC(n){for(const e of n.filters)if(e instanceof Qn)return!1;return!0}function Qf(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(Kw(n))return n.filters.map((e=>Qf(e))).join(",");{const e=n.filters.map((t=>Qf(t))).join(",");return`${n.op}(${e})`}}function Gw(n,e){return n instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&mr(i.value,o.value)})(n,e):n instanceof Qn?(function(i,o){return o instanceof Qn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Gw(u,o.filters[d])),!0):!1})(n,e):void Re()}function Qw(n){return n instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof Qn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qw).join(" ,")+"}"})(n):"Filter"}class IC extends gt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class SC extends gt{constructor(e,t){super(e,"in",t),this.keys=Jw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RC extends gt{constructor(e,t){super(e,"not-in",t),this.keys=Jw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class AC extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lp(t)&&Il(t.arrayValue,this.value)}}class CC extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Il(this.value.arrayValue,t)}}class kC extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Il(this.value.arrayValue,t)}}class PC extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Il(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function A_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new NC(n,e,t,i,o,a,u)}function Vp(n){const e=Ce(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Uo(i))).join(",")),e.ue=t}return e.ue}function Mp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!R_(n.startAt,e.startAt)&&R_(n.endAt,e.endAt)}function Jf(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xC(n,e,t,i,o,a,u,d){return new Go(n,e,t,i,o,a,u,d)}function ch(n){return new Go(n)}function C_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Yw(n){return n.collectionGroup!==null}function dl(n){const e=Ce(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Lt(Dt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Sl(a,i))})),t.has(Dt.keyField().canonicalString())||e.ce.push(new Sl(Dt.keyField(),i))}return e.ce}function fr(n){const e=Ce(n);return e.le||(e.le=bC(e,dl(n))),e.le}function bC(n,e){if(n.limitType==="F")return A_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Sl(o.field,a)}));const t=n.endAt?new $c(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $c(n.startAt.position,n.startAt.inclusive):null;return A_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yf(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qc(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return Mp(fr(n),fr(e))&&n.limitType===e.limitType}function Xw(n){return`${Vp(fr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Qw(o))).join(", ")}]`),uh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(fr(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of dl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const y=S_(u,d,p);return u.inclusive?y<=0:y<0})(i.startAt,dl(i),o)||i.endAt&&!(function(u,d,p){const y=S_(u,d,p);return u.inclusive?y>=0:y>0})(i.endAt,dl(i),o))})(n,e)}function OC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zw(n){return(e,t)=>{let i=!1;for(const o of dl(n)){const a=DC(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function DC(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?Fo(p,y):Re()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return zw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new at(we.comparator);function qr(){return LC}const eE=new at(we.comparator);function al(...n){let e=eE;for(const t of n)e=e.insert(t.key,t);return e}function tE(n){let e=eE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ys(){return fl()}function nE(){return fl()}function fl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const VC=new at(we.comparator),MC=new Lt(we.comparator);function De(...n){let e=MC;for(const t of n)e=e.add(t);return e}const FC=new Lt(qe);function UC(){return FC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function rE(n){return{integerValue:""+n}}function jC(n,e){return gC(e)?rE(e):Fp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function BC(n,e,t){return n instanceof Rl?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Op(a)&&(a=Dp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Al?sE(n,e):n instanceof jo?oE(n,e):(function(o,a){const u=iE(o,a),d=k_(u)+k_(o.Pe);return Gf(u)&&Gf(o.Pe)?rE(d):Fp(o.serializer,d)})(n,e)}function zC(n,e,t){return n instanceof Al?sE(n,e):n instanceof jo?oE(n,e):t}function iE(n,e){return n instanceof Wc?(function(i){return Gf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Rl extends fh{}class Al extends fh{constructor(e){super(),this.elements=e}}function sE(n,e){const t=aE(e);for(const i of n.elements)t.some((o=>mr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class jo extends fh{constructor(e){super(),this.elements=e}}function oE(n,e){let t=aE(e);for(const i of n.elements)t=t.filter((o=>!mr(o,i)));return{arrayValue:{values:t}}}class Wc extends fh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function k_(n){return dt(n.integerValue||n.doubleValue)}function aE(n){return Lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t){this.field=e,this.transform=t}}function $C(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Al&&o instanceof Al||i instanceof jo&&o instanceof jo?Mo(i.elements,o.elements,mr):i instanceof Wc&&o instanceof Wc?mr(i.Pe,o.Pe):i instanceof Rl&&o instanceof Rl})(n.transform,e.transform)}class qC{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ph{}function uE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Up(n.key,xn.none()):new Ul(n.key,n.data,xn.none());{const t=n.data,i=on.empty();let o=new Lt(Dt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Bi(n.key,i,new _n(o.toArray()),xn.none())}}function WC(n,e,t){n instanceof Ul?(function(o,a,u){const d=o.value.clone(),p=N_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Bi?(function(o,a,u){if(!Cc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=N_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(cE(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pl(n,e,t,i){return n instanceof Ul?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=a.value.clone(),v=x_(a.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Bi?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=x_(a.fieldTransforms,p,u),v=u.data;return v.setAll(cE(a)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Cc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function HC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=iE(i.transform,o||null);a!=null&&(t===null&&(t=on.empty()),t.set(i.field,a))}return t||null}function P_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((a,u)=>$C(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ul extends ph{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bi extends ph{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function N_(n,e,t){const i=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,zC(u,d,t[o]))}return i}function x_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,BC(a,u,e))}return i}class Up extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KC extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&WC(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=uE(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>P_(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>P_(t,i)))}}class jp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=(function(){return VC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new jp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Be;function YC(n){switch(n){default:return Re();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function hE(n){if(n===void 0)return $r("GRPC error has no .code"),Q.UNKNOWN;switch(n){case mt.OK:return Q.OK;case mt.CANCELLED:return Q.CANCELLED;case mt.UNKNOWN:return Q.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Q.INTERNAL;case mt.UNAVAILABLE:return Q.UNAVAILABLE;case mt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case mt.NOT_FOUND:return Q.NOT_FOUND;case mt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case mt.ABORTED:return Q.ABORTED;case mt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case mt.DATA_LOSS:return Q.DATA_LOSS;default:return Re()}}(Be=mt||(mt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new vs([4294967295,4294967295],0);function b_(n){const e=XC().encode(n),t=new Dw;return t.update(e),new Uint8Array(t.digest())}function O_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([t,i],0),new vs([o,a],0)]}class Bp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ll(`Invalid padding: ${t}`);if(i<0)throw new ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ll(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=vs.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(vs.fromNumber(i)));return o.compare(ZC)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=b_(e),[i,o]=O_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Bp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=b_(e),[i,o]=O_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new mh(Ae.min(),o,new at(qe),qr(),De())}}class jl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new jl(i,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class dE{constructor(e,t){this.targetId=e,this.me=t}}class fE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class D_{constructor(){this.fe=0,this.ge=V_(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),i=De();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re()}})),new jl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=V_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ek{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=L_(),this.Qe=new at(qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Jf(a))if(i===0){const u=new we(a.path);this.Ue(t,u,$t.newNoDocument(u,Ae.min()))}else Ke(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),p=d?this.Xe(d,e,u):1;if(p!==0){this.je(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Rs(i).toUint8Array()}catch(p){if(p instanceof $w)return Vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Bp(u,o,a)}catch(p){return Vo(p instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&Jf(d.target)){const p=new we(d.target.path);this.ke.get(p)!==null||this.it(u,p)||this.Ue(u,p,$t.newNoDocument(p,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let i=De();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new mh(e,t,this.Qe,this.ke,i);return this.ke=qr(),this.qe=L_(),this.Qe=new at(qe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new D_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function L_(){return new at(we.comparator)}function V_(){return new at(we.comparator)}const tk={asc:"ASCENDING",desc:"DESCENDING"},nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rk={and:"AND",or:"OR"};class ik{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xf(n,e){return n.useProto3Json||uh(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sk(n,e){return Hc(n,e.toTimestamp())}function pr(n){return Ke(!!n),Ae.fromTimestamp((function(t){const i=Mi(t);return new It(i.seconds,i.nanos)})(n))}function zp(n,e){return Zf(n,e).canonicalString()}function Zf(n,e){const t=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mE(n){const e=tt.fromString(n);return Ke(wE(e)),e}function ep(n,e){return zp(n.databaseId,e.path)}function Ef(n,e){const t=mE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(yE(t))}function gE(n,e){return zp(n.databaseId,e)}function ok(n){const e=mE(n);return e.length===4?tt.emptyPath():yE(e)}function tp(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function M_(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function ak(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,v){return y.useProto3Json?(Ke(v===void 0||typeof v=="string"),Vt.fromBase64String(v||"")):(Ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Vt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const v=y.code===void 0?Q.UNKNOWN:hE(y.code);return new ce(v,y.message||"")})(u);t=new fE(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ef(n,i.document.name),a=pr(i.document.updateTime),u=i.document.createTime?pr(i.document.createTime):Ae.min(),d=new on({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,a,u,d),y=i.targetIds||[],v=i.removedTargetIds||[];t=new kc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ef(n,i.document),a=i.readTime?pr(i.readTime):Ae.min(),u=$t.newNoDocument(o,a),d=i.removedTargetIds||[];t=new kc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ef(n,i.document),a=i.removedTargetIds||[];t=new kc([],a,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new JC(o,a),d=i.targetId;t=new dE(d,u)}}return t}function lk(n,e){let t;if(e instanceof Ul)t={update:M_(n,e.key,e.value)};else if(e instanceof Up)t={delete:ep(n,e.key)};else if(e instanceof Bi)t={update:M_(n,e.key,e.data),updateMask:yk(e.fieldMask)};else{if(!(e instanceof KC))return Re();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Rl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof jo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Re()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:sk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(n,e.precondition)),t}function uk(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?pr(o.updateTime):pr(a);return u.isEqual(Ae.min())&&(u=pr(a)),new qC(u,o.transformResults||[])})(t,e)))):[]}function ck(n,e){return{documents:[gE(n,e.path)]}}function hk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gE(n,o);const a=(function(y){if(y.length!==0)return vE(Qn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:Co(S.field),direction:pk(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Xf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function dk(n){let e=ok(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const S=_E(E);return S instanceof Qn&&Kw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(P){return new Sl(ko(P.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,uh(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,F=E.values||[];return new $c(F,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,F=E.values||[];return new $c(F,S)})(t.endAt)),xC(e,o,u,a,d,"F",p,y)}function fk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _E(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ko(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ko(t.unaryFilter.field);return gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ko(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(n):n.fieldFilter!==void 0?(function(t){return gt.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qn.create(t.compositeFilter.filters.map((i=>_E(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(t.compositeFilter.op))})(n):Re()}function pk(n){return tk[n]}function mk(n){return nk[n]}function gk(n){return rk[n]}function Co(n){return{fieldPath:n.canonicalString()}}function ko(n){return Dt.fromServerFormat(n.fieldPath)}function vE(n){return n instanceof gt?(function(t){if(t.op==="=="){if(I_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(T_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(I_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(T_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:mk(t.op),value:t.value}}})(n):n instanceof Qn?(function(t){const i=t.getFilters().map((o=>vE(o)));return i.length===1?i[0]:{compositeFilter:{op:gk(t.op),filters:i}}})(n):Re()}function yk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t,i,o,a=Ae.min(),u=Ae.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.ct=e}}function vk(n){const e=dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.un=new Ek}addToCollectionParentIndex(e,t){return this.un.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Vi.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Ek{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(tt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bo(0)}static kn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&pl(i.mutation,o,_n.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,De()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=De()){const o=ys();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=al();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ys();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,De())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=qr();const u=fl(),d=(function(){return fl()})();return t.forEach(((p,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Bi)?a=a.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),pl(v.mutation,y,v.mutation.getFieldMask(),It.now())):u.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>{var E;return d.set(y,new Ik(v,(E=u.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=fl();let o=new at(((u,d)=>u-d)),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||_n.empty();v=d.applyToLocalView(y,v),i.set(p,v);const E=(o.get(d.batchId)||De()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,v=p.value,E=nE();v.forEach((S=>{if(!a.has(S)){const F=uE(t.get(S),i.get(S));F!==null&&E.set(S,F),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(ys());let d=-1,p=a;return u.next((y=>se.forEach(y,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,De()))).next((v=>({batchId:d,changes:tE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=al();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=al();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const y=(function(E,S){return new Go(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,$t.newInvalidDocument(v)))}));let d=al();return u.forEach(((p,y)=>{const v=a.get(p);v!==void 0&&pl(v.mutation,y,_n.empty(),It.now()),dh(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:vk(o.bundledQuery),readTime:pr(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.overlays=new at(we.comparator),this.Ir=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ys();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.ht(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=ys(),a=t.length+1,u=new we(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new at(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=a.get(y.largestBatchId);v===null&&(v=ys(),a=a.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=ys(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>d.set(y,v))),!(d.size()>=o)););return se.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new QC(t,i));let a=this.Ir.get(t);a===void 0&&(a=De(),this.Ir.set(t,a)),this.Ir.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Tr=new Lt(kt.Er),this.dr=new Lt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new kt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new we(new tt([])),i=new kt(t,e),o=new kt(t,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new we(new tt([])),i=new kt(t,e),o=new kt(t,e+1);let a=De();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new kt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return we.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(kt.Er)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new GC(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new kt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(qe);return t.forEach((o=>{const a=new kt(o,0),u=new kt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),se.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const u=new kt(new we(a),0);let d=new Lt(qe);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.wr)),!0)}),u),se.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return se.forEach(t.mutations,(o=>{const a=new kt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new kt(t,0),o=this.br.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.Mr=e,this.docs=(function(){return new at(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=qr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():$t.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=qr();const u=t.path,d=new we(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||dC(hC(v),i)<=0||(o.has(v.key)||dh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Re()}Or(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Nk(this)}getSize(e){return se.resolve(this.size)}}class Nk extends Tk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.persistence=e,this.Nr=new Qo((t=>Vp(t)),Mp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $p,this.targetCount=0,this.kr=Bo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Kn(t),se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new bp(0),this.Kr=!1,this.Kr=!0,this.$r=new Ck,this.referenceDelegate=e(this),this.Ur=new xk(this),this.indexManager=new wk,this.remoteDocumentCache=(function(o){return new Pk(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new _k(t),this.Gr=new Rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ak,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new kk(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new Ok(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return se.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class Ok extends pC{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Jr=new $p,this.Yr=null}static Zr(e){return new qp(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Xr,(i=>{const o=we.fromPath(i);return this.ei(e,o).next((a=>{a||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return se.or([()=>se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=De(),o=De();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Wp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return EI()?8:mC(Ht())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Dk;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Xa()<=Me.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),se.resolve()):(Xa()<=Me.DEBUG&&ge("QueryEngine","Query:",Ao(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Xa()<=Me.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(t))):se.resolve())}Yi(e,t){if(C_(t))return se.resolve(null);let i=fr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qc(t,null,"F"),i=fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=De(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(t,d);return this.ns(t,y,u,p.readTime)?this.Yi(e,qc(t,null,"F")):this.rs(e,y,t,p)}))))})))))}Zi(e,t,i,o){return C_(t)||o.isEqual(Ae.min())?se.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(t,a);return this.ns(t,u,i,o)?se.resolve(null):(Xa()<=Me.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.rs(e,u,t,cC(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Lt(Zw(e));return t.forEach(((o,a)=>{dh(e,a)&&(i=i.add(a))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,i){return Xa()<=Me.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.Ji.getDocumentsMatchingQuery(e,t,Vi.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new at(qe),this._s=new Qo((a=>Vp(a)),Mp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Mk(n,e,t,i){return new Vk(n,e,t,i)}async function EE(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=De();for(const y of o){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of a){d.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function Fk(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,v){const E=y.batch,S=E.keys();let F=se.resolve();return S.forEach((P=>{F=F.next((()=>v.getEntry(p,P))).next((U=>{const R=y.docVersions.get(P);Ke(R!==null),U.version.compareTo(R)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),F.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=De();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function TE(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Uk(n,e){const t=Ce(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.Ur.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,v.addedDocuments,E))));let F=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?F=F.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(v.resumeToken,i)),o=o.insert(E,F),(function(U,R,Y){return U.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,F,v)&&d.push(t.Ur.updateTargetData(a,F))}));let p=qr(),y=De();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(jk(a,u,e.documentUpdates).next((v=>{p=v.Ps,y=v.Is}))),!i.isEqual(Ae.min())){const v=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.os=o,a)))}function jk(n,e,t){let i=De(),o=De();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=qr();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ps:u,Is:o}}))}function Bk(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function zk(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Ur.allocateTargetId(i).next((u=>(o=new Ci(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function np(n,e,t){const i=Ce(n),o=i.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Fl(u))throw u;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function F_(n,e,t){const i=Ce(n);let o=Ae.min(),a=De();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,v){const E=Ce(p),S=E._s.get(v);return S!==void 0?se.resolve(E.os.get(S)):E.Ur.getTargetData(y,v)})(i,u,fr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?o:Ae.min(),t?a:De()))).next((d=>($k(i,OC(e),d),{documents:d,Ts:a})))))}function $k(n,e,t){let i=n.us.get(e)||Ae.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.us.set(e,i)}class U_{constructor(){this.activeTargetIds=UC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qk{constructor(){this.so=new U_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new U_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Tf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Gk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,i,o,a,u){const d=Tf(),p=this.xo(t,i.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,a,u),this.No(t,p,y,o).then((v=>(ge("RestConnection",`Received RPC '${t}' ${d}: `,v),v)),(v=>{throw Vo("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v}))}Lo(t,i,o,a,u,d){return this.Mo(t,i,o,a,u)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,i){const o=Hk[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const a=Tf();return new Promise(((u,d)=>{const p=new Lw;p.setWithCredentials(!0),p.listenOnce(Vw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rc.NO_ERROR:const v=p.getResponseJson();ge(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Rc.TIMEOUT:ge(Bt,`RPC '${e}' ${a} timed out`),d(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const E=p.getStatus();if(ge(Bt,`RPC '${e}' ${a} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const F=S?.error;if(F&&F.status&&F.message){const P=(function(R){const Y=R.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(Y)>=0?Y:Q.UNKNOWN})(F.status);d(new ce(P,F.message))}else d(new ce(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ge(Bt,`RPC '${e}' ${a} completed.`)}}));const y=JSON.stringify(o);ge(Bt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=Tf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Uw(),d=Fw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");ge(Bt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=u.createWebChannel(v,p);let S=!1,F=!1;const P=new Kk({Io:R=>{F?ge(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,R):(S||(ge(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ge(Bt,`RPC '${e}' stream ${o} sending:`,R),E.send(R))},To:()=>E.close()}),U=(R,Y,Z)=>{R.listen(Y,(X=>{try{Z(X)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return U(E,ol.EventType.OPEN,(()=>{F||(ge(Bt,`RPC '${e}' stream ${o} transport opened.`),P.yo())})),U(E,ol.EventType.CLOSE,(()=>{F||(F=!0,ge(Bt,`RPC '${e}' stream ${o} transport closed`),P.So())})),U(E,ol.EventType.ERROR,(R=>{F||(F=!0,Vo(Bt,`RPC '${e}' stream ${o} transport errored:`,R),P.So(new ce(Q.UNAVAILABLE,"The operation could not be completed")))})),U(E,ol.EventType.MESSAGE,(R=>{var Y;if(!F){const Z=R.data[0];Ke(!!Z);const X=Z,ie=X.error||((Y=X[0])===null||Y===void 0?void 0:Y.error);if(ie){ge(Bt,`RPC '${e}' stream ${o} received error:`,ie);const K=ie.status;let ee=(function(C){const O=mt[C];if(O!==void 0)return hE(O)})(K),N=ie.message;ee===void 0&&(ee=Q.INTERNAL,N="Unknown error status: "+K+" with message "+ie.message),F=!0,P.So(new ce(ee,N)),E.close()}else ge(Bt,`RPC '${e}' stream ${o} received:`,Z),P.bo(Z)}})),U(d,Mw.STAT_EVENT,(R=>{R.stat===Hf.PROXY?ge(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):R.stat===Hf.NOPROXY&&ge(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){return new ik(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,i,o,a,u,d,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new IE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new ce(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qk extends SE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=ak(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ae.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?pr(u.readTime):Ae.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Jf(p)?{documents:ck(a,p)}:{query:hk(a,p)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=pE(a,u.resumeToken);const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Hc(a,u.snapshotVersion.toTimestamp());const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=fk(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.a_(t)}}class Jk extends SE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=uk(e.writeResults,e.commitTime),i=pr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=tp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>lk(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Zf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(Q.UNKNOWN,a.toString())}))}Lo(e,t,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,Zf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(Q.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Xk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($r(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{xs(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Ce(p);y.L_.add(4),await Bl(y),y.q_.set("Unknown"),y.L_.delete(4),await yh(y)})(this))}))})),this.q_=new Xk(i,o)}}async function yh(n){if(xs(n))for(const e of n.B_)await e(!0)}async function Bl(n){for(const e of n.B_)await e(!1)}function RE(n,e){const t=Ce(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qp(t)?Gp(t):Jo(t).r_()&&Kp(t,e))}function Hp(n,e){const t=Ce(n),i=Jo(t);t.N_.delete(e),i.r_()&&AE(t,e),t.N_.size===0&&(i.r_()?i.o_():xs(t)&&t.q_.set("Unknown"))}function Kp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).A_(e)}function AE(n,e){n.Q_.xe(e),Jo(n).R_(e)}function Gp(n){n.Q_=new ek({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.q_.v_()}function Qp(n){return xs(n)&&!Jo(n).n_()&&n.N_.size>0}function xs(n){return Ce(n).L_.size===0}function CE(n){n.Q_=void 0}async function eP(n){n.q_.set("Online")}async function tP(n){n.N_.forEach(((e,t)=>{Kp(n,e)}))}async function nP(n,e){CE(n),Qp(n)?(n.q_.M_(e),Gp(n)):n.q_.set("Unknown")}async function rP(n,e,t){if(n.q_.set("Online"),e instanceof fE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kc(n,i)}else if(e instanceof kc?n.Q_.Ke(e):e instanceof dE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{const i=await TE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.N_.get(y);v&&a.N_.set(y,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const v=a.N_.get(p);if(!v)return;a.N_.set(p,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),AE(a,p);const E=new Ci(v.target,p,y,v.sequenceNumber);Kp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ge("RemoteStore","Failed to raise snapshot:",i),await Kc(n,i)}}async function Kc(n,e,t){if(!Fl(e))throw e;n.L_.add(1),await Bl(n),n.q_.set("Offline"),t||(t=()=>TE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yh(n)}))}function kE(n,e){return e().catch((t=>Kc(n,t,e)))}async function _h(n){const e=Ce(n),t=Fi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iP(e);)try{const o=await Bk(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,sP(e,o)}catch(o){await Kc(e,o)}PE(e)&&NE(e)}function iP(n){return xs(n)&&n.O_.length<10}function sP(n,e){n.O_.push(e);const t=Fi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function PE(n){return xs(n)&&!Fi(n).n_()&&n.O_.length>0}function NE(n){Fi(n).start()}async function oP(n){Fi(n).p_()}async function aP(n){const e=Fi(n);for(const t of n.O_)e.m_(t.mutations)}async function lP(n,e,t){const i=n.O_.shift(),o=jp.from(i,e,t);await kE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await _h(n)}async function uP(n,e){e&&Fi(n).V_&&await(async function(i,o){if((function(u){return YC(u)&&u!==Q.ABORTED})(o.code)){const a=i.O_.shift();Fi(i).s_(),await kE(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await _h(i)}})(n,e),PE(n)&&NE(n)}async function B_(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const i=xs(t);t.L_.add(3),await Bl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yh(t)}async function cP(n,e){const t=Ce(n);e?(t.L_.delete(2),await yh(t)):e||(t.L_.add(2),await Bl(t),t.q_.set("Unknown"))}function Jo(n){return n.K_||(n.K_=(function(t,i,o){const a=Ce(t);return a.w_(),new Qk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:eP.bind(null,n),Ro:tP.bind(null,n),mo:nP.bind(null,n),d_:rP.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Qp(n)?Gp(n):n.q_.set("Unknown")):(await n.K_.stop(),CE(n))}))),n.K_}function Fi(n){return n.U_||(n.U_=(function(t,i,o){const a=Ce(t);return a.w_(),new Jk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,n),mo:uP.bind(null,n),f_:aP.bind(null,n),g_:lP.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await _h(n)):(await n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Jp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(n,e){if($r("AsyncQueue",`${e}: ${n}`),Fl(n))return new ce(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=al(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.W_=new at(we.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zo{constructor(e,t,i,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new zo(e,t,Do.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class dP{constructor(){this.queries=$_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ce(t),a=o.queries;o.queries=$_(),a.forEach(((u,d)=>{for(const p of d.j_)p.onError(i)}))})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function $_(){return new Qo((n=>Xw(n)),hh)}async function Xp(n,e){const t=Ce(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new hP,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Yp(u,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&em(t)}async function Zp(n,e){const t=Ce(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function fP(n,e){const t=Ce(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&em(t)}function pP(n,e,t){const i=Ce(n),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(t);i.queries.delete(e)}function em(n){n.Y_.forEach((e=>{e.next()}))}var rp,q_;(q_=rp||(rp={})).ea="default",q_.Cache="cache";class tm{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.key=e}}class bE{constructor(e){this.key=e}}class mP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=Zw(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new z_,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),F=dh(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),U=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let R=!1;S&&F?S.data.isEqual(F.data)?P!==U&&(i.track({type:3,doc:F}),R=!0):this.ga(S,F)||(i.track({type:2,doc:F}),R=!0,(p&&this.Aa(F,p)>0||y&&this.Aa(F,y)<0)&&(d=!0)):!S&&F?(i.track({type:0,doc:F}),R=!0):S&&!F&&(i.track({type:1,doc:S}),R=!0,(p||y)&&(d=!0)),R&&(F?(u=u.add(F),a=U?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,E)=>(function(F,P){const U=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return U(F)-U(P)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,u.length!==0||y?{snapshot:new zo(this.query,e.Ra,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new z_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new bE(i))})),this.da.forEach((i=>{e.has(i)||t.push(new xE(i))})),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class yP{constructor(e){this.key=e,this.va=!1}}class _P{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Qo((d=>Xw(d)),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new at(we.comparator),this.Na=new Map,this.La=new $p,this.Ba={},this.ka=new Map,this.qa=Bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vP(n,e,t=!0){const i=FE(n);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await OE(i,e,t,!0),o}async function wP(n,e){const t=FE(n);await OE(t,e,!0,!1)}async function OE(n,e,t,i){const o=await zk(n.localStore,fr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await EP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&RE(n.remoteStore,o),d}async function EP(n,e,t,i,o){n.Ka=(E,S,F)=>(async function(U,R,Y,Z){let X=R.view.ma(Y);X.ns&&(X=await F_(U.localStore,R.query,!1).then((({documents:N})=>R.view.ma(N,X))));const ie=Z&&Z.targetChanges.get(R.targetId),K=Z&&Z.targetMismatches.get(R.targetId)!=null,ee=R.view.applyChanges(X,U.isPrimaryClient,ie,K);return H_(U,R.targetId,ee.wa),ee.snapshot})(n,E,S,F);const a=await F_(n.localStore,e,!0),u=new mP(e,a.Ts),d=u.ma(a.documents),p=jl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,p);H_(n,t,y.wa);const v=new gP(e,t,u);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function TP(n,e,t){const i=Ce(n),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!hh(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await np(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Hp(i.remoteStore,o.targetId),ip(i,o.targetId)})).catch(Ml)):(ip(i,o.targetId),await np(i.localStore,o.targetId,!0))}async function IP(n,e){const t=Ce(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Hp(t.remoteStore,i.targetId))}async function SP(n,e,t){const i=xP(n);try{const o=await(function(u,d){const p=Ce(u),y=It.now(),v=d.reduce(((F,P)=>F.add(P.key)),De());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let P=qr(),U=De();return p.cs.getEntries(F,v).next((R=>{P=R,P.forEach(((Y,Z)=>{Z.isValidDocument()||(U=U.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(F,P))).next((R=>{E=R;const Y=[];for(const Z of d){const X=HC(Z,E.get(Z.key).overlayedDocument);X!=null&&Y.push(new Bi(Z.key,X,qw(X.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(F,y,Y,d)})).next((R=>{S=R;const Y=R.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(F,R.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:tE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Ba[u.currentUser.toKey()];y||(y=new at(qe)),y=y.insert(d,p),u.Ba[u.currentUser.toKey()]=y})(i,o.batchId,t),await zl(i,o.changes),await _h(i.remoteStore)}catch(o){const a=Yp(o,"Failed to persist write");t.reject(a)}}async function DE(n,e){const t=Ce(n);try{const i=await Uk(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ke(u.va):o.removedDocuments.size>0&&(Ke(u.va),u.va=!1))})),await zl(t,i,e)}catch(i){await Ml(i)}}function W_(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ce(u);p.onlineState=d;let y=!1;p.queries.forEach(((v,E)=>{for(const S of E.j_)S.Z_(d)&&(y=!0)})),y&&em(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RP(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new at(we.comparator);u=u.insert(a,$t.newNoDocument(a,Ae.min()));const d=De().add(a),p=new mh(Ae.min(),new Map,new at(qe),u,d);await DE(i,p),i.Oa=i.Oa.remove(a),i.Na.delete(e),nm(i)}else await np(i.localStore,e,!1).then((()=>ip(i,e,t))).catch(Ml)}async function AP(n,e){const t=Ce(n),i=e.batch.batchId;try{const o=await Fk(t.localStore,e);VE(t,i,null),LE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await zl(t,o)}catch(o){await Ml(o)}}async function CP(n,e,t){const i=Ce(n);try{const o=await(function(u,d){const p=Ce(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(Ke(E!==null),v=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);VE(i,e,t),LE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await zl(i,o)}catch(o){await Ml(o)}}function LE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function VE(n,e,t){const i=Ce(n);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function ip(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||ME(n,i)}))}function ME(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Hp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),nm(n))}function H_(n,e,t){for(const i of t)i instanceof xE?(n.La.addReference(i.key,e),kP(n,i)):i instanceof bE?(ge("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||ME(n,i.key)):Re()}function kP(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(i),nm(n))}function nm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new we(tt.fromString(e)),i=n.qa.next();n.Na.set(i,new yP(t)),n.Oa=n.Oa.insert(t,i),RE(n.remoteStore,new Ci(fr(ch(t.path)),i,"TargetPurposeLimboResolution",bp.oe))}}async function zl(n,e,t){const i=Ce(n),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,p)=>{u.push(i.Ka(p,e,t).then((y=>{var v;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(v=t?.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Wp.Wi(p.targetId,y);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(p,y){const v=Ce(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(y,(S=>se.forEach(S.$i,(F=>v.persistence.referenceDelegate.addReference(E,S.targetId,F))).next((()=>se.forEach(S.Ui,(F=>v.persistence.referenceDelegate.removeReference(E,S.targetId,F)))))))))}catch(E){if(!Fl(E))throw E;ge("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const F=v.os.get(S),P=F.snapshotVersion,U=F.withLastLimboFreeSnapshotVersion(P);v.os=v.os.insert(S,U)}}})(i.localStore,a))}async function PP(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const i=await EE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((p=>{p.reject(new ce(Q.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await zl(t,i.hs)}}function NP(n,e){const t=Ce(n),i=t.Na.get(e);if(i&&i.va)return De().add(i.key);{let o=De();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const d=t.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function FE(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RP.bind(null,e),e.Ca.d_=fP.bind(null,e.eventManager),e.Ca.$a=pP.bind(null,e.eventManager),e}function xP(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CP.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Mk(this.persistence,new Lk,e.initialUser,this.serializer)}Ga(e){return new bk(qp.Zr,this.serializer)}Wa(e){return new qk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>W_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,this.syncEngine),await cP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dP})()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),i=(function(a){return new Gk(a)})(e.databaseInfo);return(function(a,u,d,p){return new Yk(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new Zk(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>W_(this.syncEngine,t,0)),(function(){return j_.D()?new j_:new Wk})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,v){const E=new _P(o,a,u,d,p,y);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ce(o);ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Bl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ge("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Yp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await EE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function K_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OP(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>B_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>B_(e.remoteStore,o))),n._onlineComponents=e}async function OP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await Sf(n,new Gc)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Sf(n,new Gc);return n._offlineComponents}async function UE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await K_(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await K_(n,new sp))),n._onlineComponents}function DP(n){return UE(n).then((e=>e.syncEngine))}async function Qc(n){const e=await UE(n),t=e.eventManager;return t.onListen=vP.bind(null,e.syncEngine),t.onUnlisten=TP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IP.bind(null,e.syncEngine),t}function LP(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new rm({next:S=>{v.Za(),u.enqueueAndForget((()=>Zp(a,E)));const F=S.docs.has(d);!F&&S.fromCache?y.reject(new ce(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&p&&p.source==="server"?y.reject(new ce(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new tm(ch(d.path),v,{includeMetadataChanges:!0,_a:!0});return Xp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}function VP(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new rm({next:S=>{v.Za(),u.enqueueAndForget((()=>Zp(a,E))),S.fromCache&&p.source==="server"?y.reject(new ce(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new tm(d,v,{includeMetadataChanges:!0,_a:!0});return Xp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e,t){if(!t)throw new ce(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MP(n,e,t,i){if(e===!0&&i===!0)throw new ce(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Q_(n){if(!we.isDocumentKey(n))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function J_(n){if(we.isDocumentKey(n))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(n);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new tC;switch(i.type){case"firstParty":return new sC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=G_.get(t);i&&(ge("ComponentProvider","Removing Datastore"),G_.delete(t),i.terminate())})(this),Promise.resolve()}}function FP(n,e,t,i={}){var o;const a=(n=ln(n,wh))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=zt.MOCK_USER;else{d=Gv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(y)}n._authCredentials=new nC(new jw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class Wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class xi extends Gr{constructor(e,t,i){super(e,t,ch(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new we(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Cs(n,e,...t){if(n=yt(n),BE("collection","path",e),n instanceof wh){const i=tt.fromString(e,...t);return J_(i),new xi(n,null,i)}{if(!(n instanceof Wt||n instanceof xi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return J_(i),new xi(n.firestore,null,i)}}function an(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Bw.newId()),BE("doc","path",e),n instanceof wh){const i=tt.fromString(e,...t);return Q_(i),new Wt(n,null,new we(i))}{if(!(n instanceof Wt||n instanceof xi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return Q_(i),new Wt(n.firestore,n instanceof xi?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new IE(this,"async_queue_retry"),this.Vu=()=>{const i=If();i&&ge("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new jr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fl(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw $r("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Jp.createAndSchedule(this,e,t,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Z_(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Wr extends wh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new X_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X_(e),this._firestoreClient=void 0,await e}}}function UP(n,e,t){t||(t="(default)");const i=bl(n,"firestore");if(i.isInitialized(t)){const o=i.getImmediate({identifier:t}),a=i.getOptions(t);if(Lo(a,e))return o;throw new ce(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:t})}function jP(n,e){const t=typeof n=="object"?n:sh(),i=typeof n=="string"?n:"(default)",o=bl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Wv("firestore");a&&FP(o,...a)}return o}function Eh(n){if(n._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BP(n),n._firestoreClient}function BP(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,y,v){return new _C(d,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jE(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new bP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(Vt.fromBase64String(e))}catch(t){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^__.*__$/;class $P{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ul(e,this.data,t,this.fieldTransforms)}}class zE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $E(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Ih{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($E(this.Cu)&&zP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gh(e)}Qu(e,t,i,o=!1){return new Ih({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(n){const e=n._freezeSettings(),t=gh(n._databaseId);return new qP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qE(n,e,t,i,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);lm("Data must be an object, but it was:",u,i);const d=WE(i,u);let p,y;if(a.merge)p=new _n(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=op(e,E,t);if(!u.contains(S))throw new ce(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);KE(v,S)||v.push(S)}p=new _n(v),y=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=u.fieldTransforms;return new $P(new on(d),p,y)}class ql extends $l{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}function WP(n,e,t){return new Ih({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class om extends $l{_toFieldTransform(e){return new lE(e.path,new Rl)}isEqual(e){return e instanceof om}}class am extends $l{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=WP(this,e,!0),i=this.Ku.map((a=>Yo(a,t))),o=new jo(i);return new lE(e.path,o)}isEqual(e){return e instanceof am&&Lo(this.Ku,e.Ku)}}function HP(n,e,t,i){const o=n.Qu(1,e,t);lm("Data must be an object, but it was:",o,i);const a=[],u=on.empty();Ns(i,((p,y)=>{const v=um(e,p,t);y=yt(y);const E=o.Nu(v);if(y instanceof ql)a.push(v);else{const S=Yo(y,E);S!=null&&(a.push(v),u.set(v,S))}}));const d=new _n(a);return new zE(u,d,o.fieldTransforms)}function KP(n,e,t,i,o,a){const u=n.Qu(1,e,t),d=[op(e,i,t)],p=[o];if(a.length%2!=0)throw new ce(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(op(e,a[S])),p.push(a[S+1]);const y=[],v=on.empty();for(let S=d.length-1;S>=0;--S)if(!KE(y,d[S])){const F=d[S];let P=p[S];P=yt(P);const U=u.Nu(F);if(P instanceof ql)y.push(F);else{const R=Yo(P,U);R!=null&&(y.push(F),v.set(F,R))}}const E=new _n(y);return new zE(v,E,u.fieldTransforms)}function GP(n,e,t,i=!1){return Yo(t,n.Qu(i?4:3,e))}function Yo(n,e){if(HE(n=yt(n)))return lm("Unsupported field value:",e,n),WE(n,e);if(n instanceof $l)return(function(i,o){if(!$E(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Yo(d,o.Lu(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=It.fromDate(i);return{timestampValue:Hc(o.serializer,a)}}if(i instanceof It){const a=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,a)}}if(i instanceof im)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $o)return{bytesValue:pE(o.serializer,i._byteString)};if(i instanceof Wt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof sm)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Fp(d.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${vh(i)}`)})(n,e)}function WE(n,e){const t={};return zw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,((i,o)=>{const a=Yo(o,e.Mu(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function HE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof im||n instanceof $o||n instanceof Wt||n instanceof $l||n instanceof sm)}function lm(n,e,t){if(!HE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=vh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function op(n,e,t){if((e=yt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return um(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const QP=new RegExp("[~\\*/\\[\\]]");function um(n,e,t){if(e.search(QP)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Th(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ce(Q.INVALID_ARGUMENT,d+n+p)}function KE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JP extends GE{data(){return super.data()}}function Rh(n,e){return typeof e=="string"?um(n,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cm{}class hm extends cm{}function Yc(n,e,...t){let i=[];e instanceof cm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof dm)).length,d=a.filter((p=>p instanceof Ah)).length;if(u>1||u>0&&d>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ah extends hm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ah(e,t,i)}_apply(e){const t=this._parse(e);return JE(e._query,t),new Gr(e.firestore,e.converter,Yf(e._query,t))}_parse(e){const t=Sh(e.firestore);return(function(a,u,d,p,y,v,E){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){nv(E,v);const F=[];for(const P of E)F.push(tv(p,a,P));S={arrayValue:{values:F}}}else S=tv(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||nv(E,v),S=GP(d,u,E,v==="in"||v==="not-in");return gt.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ap(n,e,t){const i=e,o=Rh("where",n);return Ah._create(o,i,t)}class dm extends cm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)JE(u,p),u=Yf(u,p)})(e._query,t),new Gr(e.firestore,e.converter,Yf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fm extends hm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fm(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(a,u)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Go(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function YP(n,e="asc"){const t=e,i=Rh("orderBy",n);return fm._create(i,t)}class pm extends hm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new pm(e,t,i)}_apply(e){return new Gr(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}}function ev(n){return pm._create("limit",n,"F")}function tv(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yw(e)&&t.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!we.isDocumentKey(i))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return E_(n,new we(i))}if(t instanceof Wt)return E_(n,t._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function nv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JE(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class XP{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ns(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>dt(u.doubleValue)));return new sm(a)}convertGeoPoint(e){return new im(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Mi(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Ke(wE(i));const o=new Tl(i.get(1),i.get(3)),a=new we(i.popFirst(5));return o.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XE extends GE{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Rh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Pc extends XE{data(e={}){return super.data(e)}}class ZE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ul(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pc(this._firestore,this._userDataWriter,i.key,i,new ul(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:ZP(d.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){n=ln(n,Wt);const e=ln(n.firestore,Wr);return LP(Eh(e),n._key).then((t=>t0(e,n,t)))}class mm extends XP{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Cl(n){n=ln(n,Gr);const e=ln(n.firestore,Wr),t=Eh(e),i=new mm(e);return QE(n._query),VP(t,n._query).then((o=>new ZE(e,i,n,o)))}function eN(n,e,t){n=ln(n,Wt);const i=ln(n.firestore,Wr),o=YE(n.converter,e);return Ch(i,[qE(Sh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,xn.none())])}function ml(n,e,t,...i){n=ln(n,Wt);const o=ln(n.firestore,Wr),a=Sh(o);let u;return u=typeof(e=yt(e))=="string"||e instanceof Th?KP(a,"updateDoc",n._key,e,t,i):HP(a,"updateDoc",n._key,e),Ch(o,[u.toMutation(n._key,xn.exists(!0))])}function lp(n){return Ch(ln(n.firestore,Wr),[new Up(n._key,xn.none())])}function e0(n,e){const t=ln(n.firestore,Wr),i=an(n),o=YE(n.converter,e);return Ch(t,[qE(Sh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,xn.exists(!1))]).then((()=>i))}function tN(n,...e){var t,i,o;n=yt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Z_(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Z_(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,y,v;if(n instanceof Wt)y=ln(n.firestore,Wr),v=ch(n._key.path),p={next:E=>{e[u]&&e[u](t0(y,n,E))},error:e[u+1],complete:e[u+2]};else{const E=ln(n,Gr);y=ln(E.firestore,Wr),v=E._query;const S=new mm(y);p={next:F=>{e[u]&&e[u](new ZE(y,S,E,F))},error:e[u+1],complete:e[u+2]},QE(n._query)}return(function(S,F,P,U){const R=new rm(U),Y=new tm(F,R,P);return S.asyncQueue.enqueueAndForget((async()=>Xp(await Qc(S),Y))),()=>{R.Za(),S.asyncQueue.enqueueAndForget((async()=>Zp(await Qc(S),Y)))}})(Eh(y),v,d,p)}function Ch(n,e){return(function(i,o){const a=new jr;return i.asyncQueue.enqueueAndForget((async()=>SP(await DP(i),o,a))),a.promise})(Eh(n),e)}function t0(n,e,t){const i=t.docs.get(e._key),o=new mm(n);return new XE(n,o,e._key,i,new ul(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return new ql("deleteField")}function gm(){return new om("serverTimestamp")}function rN(...n){return new am("arrayRemove",n)}(function(e,t=!0){(function(o){Ko=o})(Ps),Es(new Li("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Wr(new rC(i.getProvider("auth-internal")),new aC(i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(y.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),cr(g_,"4.7.3",e),cr(g_,"4.7.3","esm2017")})();var iN="firebase",sN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(iN,sN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="firebasestorage.googleapis.com",oN="storageBucket",aN=120*1e3,lN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends yr{constructor(e,t,i=0){super(Rf(e),`Firebase Storage: ${t} (${Rf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gr||(gr={}));function Rf(n){return"storage/"+n}function uN(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(gr.UNKNOWN,n)}function cN(){return new _r(gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hN(){return new _r(gr.CANCELED,"User canceled the upload/download.")}function dN(n){return new _r(gr.INVALID_URL,"Invalid URL '"+n+"'.")}function fN(n){return new _r(gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function rv(n){return new _r(gr.INVALID_ARGUMENT,n)}function r0(){return new _r(gr.APP_DELETED,"The Firebase app was deleted.")}function pN(n){return new _r(gr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(i.path==="")return i;throw fN(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",F=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),P={bucket:1,path:3},U=t===n0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",Y=new RegExp(`^https?://${U}/${o}/${R}`,"i"),X=[{regex:d,indices:p,postModify:a},{regex:F,indices:P,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<X.length;ie++){const K=X[ie],ee=K.regex.exec(e);if(ee){const N=ee[K.indices.bucket];let I=ee[K.indices.path];I||(I=""),i=new Kn(N,I),K.postModify(i);break}}if(i==null)throw dN(e);return i}}class mN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let y=!1;function v(...R){y||(y=!0,e.apply(null,R))}function E(R){o=setTimeout(()=>{o=null,n(F,p())},R)}function S(){a&&clearTimeout(a)}function F(R,...Y){if(y){S();return}if(R){S(),v.call(null,R,...Y);return}if(p()||u){S(),v.call(null,R,...Y);return}i<64&&(i*=2);let X;d===1?(d=2,X=0):X=(i+Math.random())*1e3,E(X)}let P=!1;function U(R){P||(P=!0,S(),!y&&(o!==null?(R||(d=2),clearTimeout(o),E(0)):R||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,U(!0)},t),U}function yN(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n){return n!==void 0}function iv(n,e,t,i){if(i<e)throw rv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw rv(`Invalid value for '${n}'. Expected ${t} or less.`)}function vN(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Zc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t,i,o,a,u,d,p,y,v,E,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,P)=>{this.resolve_=F,this.reject_=P,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new yc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Zc.NO_ERROR,p=a.getStatus();if(!d||wN(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Zc.ABORT;i(!1,new yc(!1,null,v));return}const y=this.successCodes_.indexOf(p)!==-1;i(!0,new yc(y,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());_N(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=uN();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?r0():hN();u(p)}else{const p=cN();u(p)}};this.canceled_?t(!1,new yc(!1,null,!0)):this.backoffId_=gN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function TN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function IN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function RN(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function AN(n,e,t,i,o,a,u=!0){const d=vN(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return SN(y,e),TN(y,t),IN(y,a),RN(y,i),new EN(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function kN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eh(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kN(this._location.path)}get storage(){return this._service}get parent(){const e=CN(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new eh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw pN(e)}}function sv(n,e){const t=e?.[oN];return t==null?null:Kn.makeFromBucketSpec(t,n)}function PN(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Gv(o,n.app.options.projectId))}class NN{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=n0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aN,this._maxUploadRetryTime=lN,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=sv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=sv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new mN(r0());{const u=AN(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const ov="@firebase/storage",av="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="storage";function xN(n=sh(),e){n=yt(n);const i=bl(n,i0).getImmediate({identifier:e}),o=Wv("storage");return o&&bN(i,...o),i}function bN(n,e,t,i={}){PN(n,e,t,i)}function ON(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new NN(t,i,o,e,Ps)}function DN(){Es(new Li(i0,ON,"PUBLIC").setMultipleInstances(!0)),cr(ov,av,""),cr(ov,av,"esm2017")}DN();const s0={apiKey:"AIzaSyC1ciO4ZxGRNcx4Q87BxJa0y7lFpsvKurc",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.appspot.com",messagingSenderId:"301206293641",appId:"1:301206293641:web:c9635693f4519d3dbdca58"},LN=Object.values(s0).every(Boolean);let Za,vn=null,Oe=null,VN=null;if(LN)try{Za=PS().length?sh():Yv(s0),vn=ZA(Za);try{Oe=UP(Za,{...{experimentalForceLongPolling:!0,useFetchStreams:!1}})}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code||"").toLowerCase():"")!=="failed-precondition")throw n;Oe=jP(Za)}VN=xN(Za)}catch(n){console.error("No se pudo inicializar Firebase, se usara modo demostracion.",n)}try{window.__fb={auth:vn,db:Oe},console.log("🔥 Firebase projectId =>",vn?.app?.options?.projectId)}catch{}const Nc=()=>new Date().toISOString(),MN=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:"Fade bajo con linea marcada. Usa pomada mate.",createdAt:Nc()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:"Corte bob texturizado. Prefiere styling natural.",createdAt:Nc()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:"Cliente nuevo. Probar mid fade la proxima visita.",createdAt:Nc()}];let Ui=[...MN];const xc=(n,e,t)=>({id:`demo-photo-${Math.random().toString(36).slice(2,10)}`,url:n,deleteToken:e??null,barberId:t}),FN={"carlos-ruiz":[xc("https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",null,"demo-barber"),xc("https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80",null,"demo-barber")],"maria-garcia":[xc("https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80",null,"demo-barber")],"leo-suarez":[]};let bi=Object.fromEntries(Object.entries(FN).map(([n,e])=>[n,e.map(t=>({...t}))]));const o0=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let Oi=[...o0];const UN=o0[0]?.id??"demo-barber";function Af(){return[...Ui]}function a0(n){return Ui.find(e=>e.id===n)||null}function jN(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||UN,notes:n.notes||"",createdAt:Nc()};return Ui=[e,...Ui],e}function BN(n,e){return Ui=Ui.map(t=>t.id===n?{...t,...e}:t),a0(n)}function zN(n){Ui=Ui.filter(e=>e.id!==n),delete bi[n]}function $N(n){return[...bi[n]||[]]}function qN(n,e){const t=xc(e.url,e.deleteToken,e.barberId),i=bi[n]||[];return bi[n]=[t,...i],bi[n]}function WN(n,e){const t=bi[n]||[];return bi[n]=t.filter(i=>i.id!==e),bi[n]}function l0(){return[...Oi]}function HN(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return Oi=[e,...Oi],e}function lv(n,e){return Oi=Oi.map(t=>t.id===n?{...t,...e}:t),Oi.find(t=>t.id===n)||null}function KN(n){Oi=Oi.filter(e=>e.id!==n)}const GN="barberiawebpro@gmail.com",uv="users",cv="barberos",u0=G.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!1,loginDemo:()=>{},logout:async()=>{}}),Xo=()=>G.useContext(u0),c0=n=>n?.trim().toLowerCase()||null,Cf=n=>{if(!n)return;const e=String(n).trim().toLowerCase();if(["admin","administrador","administrator"].includes(e))return"admin";if(e.includes("barber"))return"barbero"},kf=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;return e&&t?`${e} ${t}`.trim():e||t||void 0},QN=async(n,e)=>{if(!Oe)return{};try{const t=await Xc(an(Oe,cv,n));if(t.exists()){const a=t.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const i=await Xc(an(Oe,uv,n));if(i.exists()){const a=i.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const o=c0(e);if(o){const a=Yc(Cs(Oe,uv),ap("emailLower","==",o),ev(1)),u=Yc(Cs(Oe,cv),ap("emailLower","==",o),ev(1)),[d,p]=await Promise.all([Cl(a),Cl(u)]),y=d.docs[0]||p.docs[0];if(y){const v=y.data();return{role:Cf(v.role)??"barbero",displayName:kf(v)}}}return{}}catch(t){return console.error("Error al obtener perfil del usuario:",t),{}}},JN=n=>({uid:n.id,email:n.email,displayName:n.displayName});function YN({children:n}){const[e,t]=G.useState(null),[i,o]=G.useState(),[a,u]=G.useState(),[d,p]=G.useState(!0),[y,v]=G.useState(!1);G.useEffect(()=>{if(!vn){t(null),o(void 0),u(void 0),p(!1),v(!0);return}const F=BR(vn,async P=>{if(!P){t(null),o(void 0),u(void 0),p(!1),v(!1);return}const U=c0(P.email)===GN?"admin":void 0,R=await QN(P.uid,P.email),Y=R.role||U||"barbero",Z=R.displayName||P.displayName||P.email||void 0;t(P),o(Y),u(Z),p(!1),v(!1)});return()=>F()},[]);const E=F=>{const P=l0().find(U=>U.id===F);P&&(t(JN(P)),o(P.role),u(P.displayName),v(!0),p(!1))},S=async()=>{vn&&await zR(vn),t(null),o(void 0),u(void 0),p(!1),v(!1)};return b.jsx(u0.Provider,{value:{user:e,role:i,profileName:a,loading:d,demoMode:y,loginDemo:E,logout:S},children:n})}jv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kl.apply(this,arguments)}var ki;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ki||(ki={}));const hv="popstate";function XN(n){n===void 0&&(n={});function e(o,a){let{pathname:u="/",search:d="",hash:p=""}=bs(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),up("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");d=y===-1?p:p.slice(0,y)}return d+"#"+(typeof a=="string"?a:th(a))}function i(o,a){ym(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return e1(e,t,i,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ym(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZN(){return Math.random().toString(36).substr(2,8)}function dv(n,e){return{usr:n.state,key:n.key,idx:e}}function up(n,e,t,i){return t===void 0&&(t=null),kl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?bs(e):e,{state:t,key:e&&e.key||i||ZN()})}function th(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function e1(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=ki.Pop,p=null,y=v();y==null&&(y=0,u.replaceState(kl({},u.state,{idx:y}),""));function v(){return(u.state||{idx:null}).idx}function E(){d=ki.Pop;let R=v(),Y=R==null?null:R-y;y=R,p&&p({action:d,location:U.location,delta:Y})}function S(R,Y){d=ki.Push;let Z=up(U.location,R,Y);t&&t(Z,R),y=v()+1;let X=dv(Z,y),ie=U.createHref(Z);try{u.pushState(X,"",ie)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(ie)}a&&p&&p({action:d,location:U.location,delta:1})}function F(R,Y){d=ki.Replace;let Z=up(U.location,R,Y);t&&t(Z,R),y=v();let X=dv(Z,y),ie=U.createHref(Z);u.replaceState(X,"",ie),a&&p&&p({action:d,location:U.location,delta:0})}function P(R){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof R=="string"?R:th(R);return Z=Z.replace(/ $/,"%20"),ot(Y,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,Y)}let U={get action(){return d},get location(){return n(o,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(hv,E),p=R,()=>{o.removeEventListener(hv,E),p=null}},createHref(R){return e(o,R)},createURL:P,encodeLocation(R){let Y=P(R);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:F,go(R){return u.go(R)}};return U}var fv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(fv||(fv={}));function t1(n,e,t){return t===void 0&&(t="/"),n1(n,e,t)}function n1(n,e,t,i){let o=typeof e=="string"?bs(e):e,a=qo(o.pathname||"/",t);if(a==null)return null;let u=h0(n);r1(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let y=p1(a);d=d1(u[p],y)}return d}function h0(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(ot(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Di([i,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(ot(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),h0(a.children,e,v,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:c1(y,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of d0(a.path))o(a,u,p)}),e}function d0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=d0(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function r1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:h1(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const i1=/^:[\w-]+$/,s1=3,o1=2,a1=1,l1=10,u1=-2,pv=n=>n==="*";function c1(n,e){let t=n.split("/"),i=t.length;return t.some(pv)&&(i+=u1),e&&(i+=o1),t.filter(o=>!pv(o)).reduce((o,a)=>o+(i1.test(a)?s1:a===""?a1:l1),i)}function h1(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function d1(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=cp({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),S=p.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Di([a,E.pathname]),pathnameBase:_1(Di([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Di([a,E.pathnameBase]))}return u}function cp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=f1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,v,E)=>{let{paramName:S,isOptional:F}=v;if(S==="*"){let U=d[E]||"";u=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const P=d[E];return F&&!P?y[S]=void 0:y[S]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function f1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ym(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function p1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ym(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function m1(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?bs(n):n;return{pathname:t?t.startsWith("/")?t:g1(t,e):e,search:v1(i),hash:w1(o)}}function g1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Pf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _m(n,e){let t=y1(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function vm(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=bs(n):(o=kl({},n),ot(!o.pathname||!o.pathname.includes("?"),Pf("?","pathname","search",o)),ot(!o.pathname||!o.pathname.includes("#"),Pf("#","pathname","hash",o)),ot(!o.search||!o.search.includes("#"),Pf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=m1(o,d),y=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}const Di=n=>n.join("/").replace(/\/\/+/g,"/"),_1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),v1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,w1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function E1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const f0=["post","put","patch","delete"];new Set(f0);const T1=["get",...f0];new Set(T1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pl.apply(this,arguments)}const kh=G.createContext(null),p0=G.createContext(null),Qr=G.createContext(null),Ph=G.createContext(null),Jr=G.createContext({outlet:null,matches:[],isDataRoute:!1}),m0=G.createContext(null);function I1(n,e){let{relative:t}=e===void 0?{}:e;Zo()||ot(!1);let{basename:i,navigator:o}=G.useContext(Qr),{hash:a,pathname:u,search:d}=Nh(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:Di([i,u])),o.createHref({pathname:p,search:d,hash:a})}function Zo(){return G.useContext(Ph)!=null}function ea(){return Zo()||ot(!1),G.useContext(Ph).location}function g0(n){G.useContext(Qr).static||G.useLayoutEffect(n)}function Wl(){let{isDataRoute:n}=G.useContext(Jr);return n?M1():S1()}function S1(){Zo()||ot(!1);let n=G.useContext(kh),{basename:e,future:t,navigator:i}=G.useContext(Qr),{matches:o}=G.useContext(Jr),{pathname:a}=ea(),u=JSON.stringify(_m(o,t.v7_relativeSplatPath)),d=G.useRef(!1);return g0(()=>{d.current=!0}),G.useCallback(function(y,v){if(v===void 0&&(v={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=vm(y,JSON.parse(u),a,v.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Di([e,E.pathname])),(v.replace?i.replace:i.push)(E,v.state,v)},[e,i,u,a,n])}function R1(){let{matches:n}=G.useContext(Jr),e=n[n.length-1];return e?e.params:{}}function Nh(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=G.useContext(Qr),{matches:o}=G.useContext(Jr),{pathname:a}=ea(),u=JSON.stringify(_m(o,i.v7_relativeSplatPath));return G.useMemo(()=>vm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function A1(n,e){return C1(n,e)}function C1(n,e,t,i){Zo()||ot(!1);let{navigator:o}=G.useContext(Qr),{matches:a}=G.useContext(Jr),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let y=ea(),v;if(e){var E;let R=typeof e=="string"?bs(e):e;p==="/"||(E=R.pathname)!=null&&E.startsWith(p)||ot(!1),v=R}else v=y;let S=v.pathname||"/",F=S;if(p!=="/"){let R=p.replace(/^\//,"").split("/");F="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let P=t1(n,{pathname:F}),U=b1(P&&P.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Di([p,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Di([p,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,t,i);return e&&U?G.createElement(Ph.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ki.Pop}},U):U}function k1(){let n=V1(),e=E1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:o},t):null,null)}const P1=G.createElement(k1,null);class N1 extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Jr.Provider,{value:this.props.routeContext},G.createElement(m0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x1(n){let{routeContext:e,match:t,children:i}=n,o=G.useContext(kh);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Jr.Provider,{value:e},i)}function b1(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);v>=0||ot(!1),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let v=0;v<u.length;v++){let E=u[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:S,errors:F}=t,P=E.route.loader&&S[E.route.id]===void 0&&(!F||F[E.route.id]===void 0);if(E.route.lazy||P){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((v,E,S)=>{let F,P=!1,U=null,R=null;t&&(F=d&&E.route.id?d[E.route.id]:void 0,U=E.route.errorElement||P1,p&&(y<0&&S===0?(F1("route-fallback"),P=!0,R=null):y===S&&(P=!0,R=E.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,S+1)),Z=()=>{let X;return F?X=U:P?X=R:E.route.Component?X=G.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=v,G.createElement(x1,{match:E,routeContext:{outlet:v,matches:Y,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?G.createElement(N1,{location:t.location,revalidation:t.revalidation,component:U,error:F,children:Z(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):Z()},null)}var y0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(y0||{}),_0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(_0||{});function O1(n){let e=G.useContext(kh);return e||ot(!1),e}function D1(n){let e=G.useContext(p0);return e||ot(!1),e}function L1(n){let e=G.useContext(Jr);return e||ot(!1),e}function v0(n){let e=L1(),t=e.matches[e.matches.length-1];return t.route.id||ot(!1),t.route.id}function V1(){var n;let e=G.useContext(m0),t=D1(),i=v0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function M1(){let{router:n}=O1(y0.UseNavigateStable),e=v0(_0.UseNavigateStable),t=G.useRef(!1);return g0(()=>{t.current=!0}),G.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Pl({fromRouteId:e},a)))},[n,e])}const mv={};function F1(n,e,t){mv[n]||(mv[n]=!0)}function U1(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function hp(n){let{to:e,replace:t,state:i,relative:o}=n;Zo()||ot(!1);let{future:a,static:u}=G.useContext(Qr),{matches:d}=G.useContext(Jr),{pathname:p}=ea(),y=Wl(),v=vm(e,_m(d,a.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(v);return G.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function Po(n){ot(!1)}function j1(n){let{basename:e="/",children:t=null,location:i,navigationType:o=ki.Pop,navigator:a,static:u=!1,future:d}=n;Zo()&&ot(!1);let p=e.replace(/^\/*/,"/"),y=G.useMemo(()=>({basename:p,navigator:a,static:u,future:Pl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=bs(i));let{pathname:v="/",search:E="",hash:S="",state:F=null,key:P="default"}=i,U=G.useMemo(()=>{let R=qo(v,p);return R==null?null:{location:{pathname:R,search:E,hash:S,state:F,key:P},navigationType:o}},[p,v,E,S,F,P,o]);return U==null?null:G.createElement(Qr.Provider,{value:y},G.createElement(Ph.Provider,{children:t,value:U}))}function B1(n){let{children:e,location:t}=n;return A1(dp(e),t)}new Promise(()=>{});function dp(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(i,o)=>{if(!G.isValidElement(i))return;let a=[...e,o];if(i.type===G.Fragment){t.push.apply(t,dp(i.props.children,a));return}i.type!==Po&&ot(!1),!i.props.index||!i.props.children||ot(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=dp(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nh.apply(this,arguments)}function w0(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function z1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $1(n,e){return n.button===0&&(!e||e==="_self")&&!z1(n)}const q1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],H1="6";try{window.__reactRouterVersion=H1}catch{}const K1=G.createContext({isTransitioning:!1}),G1="startTransition",gv=eI[G1];function Q1(n){let{basename:e,children:t,future:i,window:o}=n,a=G.useRef();a.current==null&&(a.current=XN({window:o,v5Compat:!0}));let u=a.current,[d,p]=G.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},v=G.useCallback(E=>{y&&gv?gv(()=>p(E)):p(E)},[p,y]);return G.useLayoutEffect(()=>u.listen(v),[u,v]),G.useEffect(()=>U1(i),[i]),G.createElement(j1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const J1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wm=G.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:y,preventScrollReset:v,viewTransition:E}=e,S=w0(e,q1),{basename:F}=G.useContext(Qr),P,U=!1;if(typeof y=="string"&&Y1.test(y)&&(P=y,J1))try{let X=new URL(window.location.href),ie=y.startsWith("//")?new URL(X.protocol+y):new URL(y),K=qo(ie.pathname,F);ie.origin===X.origin&&K!=null?y=K+ie.search+ie.hash:U=!0}catch{}let R=I1(y,{relative:o}),Y=Z1(y,{replace:u,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:E});function Z(X){i&&i(X),X.defaultPrevented||Y(X)}return G.createElement("a",nh({},S,{href:P||R,onClick:U||a?i:Z,ref:t,target:p}))}),yv=G.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:p,viewTransition:y,children:v}=e,E=w0(e,W1),S=Nh(p,{relative:E.relative}),F=ea(),P=G.useContext(p0),{navigator:U,basename:R}=G.useContext(Qr),Y=P!=null&&ex(S)&&y===!0,Z=U.encodeLocation?U.encodeLocation(S).pathname:S.pathname,X=F.pathname,ie=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;o||(X=X.toLowerCase(),ie=ie?ie.toLowerCase():null,Z=Z.toLowerCase()),ie&&R&&(ie=qo(ie,R)||ie);const K=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let ee=X===Z||!u&&X.startsWith(Z)&&X.charAt(K)==="/",N=ie!=null&&(ie===Z||!u&&ie.startsWith(Z)&&ie.charAt(Z.length)==="/"),I={isActive:ee,isPending:N,isTransitioning:Y},C=ee?i:void 0,O;typeof a=="function"?O=a(I):O=[a,ee?"active":null,N?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let V=typeof d=="function"?d(I):d;return G.createElement(wm,nh({},E,{"aria-current":C,className:O,ref:t,style:V,to:p,viewTransition:y}),typeof v=="function"?v(I):v)});var fp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fp||(fp={}));var _v;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(_v||(_v={}));function X1(n){let e=G.useContext(kh);return e||ot(!1),e}function Z1(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=Wl(),y=ea(),v=Nh(n,{relative:u});return G.useCallback(E=>{if($1(E,t)){E.preventDefault();let S=i!==void 0?i:th(y)===th(v);p(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,p,v,i,o,t,n,a,u,d])}function ex(n,e){e===void 0&&(e={});let t=G.useContext(K1);t==null&&ot(!1);let{basename:i}=X1(fp.useViewTransitionState),o=Nh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=qo(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=qo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return cp(o.pathname,u)!=null||cp(o.pathname,a)!=null}function Nf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=Xo();return i?b.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?b.jsx(hp,{to:"/clientes",replace:!0}):n:b.jsx(hp,{to:"/login",replace:!0})}const vv="clientes",tx=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",u=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:u,fullName_lower:e.fullName_lower||u.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:e.notes||e.Informacion||e.info||"",createdAt:e.createdAt??null}},_c=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(a=>{if(t&&i&&a.mainBarberId&&a.mainBarberId!==i)return!1;if(!o)return!0;const u=(a.fullName||"").toLowerCase(),d=(a.phone||"").toLowerCase(),p=(a.notes||"").toLowerCase();return u.includes(o)||d.includes(o)||p.includes(o)})};function nx(){const{user:n,role:e}=Xo(),t=!Oe,i=e==="admin"||e==="barbero",[o,a]=G.useState(!1),[u,d]=G.useState(""),[p,y]=G.useState(()=>t?Af():[]),[v,E]=G.useState(()=>_c(p,u,o,n?.uid)),[S,F]=G.useState(()=>!t),[P,U]=G.useState(!1),[R,Y]=G.useState({fullName:"",phone:""}),[Z,X]=G.useState(!1),[ie,K]=G.useState(null),[ee,N]=G.useState(null),I=G.useCallback(()=>{const L=Af();y(L),E(_c(L,u,o,n?.uid)),F(!1),N(null)},[o,u,n?.uid]),C=G.useCallback(async()=>{if(!Oe){I();return}F(!0),N(null);try{const L=Oe;if(!L){I();return}const Qe=(await Cl(Cs(L,vv))).docs.map(Fe=>tx(Fe.id,Fe.data(),n?.uid)).sort((Fe,Le)=>Fe.fullName.localeCompare(Le.fullName));y(Qe)}catch(L){console.error("No pudimos cargar clientes",L),y([]),N("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{F(!1)}},[I,n?.uid]);G.useEffect(()=>{if(t){I();return}C()},[t,C,I]),G.useEffect(()=>{if(t){const L=Af();E(_c(L,u,o,n?.uid));return}E(_c(p,u,o,n?.uid))},[u,o,p,n?.uid,t]);const O=async L=>{L.preventDefault();const A=R.fullName.trim(),ke=R.phone.trim();if(!A){K("El nombre es obligatorio.");return}X(!0),K(null);try{Oe?(await e0(Cs(Oe,vv),{fullName:A,fullName_lower:A.toLowerCase(),phone:ke||void 0,mainBarberId:n?.uid||"",notes:"",createdAt:gm()}),await C()):(jN({fullName:A,phone:ke,mainBarberId:n?.uid}),I()),Y({fullName:"",phone:""}),U(!1)}catch(Qe){console.error("No pudimos crear el cliente",Qe),K("No pudimos crear el cliente. Intenta de nuevo.")}finally{X(!1)}},V=v;return b.jsxs("div",{className:"panel space-y-8",children:[b.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),b.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&b.jsx("button",{className:"btn btn-primary",onClick:()=>U(L=>!L),children:P?"Cerrar formulario":"Nuevo cliente"})]}),b.jsxs("section",{className:"space-y-4",children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[b.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:u,onChange:L=>d(L.target.value)}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[b.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(L=>!L),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),P&&i&&b.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:O,children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:R.fullName,onChange:L=>Y(A=>({...A,fullName:L.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:R.phone,onChange:L=>Y(A=>({...A,phone:L.target.value}))})]})]}),ie&&b.jsx("p",{className:"text-xs text-red-500",children:ie}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary",type:"submit",disabled:Z,children:Z?"Guardando...":"Guardar"}),b.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>U(!1),children:"Cancelar"})]})]})]}),b.jsxs("section",{className:"space-y-3",children:[S&&b.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),ee&&!S&&b.jsx("div",{className:"text-sm text-red-600",children:ee}),!S&&!ee&&V.map(L=>b.jsxs(wm,{to:`/clientes/${L.id}`,className:"list-item",children:[b.jsx("div",{className:"avatar",children:L.fullName.split(" ").map(A=>A[0]).slice(0,2)}),b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"title",children:L.fullName}),L.phone&&b.jsx("div",{className:"sub",children:L.phone})]}),b.jsx("span",{className:"sub",children:"Ver"})]},L.id)),!S&&!ee&&V.length===0&&b.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&b.jsx("footer",{className:"flex items-center justify-end",children:b.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void C(),disabled:S,children:"Actualizar"})}),b.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",b.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function rx({photos:n,onDelete:e,canDelete:t}){if(!n?.length)return b.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."});const i=t&&typeof e=="function";return b.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:n.map((o,a)=>{const u=o.id||`${o.url}-${a}`;return b.jsxs("div",{className:"relative rounded-xl shadow-lg overflow-hidden",children:[b.jsx("img",{src:o.url,className:"aspect-square w-full object-cover"}),i&&b.jsx("button",{type:"button",className:"absolute right-2 top-2 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-black/90",onClick:()=>e(o),children:"Borrar"})]},u)})})}function E0(n,e){return function(){return n.apply(e,arguments)}}const{toString:ix}=Object.prototype,{getPrototypeOf:Em}=Object,{iterator:xh,toStringTag:T0}=Symbol,bh=(n=>e=>{const t=ix.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Jn=n=>(n=n.toLowerCase(),e=>bh(e)===n),Oh=n=>e=>typeof e===n,{isArray:ta}=Array,Wo=Oh("undefined");function Hl(n){return n!==null&&!Wo(n)&&n.constructor!==null&&!Wo(n.constructor)&&un(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const I0=Jn("ArrayBuffer");function sx(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&I0(n.buffer),e}const ox=Oh("string"),un=Oh("function"),S0=Oh("number"),Kl=n=>n!==null&&typeof n=="object",ax=n=>n===!0||n===!1,bc=n=>{if(bh(n)!=="object")return!1;const e=Em(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(T0 in n)&&!(xh in n)},lx=n=>{if(!Kl(n)||Hl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},ux=Jn("Date"),cx=Jn("File"),hx=Jn("Blob"),dx=Jn("FileList"),fx=n=>Kl(n)&&un(n.pipe),px=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||un(n.append)&&((e=bh(n))==="formdata"||e==="object"&&un(n.toString)&&n.toString()==="[object FormData]"))},mx=Jn("URLSearchParams"),[gx,yx,_x,vx]=["ReadableStream","Request","Response","Headers"].map(Jn),wx=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ta(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Hl(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function R0(n,e){if(Hl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,A0=n=>!Wo(n)&&n!==_s;function pp(){const{caseless:n,skipUndefined:e}=A0(this)&&this||{},t={},i=(o,a)=>{const u=n&&R0(t,a)||a;bc(t[u])&&bc(o)?t[u]=pp(t[u],o):bc(o)?t[u]=pp({},o):ta(o)?t[u]=o.slice():(!e||!Wo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Gl(arguments[o],i);return t}const Ex=(n,e,t,{allOwnKeys:i}={})=>(Gl(e,(o,a)=>{t&&un(o)?n[a]=E0(o,t):n[a]=o},{allOwnKeys:i}),n),Tx=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Ix=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Sx=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Em(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Rx=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},Ax=n=>{if(!n)return null;if(ta(n))return n;let e=n.length;if(!S0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Cx=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Em(Uint8Array)),kx=(n,e)=>{const i=(n&&n[xh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},Px=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Nx=Jn("HTMLFormElement"),xx=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),wv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),bx=Jn("RegExp"),C0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Gl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},Ox=n=>{C0(n,(e,t)=>{if(un(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(un(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Dx=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return ta(n)?i(n):i(String(n).split(e)),t},Lx=()=>{},Vx=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Mx(n){return!!(n&&un(n.append)&&n[T0]==="FormData"&&n[xh])}const Fx=n=>{const e=new Array(10),t=(i,o)=>{if(Kl(i)){if(e.indexOf(i)>=0)return;if(Hl(i))return i;if(!("toJSON"in i)){e[o]=i;const a=ta(i)?[]:{};return Gl(i,(u,d)=>{const p=t(u,o+1);!Wo(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},Ux=Jn("AsyncFunction"),jx=n=>n&&(Kl(n)||un(n))&&un(n.then)&&un(n.catch),k0=((n,e)=>n?setImmediate:e?((t,i)=>(_s.addEventListener("message",({source:o,data:a})=>{o===_s&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),_s.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",un(_s.postMessage)),Bx=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||k0,zx=n=>n!=null&&un(n[xh]),q={isArray:ta,isArrayBuffer:I0,isBuffer:Hl,isFormData:px,isArrayBufferView:sx,isString:ox,isNumber:S0,isBoolean:ax,isObject:Kl,isPlainObject:bc,isEmptyObject:lx,isReadableStream:gx,isRequest:yx,isResponse:_x,isHeaders:vx,isUndefined:Wo,isDate:ux,isFile:cx,isBlob:hx,isRegExp:bx,isFunction:un,isStream:fx,isURLSearchParams:mx,isTypedArray:Cx,isFileList:dx,forEach:Gl,merge:pp,extend:Ex,trim:wx,stripBOM:Tx,inherits:Ix,toFlatObject:Sx,kindOf:bh,kindOfTest:Jn,endsWith:Rx,toArray:Ax,forEachEntry:kx,matchAll:Px,isHTMLForm:Nx,hasOwnProperty:wv,hasOwnProp:wv,reduceDescriptors:C0,freezeMethods:Ox,toObjectSet:Dx,toCamelCase:xx,noop:Lx,toFiniteNumber:Vx,findKey:R0,global:_s,isContextDefined:A0,isSpecCompliantForm:Mx,toJSONObject:Fx,isAsyncFn:Ux,isThenable:jx,setImmediate:k0,asap:Bx,isIterable:zx};function Ne(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const P0=Ne.prototype,N0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{N0[n]={value:n}});Object.defineProperties(Ne,N0);Object.defineProperty(P0,"isAxiosError",{value:!0});Ne.from=(n,e,t,i,o,a)=>{const u=Object.create(P0);q.toFlatObject(n,u,function(v){return v!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ne.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const $x=null;function mp(n){return q.isPlainObject(n)||q.isArray(n)}function x0(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function Ev(n,e,t){return n?n.concat(e).map(function(o,a){return o=x0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function qx(n){return q.isArray(n)&&!n.some(mp)}const Wx=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Dh(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,R){return!q.isUndefined(R[U])});const i=t.metaTokens,o=t.visitor||v,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(P){if(P===null)return"";if(q.isDate(P))return P.toISOString();if(q.isBoolean(P))return P.toString();if(!p&&q.isBlob(P))throw new Ne("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(P)||q.isTypedArray(P)?p&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function v(P,U,R){let Y=P;if(P&&!R&&typeof P=="object"){if(q.endsWith(U,"{}"))U=i?U:U.slice(0,-2),P=JSON.stringify(P);else if(q.isArray(P)&&qx(P)||(q.isFileList(P)||q.endsWith(U,"[]"))&&(Y=q.toArray(P)))return U=x0(U),Y.forEach(function(X,ie){!(q.isUndefined(X)||X===null)&&e.append(u===!0?Ev([U],ie,a):u===null?U:U+"[]",y(X))}),!1}return mp(P)?!0:(e.append(Ev(R,U,a),y(P)),!1)}const E=[],S=Object.assign(Wx,{defaultVisitor:v,convertValue:y,isVisitable:mp});function F(P,U){if(!q.isUndefined(P)){if(E.indexOf(P)!==-1)throw Error("Circular reference detected in "+U.join("."));E.push(P),q.forEach(P,function(Y,Z){(!(q.isUndefined(Y)||Y===null)&&o.call(e,Y,q.isString(Z)?Z.trim():Z,U,S))===!0&&F(Y,U?U.concat(Z):[Z])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return F(n),e}function Tv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Tm(n,e){this._pairs=[],n&&Dh(n,this,e)}const b0=Tm.prototype;b0.append=function(e,t){this._pairs.push([e,t])};b0.toString=function(e){const t=e?function(i){return e.call(this,i,Tv)}:Tv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Hx(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function O0(n,e,t){if(!e)return n;const i=t&&t.encode||Hx;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=q.isURLSearchParams(e)?e.toString():new Tm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Iv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const D0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kx=typeof URLSearchParams<"u"?URLSearchParams:Tm,Gx=typeof FormData<"u"?FormData:null,Qx=typeof Blob<"u"?Blob:null,Jx={isBrowser:!0,classes:{URLSearchParams:Kx,FormData:Gx,Blob:Qx},protocols:["http","https","file","blob","url","data"]},Im=typeof window<"u"&&typeof document<"u",gp=typeof navigator=="object"&&navigator||void 0,Yx=Im&&(!gp||["ReactNative","NativeScript","NS"].indexOf(gp.product)<0),Xx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zx=Im&&window.location.href||"http://localhost",eb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Im,hasStandardBrowserEnv:Yx,hasStandardBrowserWebWorkerEnv:Xx,navigator:gp,origin:Zx},Symbol.toStringTag,{value:"Module"})),qt={...eb,...Jx};function tb(n,e){return Dh(n,new qt.classes.URLSearchParams,{visitor:function(t,i,o,a){return qt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function nb(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rb(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function L0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&q.isArray(o)?o.length:u,p?(q.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!q.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&q.isArray(o[u])&&(o[u]=rb(o[u])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(nb(i),o,t,0)}),t}return null}function ib(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ql={transitional:D0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=q.isObject(e);if(a&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(L0(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return tb(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Dh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),ib(e)):e}],transformResponse:[function(e){const t=this.transitional||Ql.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ne.from(d,Ne.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Ql.headers[n]={}});const sb=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ob=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&sb[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Sv=Symbol("internals");function el(n){return n&&String(n).trim().toLowerCase()}function Oc(n){return n===!1||n==null?n:q.isArray(n)?n.map(Oc):String(n)}function ab(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const lb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xf(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function ub(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function cb(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let cn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,y){const v=el(p);if(!v)throw new Error("header name must be a non-empty string");const E=q.findKey(o,v);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=Oc(d))}const u=(d,p)=>q.forEach(d,(y,v)=>a(y,v,p));if(q.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(q.isString(e)&&(e=e.trim())&&!lb(e))u(ob(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},p,y;for(const v of e){if(!q.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[y=v[0]]=(p=d[y])?q.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=el(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return ab(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=el(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||xf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=el(u),u){const d=q.findKey(i,u);d&&(!t||xf(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||xf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,a)=>{const u=q.findKey(i,a);if(u){t[u]=Oc(o),delete t[a];return}const d=e?ub(a):String(a).trim();d!==a&&delete t[a],t[d]=Oc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Sv]=this[Sv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=el(u);i[d]||(cb(o,u),i[d]=!0)}return q.isArray(e)?e.forEach(a):a(e),this}};cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(cn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(cn);function bf(n,e){const t=this||Ql,i=e||t,o=cn.from(i.headers);let a=i.data;return q.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function V0(n){return!!(n&&n.__CANCEL__)}function na(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(na,Ne,{__CANCEL__:!0});function M0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function hb(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function db(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=i[a];u||(u=y),t[o]=p,i[o]=y;let E=a,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const F=v&&y-v;return F?Math.round(S*1e3/F):void 0}}function fb(n,e){let t=0,i=1e3/e,o,a;const u=(y,v=Date.now())=>{t=v,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?u(y,v):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const rh=(n,e,t=3)=>{let i=0;const o=db(50,250);return fb(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,y=o(p),v=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&v?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},Rv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Av=n=>(...e)=>q.asap(()=>n(...e)),pb=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,mb=qt.hasStandardBrowserEnv?{write(n,e,t,i,o,a){const u=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),q.isString(i)&&u.push("path="+i),q.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gb(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function yb(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function F0(n,e,t){let i=!gb(e);return n&&(i||t==!1)?yb(n,e):e}const Cv=n=>n instanceof cn?{...n}:n;function ks(n,e){e=e||{};const t={};function i(y,v,E,S){return q.isPlainObject(y)&&q.isPlainObject(v)?q.merge.call({caseless:S},y,v):q.isPlainObject(v)?q.merge({},v):q.isArray(v)?v.slice():v}function o(y,v,E,S){if(q.isUndefined(v)){if(!q.isUndefined(y))return i(void 0,y,E,S)}else return i(y,v,E,S)}function a(y,v){if(!q.isUndefined(v))return i(void 0,v)}function u(y,v){if(q.isUndefined(v)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function d(y,v,E){if(E in e)return i(y,v);if(E in n)return i(void 0,y)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,v,E)=>o(Cv(y),Cv(v),E,!0)};return q.forEach(Object.keys({...n,...e}),function(v){const E=p[v]||o,S=E(n[v],e[v],v);q.isUndefined(S)&&E!==d||(t[v]=S)}),t}const U0=n=>{const e=ks({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=cn.from(u),e.url=O0(F0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(q.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([v,E])=>{y.includes(v.toLowerCase())&&u.set(v,E)})}}if(qt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&pb(e.url))){const p=o&&a&&mb.read(a);p&&u.set(o,p)}return e},_b=typeof XMLHttpRequest<"u",vb=_b&&function(n){return new Promise(function(t,i){const o=U0(n);let a=o.data;const u=cn.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,v,E,S,F,P;function U(){F&&F(),P&&P(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let R=new XMLHttpRequest;R.open(o.method.toUpperCase(),o.url,!0),R.timeout=o.timeout;function Y(){if(!R)return;const X=cn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),K={data:!d||d==="text"||d==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:X,config:n,request:R};M0(function(N){t(N),U()},function(N){i(N),U()},K),R=null}"onloadend"in R?R.onloadend=Y:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(Y)},R.onabort=function(){R&&(i(new Ne("Request aborted",Ne.ECONNABORTED,n,R)),R=null)},R.onerror=function(ie){const K=ie&&ie.message?ie.message:"Network Error",ee=new Ne(K,Ne.ERR_NETWORK,n,R);ee.event=ie||null,i(ee),R=null},R.ontimeout=function(){let ie=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const K=o.transitional||D0;o.timeoutErrorMessage&&(ie=o.timeoutErrorMessage),i(new Ne(ie,K.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,R)),R=null},a===void 0&&u.setContentType(null),"setRequestHeader"in R&&q.forEach(u.toJSON(),function(ie,K){R.setRequestHeader(K,ie)}),q.isUndefined(o.withCredentials)||(R.withCredentials=!!o.withCredentials),d&&d!=="json"&&(R.responseType=o.responseType),y&&([S,P]=rh(y,!0),R.addEventListener("progress",S)),p&&R.upload&&([E,F]=rh(p),R.upload.addEventListener("progress",E),R.upload.addEventListener("loadend",F)),(o.cancelToken||o.signal)&&(v=X=>{R&&(i(!X||X.type?new na(null,n,R):X),R.abort(),R=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const Z=hb(o.url);if(Z&&qt.protocols.indexOf(Z)===-1){i(new Ne("Unsupported protocol "+Z+":",Ne.ERR_BAD_REQUEST,n));return}R.send(a||null)})},wb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ne?v:new na(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>q.asap(d),p}},Eb=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},Tb=async function*(n,e){for await(const t of Ib(n))yield*Eb(t,e)},Ib=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},kv=(n,e,t,i)=>{const o=Tb(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await o.next();if(y){d(),p.close();return}let E=v.byteLength;if(t){let S=a+=E;t(S)}p.enqueue(new Uint8Array(v))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},Pv=64*1024,{isFunction:vc}=q,Sb=(({Request:n,Response:e})=>({Request:n,Response:e}))(q.global),{ReadableStream:Nv,TextEncoder:xv}=q.global,bv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Rb=n=>{n=q.merge.call({skipUndefined:!0},Sb,n);const{fetch:e,Request:t,Response:i}=n,o=e?vc(e):typeof fetch=="function",a=vc(t),u=vc(i);if(!o)return!1;const d=o&&vc(Nv),p=o&&(typeof xv=="function"?(P=>U=>P.encode(U))(new xv):async P=>new Uint8Array(await new t(P).arrayBuffer())),y=a&&d&&bv(()=>{let P=!1;const U=new t(qt.origin,{body:new Nv,method:"POST",get duplex(){return P=!0,"half"}}).headers.has("Content-Type");return P&&!U}),v=u&&d&&bv(()=>q.isReadableStream(new i("").body)),E={stream:v&&(P=>P.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!E[P]&&(E[P]=(U,R)=>{let Y=U&&U[P];if(Y)return Y.call(U);throw new Ne(`Response type '${P}' is not supported`,Ne.ERR_NOT_SUPPORT,R)})});const S=async P=>{if(P==null)return 0;if(q.isBlob(P))return P.size;if(q.isSpecCompliantForm(P))return(await new t(qt.origin,{method:"POST",body:P}).arrayBuffer()).byteLength;if(q.isArrayBufferView(P)||q.isArrayBuffer(P))return P.byteLength;if(q.isURLSearchParams(P)&&(P=P+""),q.isString(P))return(await p(P)).byteLength},F=async(P,U)=>{const R=q.toFiniteNumber(P.getContentLength());return R??S(U)};return async P=>{let{url:U,method:R,data:Y,signal:Z,cancelToken:X,timeout:ie,onDownloadProgress:K,onUploadProgress:ee,responseType:N,headers:I,withCredentials:C="same-origin",fetchOptions:O}=U0(P),V=e||fetch;N=N?(N+"").toLowerCase():"text";let L=wb([Z,X&&X.toAbortSignal()],ie),A=null;const ke=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let Qe;try{if(ee&&y&&R!=="get"&&R!=="head"&&(Qe=await F(I,Y))!==0){let x=new t(U,{method:"POST",body:Y,duplex:"half"}),H;if(q.isFormData(Y)&&(H=x.headers.get("content-type"))&&I.setContentType(H),x.body){const[de,_e]=Rv(Qe,rh(Av(ee)));Y=kv(x.body,Pv,de,_e)}}q.isString(C)||(C=C?"include":"omit");const Fe=a&&"credentials"in t.prototype,Le={...O,signal:L,method:R.toUpperCase(),headers:I.normalize().toJSON(),body:Y,duplex:"half",credentials:Fe?C:void 0};A=a&&new t(U,Le);let ae=await(a?V(A,O):V(U,Le));const te=v&&(N==="stream"||N==="response");if(v&&(K||te&&ke)){const x={};["status","statusText","headers"].forEach(ve=>{x[ve]=ae[ve]});const H=q.toFiniteNumber(ae.headers.get("content-length")),[de,_e]=K&&Rv(H,rh(Av(K),!0))||[];ae=new i(kv(ae.body,Pv,de,()=>{_e&&_e(),ke&&ke()}),x)}N=N||"text";let J=await E[q.findKey(E,N)||"text"](ae,P);return!te&&ke&&ke(),await new Promise((x,H)=>{M0(x,H,{data:J,headers:cn.from(ae.headers),status:ae.status,statusText:ae.statusText,config:P,request:A})})}catch(Fe){throw ke&&ke(),Fe&&Fe.name==="TypeError"&&/Load failed|fetch/i.test(Fe.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,P,A),{cause:Fe.cause||Fe}):Ne.from(Fe,Fe&&Fe.code,P,A)}}},Ab=new Map,j0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,y,v=Ab;for(;d--;)p=a[d],y=v.get(p),y===void 0&&v.set(p,y=d?new Map:Rb(e)),v=y;return y};j0();const yp={http:$x,xhr:vb,fetch:{get:j0}};q.forEach(yp,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ov=n=>`- ${n}`,Cb=n=>q.isFunction(n)||n===null||n===!1,B0={getAdapter:(n,e)=>{n=q.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!Cb(i)&&(o=yp[(d=String(i)).toLowerCase()],o===void 0))throw new Ne(`Unknown adapter '${d}'`);if(o&&(q.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(Ov).join(`
`):" "+Ov(u[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:yp};function Of(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new na(null,n)}function Dv(n){return Of(n),n.headers=cn.from(n.headers),n.data=bf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),B0.getAdapter(n.adapter||Ql.adapter,n)(n).then(function(i){return Of(n),i.data=bf.call(n,n.transformResponse,i),i.headers=cn.from(i.headers),i},function(i){return V0(i)||(Of(n),i&&i.response&&(i.response.data=bf.call(n,n.transformResponse,i.response),i.response.headers=cn.from(i.response.headers))),Promise.reject(i)})}const z0="1.12.2",Lh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Lh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Lv={};Lh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+z0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new Ne(o(u," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!Lv[u]&&(Lv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Lh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function kb(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new Ne("option "+a+" must be "+p,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+a,Ne.ERR_BAD_OPTION)}}const Dc={assertOptions:kb,validators:Lh},lr=Dc.validators;let ws=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Iv,response:new Iv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ks(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&Dc.assertOptions(i,{silentJSONParsing:lr.transitional(lr.boolean),forcedJSONParsing:lr.transitional(lr.boolean),clarifyTimeoutError:lr.transitional(lr.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:Dc.assertOptions(o,{encode:lr.function,serialize:lr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Dc.assertOptions(t,{baseUrl:lr.spelling("baseURL"),withXsrfToken:lr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&q.merge(a.common,a[t.method]);a&&q.forEach(["delete","get","head","post","put","patch","common"],P=>{delete a[P]}),t.headers=cn.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(p=p&&U.synchronous,d.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let v,E=0,S;if(!p){const P=[Dv.bind(this),void 0];for(P.unshift(...d),P.push(...y),S=P.length,v=Promise.resolve(t);E<S;)v=v.then(P[E++],P[E++]);return v}S=d.length;let F=t;for(;E<S;){const P=d[E++],U=d[E++];try{F=P(F)}catch(R){U.call(this,R);break}}try{v=Dv.call(this,F)}catch(P){return Promise.reject(P)}for(E=0,S=y.length;E<S;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=ks(this.defaults,e);const t=F0(e.baseURL,e.url,e.allowAbsoluteUrls);return O0(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){ws.prototype[e]=function(t,i){return this.request(ks(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(ks(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}ws.prototype[e]=t(),ws.prototype[e+"Form"]=t(!0)});let Pb=class $0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new na(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new $0(function(o){e=o}),cancel:e}}};function Nb(n){return function(t){return n.apply(null,t)}}function xb(n){return q.isObject(n)&&n.isAxiosError===!0}const _p={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_p).forEach(([n,e])=>{_p[e]=n});function q0(n){const e=new ws(n),t=E0(ws.prototype.request,e);return q.extend(t,ws.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return q0(ks(n,o))},t}const lt=q0(Ql);lt.Axios=ws;lt.CanceledError=na;lt.CancelToken=Pb;lt.isCancel=V0;lt.VERSION=z0;lt.toFormData=Dh;lt.AxiosError=Ne;lt.Cancel=lt.CanceledError;lt.all=function(e){return Promise.all(e)};lt.spread=Nb;lt.isAxiosError=xb;lt.mergeConfig=ks;lt.AxiosHeaders=cn;lt.formToJSON=n=>L0(q.isHTMLForm(n)?new FormData(n):n);lt.getAdapter=B0.getAdapter;lt.HttpStatusCode=_p;lt.default=lt;const{Axios:Kb,AxiosError:Gb,CanceledError:Qb,isCancel:Jb,CancelToken:Yb,VERSION:Xb,all:Zb,Cancel:eO,isAxiosError:tO,spread:nO,toFormData:rO,AxiosHeaders:iO,HttpStatusCode:sO,formToJSON:oO,getAdapter:aO,mergeConfig:lO}=lt,W0="dm7y9ywjq",H0="barberia_unsigned",Sm=!!H0,bb=n=>n.total?Math.round(n.loaded/n.total*100):0;async function Ob(n,e={}){const{folder:t="barberia",onProgress:i}=e;if(!Sm)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");const o=`https://api.cloudinary.com/v1_1/${W0}/image/upload`,a=new FormData;a.append("file",n),a.append("upload_preset",H0),t&&a.append("folder",t);const u=!1,d=async p=>{const y=new FormData;a.forEach((S,F)=>{y.append(F,S)});const{data:v}=await lt.post(o,y,{onUploadProgress:S=>{if(!i)return;const F=bb(S);F>0&&i(F)}});i?.(100);const E=typeof v.delete_token=="string"&&v.delete_token.trim().length?v.delete_token:null;return{url:v.secure_url,deleteToken:E}};try{return await d(u)}catch(p){if(console.error("No pudimos subir la imagen a Cloudinary",p),lt.isAxiosError(p)){const y=typeof p.response?.data?.error?.message=="string"?p.response.data.error.message:typeof p.response?.data?.message=="string"?p.response.data.message:null;throw new Error(y?`Cloudinary rechazo la imagen: ${y}`:"No pudimos subir la imagen. Intenta de nuevo.")}throw new Error("No pudimos subir la imagen. Intenta de nuevo.")}}async function Db(n){if(!n)throw new Error("Token de eliminacion invalido.");if(!Sm)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");try{const e=`https://api.cloudinary.com/v1_1/${W0}/delete_by_token`,t=new FormData;t.append("token",n),await lt.post(e,t)}catch(e){throw console.error("No pudimos eliminar la imagen en Cloudinary",e),new Error("No pudimos eliminar la imagen. Intenta de nuevo.")}}function Lb({onUploaded:n,folder:e,disabled:t}){const[i,o]=G.useState(!1),[a,u]=G.useState(0),[d,p]=G.useState(null),y=async S=>{const F=S.target,P=F.files?.[0];if(P){o(!0),u(0),p(null);try{const U=await Ob(P,{folder:e,onProgress:R=>u(R)});n(U)}catch(U){console.error(U),p(U instanceof Error?U.message:"No pudimos subir la imagen.")}finally{F.value="",o(!1),u(0)}}},v=t||i,E=i?`Subiendo...${a>0?` ${a}%`:""}`:"Subir imagen";return b.jsxs("div",{className:"space-y-1",children:[b.jsxs("label",{className:`uploader-trigger${v?" disabled":""}`,children:[b.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:v,onChange:y}),b.jsx("span",{children:E})]}),d&&b.jsx("p",{className:"text-xs text-red-500 text-right",children:d})]})}const Df="clientes",Lf="cuts";function Vb(){const{id:n}=R1(),e=Wl(),{user:t,role:i,demoMode:o}=Xo(),[a,u]=G.useState([]),[d,p]=G.useState({fullName:"",phone:"",notes:""}),[y,v]=G.useState(!0),[E,S]=G.useState(!1),[F,P]=G.useState(!1),[U,R]=G.useState(null),[Y,Z]=G.useState(null),[X,ie]=G.useState(null),K=!Oe,ee=i==="admin"||i==="barbero",N=Sm,I=K?"demo":n?`clientes/${n}`:"clientes",C=te=>te.map(J=>({key:J.id,id:J.id,url:J.url,deleteToken:J.deleteToken??null,barberId:J.barberId,demoId:J.id})),O=(te,J)=>{if(typeof te=="string"){const x={url:te,deleteToken:null};return J&&(x.barberId=J),{url:te,deleteToken:null,barberId:J,rawValue:x,needsMigration:!0}}if(te&&typeof te=="object"){const x=te,H=typeof x.url=="string"?x.url:typeof x.secure_url=="string"?x.secure_url:typeof x.path=="string"?x.path:"";if(!H)return null;const _e=(typeof x.deleteToken=="string"?x.deleteToken:typeof x.delete_token=="string"?x.delete_token:null)??null,ve=typeof x.barberId=="string"&&x.barberId.trim().length>0,Pe=ve?x.barberId.trim():J,be={url:H,deleteToken:_e};Pe&&(be.barberId=Pe);const We=!ve&&!!J||typeof x.deleteToken>"u"||typeof x.delete_token=="string";return{url:H,deleteToken:_e,barberId:Pe,rawValue:be,needsMigration:We}}return null},V=te=>{u(J=>J.filter(x=>x.key!==te))},L=async te=>{if(!(!n||X||!window.confirm("Seguro que deseas eliminar esta foto?"))){Z(null),ie(te.key);try{if(K){te.demoId&&WN(n,te.demoId),V(te.key);return}if(!te.deleteToken)throw new Error("No podemos eliminar esta imagen porque se subio antes de activar los tokens de Cloudinary.");if(await Db(te.deleteToken),te.cutId){const x=an(Oe,Lf,te.cutId);te.docHasSinglePhoto?await lp(x):te.rawValue!==void 0&&await ml(x,{photos:rN(te.rawValue)})}V(te.key)}catch(x){console.error("No pudimos eliminar la foto",x),Z(x instanceof Error?x.message:"No pudimos eliminar la imagen. Intenta de nuevo.")}finally{ie(null)}}};G.useEffect(()=>{if(!n)return;if(Z(null),ie(null),K){const J=a0(n);if(!J){v(!1);return}v(!0),p({fullName:J.fullName,phone:J.phone==null?"":String(J.phone),notes:J.notes||""}),u(C($N(n)));return}const te=tN(an(Oe,Df,n),J=>{if(!J.exists()){v(!1);return}const x=J.data();v(!0),p({fullName:x.fullName||"",phone:x.phone==null?"":String(x.phone),notes:x.notes||""})});return(async()=>{const J=Yc(Cs(Oe,Lf),ap("clientId","==",n)),x=await Cl(J),H=[];let de=!1;x.forEach(_e=>{const ve=_e.data(),Pe=Array.isArray(ve.photos)?ve.photos:[],be=typeof ve.barberId=="string"&&ve.barberId.trim().length?ve.barberId.trim():void 0;Pe.forEach((Ue,We)=>{const Xe=O(Ue,be);if(!Xe)return;const wn=`${_e.id}-${We}`;H.push({photo:{key:wn,id:wn,url:Xe.url,deleteToken:Xe.deleteToken,cutId:_e.id,rawValue:Xe.rawValue,docHasSinglePhoto:Pe.length<=1,barberId:Xe.barberId},createdAt:ve.createdAt}),Xe.needsMigration&&!de&&(de=!0,console.warn("Se detectaron fotos antiguas sin barberId. Actualiza manualmente esos documentos si tus reglas de seguridad lo permiten."))})}),H.sort((_e,ve)=>{const Pe=_e.createdAt?.toMillis?_e.createdAt.toMillis():Number(_e.createdAt)||0;return(ve.createdAt?.toMillis?ve.createdAt.toMillis():Number(ve.createdAt)||0)-Pe}),u(H.map(_e=>_e.photo).slice(0,12))})(),()=>te()},[n,K]);const A=G.useMemo(()=>K?b.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[K]),ke=async te=>{if(!n)return;if(Z(null),K){const x=qN(n,{url:te.url,deleteToken:te.deleteToken??null,barberId:t?.uid||"demo-barber"});u(C(x).slice(0,12));return}const J={url:te.url,deleteToken:te.deleteToken??null,barberId:t?.uid||""};try{const x=await e0(Cs(Oe,Lf),{clientId:n,barberId:t?.uid||"",photos:[J],createdAt:gm()}),H=`${x.id}-0`;u(de=>[{key:H,id:H,url:te.url,deleteToken:te.deleteToken??null,cutId:x.id,rawValue:J,docHasSinglePhoto:!0,barberId:t?.uid||""},...de].slice(0,12))}catch(x){console.error("No pudimos registrar la foto",x),Z("No pudimos guardar la foto en el cliente.")}},Qe=async()=>{if(!n)return;const te=(d.fullName??"").toString().trim(),J=(d.phone??"").toString().trim();if(!te){R("El nombre es obligatorio.");return}S(!0),R(null);try{if(K)BN(n,{fullName:te,phone:J||void 0,notes:d.notes});else{const x={fullName:te,fullName_lower:te.toLowerCase(),notes:d.notes};J?x.phone=J:x.phone=nN(),await ml(an(Oe,Df,n),x)}}catch(x){console.error("No pudimos actualizar el cliente",x),R("No pudimos actualizar el cliente.")}finally{S(!1)}},Fe=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){P(!0),R(null);try{K?zN(n):await lp(an(Oe,Df,n)),e("/clientes")}catch(J){console.error("No pudimos eliminar el cliente",J),R("No pudimos eliminar el cliente."),P(!1)}}};if(!y)return b.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const Le=(d.fullName??"").toString().trim()||"Cliente sin nombre",ae=(d.phone??"").toString().trim();return b.jsxs("div",{className:"panel space-y-8",children:[A,b.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),b.jsx("h1",{className:"detail-title",children:Le}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:ae?`Tel. ${ae}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),ee&&b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsx(Lb,{onUploaded:ke,folder:I}),b.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"}),!N&&!K&&b.jsxs("span",{className:"text-xs text-red-500",children:["Configura Cloudinary en el archivo ",b.jsx("code",{children:".env"})," para subir las imagenes a la nube."]})]})]}),b.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[b.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),b.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),b.jsx("input",{className:"input mt-1",value:d.fullName,onChange:te=>p(J=>({...J,fullName:te.target.value})),disabled:!ee})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),b.jsx("input",{className:"input mt-1",value:d.phone,onChange:te=>p(J=>({...J,phone:te.target.value})),disabled:!ee})]})]}),U&&b.jsx("p",{className:"text-xs text-red-500",children:U}),ee&&b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary",onClick:()=>void Qe(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),b.jsx("button",{className:"btn btn-ghost",onClick:()=>void Fe(),disabled:F,children:F?"Eliminando...":"Eliminar"})]})]}),b.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h2",{className:"detail-sub",children:"Galeria"}),a.length>0&&b.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[a.length," fotos"]})]}),b.jsx(rx,{photos:a,canDelete:ee,onDelete:te=>void L(te)}),Y&&b.jsx("p",{className:"text-xs text-red-500",children:Y}),K&&!o||!N?b.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:N?"Configura Cloudinary para guardar fotos reales.":"Las variables de Cloudinary no estan definidas. Usa tus credenciales para guardar las imagenes."}):null,!N&&b.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Mientras tanto se utilizaran imagenes de muestra temporales."})]})]}),b.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsx("h2",{className:"detail-sub",children:"Notas"}),b.jsx("textarea",{className:"input min-h-[200px]",value:d.notes,onChange:te=>p(J=>({...J,notes:te.target.value})),disabled:!ee}),ee&&b.jsx("button",{onClick:()=>void Qe(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]})]})}const Vv={"auth/invalid-email":"El correo no tiene un formato válido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contraseña incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales inválidas. Verifica tus datos.","auth/user-disabled":"La cuenta está deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},Mv=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in Vv)return Vv[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesión. Verifica tus datos."}return"No pudimos iniciar sesión. Verifica tu correo y contraseña."},wc=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al día con las imágenes de cada servicio"}];function Mb(){const[n,e]=G.useState(""),[t,i]=G.useState(""),[o,a]=G.useState(!1),[u,d]=G.useState(null),[p,y]=G.useState(null),v=Wl(),{user:E,loading:S}=Xo();G.useEffect(()=>{!S&&E&&v("/clientes",{replace:!0})},[E,S,v]);const F=async R=>{if(R.preventDefault(),!vn||!Oe)return;const Y=n.trim(),Z=t.trim();if(!Y||!Z){d("Completa ambos campos para continuar.");return}a(!0),d(null),y(null);try{const ie=(await FR(vn,Y,Z)).user.uid,K=an(Oe,"barberos",ie),ee=await Xc(K);let N=null;if(ee.exists())N=ee.data().role||null;else{const I=an(Oe,"users",ie),C=await Xc(I);C.exists()&&(N=C.data().role||null)}if(!N)throw new Error("No se encontró el rol del usuario.");if(N==="admin")v("/admin/usuarios",{replace:!0});else if(N==="barbero")v("/clientes",{replace:!0});else throw new Error("Rol desconocido o no autorizado.")}catch(X){console.error("Error al iniciar sesión:",X),d(Mv(X))}finally{a(!1)}},P=async()=>{if(!vn)return;const R=n.trim();if(!R){d("Ingresa tu correo para recuperar la contraseña.");return}try{await VR(vn,R),y("Te enviamos un correo para restablecer tu contraseña."),d(null)}catch(Y){console.error("Error al enviar correo de recuperación:",Y),d(Mv(Y)),y(null)}};return b.jsx("div",{className:"login-hero",children:b.jsxs("div",{className:"login-hero-inner",children:[b.jsx("div",{className:"space-y-4 text-center",children:b.jsxs("div",{className:"look-fusion-lockup",children:[b.jsx("img",{src:"/barberia/images/logo.png",alt:"Logotipo Look Fusion",className:"look-fusion-logo"}),b.jsx("h1",{className:"login-heading look-fusion-wordmark",children:"LOOK FUSION"})]})}),b.jsxs("div",{className:"login-card",children:[b.jsxs("div",{className:"login-gallery",children:[b.jsx("div",{className:"login-gallery-top",children:wc.slice(0,2).map(R=>b.jsxs("figure",{children:[b.jsx("img",{src:R.src,alt:R.caption}),b.jsx("figcaption",{children:R.caption})]},R.caption))}),b.jsxs("figure",{children:[b.jsx("img",{src:wc[2].src,alt:wc[2].caption}),b.jsx("figcaption",{children:wc[2].caption})]})]}),b.jsxs("div",{className:"login-panel",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("h2",{children:"Inicia sesión"}),b.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automáticamente al módulo correspondiente según tu rol."})]}),b.jsxs("form",{className:"login-form",onSubmit:F,children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),b.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:R=>e(R.target.value),type:"email",autoComplete:"email",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contraseña"}),b.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:R=>i(R.target.value),autoComplete:"current-password",required:!0,minLength:6})]}),u&&b.jsx("p",{className:"text-xs text-red-600",children:u}),p&&b.jsx("p",{className:"text-xs text-green-600",children:p}),b.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Ingresando...":"Entrar"}),b.jsx("button",{className:"mt-2 text-sm font-semibold text-[#d67c21] underline hover:text-[#b86516]",type:"button",disabled:o,onClick:P,children:"Olvidé mi contraseña"})]}),b.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galería asignada."]}),b.jsxs("p",{children:["Soporte: ",b.jsx("span",{className:"font-semibold text-black/70",children:"barberiawebpro@gmail.com"})]})]})]})]})]})})}async function Fb(n){if(!vn||!Oe)return{success:!1,message:"Firebase no está inicializado."};try{const t=(await MR(vn,n.email,n.password)).user.uid;return await eN(an(Oe,"barberos",t),{email:n.email.toLowerCase(),displayName:n.displayName,role:"barbero",createdAt:gm()}),console.log("✅ Barbero registrado correctamente:",n.email),{success:!0,uid:t}}catch(e){return console.error("❌ Error al registrar barbero:",e),typeof e=="object"&&e&&"code"in e&&e.code==="auth/email-already-in-use"?{success:!1,message:"El correo ya está registrado."}:{success:!1,message:e instanceof Error?e.message:"Error desconocido"}}}const tl="barberos",Ub=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,nl=(n,e)=>`${n??""} ${e??""}`.trim(),Vf={firstName:"",lastName:"",email:"",dni:"",role:"barbero",password:""},rl=()=>l0().map(n=>{const e=(n.displayName||"").trim().split(" "),t=e.shift()||n.displayName||"",i=e.join(" ");return{id:n.id,displayName:n.displayName,firstName:t,lastName:i,email:n.email,emailLower:n.email.toLowerCase(),dni:n.id.replace("demo-user-",""),role:n.role}});function jb(){const{role:n,loading:e}=Xo(),t=!Oe,[i,o]=G.useState(()=>t?rl():[]),[a,u]=G.useState(""),[d,p]=G.useState(!1),[y,v]=G.useState(!1),[E,S]=G.useState(Vf),[F,P]=G.useState(null);G.useEffect(()=>{if(!Oe){o(rl());return}(async()=>{const ee=await Cl(Yc(Cs(Oe,tl),YP("displayName")));o(ee.docs.map(N=>{const I=N.data(),C=I.firstName||I.nombre||"",O=I.lastName||I.apellido||"",V=I.dni||"";return{id:N.id,displayName:I.displayName||nl(C,O),firstName:C,lastName:O,email:I.email,emailLower:I.emailLower,dni:V,role:I.role}}))})()},[Oe]);const U=a.trim().toLowerCase(),R=G.useMemo(()=>i.filter(K=>{if(!U)return!0;const ee=(K.displayName||nl(K.firstName,K.lastName)).toLowerCase(),N=K.emailLower||K.email?.toLowerCase()||"",I=(K.dni||"").toLowerCase();return ee.includes(U)||N.includes(U)||I.includes(U)}),[i,U]),Y=K=>{if(K){const N=(K.displayName||nl(K.firstName,K.lastName)).split(" "),I=K.firstName||N.shift()||"",C=K.lastName||N.join(" ");S({id:K.id,firstName:I,lastName:C,email:K.email||"",dni:K.dni||"",role:K.role||"barbero",password:""})}else S(Vf);P(null),v(!0)},Z=async K=>{K.preventDefault();const ee=E.firstName.trim(),N=E.lastName.trim(),I=E.email.trim(),C=E.dni.trim(),O=E.password.trim();if(!ee||!N||!I||!C){P("Nombre, apellido, email y DNI son obligatorios.");return}if(!Ub.test(I)){P("Ingresa un correo válido.");return}const V=nl(ee,N),L=I.toLowerCase();p(!0),P(null);try{if(!Oe)E.id?lv(E.id,{displayName:V,email:I,role:E.role}):HN({displayName:V,email:I,role:E.role}),o(rl());else if(E.id)await ml(an(Oe,tl,E.id),{firstName:ee,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role}),o(A=>A.map(ke=>ke.id===E.id?{...ke,firstName:ee,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role}:ke));else{if(O.length<6){P("La contraseña debe tener al menos 6 caracteres."),p(!1);return}const A=await Fb({displayName:V,email:I,password:O});if(!A.success||!A.uid)throw new Error(A.message||"No pudimos registrar el barbero.");await ml(an(Oe,tl,A.uid),{firstName:ee,lastName:N,email:I,emailLower:L,dni:C,role:E.role}),o(ke=>[{id:A.uid,firstName:ee,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role},...ke])}v(!1),S(Vf)}catch(A){console.error("No pudimos guardar el usuario",A);const ke=A instanceof Error?A.message:"No pudimos guardar el usuario.";P(ke)}finally{p(!1)}},X=async(K,ee)=>{if(!Oe){lv(K,{role:ee}),o(rl());return}await ml(an(Oe,tl,K),{role:ee}),o(N=>N.map(I=>I.id===K?{...I,role:ee}:I))},ie=async K=>{if(window.confirm("Seguro que deseas eliminar este barbero?"))try{Oe?(await lp(an(Oe,tl,K)),o(ee=>ee.filter(N=>N.id!==K))):(KN(K),o(rl()))}catch(ee){console.error("No pudimos eliminar el usuario",ee),P("No pudimos eliminar el usuario.")}};return e?b.jsx("div",{className:"panel text-[var(--ink)]",children:"Cargando usuarios…"}):n!=="admin"?b.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta página."}):b.jsxs("div",{className:"panel space-y-6",children:[b.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),b.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Gestión de barberos"}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:"Crea cuentas nuevas, asigna roles y mantén la información de tu staff al día."})]}),b.jsx("button",{className:"btn btn-primary",onClick:()=>Y(),children:"Nuevo barbero"})]}),b.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:b.jsx("input",{className:"searchbar",placeholder:"Buscar por nombre, correo o DNI",value:a,onChange:K=>u(K.target.value)})}),y&&b.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:Z,children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-5",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Ana",value:E.firstName,onChange:K=>S(ee=>({...ee,firstName:K.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Apellido"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Gómez",value:E.lastName,onChange:K=>S(ee=>({...ee,lastName:K.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"DNI"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. 12345678",value:E.dni,onChange:K=>S(ee=>({...ee,dni:K.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),b.jsx("input",{className:"input mt-1",placeholder:"correo@dominio.com",value:E.email,onChange:K=>S(ee=>({...ee,email:K.target.value})),type:"email"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),b.jsxs("select",{className:"input mt-1",value:E.role,onChange:K=>S(ee=>({...ee,role:K.target.value})),children:[b.jsx("option",{value:"barbero",children:"barbero"}),b.jsx("option",{value:"admin",children:"admin"})]})]})]}),!E.id&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Contraseña temporal"}),b.jsx("input",{className:"input mt-1",placeholder:"Mínimo 6 caracteres",type:"password",value:E.password,onChange:K=>S(ee=>({...ee,password:K.target.value})),required:!0,minLength:6})]}),F&&b.jsx("p",{className:"text-xs text-red-500",children:F}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),b.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>v(!1),children:"Cancelar"})]})]}),b.jsxs("div",{className:"overflow-x-auto",children:[b.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre completo"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"DNI"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),b.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),b.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:R.map(K=>b.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[b.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre completo",children:K.displayName||nl(K.firstName,K.lastName)||"-"}),b.jsx("td",{className:"py-3 pr-3","data-label":"DNI",children:K.dni||"-"}),b.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:K.email||"-"}),b.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:K.role}),b.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:b.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[b.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:K.role,onChange:ee=>X(K.id,ee.target.value),children:[b.jsx("option",{value:"barbero",children:"barbero"}),b.jsx("option",{value:"admin",children:"admin"})]}),b.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Y(K),children:"Editar"}),b.jsx("button",{className:"w-full sm:w-auto rounded-full px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:()=>void ie(K.id),disabled:K.role==="admin",children:"Eliminar"})]})})]},K.id))})]}),!R.length&&b.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),b.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Las cuentas creadas desde este panel generan usuario en Firebase Auth y perfil en Firestore automáticamente."})]})}function Mf({children:n}){const{role:e,logout:t,user:i,profileName:o}=Xo(),a=e?e.charAt(0).toUpperCase()+e.slice(1):null,u=o||i?.displayName||i?.email||a||"Perfil",d=Wl(),[p,y]=G.useState(!1),v="/barberia/images/logo.png",E=({isActive:R})=>`nav-pill${R?" active":""}`,S=e==="admin"?"/admin/usuarios":"/clientes",F=async()=>{await t(),d("/login"),y(!1)},P=()=>y(!1),U=()=>y(R=>!R);return b.jsxs("div",{className:"app-shell",children:[b.jsx("nav",{className:"navbar",children:b.jsxs("div",{className:"inner",children:[b.jsxs("div",{className:"navbar-heading",children:[b.jsxs(wm,{to:S,className:"brand",onClick:P,children:[b.jsx("img",{src:v,alt:"Logotipo Look Fusion",className:"brand-logo"}),b.jsx("span",{className:"brand-wordmark",children:"LOOK FUSION"})]}),b.jsxs("button",{type:"button",className:"navbar-toggle",onClick:U,"aria-expanded":p,"aria-controls":"primary-nav",children:[b.jsx("span",{className:"sr-only",children:"Abrir menu"}),b.jsx("span",{className:"line"}),b.jsx("span",{className:"line"}),b.jsx("span",{className:"line"})]})]}),b.jsxs("div",{id:"primary-nav",className:`nav-links${p?" open":""}`,children:[b.jsx(yv,{to:"/clientes",className:E,onClick:P,children:"Clientes"}),e==="admin"&&b.jsx(yv,{to:"/admin/usuarios",className:E,onClick:P,children:"Dashboard"}),i&&b.jsx("span",{className:"nav-pill",children:u}),i&&b.jsx("button",{type:"button",className:"nav-pill",onClick:F,children:"Salir"})]})]})}),b.jsx("main",{className:"page-container",children:n})]})}function Bb(){return b.jsx(YN,{children:b.jsx(Q1,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:b.jsxs(B1,{children:[b.jsx(Po,{path:"/",element:b.jsx(hp,{to:"/clientes",replace:!0})}),b.jsx(Po,{path:"/login",element:b.jsx(Mb,{})}),b.jsx(Po,{path:"/clientes",element:b.jsx(Nf,{children:b.jsx(Mf,{children:b.jsx(nx,{})})})}),b.jsx(Po,{path:"/clientes/:id",element:b.jsx(Nf,{children:b.jsx(Mf,{children:b.jsx(Vb,{})})})}),b.jsx(Po,{path:"/admin/usuarios",element:b.jsx(Nf,{allowedRoles:["admin"],children:b.jsx(Mf,{children:b.jsx(jb,{})})})})]})})})}oI.createRoot(document.getElementById("root")).render(b.jsx(Uv.StrictMode,{children:b.jsx(Bb,{})}));
