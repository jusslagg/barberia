function sI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function qv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hf={exports:{}},el={},df={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function oI(){if(Ly)return Le;Ly=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,M={};function C(U,Q,ye){this.props=U,this.context=Q,this.refs=M,this.updater=ye||V}C.prototype.isReactComponent={},C.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function Y(){}Y.prototype=C.prototype;function te(U,Q,ye){this.props=U,this.context=Q,this.refs=M,this.updater=ye||V}var ne=te.prototype=new Y;ne.constructor=te,x(ne,C.prototype),ne.isPureReactComponent=!0;var G=Array.isArray,K=Object.prototype.hasOwnProperty,Z={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(U,Q,ye){var Pe,xe={},X=null,oe=null;if(Q!=null)for(Pe in Q.ref!==void 0&&(oe=Q.ref),Q.key!==void 0&&(X=""+Q.key),Q)K.call(Q,Pe)&&!k.hasOwnProperty(Pe)&&(xe[Pe]=Q[Pe]);var le=arguments.length-2;if(le===1)xe.children=ye;else if(1<le){for(var Te=Array(le),Je=0;Je<le;Je++)Te[Je]=arguments[Je+2];xe.children=Te}if(U&&U.defaultProps)for(Pe in le=U.defaultProps,le)xe[Pe]===void 0&&(xe[Pe]=le[Pe]);return{$$typeof:n,type:U,key:X,ref:oe,props:xe,_owner:Z.current}}function A(U,Q){return{$$typeof:n,type:U.type,key:Q,ref:U.ref,props:U.props,_owner:U._owner}}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ye){return Q[ye]})}var D=/\/+/g;function R(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):Q.toString(36)}function ge(U,Q,ye,Pe,xe){var X=typeof U;(X==="undefined"||X==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(X){case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case n:case e:oe=!0}}if(oe)return oe=U,xe=xe(oe),U=Pe===""?"."+R(oe,0):Pe,G(xe)?(ye="",U!=null&&(ye=U.replace(D,"$&/")+"/"),ge(xe,Q,ye,"",function(Je){return Je})):xe!=null&&(b(xe)&&(xe=A(xe,ye+(!xe.key||oe&&oe.key===xe.key?"":(""+xe.key).replace(D,"$&/")+"/")+U)),Q.push(xe)),1;if(oe=0,Pe=Pe===""?".":Pe+":",G(U))for(var le=0;le<U.length;le++){X=U[le];var Te=Pe+R(X,le);oe+=ge(X,Q,ye,Te,xe)}else if(Te=S(U),typeof Te=="function")for(U=Te.call(U),le=0;!(X=U.next()).done;)X=X.value,Te=Pe+R(X,le++),oe+=ge(X,Q,ye,Te,xe);else if(X==="object")throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return oe}function qe(U,Q,ye){if(U==null)return U;var Pe=[],xe=0;return ge(U,Pe,"","",function(X){return Q.call(ye,X,xe++)}),Pe}function Fe(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(ye){(U._status===0||U._status===-1)&&(U._status=1,U._result=ye)},function(ye){(U._status===0||U._status===-1)&&(U._status=2,U._result=ye)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var Ve={current:null},ae={transition:null},we={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Z};function he(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:qe,forEach:function(U,Q,ye){qe(U,function(){Q.apply(this,arguments)},ye)},count:function(U){var Q=0;return qe(U,function(){Q++}),Q},toArray:function(U){return qe(U,function(Q){return Q})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Le.Component=C,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=te,Le.StrictMode=i,Le.Suspense=f,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Le.act=he,Le.cloneElement=function(U,Q,ye){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Pe=x({},U.props),xe=U.key,X=U.ref,oe=U._owner;if(Q!=null){if(Q.ref!==void 0&&(X=Q.ref,oe=Z.current),Q.key!==void 0&&(xe=""+Q.key),U.type&&U.type.defaultProps)var le=U.type.defaultProps;for(Te in Q)K.call(Q,Te)&&!k.hasOwnProperty(Te)&&(Pe[Te]=Q[Te]===void 0&&le!==void 0?le[Te]:Q[Te])}var Te=arguments.length-2;if(Te===1)Pe.children=ye;else if(1<Te){le=Array(Te);for(var Je=0;Je<Te;Je++)le[Je]=arguments[Je+2];Pe.children=le}return{$$typeof:n,type:U.type,key:xe,ref:X,props:Pe,_owner:oe}},Le.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Le.createElement=I,Le.createFactory=function(U){var Q=I.bind(null,U);return Q.type=U,Q},Le.createRef=function(){return{current:null}},Le.forwardRef=function(U){return{$$typeof:d,render:U}},Le.isValidElement=b,Le.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:Fe}},Le.memo=function(U,Q){return{$$typeof:y,type:U,compare:Q===void 0?null:Q}},Le.startTransition=function(U){var Q=ae.transition;ae.transition={};try{U()}finally{ae.transition=Q}},Le.unstable_act=he,Le.useCallback=function(U,Q){return Ve.current.useCallback(U,Q)},Le.useContext=function(U){return Ve.current.useContext(U)},Le.useDebugValue=function(){},Le.useDeferredValue=function(U){return Ve.current.useDeferredValue(U)},Le.useEffect=function(U,Q){return Ve.current.useEffect(U,Q)},Le.useId=function(){return Ve.current.useId()},Le.useImperativeHandle=function(U,Q,ye){return Ve.current.useImperativeHandle(U,Q,ye)},Le.useInsertionEffect=function(U,Q){return Ve.current.useInsertionEffect(U,Q)},Le.useLayoutEffect=function(U,Q){return Ve.current.useLayoutEffect(U,Q)},Le.useMemo=function(U,Q){return Ve.current.useMemo(U,Q)},Le.useReducer=function(U,Q,ye){return Ve.current.useReducer(U,Q,ye)},Le.useRef=function(U){return Ve.current.useRef(U)},Le.useState=function(U){return Ve.current.useState(U)},Le.useSyncExternalStore=function(U,Q,ye){return Ve.current.useSyncExternalStore(U,Q,ye)},Le.useTransition=function(){return Ve.current.useTransition()},Le.version="18.3.1",Le}var Vy;function Ip(){return Vy||(Vy=1,df.exports=oI()),df.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function aI(){if(My)return el;My=1;var n=Ip(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,y){var _,E={},S=null,V=null;y!==void 0&&(S=""+y),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(V=f.ref);for(_ in f)i.call(f,_)&&!a.hasOwnProperty(_)&&(E[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)E[_]===void 0&&(E[_]=f[_]);return{$$typeof:e,type:d,key:S,ref:V,props:E,_owner:o.current}}return el.Fragment=t,el.jsx=u,el.jsxs=u,el}var Fy;function lI(){return Fy||(Fy=1,hf.exports=aI()),hf.exports}var N=lI(),W=Ip();const Wv=qv(W),uI=sI({__proto__:null,default:Wv},[W]);var pc={},ff={exports:{}},un={},pf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function cI(){return Uy||(Uy=1,(function(n){function e(ae,we){var he=ae.length;ae.push(we);e:for(;0<he;){var U=he-1>>>1,Q=ae[U];if(0<o(Q,we))ae[U]=we,ae[he]=Q,he=U;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var we=ae[0],he=ae.pop();if(he!==we){ae[0]=he;e:for(var U=0,Q=ae.length,ye=Q>>>1;U<ye;){var Pe=2*(U+1)-1,xe=ae[Pe],X=Pe+1,oe=ae[X];if(0>o(xe,he))X<Q&&0>o(oe,xe)?(ae[U]=oe,ae[X]=he,U=X):(ae[U]=xe,ae[Pe]=he,U=Pe);else if(X<Q&&0>o(oe,he))ae[U]=oe,ae[X]=he,U=X;else break e}}return we}function o(ae,we){var he=ae.sortIndex-we.sortIndex;return he!==0?he:ae.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],y=[],_=1,E=null,S=3,V=!1,x=!1,M=!1,C=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(ae){for(var we=t(y);we!==null;){if(we.callback===null)i(y);else if(we.startTime<=ae)i(y),we.sortIndex=we.expirationTime,e(f,we);else break;we=t(y)}}function G(ae){if(M=!1,ne(ae),!x)if(t(f)!==null)x=!0,Fe(K);else{var we=t(y);we!==null&&Ve(G,we.startTime-ae)}}function K(ae,we){x=!1,M&&(M=!1,Y(I),I=-1),V=!0;var he=S;try{for(ne(we),E=t(f);E!==null&&(!(E.expirationTime>we)||ae&&!O());){var U=E.callback;if(typeof U=="function"){E.callback=null,S=E.priorityLevel;var Q=U(E.expirationTime<=we);we=n.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(f)&&i(f),ne(we)}else i(f);E=t(f)}if(E!==null)var ye=!0;else{var Pe=t(y);Pe!==null&&Ve(G,Pe.startTime-we),ye=!1}return ye}finally{E=null,S=he,V=!1}}var Z=!1,k=null,I=-1,A=5,b=-1;function O(){return!(n.unstable_now()-b<A)}function D(){if(k!==null){var ae=n.unstable_now();b=ae;var we=!0;try{we=k(!0,ae)}finally{we?R():(Z=!1,k=null)}}else Z=!1}var R;if(typeof te=="function")R=function(){te(D)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,qe=ge.port2;ge.port1.onmessage=D,R=function(){qe.postMessage(null)}}else R=function(){C(D,0)};function Fe(ae){k=ae,Z||(Z=!0,R())}function Ve(ae,we){I=C(function(){ae(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){x||V||(x=!0,Fe(K))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var we=3;break;default:we=S}var he=S;S=we;try{return ae()}finally{S=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,we){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=S;S=ae;try{return we()}finally{S=he}},n.unstable_scheduleCallback=function(ae,we,he){var U=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?U+he:U):he=U,ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=he+Q,ae={id:_++,callback:we,priorityLevel:ae,startTime:he,expirationTime:Q,sortIndex:-1},he>U?(ae.sortIndex=he,e(y,ae),t(f)===null&&ae===t(y)&&(M?(Y(I),I=-1):M=!0,Ve(G,he-U))):(ae.sortIndex=Q,e(f,ae),x||V||(x=!0,Fe(K))),ae},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ae){var we=S;return function(){var he=S;S=we;try{return ae.apply(this,arguments)}finally{S=he}}}})(mf)),mf}var jy;function hI(){return jy||(jy=1,pf.exports=cI()),pf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function dI(){if(By)return un;By=1;var n=Ip(),e=hI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function S(r){return f.call(E,r)?!0:f.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function V(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,l,h){if(s===null||typeof s>"u"||V(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function M(r,s,l,h,p,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){C[r]=new M(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];C[s]=new M(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){C[r]=new M(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){C[r]=new M(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){C[r]=new M(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){C[r]=new M(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){C[r]=new M(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){C[r]=new M(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){C[r]=new M(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function te(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Y,te);C[s]=new M(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Y,te);C[s]=new M(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Y,te);C[s]=new M(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){C[r]=new M(r,1,!1,r.toLowerCase(),null,!1,!1)}),C.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){C[r]=new M(r,1,!1,r.toLowerCase(),null,!0,!0)});function ne(r,s,l,h){var p=C.hasOwnProperty(s)?C[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,p,h)&&(l=null),h||p===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),Z=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),O=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),ae=Symbol.iterator;function we(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var he=Object.assign,U;function Q(r){if(U===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);U=s&&s[1]||""}return`
`+U+r}var ye=!1;function Pe(r,s){if(!r||ye)return"";ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),g=h.stack.split(`
`),w=p.length-1,P=g.length-1;1<=w&&0<=P&&p[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(p[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||p[w]!==g[P]){var L=`
`+p[w].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=w&&0<=P);break}}}finally{ye=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?Q(r):""}function xe(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function X(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case Z:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case D:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case qe:return s=r.displayName||null,s!==null?s:X(r.type)||"Memo";case Fe:s=r._payload,r=r._init;try{return X(r(s))}catch{}}return null}function oe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function le(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Te(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Je(r){var s=Te(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function nt(r){r._valueTracker||(r._valueTracker=Je(r))}function ht(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Te(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function xt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pn(r,s){var l=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ir(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=le(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Sr(r,s){s=s.checked,s!=null&&ne(r,"checked",s,!1)}function Sn(r,s){Sr(r,s);var l=le(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Us(r,s.type,l):s.hasOwnProperty("defaultValue")&&Us(r,s.type,le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Gi(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Us(r,s,l){(s!=="number"||xt(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Rr=Array.isArray;function Ar(r,s,l,h){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+le(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function la(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function js(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:le(l)}}function Bs(r,s){var l=le(s.value),h=le(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function ua(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function wt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?wt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Cr,ca=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,p)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Cr=Cr||document.createElement("div"),Cr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Cr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ii(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ji=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(r){Ji.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Qi[s]=Qi[r]})});function ha(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Qi.hasOwnProperty(r)&&Qi[r]?(""+s).trim():s+"px"}function da(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=ha(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var fa=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pa(r,s){if(s){if(fa[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ma(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yi=null;function zs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var $s=null,Rn=null,tr=null;function qs(r){if(r=Ua(r)){if(typeof $s!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Pu(s),$s(r.stateNode,r.type,s))}}function nr(r){Rn?tr?tr.push(r):tr=[r]:Rn=r}function ga(){if(Rn){var r=Rn,s=tr;if(tr=Rn=null,qs(r),s)for(r=0;r<s.length;r++)qs(s[r])}}function Xi(r,s){return r(s)}function ya(){}var kr=!1;function _a(r,s,l){if(kr)return r(s,l);kr=!0;try{return Xi(r,s,l)}finally{kr=!1,(Rn!==null||tr!==null)&&(ya(),ga())}}function dt(r,s){var l=r.stateNode;if(l===null)return null;var h=Pu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ws=!1;if(d)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Ws=!1}function Zi(r,s,l,h,p,g,w,P,L){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(re){this.onError(re)}}var es=!1,Hs=null,Mn=!1,va=null,Fh={onError:function(r){es=!0,Hs=r}};function Ks(r,s,l,h,p,g,w,P,L){es=!1,Hs=null,Zi.apply(Fh,arguments)}function eu(r,s,l,h,p,g,w,P,L){if(Ks.apply(this,arguments),es){if(es){var $=Hs;es=!1,Hs=null}else throw Error(t(198));Mn||(Mn=!0,va=$)}}function Fn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ts(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Un(r){if(Fn(r)!==r)throw Error(t(188))}function tu(r){var s=r.alternate;if(!s){if(s=Fn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return Un(p),r;if(g===h)return Un(p),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=g;else{for(var w=!1,P=p.child;P;){if(P===l){w=!0,l=p,h=g;break}if(P===h){w=!0,h=p,l=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===l){w=!0,l=g,h=p;break}if(P===h){w=!0,h=g,l=p;break}P=P.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function wa(r){return r=tu(r),r!==null?Gs(r):null}function Gs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Gs(r);if(s!==null)return s;r=r.sibling}return null}var Qs=e.unstable_scheduleCallback,Ea=e.unstable_cancelCallback,nu=e.unstable_shouldYield,Uh=e.unstable_requestPaint,Ye=e.unstable_now,ru=e.unstable_getCurrentPriorityLevel,ns=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,Ta=e.unstable_LowPriority,iu=e.unstable_IdlePriority,rs=null,mn=null;function su(r){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(rs,r,void 0,(r.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:au,Ia=Math.log,ou=Math.LN2;function au(r){return r>>>=0,r===0?32:31-(Ia(r)/ou|0)|0}var Js=64,Ys=4194304;function oi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function is(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,g=r.pingedLanes,w=l&268435455;if(w!==0){var P=w&~p;P!==0?h=oi(P):(g&=w,g!==0&&(h=oi(g)))}else w=l&~p,w!==0?h=oi(w):g!==0&&(h=oi(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&p)===0&&(p=h&-h,g=s&-s,p>=g||p===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Yt(s),p=1<<l,h|=r[l],s&=~p;return h}function jh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Yt(g),P=1<<w,L=p[w];L===-1?((P&l)===0||(P&h)!==0)&&(p[w]=jh(P,s)):L<=s&&(r.expiredLanes|=P),g&=~P}}function gn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ss(){var r=Js;return Js<<=1,(Js&4194240)===0&&(Js=64),r}function ai(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function li(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Yt(s),r[s]=l}function Qe(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-Yt(l),g=1<<p;s[p]=0,h[p]=-1,r[p]=-1,l&=~g}}function ui(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Yt(l),p=1<<h;p&s|r[h]&s&&(r[h]|=s),l&=~p}}var Ue=0;function ci(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var lu,Xs,uu,cu,hu,Sa=!1,rr=[],bt=null,jn=null,Bn=null,hi=new Map,Cn=new Map,ir=[],Bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function du(r,s){switch(r){case"focusin":case"focusout":bt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(s.pointerId)}}function tn(r,s,l,h,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},s!==null&&(s=Ua(s),s!==null&&Xs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function zh(r,s,l,h,p){switch(s){case"focusin":return bt=tn(bt,r,s,l,h,p),!0;case"dragenter":return jn=tn(jn,r,s,l,h,p),!0;case"mouseover":return Bn=tn(Bn,r,s,l,h,p),!0;case"pointerover":var g=p.pointerId;return hi.set(g,tn(hi.get(g)||null,r,s,l,h,p)),!0;case"gotpointercapture":return g=p.pointerId,Cn.set(g,tn(Cn.get(g)||null,r,s,l,h,p)),!0}return!1}function fu(r){var s=cs(r.target);if(s!==null){var l=Fn(s);if(l!==null){if(s=l.tag,s===13){if(s=ts(l),s!==null){r.blockedOn=s,hu(r.priority,function(){uu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Zs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Yi=h,l.target.dispatchEvent(h),Yi=null}else return s=Ua(l),s!==null&&Xs(s),r.blockedOn=l,!1;s.shift()}return!0}function os(r,s,l){Nr(r)&&l.delete(s)}function pu(){Sa=!1,bt!==null&&Nr(bt)&&(bt=null),jn!==null&&Nr(jn)&&(jn=null),Bn!==null&&Nr(Bn)&&(Bn=null),hi.forEach(os),Cn.forEach(os)}function zn(r,s){r.blockedOn===s&&(r.blockedOn=null,Sa||(Sa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pu)))}function $n(r){function s(p){return zn(p,r)}if(0<rr.length){zn(rr[0],r);for(var l=1;l<rr.length;l++){var h=rr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(bt!==null&&zn(bt,r),jn!==null&&zn(jn,r),Bn!==null&&zn(Bn,r),hi.forEach(s),Cn.forEach(s),l=0;l<ir.length;l++)h=ir[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<ir.length&&(l=ir[0],l.blockedOn===null);)fu(l),l.blockedOn===null&&ir.shift()}var xr=G.ReactCurrentBatchConfig,di=!0;function rt(r,s,l,h){var p=Ue,g=xr.transition;xr.transition=null;try{Ue=1,Ra(r,s,l,h)}finally{Ue=p,xr.transition=g}}function $h(r,s,l,h){var p=Ue,g=xr.transition;xr.transition=null;try{Ue=4,Ra(r,s,l,h)}finally{Ue=p,xr.transition=g}}function Ra(r,s,l,h){if(di){var p=Zs(r,s,l,h);if(p===null)ed(r,s,h,as,l),du(r,h);else if(zh(p,r,s,l,h))h.stopPropagation();else if(du(r,h),s&4&&-1<Bh.indexOf(r)){for(;p!==null;){var g=Ua(p);if(g!==null&&lu(g),g=Zs(r,s,l,h),g===null&&ed(r,s,h,as,l),g===p)break;p=g}p!==null&&h.stopPropagation()}else ed(r,s,h,null,l)}}var as=null;function Zs(r,s,l,h){if(as=null,r=zs(h),r=cs(r),r!==null)if(s=Fn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=ts(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return as=r,null}function Aa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ru()){case ns:return 1;case si:return 4;case An:case Ta:return 16;case iu:return 536870912;default:return 16}default:return 16}}var yn=null,eo=null,nn=null;function Ca(){if(nn)return nn;var r,s=eo,l=s.length,h,p="value"in yn?yn.value:yn.textContent,g=p.length;for(r=0;r<l&&s[r]===p[r];r++);var w=l-r;for(h=1;h<=w&&s[l-h]===p[g-h];h++);return nn=p.slice(r,1<h?1-h:void 0)}function to(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function sr(){return!0}function ka(){return!1}function Ot(r){function s(l,h,p,g,w){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(l=r[P],this[P]=l?l(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?sr:ka,this.isPropagationStopped=ka,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),s}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Ot(qn),or=he({},qn,{view:0,detail:0}),qh=Ot(or),ro,br,fi,ls=he({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fi&&(fi&&r.type==="mousemove"?(ro=r.screenX-fi.screenX,br=r.screenY-fi.screenY):br=ro=0,fi=r),ro)},movementY:function(r){return"movementY"in r?r.movementY:br}}),io=Ot(ls),Pa=he({},ls,{dataTransfer:0}),mu=Ot(Pa),so=he({},or,{relatedTarget:0}),oo=Ot(so),gu=he({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Or=Ot(gu),yu=he({},qn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_u=Ot(yu),vu=he({},qn,{data:0}),Na=Ot(vu),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=wu[r])?!!s[r]:!1}function ar(){return Eu}var c=he({},or,{key:function(r){if(r.key){var s=ao[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=to(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Xt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(r){return r.type==="keypress"?to(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?to(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Ot(c),v=he({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ot(v),j=he({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),H=Ot(j),ce=he({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Ot(ce),Tt=he({},ls,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Ot(Tt),At=[9,13,27,32],mt=d&&"CompositionEvent"in window,kn=null;d&&"documentMode"in document&&(kn=document.documentMode);var _n=d&&"TextEvent"in window&&!kn,us=d&&(!mt||kn&&8<kn&&11>=kn),lo=" ",Pm=!1;function Nm(r,s){switch(r){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var uo=!1;function nT(r,s){switch(r){case"compositionend":return xm(s);case"keypress":return s.which!==32?null:(Pm=!0,lo);case"textInput":return r=s.data,r===lo&&Pm?null:r;default:return null}}function rT(r,s){if(uo)return r==="compositionend"||!mt&&Nm(r,s)?(r=Ca(),nn=eo=yn=null,uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return us&&s.locale!=="ko"?null:s.data;default:return null}}var iT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!iT[r.type]:s==="textarea"}function Om(r,s,l,h){nr(h),s=Au(s,"onChange"),0<s.length&&(l=new no("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var xa=null,ba=null;function sT(r){Ym(r,0)}function Tu(r){var s=mo(r);if(ht(s))return r}function oT(r,s){if(r==="change")return s}var Dm=!1;if(d){var Wh;if(d){var Hh="oninput"in document;if(!Hh){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Hh=typeof Lm.oninput=="function"}Wh=Hh}else Wh=!1;Dm=Wh&&(!document.documentMode||9<document.documentMode)}function Vm(){xa&&(xa.detachEvent("onpropertychange",Mm),ba=xa=null)}function Mm(r){if(r.propertyName==="value"&&Tu(ba)){var s=[];Om(s,ba,r,zs(r)),_a(sT,s)}}function aT(r,s,l){r==="focusin"?(Vm(),xa=s,ba=l,xa.attachEvent("onpropertychange",Mm)):r==="focusout"&&Vm()}function lT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Tu(ba)}function uT(r,s){if(r==="click")return Tu(s)}function cT(r,s){if(r==="input"||r==="change")return Tu(s)}function hT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Wn=typeof Object.is=="function"?Object.is:hT;function Oa(r,s){if(Wn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!Wn(r[p],s[p]))return!1}return!0}function Fm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Um(r,s){var l=Fm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fm(l)}}function jm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?jm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Bm(){for(var r=window,s=xt();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=xt(r.document)}return s}function Kh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function dT(r){var s=Bm(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&jm(l.ownerDocument.documentElement,l)){if(h!==null&&Kh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,g=Math.min(h.start,p);h=h.end===void 0?g:Math.min(h.end,p),!r.extend&&g>h&&(p=h,h=g,g=p),p=Um(l,g);var w=Um(l,h);p&&w&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fT=d&&"documentMode"in document&&11>=document.documentMode,co=null,Gh=null,Da=null,Qh=!1;function zm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Qh||co==null||co!==xt(h)||(h=co,"selectionStart"in h&&Kh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Da&&Oa(Da,h)||(Da=h,h=Au(Gh,"onSelect"),0<h.length&&(s=new no("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=co)))}function Iu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ho={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},Jh={},$m={};d&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Su(r){if(Jh[r])return Jh[r];if(!ho[r])return r;var s=ho[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in $m)return Jh[r]=s[l];return r}var qm=Su("animationend"),Wm=Su("animationiteration"),Hm=Su("animationstart"),Km=Su("transitionend"),Gm=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(r,s){Gm.set(r,s),a(s,[r])}for(var Yh=0;Yh<Qm.length;Yh++){var Xh=Qm[Yh],pT=Xh.toLowerCase(),mT=Xh[0].toUpperCase()+Xh.slice(1);pi(pT,"on"+mT)}pi(qm,"onAnimationEnd"),pi(Wm,"onAnimationIteration"),pi(Hm,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Km,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Jm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,eu(h,s,void 0,r),r.currentTarget=null}function Ym(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var P=h[w],L=P.instance,$=P.currentTarget;if(P=P.listener,L!==g&&p.isPropagationStopped())break e;Jm(p,P,$),g=L}else for(w=0;w<h.length;w++){if(P=h[w],L=P.instance,$=P.currentTarget,P=P.listener,L!==g&&p.isPropagationStopped())break e;Jm(p,P,$),g=L}}}if(Mn)throw r=va,Mn=!1,va=null,r}function Ze(r,s){var l=s[od];l===void 0&&(l=s[od]=new Set);var h=r+"__bubble";l.has(h)||(Xm(s,r,2,!1),l.add(h))}function Zh(r,s,l){var h=0;s&&(h|=4),Xm(l,r,h,s)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function Va(r){if(!r[Ru]){r[Ru]=!0,i.forEach(function(l){l!=="selectionchange"&&(gT.has(l)||Zh(l,!1,r),Zh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ru]||(s[Ru]=!0,Zh("selectionchange",!1,s))}}function Xm(r,s,l,h){switch(Aa(s)){case 1:var p=rt;break;case 4:p=$h;break;default:p=Ra}l=p.bind(null,s,l,r),p=void 0,!Ws||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function ed(r,s,l,h,p){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var L=w.tag;if((L===3||L===4)&&(L=w.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;w=w.return}for(;P!==null;){if(w=cs(P),w===null)return;if(L=w.tag,L===5||L===6){h=g=w;continue e}P=P.parentNode}}h=h.return}_a(function(){var $=g,re=zs(l),se=[];e:{var ee=Gm.get(r);if(ee!==void 0){var fe=no,me=r;switch(r){case"keypress":if(to(l)===0)break e;case"keydown":case"keyup":fe=m;break;case"focusin":me="focus",fe=oo;break;case"focusout":me="blur",fe=oo;break;case"beforeblur":case"afterblur":fe=oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=H;break;case qm:case Wm:case Hm:fe=Or;break;case Km:fe=Ke;break;case"scroll":fe=qh;break;case"wheel":fe=Be;break;case"copy":case"cut":case"paste":fe=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var _e=(s&4)!==0,ft=!_e&&r==="scroll",B=_e?ee!==null?ee+"Capture":null:ee;_e=[];for(var F=$,z;F!==null;){z=F;var ue=z.stateNode;if(z.tag===5&&ue!==null&&(z=ue,B!==null&&(ue=dt(F,B),ue!=null&&_e.push(Ma(F,ue,z)))),ft)break;F=F.return}0<_e.length&&(ee=new fe(ee,me,null,l,re),se.push({event:ee,listeners:_e}))}}if((s&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",fe=r==="mouseout"||r==="pointerout",ee&&l!==Yi&&(me=l.relatedTarget||l.fromElement)&&(cs(me)||me[Dr]))break e;if((fe||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,fe?(me=l.relatedTarget||l.toElement,fe=$,me=me?cs(me):null,me!==null&&(ft=Fn(me),me!==ft||me.tag!==5&&me.tag!==6)&&(me=null)):(fe=null,me=$),fe!==me)){if(_e=io,ue="onMouseLeave",B="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(_e=T,ue="onPointerLeave",B="onPointerEnter",F="pointer"),ft=fe==null?ee:mo(fe),z=me==null?ee:mo(me),ee=new _e(ue,F+"leave",fe,l,re),ee.target=ft,ee.relatedTarget=z,ue=null,cs(re)===$&&(_e=new _e(B,F+"enter",me,l,re),_e.target=z,_e.relatedTarget=ft,ue=_e),ft=ue,fe&&me)t:{for(_e=fe,B=me,F=0,z=_e;z;z=fo(z))F++;for(z=0,ue=B;ue;ue=fo(ue))z++;for(;0<F-z;)_e=fo(_e),F--;for(;0<z-F;)B=fo(B),z--;for(;F--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=fo(_e),B=fo(B)}_e=null}else _e=null;fe!==null&&Zm(se,ee,fe,_e,!1),me!==null&&ft!==null&&Zm(se,ft,me,_e,!0)}}e:{if(ee=$?mo($):window,fe=ee.nodeName&&ee.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ee.type==="file")var Ee=oT;else if(bm(ee))if(Dm)Ee=cT;else{Ee=lT;var Se=aT}else(fe=ee.nodeName)&&fe.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(Ee=uT);if(Ee&&(Ee=Ee(r,$))){Om(se,Ee,l,re);break e}Se&&Se(r,ee,$),r==="focusout"&&(Se=ee._wrapperState)&&Se.controlled&&ee.type==="number"&&Us(ee,"number",ee.value)}switch(Se=$?mo($):window,r){case"focusin":(bm(Se)||Se.contentEditable==="true")&&(co=Se,Gh=$,Da=null);break;case"focusout":Da=Gh=co=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,zm(se,l,re);break;case"selectionchange":if(fT)break;case"keydown":case"keyup":zm(se,l,re)}var Re;if(mt)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else uo?Nm(r,l)&&(ke="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(us&&l.locale!=="ko"&&(uo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&uo&&(Re=Ca()):(yn=re,eo="value"in yn?yn.value:yn.textContent,uo=!0)),Se=Au($,ke),0<Se.length&&(ke=new Na(ke,r,null,l,re),se.push({event:ke,listeners:Se}),Re?ke.data=Re:(Re=xm(l),Re!==null&&(ke.data=Re)))),(Re=_n?nT(r,l):rT(r,l))&&($=Au($,"onBeforeInput"),0<$.length&&(re=new Na("onBeforeInput","beforeinput",null,l,re),se.push({event:re,listeners:$}),re.data=Re))}Ym(se,s)})}function Ma(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Au(r,s){for(var l=s+"Capture",h=[];r!==null;){var p=r,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=dt(r,l),g!=null&&h.unshift(Ma(r,g,p)),g=dt(r,s),g!=null&&h.push(Ma(r,g,p))),r=r.return}return h}function fo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Zm(r,s,l,h,p){for(var g=s._reactName,w=[];l!==null&&l!==h;){var P=l,L=P.alternate,$=P.stateNode;if(L!==null&&L===h)break;P.tag===5&&$!==null&&(P=$,p?(L=dt(l,g),L!=null&&w.unshift(Ma(l,L,P))):p||(L=dt(l,g),L!=null&&w.push(Ma(l,L,P)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var yT=/\r\n?/g,_T=/\u0000|\uFFFD/g;function eg(r){return(typeof r=="string"?r:""+r).replace(yT,`
`).replace(_T,"")}function Cu(r,s,l){if(s=eg(s),eg(r)!==s&&l)throw Error(t(425))}function ku(){}var td=null,nd=null;function rd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,vT=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,wT=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(r){return tg.resolve(null).then(r).catch(ET)}:id;function ET(r){setTimeout(function(){throw r})}function sd(r,s){var l=s,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),$n(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);$n(s)}function mi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function ng(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var po=Math.random().toString(36).slice(2),lr="__reactFiber$"+po,Fa="__reactProps$"+po,Dr="__reactContainer$"+po,od="__reactEvents$"+po,TT="__reactListeners$"+po,IT="__reactHandles$"+po;function cs(r){var s=r[lr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Dr]||l[lr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=ng(r);r!==null;){if(l=r[lr])return l;r=ng(r)}return s}r=l,l=r.parentNode}return null}function Ua(r){return r=r[lr]||r[Dr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function mo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Pu(r){return r[Fa]||null}var ad=[],go=-1;function gi(r){return{current:r}}function et(r){0>go||(r.current=ad[go],ad[go]=null,go--)}function Xe(r,s){go++,ad[go]=r.current,r.current=s}var yi={},Bt=gi(yi),rn=gi(!1),hs=yi;function yo(r,s){var l=r.type.contextTypes;if(!l)return yi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in l)p[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function sn(r){return r=r.childContextTypes,r!=null}function Nu(){et(rn),et(Bt)}function rg(r,s,l){if(Bt.current!==yi)throw Error(t(168));Xe(Bt,s),Xe(rn,l)}function ig(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,oe(r)||"Unknown",p));return he({},l,h)}function xu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||yi,hs=Bt.current,Xe(Bt,r),Xe(rn,rn.current),!0}function sg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=ig(r,s,hs),h.__reactInternalMemoizedMergedChildContext=r,et(rn),et(Bt),Xe(Bt,r)):et(rn),Xe(rn,l)}var Lr=null,bu=!1,ld=!1;function og(r){Lr===null?Lr=[r]:Lr.push(r)}function ST(r){bu=!0,og(r)}function _i(){if(!ld&&Lr!==null){ld=!0;var r=0,s=Ue;try{var l=Lr;for(Ue=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Lr=null,bu=!1}catch(p){throw Lr!==null&&(Lr=Lr.slice(r+1)),Qs(ns,_i),p}finally{Ue=s,ld=!1}}return null}var _o=[],vo=0,Ou=null,Du=0,Pn=[],Nn=0,ds=null,Vr=1,Mr="";function fs(r,s){_o[vo++]=Du,_o[vo++]=Ou,Ou=r,Du=s}function ag(r,s,l){Pn[Nn++]=Vr,Pn[Nn++]=Mr,Pn[Nn++]=ds,ds=r;var h=Vr;r=Mr;var p=32-Yt(h)-1;h&=~(1<<p),l+=1;var g=32-Yt(s)+p;if(30<g){var w=p-p%5;g=(h&(1<<w)-1).toString(32),h>>=w,p-=w,Vr=1<<32-Yt(s)+p|l<<p|h,Mr=g+r}else Vr=1<<g|l<<p|h,Mr=r}function ud(r){r.return!==null&&(fs(r,1),ag(r,1,0))}function cd(r){for(;r===Ou;)Ou=_o[--vo],_o[vo]=null,Du=_o[--vo],_o[vo]=null;for(;r===ds;)ds=Pn[--Nn],Pn[Nn]=null,Mr=Pn[--Nn],Pn[Nn]=null,Vr=Pn[--Nn],Pn[Nn]=null}var vn=null,wn=null,it=!1,Hn=null;function lg(r,s){var l=Dn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function ug(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,vn=r,wn=mi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,vn=r,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ds!==null?{id:Vr,overflow:Mr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Dn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,vn=r,wn=null,!0):!1;default:return!1}}function hd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function dd(r){if(it){var s=wn;if(s){var l=s;if(!ug(r,s)){if(hd(r))throw Error(t(418));s=mi(l.nextSibling);var h=vn;s&&ug(r,s)?lg(h,l):(r.flags=r.flags&-4097|2,it=!1,vn=r)}}else{if(hd(r))throw Error(t(418));r.flags=r.flags&-4097|2,it=!1,vn=r}}}function cg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;vn=r}function Lu(r){if(r!==vn)return!1;if(!it)return cg(r),it=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!rd(r.type,r.memoizedProps)),s&&(s=wn)){if(hd(r))throw hg(),Error(t(418));for(;s;)lg(r,s),s=mi(s.nextSibling)}if(cg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){wn=mi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}wn=null}}else wn=vn?mi(r.stateNode.nextSibling):null;return!0}function hg(){for(var r=wn;r;)r=mi(r.nextSibling)}function wo(){wn=vn=null,it=!1}function fd(r){Hn===null?Hn=[r]:Hn.push(r)}var RT=G.ReactCurrentBatchConfig;function ja(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=p.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Vu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function dg(r){var s=r._init;return s(r._payload)}function fg(r){function s(B,F){if(r){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function l(B,F){if(!r)return null;for(;F!==null;)s(B,F),F=F.sibling;return null}function h(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function p(B,F){return B=Ai(B,F),B.index=0,B.sibling=null,B}function g(B,F,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=2,F):z):(B.flags|=2,F)):(B.flags|=1048576,F)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function P(B,F,z,ue){return F===null||F.tag!==6?(F=sf(z,B.mode,ue),F.return=B,F):(F=p(F,z),F.return=B,F)}function L(B,F,z,ue){var Ee=z.type;return Ee===k?re(B,F,z.props.children,ue,z.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Fe&&dg(Ee)===F.type)?(ue=p(F,z.props),ue.ref=ja(B,F,z),ue.return=B,ue):(ue=oc(z.type,z.key,z.props,null,B.mode,ue),ue.ref=ja(B,F,z),ue.return=B,ue)}function $(B,F,z,ue){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=of(z,B.mode,ue),F.return=B,F):(F=p(F,z.children||[]),F.return=B,F)}function re(B,F,z,ue,Ee){return F===null||F.tag!==7?(F=Es(z,B.mode,ue,Ee),F.return=B,F):(F=p(F,z),F.return=B,F)}function se(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=sf(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case K:return z=oc(F.type,F.key,F.props,null,B.mode,z),z.ref=ja(B,null,F),z.return=B,z;case Z:return F=of(F,B.mode,z),F.return=B,F;case Fe:var ue=F._init;return se(B,ue(F._payload),z)}if(Rr(F)||we(F))return F=Es(F,B.mode,z,null),F.return=B,F;Vu(B,F)}return null}function ee(B,F,z,ue){var Ee=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ee!==null?null:P(B,F,""+z,ue);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case K:return z.key===Ee?L(B,F,z,ue):null;case Z:return z.key===Ee?$(B,F,z,ue):null;case Fe:return Ee=z._init,ee(B,F,Ee(z._payload),ue)}if(Rr(z)||we(z))return Ee!==null?null:re(B,F,z,ue,null);Vu(B,z)}return null}function fe(B,F,z,ue,Ee){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return B=B.get(z)||null,P(F,B,""+ue,Ee);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case K:return B=B.get(ue.key===null?z:ue.key)||null,L(F,B,ue,Ee);case Z:return B=B.get(ue.key===null?z:ue.key)||null,$(F,B,ue,Ee);case Fe:var Se=ue._init;return fe(B,F,z,Se(ue._payload),Ee)}if(Rr(ue)||we(ue))return B=B.get(z)||null,re(F,B,ue,Ee,null);Vu(F,ue)}return null}function me(B,F,z,ue){for(var Ee=null,Se=null,Re=F,ke=F=0,Pt=null;Re!==null&&ke<z.length;ke++){Re.index>ke?(Pt=Re,Re=null):Pt=Re.sibling;var We=ee(B,Re,z[ke],ue);if(We===null){Re===null&&(Re=Pt);break}r&&Re&&We.alternate===null&&s(B,Re),F=g(We,F,ke),Se===null?Ee=We:Se.sibling=We,Se=We,Re=Pt}if(ke===z.length)return l(B,Re),it&&fs(B,ke),Ee;if(Re===null){for(;ke<z.length;ke++)Re=se(B,z[ke],ue),Re!==null&&(F=g(Re,F,ke),Se===null?Ee=Re:Se.sibling=Re,Se=Re);return it&&fs(B,ke),Ee}for(Re=h(B,Re);ke<z.length;ke++)Pt=fe(Re,B,ke,z[ke],ue),Pt!==null&&(r&&Pt.alternate!==null&&Re.delete(Pt.key===null?ke:Pt.key),F=g(Pt,F,ke),Se===null?Ee=Pt:Se.sibling=Pt,Se=Pt);return r&&Re.forEach(function(Ci){return s(B,Ci)}),it&&fs(B,ke),Ee}function _e(B,F,z,ue){var Ee=we(z);if(typeof Ee!="function")throw Error(t(150));if(z=Ee.call(z),z==null)throw Error(t(151));for(var Se=Ee=null,Re=F,ke=F=0,Pt=null,We=z.next();Re!==null&&!We.done;ke++,We=z.next()){Re.index>ke?(Pt=Re,Re=null):Pt=Re.sibling;var Ci=ee(B,Re,We.value,ue);if(Ci===null){Re===null&&(Re=Pt);break}r&&Re&&Ci.alternate===null&&s(B,Re),F=g(Ci,F,ke),Se===null?Ee=Ci:Se.sibling=Ci,Se=Ci,Re=Pt}if(We.done)return l(B,Re),it&&fs(B,ke),Ee;if(Re===null){for(;!We.done;ke++,We=z.next())We=se(B,We.value,ue),We!==null&&(F=g(We,F,ke),Se===null?Ee=We:Se.sibling=We,Se=We);return it&&fs(B,ke),Ee}for(Re=h(B,Re);!We.done;ke++,We=z.next())We=fe(Re,B,ke,We.value,ue),We!==null&&(r&&We.alternate!==null&&Re.delete(We.key===null?ke:We.key),F=g(We,F,ke),Se===null?Ee=We:Se.sibling=We,Se=We);return r&&Re.forEach(function(iI){return s(B,iI)}),it&&fs(B,ke),Ee}function ft(B,F,z,ue){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case K:e:{for(var Ee=z.key,Se=F;Se!==null;){if(Se.key===Ee){if(Ee=z.type,Ee===k){if(Se.tag===7){l(B,Se.sibling),F=p(Se,z.props.children),F.return=B,B=F;break e}}else if(Se.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Fe&&dg(Ee)===Se.type){l(B,Se.sibling),F=p(Se,z.props),F.ref=ja(B,Se,z),F.return=B,B=F;break e}l(B,Se);break}else s(B,Se);Se=Se.sibling}z.type===k?(F=Es(z.props.children,B.mode,ue,z.key),F.return=B,B=F):(ue=oc(z.type,z.key,z.props,null,B.mode,ue),ue.ref=ja(B,F,z),ue.return=B,B=ue)}return w(B);case Z:e:{for(Se=z.key;F!==null;){if(F.key===Se)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(B,F.sibling),F=p(F,z.children||[]),F.return=B,B=F;break e}else{l(B,F);break}else s(B,F);F=F.sibling}F=of(z,B.mode,ue),F.return=B,B=F}return w(B);case Fe:return Se=z._init,ft(B,F,Se(z._payload),ue)}if(Rr(z))return me(B,F,z,ue);if(we(z))return _e(B,F,z,ue);Vu(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(l(B,F.sibling),F=p(F,z),F.return=B,B=F):(l(B,F),F=sf(z,B.mode,ue),F.return=B,B=F),w(B)):l(B,F)}return ft}var Eo=fg(!0),pg=fg(!1),Mu=gi(null),Fu=null,To=null,pd=null;function md(){pd=To=Fu=null}function gd(r){var s=Mu.current;et(Mu),r._currentValue=s}function yd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Io(r,s){Fu=r,pd=To=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(on=!0),r.firstContext=null)}function xn(r){var s=r._currentValue;if(pd!==r)if(r={context:r,memoizedValue:s,next:null},To===null){if(Fu===null)throw Error(t(308));To=r,Fu.dependencies={lanes:0,firstContext:r}}else To=To.next=r;return s}var ps=null;function _d(r){ps===null?ps=[r]:ps.push(r)}function mg(r,s,l,h){var p=s.interleaved;return p===null?(l.next=l,_d(s)):(l.next=p.next,p.next=l),s.interleaved=l,Fr(r,h)}function Fr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var vi=!1;function vd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ur(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function wi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,($e&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,Fr(r,l)}return p=h.interleaved,p===null?(s.next=s,_d(h)):(s.next=p.next,p.next=s),h.interleaved=s,Fr(r,l)}function Uu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ui(r,l)}}function yg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?p=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?p=g=s:g=g.next=s}else p=g=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function ju(r,s,l,h){var p=r.updateQueue;vi=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var L=P,$=L.next;L.next=null,w===null?g=$:w.next=$,w=L;var re=r.alternate;re!==null&&(re=re.updateQueue,P=re.lastBaseUpdate,P!==w&&(P===null?re.firstBaseUpdate=$:P.next=$,re.lastBaseUpdate=L))}if(g!==null){var se=p.baseState;w=0,re=$=L=null,P=g;do{var ee=P.lane,fe=P.eventTime;if((h&ee)===ee){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var me=r,_e=P;switch(ee=s,fe=l,_e.tag){case 1:if(me=_e.payload,typeof me=="function"){se=me.call(fe,se,ee);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=_e.payload,ee=typeof me=="function"?me.call(fe,se,ee):me,ee==null)break e;se=he({},se,ee);break e;case 2:vi=!0}}P.callback!==null&&P.lane!==0&&(r.flags|=64,ee=p.effects,ee===null?p.effects=[P]:ee.push(P))}else fe={eventTime:fe,lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},re===null?($=re=fe,L=se):re=re.next=fe,w|=ee;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;ee=P,P=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);if(re===null&&(L=se),p.baseState=L,p.firstBaseUpdate=$,p.lastBaseUpdate=re,s=p.shared.interleaved,s!==null){p=s;do w|=p.lane,p=p.next;while(p!==s)}else g===null&&(p.shared.lanes=0);ys|=w,r.lanes=w,r.memoizedState=se}}function _g(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ba={},ur=gi(Ba),za=gi(Ba),$a=gi(Ba);function ms(r){if(r===Ba)throw Error(t(174));return r}function wd(r,s){switch(Xe($a,s),Xe(za,r),Xe(ur,Ba),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Et(s,r)}et(ur),Xe(ur,s)}function So(){et(ur),et(za),et($a)}function vg(r){ms($a.current);var s=ms(ur.current),l=Et(s,r.type);s!==l&&(Xe(za,r),Xe(ur,l))}function Ed(r){za.current===r&&(et(ur),et(za))}var st=gi(0);function Bu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Td=[];function Id(){for(var r=0;r<Td.length;r++)Td[r]._workInProgressVersionPrimary=null;Td.length=0}var zu=G.ReactCurrentDispatcher,Sd=G.ReactCurrentBatchConfig,gs=0,ot=null,It=null,Ct=null,$u=!1,qa=!1,Wa=0,AT=0;function zt(){throw Error(t(321))}function Rd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Wn(r[l],s[l]))return!1;return!0}function Ad(r,s,l,h,p,g){if(gs=g,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,zu.current=r===null||r.memoizedState===null?NT:xT,r=l(h,p),qa){g=0;do{if(qa=!1,Wa=0,25<=g)throw Error(t(301));g+=1,Ct=It=null,s.updateQueue=null,zu.current=bT,r=l(h,p)}while(qa)}if(zu.current=Hu,s=It!==null&&It.next!==null,gs=0,Ct=It=ot=null,$u=!1,s)throw Error(t(300));return r}function Cd(){var r=Wa!==0;return Wa=0,r}function cr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function bn(){if(It===null){var r=ot.alternate;r=r!==null?r.memoizedState:null}else r=It.next;var s=Ct===null?ot.memoizedState:Ct.next;if(s!==null)Ct=s,It=r;else{if(r===null)throw Error(t(310));It=r,r={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Ct===null?ot.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Ha(r,s){return typeof s=="function"?s(r):s}function kd(r){var s=bn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=It,p=h.baseQueue,g=l.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}h.baseQueue=p=g,l.pending=null}if(p!==null){g=p.next,h=h.baseState;var P=w=null,L=null,$=g;do{var re=$.lane;if((gs&re)===re)L!==null&&(L=L.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var se={lane:re,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};L===null?(P=L=se,w=h):L=L.next=se,ot.lanes|=re,ys|=re}$=$.next}while($!==null&&$!==g);L===null?w=h:L.next=P,Wn(h,s.memoizedState)||(on=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=L,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do g=p.lane,ot.lanes|=g,ys|=g,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Pd(r){var s=bn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,g=s.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do g=r(g,w.action),w=w.next;while(w!==p);Wn(g,s.memoizedState)||(on=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function wg(){}function Eg(r,s){var l=ot,h=bn(),p=s(),g=!Wn(h.memoizedState,p);if(g&&(h.memoizedState=p,on=!0),h=h.queue,Nd(Sg.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ka(9,Ig.bind(null,l,h,p,s),void 0,null),kt===null)throw Error(t(349));(gs&30)!==0||Tg(l,s,p)}return p}function Tg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Ig(r,s,l,h){s.value=l,s.getSnapshot=h,Rg(s)&&Ag(r)}function Sg(r,s,l){return l(function(){Rg(s)&&Ag(r)})}function Rg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Wn(r,l)}catch{return!0}}function Ag(r){var s=Fr(r,1);s!==null&&Jn(s,r,1,-1)}function Cg(r){var s=cr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:r},s.queue=r,r=r.dispatch=PT.bind(null,ot,r),[s.memoizedState,r]}function Ka(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function kg(){return bn().memoizedState}function qu(r,s,l,h){var p=cr();ot.flags|=r,p.memoizedState=Ka(1|s,l,void 0,h===void 0?null:h)}function Wu(r,s,l,h){var p=bn();h=h===void 0?null:h;var g=void 0;if(It!==null){var w=It.memoizedState;if(g=w.destroy,h!==null&&Rd(h,w.deps)){p.memoizedState=Ka(s,l,g,h);return}}ot.flags|=r,p.memoizedState=Ka(1|s,l,g,h)}function Pg(r,s){return qu(8390656,8,r,s)}function Nd(r,s){return Wu(2048,8,r,s)}function Ng(r,s){return Wu(4,2,r,s)}function xg(r,s){return Wu(4,4,r,s)}function bg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Og(r,s,l){return l=l!=null?l.concat([r]):null,Wu(4,4,bg.bind(null,s,r),l)}function xd(){}function Dg(r,s){var l=bn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Rd(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Lg(r,s){var l=bn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Rd(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Vg(r,s,l){return(gs&21)===0?(r.baseState&&(r.baseState=!1,on=!0),r.memoizedState=l):(Wn(l,s)||(l=ss(),ot.lanes|=l,ys|=l,r.baseState=!0),s)}function CT(r,s){var l=Ue;Ue=l!==0&&4>l?l:4,r(!0);var h=Sd.transition;Sd.transition={};try{r(!1),s()}finally{Ue=l,Sd.transition=h}}function Mg(){return bn().memoizedState}function kT(r,s,l){var h=Si(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Fg(r))Ug(s,l);else if(l=mg(r,s,l,h),l!==null){var p=en();Jn(l,r,h,p),jg(l,s,h)}}function PT(r,s,l){var h=Si(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fg(r))Ug(s,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,l);if(p.hasEagerState=!0,p.eagerState=P,Wn(P,w)){var L=s.interleaved;L===null?(p.next=p,_d(s)):(p.next=L.next,L.next=p),s.interleaved=p;return}}catch{}finally{}l=mg(r,s,p,h),l!==null&&(p=en(),Jn(l,r,h,p),jg(l,s,h))}}function Fg(r){var s=r.alternate;return r===ot||s!==null&&s===ot}function Ug(r,s){qa=$u=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function jg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ui(r,l)}}var Hu={readContext:xn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},NT={readContext:xn,useCallback:function(r,s){return cr().memoizedState=[r,s===void 0?null:s],r},useContext:xn,useEffect:Pg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,qu(4194308,4,bg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return qu(4194308,4,r,s)},useInsertionEffect:function(r,s){return qu(4,2,r,s)},useMemo:function(r,s){var l=cr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=cr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=kT.bind(null,ot,r),[h.memoizedState,r]},useRef:function(r){var s=cr();return r={current:r},s.memoizedState=r},useState:Cg,useDebugValue:xd,useDeferredValue:function(r){return cr().memoizedState=r},useTransition:function(){var r=Cg(!1),s=r[0];return r=CT.bind(null,r[1]),cr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=ot,p=cr();if(it){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),kt===null)throw Error(t(349));(gs&30)!==0||Tg(h,s,l)}p.memoizedState=l;var g={value:l,getSnapshot:s};return p.queue=g,Pg(Sg.bind(null,h,g,r),[r]),h.flags|=2048,Ka(9,Ig.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=cr(),s=kt.identifierPrefix;if(it){var l=Mr,h=Vr;l=(h&~(1<<32-Yt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Wa++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=AT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},xT={readContext:xn,useCallback:Dg,useContext:xn,useEffect:Nd,useImperativeHandle:Og,useInsertionEffect:Ng,useLayoutEffect:xg,useMemo:Lg,useReducer:kd,useRef:kg,useState:function(){return kd(Ha)},useDebugValue:xd,useDeferredValue:function(r){var s=bn();return Vg(s,It.memoizedState,r)},useTransition:function(){var r=kd(Ha)[0],s=bn().memoizedState;return[r,s]},useMutableSource:wg,useSyncExternalStore:Eg,useId:Mg,unstable_isNewReconciler:!1},bT={readContext:xn,useCallback:Dg,useContext:xn,useEffect:Nd,useImperativeHandle:Og,useInsertionEffect:Ng,useLayoutEffect:xg,useMemo:Lg,useReducer:Pd,useRef:kg,useState:function(){return Pd(Ha)},useDebugValue:xd,useDeferredValue:function(r){var s=bn();return It===null?s.memoizedState=r:Vg(s,It.memoizedState,r)},useTransition:function(){var r=Pd(Ha)[0],s=bn().memoizedState;return[r,s]},useMutableSource:wg,useSyncExternalStore:Eg,useId:Mg,unstable_isNewReconciler:!1};function Kn(r,s){if(r&&r.defaultProps){s=he({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function bd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:he({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Ku={isMounted:function(r){return(r=r._reactInternals)?Fn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=en(),p=Si(r),g=Ur(h,p);g.payload=s,l!=null&&(g.callback=l),s=wi(r,g,p),s!==null&&(Jn(s,r,p,h),Uu(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=en(),p=Si(r),g=Ur(h,p);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=wi(r,g,p),s!==null&&(Jn(s,r,p,h),Uu(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=en(),h=Si(r),p=Ur(l,h);p.tag=2,s!=null&&(p.callback=s),s=wi(r,p,h),s!==null&&(Jn(s,r,h,l),Uu(s,r,h))}};function Bg(r,s,l,h,p,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Oa(l,h)||!Oa(p,g):!0}function zg(r,s,l){var h=!1,p=yi,g=s.contextType;return typeof g=="object"&&g!==null?g=xn(g):(p=sn(s)?hs:Bt.current,h=s.contextTypes,g=(h=h!=null)?yo(r,p):yi),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ku,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=g),s}function $g(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&Ku.enqueueReplaceState(s,s.state,null)}function Od(r,s,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},vd(r);var g=s.contextType;typeof g=="object"&&g!==null?p.context=xn(g):(g=sn(s)?hs:Bt.current,p.context=yo(r,g)),p.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(bd(r,s,g,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Ku.enqueueReplaceState(p,p.state,null),ju(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Ro(r,s){try{var l="",h=s;do l+=xe(h),h=h.return;while(h);var p=l}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:p,digest:null}}function Dd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Ld(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var OT=typeof WeakMap=="function"?WeakMap:Map;function qg(r,s,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){ec||(ec=!0,Jd=h),Ld(r,s)},l}function Wg(r,s,l){l=Ur(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){Ld(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Ld(r,s),typeof h!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function Hg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new OT;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),r=KT.bind(null,r,s,l),s.then(r,r))}function Kg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Gg(r,s,l,h,p){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ur(-1,1),s.tag=2,wi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var DT=G.ReactCurrentOwner,on=!1;function Zt(r,s,l,h){s.child=r===null?pg(s,null,l,h):Eo(s,r.child,l,h)}function Qg(r,s,l,h,p){l=l.render;var g=s.ref;return Io(s,p),h=Ad(r,s,l,h,g,p),l=Cd(),r!==null&&!on?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,jr(r,s,p)):(it&&l&&ud(s),s.flags|=1,Zt(r,s,h,p),s.child)}function Jg(r,s,l,h,p){if(r===null){var g=l.type;return typeof g=="function"&&!rf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Yg(r,s,g,h,p)):(r=oc(l.type,null,h,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&p)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Oa,l(w,h)&&r.ref===s.ref)return jr(r,s,p)}return s.flags|=1,r=Ai(g,h),r.ref=s.ref,r.return=s,s.child=r}function Yg(r,s,l,h,p){if(r!==null){var g=r.memoizedProps;if(Oa(g,h)&&r.ref===s.ref)if(on=!1,s.pendingProps=h=g,(r.lanes&p)!==0)(r.flags&131072)!==0&&(on=!0);else return s.lanes=r.lanes,jr(r,s,p)}return Vd(r,s,l,h,p)}function Xg(r,s,l){var h=s.pendingProps,p=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Co,En),En|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(Co,En),En|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Xe(Co,En),En|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Xe(Co,En),En|=h;return Zt(r,s,p,l),s.child}function Zg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Vd(r,s,l,h,p){var g=sn(l)?hs:Bt.current;return g=yo(s,g),Io(s,p),l=Ad(r,s,l,h,g,p),h=Cd(),r!==null&&!on?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,jr(r,s,p)):(it&&h&&ud(s),s.flags|=1,Zt(r,s,l,p),s.child)}function ey(r,s,l,h,p){if(sn(l)){var g=!0;xu(s)}else g=!1;if(Io(s,p),s.stateNode===null)Qu(r,s),zg(s,l,h),Od(s,l,h,p),h=!0;else if(r===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var L=w.context,$=l.contextType;typeof $=="object"&&$!==null?$=xn($):($=sn(l)?hs:Bt.current,$=yo(s,$));var re=l.getDerivedStateFromProps,se=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||L!==$)&&$g(s,w,h,$),vi=!1;var ee=s.memoizedState;w.state=ee,ju(s,h,w,p),L=s.memoizedState,P!==h||ee!==L||rn.current||vi?(typeof re=="function"&&(bd(s,l,re,h),L=s.memoizedState),(P=vi||Bg(s,l,P,h,ee,L,$))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=L),w.props=h,w.state=L,w.context=$,h=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,gg(r,s),P=s.memoizedProps,$=s.type===s.elementType?P:Kn(s.type,P),w.props=$,se=s.pendingProps,ee=w.context,L=l.contextType,typeof L=="object"&&L!==null?L=xn(L):(L=sn(l)?hs:Bt.current,L=yo(s,L));var fe=l.getDerivedStateFromProps;(re=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==se||ee!==L)&&$g(s,w,h,L),vi=!1,ee=s.memoizedState,w.state=ee,ju(s,h,w,p);var me=s.memoizedState;P!==se||ee!==me||rn.current||vi?(typeof fe=="function"&&(bd(s,l,fe,h),me=s.memoizedState),($=vi||Bg(s,l,$,h,ee,me,L)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,me,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,me,L)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=me),w.props=h,w.state=me,w.context=L,h=$):(typeof w.componentDidUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),h=!1)}return Md(r,s,l,h,g,p)}function Md(r,s,l,h,p,g){Zg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return p&&sg(s,l,!1),jr(r,s,g);h=s.stateNode,DT.current=s;var P=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=Eo(s,r.child,null,g),s.child=Eo(s,null,P,g)):Zt(r,s,P,g),s.memoizedState=h.state,p&&sg(s,l,!0),s.child}function ty(r){var s=r.stateNode;s.pendingContext?rg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&rg(r,s.context,!1),wd(r,s.containerInfo)}function ny(r,s,l,h,p){return wo(),fd(p),s.flags|=256,Zt(r,s,l,h),s.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Ud(r){return{baseLanes:r,cachePool:null,transitions:null}}function ry(r,s,l){var h=s.pendingProps,p=st.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=r!==null&&r.memoizedState===null?!1:(p&2)!==0),P?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Xe(st,p&1),r===null)return dd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ac(w,h,0,null),r=Es(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Ud(l),s.memoizedState=Fd,r):jd(s,w));if(p=r.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return LT(r,s,w,h,P,p,l);if(g){g=h.fallback,w=s.mode,p=r.child,P=p.sibling;var L={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=L,s.deletions=null):(h=Ai(p,L),h.subtreeFlags=p.subtreeFlags&14680064),P!==null?g=Ai(P,g):(g=Es(g,w,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Ud(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~l,s.memoizedState=Fd,h}return g=r.child,r=g.sibling,h=Ai(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function jd(r,s){return s=ac({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Gu(r,s,l,h){return h!==null&&fd(h),Eo(s,r.child,null,l),r=jd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function LT(r,s,l,h,p,g,w){if(l)return s.flags&256?(s.flags&=-257,h=Dd(Error(t(422))),Gu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,p=s.mode,h=ac({mode:"visible",children:h.children},p,0,null),g=Es(g,p,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&Eo(s,r.child,null,w),s.child.memoizedState=Ud(w),s.memoizedState=Fd,g);if((s.mode&1)===0)return Gu(r,s,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var P=h.dgst;return h=P,g=Error(t(419)),h=Dd(g,h,void 0),Gu(r,s,w,h)}if(P=(w&r.childLanes)!==0,on||P){if(h=kt,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|w))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Fr(r,p),Jn(h,r,p,-1))}return nf(),h=Dd(Error(t(421))),Gu(r,s,w,h)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=GT.bind(null,r),p._reactRetry=s,null):(r=g.treeContext,wn=mi(p.nextSibling),vn=s,it=!0,Hn=null,r!==null&&(Pn[Nn++]=Vr,Pn[Nn++]=Mr,Pn[Nn++]=ds,Vr=r.id,Mr=r.overflow,ds=s),s=jd(s,h.children),s.flags|=4096,s)}function iy(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),yd(r.return,s,l)}function Bd(r,s,l,h,p){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=p)}function sy(r,s,l){var h=s.pendingProps,p=h.revealOrder,g=h.tail;if(Zt(r,s,h.children,l),h=st.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&iy(r,l,s);else if(r.tag===19)iy(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Xe(st,h),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&Bu(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Bd(s,!1,p,l,g);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&Bu(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Bd(s,!0,l,null,g);break;case"together":Bd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Qu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function jr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ys|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ai(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ai(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function VT(r,s,l){switch(s.tag){case 3:ty(s),wo();break;case 5:vg(s);break;case 1:sn(s.type)&&xu(s);break;case 4:wd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;Xe(Mu,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Xe(st,st.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?ry(r,s,l):(Xe(st,st.current&1),r=jr(r,s,l),r!==null?r.sibling:null);Xe(st,st.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return sy(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Xe(st,st.current),h)break;return null;case 22:case 23:return s.lanes=0,Xg(r,s,l)}return jr(r,s,l)}var oy,zd,ay,ly;oy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},zd=function(){},ay=function(r,s,l,h){var p=r.memoizedProps;if(p!==h){r=s.stateNode,ms(ur.current);var g=null;switch(l){case"input":p=pn(r,p),h=pn(r,h),g=[];break;case"select":p=he({},p,{value:void 0}),h=he({},h,{value:void 0}),g=[];break;case"textarea":p=la(r,p),h=la(r,h),g=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ku)}pa(l,h);var w;l=null;for($ in p)if(!h.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var P=p[$];for(w in P)P.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var L=h[$];if(P=p?.[$],h.hasOwnProperty($)&&L!==P&&(L!=null||P!=null))if($==="style")if(P){for(w in P)!P.hasOwnProperty(w)||L&&L.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in L)L.hasOwnProperty(w)&&P[w]!==L[w]&&(l||(l={}),l[w]=L[w])}else l||(g||(g=[]),g.push($,l)),l=L;else $==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,P=P?P.__html:void 0,L!=null&&P!==L&&(g=g||[]).push($,L)):$==="children"?typeof L!="string"&&typeof L!="number"||(g=g||[]).push($,""+L):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(L!=null&&$==="onScroll"&&Ze("scroll",r),g||P===L||(g=[])):(g=g||[]).push($,L))}l&&(g=g||[]).push("style",l);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},ly=function(r,s,l,h){l!==h&&(s.flags|=4)};function Ga(r,s){if(!it)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function $t(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function MT(r,s,l){var h=s.pendingProps;switch(cd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return sn(s.type)&&Nu(),$t(s),null;case 3:return h=s.stateNode,So(),et(rn),et(Bt),Id(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Lu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hn!==null&&(Zd(Hn),Hn=null))),zd(r,s),$t(s),null;case 5:Ed(s);var p=ms($a.current);if(l=s.type,r!==null&&s.stateNode!=null)ay(r,s,l,h,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return $t(s),null}if(r=ms(ur.current),Lu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[lr]=s,h[Fa]=g,r=(s.mode&1)!==0,l){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(p=0;p<La.length;p++)Ze(La[p],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":Ir(h,g),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ze("invalid",h);break;case"textarea":js(h,g),Ze("invalid",h)}pa(l,g),p=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?h.textContent!==P&&(g.suppressHydrationWarning!==!0&&Cu(h.textContent,P,r),p=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&Cu(h.textContent,P,r),p=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&Ze("scroll",h)}switch(l){case"input":nt(h),Gi(h,g,!0);break;case"textarea":nt(h),ua(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=ku)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=wt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(l,{is:h.is}):(r=w.createElement(l),l==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,l),r[lr]=s,r[Fa]=h,oy(r,s,!1,!1),s.stateNode=r;e:{switch(w=ma(l,h),l){case"dialog":Ze("cancel",r),Ze("close",r),p=h;break;case"iframe":case"object":case"embed":Ze("load",r),p=h;break;case"video":case"audio":for(p=0;p<La.length;p++)Ze(La[p],r);p=h;break;case"source":Ze("error",r),p=h;break;case"img":case"image":case"link":Ze("error",r),Ze("load",r),p=h;break;case"details":Ze("toggle",r),p=h;break;case"input":Ir(r,h),p=pn(r,h),Ze("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=he({},h,{value:void 0}),Ze("invalid",r);break;case"textarea":js(r,h),p=la(r,h),Ze("invalid",r);break;default:p=h}pa(l,p),P=p;for(g in P)if(P.hasOwnProperty(g)){var L=P[g];g==="style"?da(r,L):g==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ca(r,L)):g==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&ii(r,L):typeof L=="number"&&ii(r,""+L):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?L!=null&&g==="onScroll"&&Ze("scroll",r):L!=null&&ne(r,g,L,w))}switch(l){case"input":nt(r),Gi(r,h,!1);break;case"textarea":nt(r),ua(r);break;case"option":h.value!=null&&r.setAttribute("value",""+le(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Ar(r,!!h.multiple,g,!1):h.defaultValue!=null&&Ar(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=ku)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return $t(s),null;case 6:if(r&&s.stateNode!=null)ly(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=ms($a.current),ms(ur.current),Lu(s)){if(h=s.stateNode,l=s.memoizedProps,h[lr]=s,(g=h.nodeValue!==l)&&(r=vn,r!==null))switch(r.tag){case 3:Cu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Cu(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[lr]=s,s.stateNode=h}return $t(s),null;case 13:if(et(st),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(it&&wn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)hg(),wo(),s.flags|=98560,g=!1;else if(g=Lu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[lr]=s}else wo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),g=!1}else Hn!==null&&(Zd(Hn),Hn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(st.current&1)!==0?St===0&&(St=3):nf())),s.updateQueue!==null&&(s.flags|=4),$t(s),null);case 4:return So(),zd(r,s),r===null&&Va(s.stateNode.containerInfo),$t(s),null;case 10:return gd(s.type._context),$t(s),null;case 17:return sn(s.type)&&Nu(),$t(s),null;case 19:if(et(st),g=s.memoizedState,g===null)return $t(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Ga(g,!1);else{if(St!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Bu(r),w!==null){for(s.flags|=128,Ga(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Xe(st,st.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ye()>ko&&(s.flags|=128,h=!0,Ga(g,!1),s.lanes=4194304)}else{if(!h)if(r=Bu(w),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ga(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!it)return $t(s),null}else 2*Ye()-g.renderingStartTime>ko&&l!==1073741824&&(s.flags|=128,h=!0,Ga(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(l=g.last,l!==null?l.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ye(),s.sibling=null,l=st.current,Xe(st,h?l&1|2:l&1),s):($t(s),null);case 22:case 23:return tf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(En&1073741824)!==0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function FT(r,s){switch(cd(s),s.tag){case 1:return sn(s.type)&&Nu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return So(),et(rn),et(Bt),Id(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Ed(s),null;case 13:if(et(st),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));wo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return et(st),null;case 4:return So(),null;case 10:return gd(s.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var Ju=!1,qt=!1,UT=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ao(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ct(r,s,h)}else l.current=null}function $d(r,s,l){try{l()}catch(h){ct(r,s,h)}}var uy=!1;function jT(r,s){if(td=di,r=Bm(),Kh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,P=-1,L=-1,$=0,re=0,se=r,ee=null;t:for(;;){for(var fe;se!==l||p!==0&&se.nodeType!==3||(P=w+p),se!==g||h!==0&&se.nodeType!==3||(L=w+h),se.nodeType===3&&(w+=se.nodeValue.length),(fe=se.firstChild)!==null;)ee=se,se=fe;for(;;){if(se===r)break t;if(ee===l&&++$===p&&(P=w),ee===g&&++re===h&&(L=w),(fe=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=fe}l=P===-1||L===-1?null:{start:P,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(nd={focusedElem:r,selectionRange:l},di=!1,pe=s;pe!==null;)if(s=pe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,pe=r;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var _e=me.memoizedProps,ft=me.memoizedState,B=s.stateNode,F=B.getSnapshotBeforeUpdate(s.elementType===s.type?_e:Kn(s.type,_e),ft);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){ct(s,s.return,ue)}if(r=s.sibling,r!==null){r.return=s.return,pe=r;break}pe=s.return}return me=uy,uy=!1,me}function Qa(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var g=p.destroy;p.destroy=void 0,g!==void 0&&$d(s,l,g)}p=p.next}while(p!==h)}}function Yu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function qd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function cy(r){var s=r.alternate;s!==null&&(r.alternate=null,cy(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[lr],delete s[Fa],delete s[od],delete s[TT],delete s[IT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function hy(r){return r.tag===5||r.tag===3||r.tag===4}function dy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||hy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Wd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ku));else if(h!==4&&(r=r.child,r!==null))for(Wd(r,s,l),r=r.sibling;r!==null;)Wd(r,s,l),r=r.sibling}function Hd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Hd(r,s,l),r=r.sibling;r!==null;)Hd(r,s,l),r=r.sibling}var Dt=null,Gn=!1;function Ei(r,s,l){for(l=l.child;l!==null;)fy(r,s,l),l=l.sibling}function fy(r,s,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(rs,l)}catch{}switch(l.tag){case 5:qt||Ao(l,s);case 6:var h=Dt,p=Gn;Dt=null,Ei(r,s,l),Dt=h,Gn=p,Dt!==null&&(Gn?(r=Dt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Dt.removeChild(l.stateNode));break;case 18:Dt!==null&&(Gn?(r=Dt,l=l.stateNode,r.nodeType===8?sd(r.parentNode,l):r.nodeType===1&&sd(r,l),$n(r)):sd(Dt,l.stateNode));break;case 4:h=Dt,p=Gn,Dt=l.stateNode.containerInfo,Gn=!0,Ei(r,s,l),Dt=h,Gn=p;break;case 0:case 11:case 14:case 15:if(!qt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var g=p,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&$d(l,s,w),p=p.next}while(p!==h)}Ei(r,s,l);break;case 1:if(!qt&&(Ao(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){ct(l,s,P)}Ei(r,s,l);break;case 21:Ei(r,s,l);break;case 22:l.mode&1?(qt=(h=qt)||l.memoizedState!==null,Ei(r,s,l),qt=h):Ei(r,s,l);break;default:Ei(r,s,l)}}function py(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new UT),s.forEach(function(h){var p=QT.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Qn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var g=r,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:Dt=P.stateNode,Gn=!1;break e;case 3:Dt=P.stateNode.containerInfo,Gn=!0;break e;case 4:Dt=P.stateNode.containerInfo,Gn=!0;break e}P=P.return}if(Dt===null)throw Error(t(160));fy(g,w,p),Dt=null,Gn=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch($){ct(p,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)my(s,r),s=s.sibling}function my(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Qn(s,r),hr(r),h&4){try{Qa(3,r,r.return),Yu(3,r)}catch(_e){ct(r,r.return,_e)}try{Qa(5,r,r.return)}catch(_e){ct(r,r.return,_e)}}break;case 1:Qn(s,r),hr(r),h&512&&l!==null&&Ao(l,l.return);break;case 5:if(Qn(s,r),hr(r),h&512&&l!==null&&Ao(l,l.return),r.flags&32){var p=r.stateNode;try{ii(p,"")}catch(_e){ct(r,r.return,_e)}}if(h&4&&(p=r.stateNode,p!=null)){var g=r.memoizedProps,w=l!==null?l.memoizedProps:g,P=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&Sr(p,g),ma(P,w);var $=ma(P,g);for(w=0;w<L.length;w+=2){var re=L[w],se=L[w+1];re==="style"?da(p,se):re==="dangerouslySetInnerHTML"?ca(p,se):re==="children"?ii(p,se):ne(p,re,se,$)}switch(P){case"input":Sn(p,g);break;case"textarea":Bs(p,g);break;case"select":var ee=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?Ar(p,!!g.multiple,fe,!1):ee!==!!g.multiple&&(g.defaultValue!=null?Ar(p,!!g.multiple,g.defaultValue,!0):Ar(p,!!g.multiple,g.multiple?[]:"",!1))}p[Fa]=g}catch(_e){ct(r,r.return,_e)}}break;case 6:if(Qn(s,r),hr(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,g=r.memoizedProps;try{p.nodeValue=g}catch(_e){ct(r,r.return,_e)}}break;case 3:if(Qn(s,r),hr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{$n(s.containerInfo)}catch(_e){ct(r,r.return,_e)}break;case 4:Qn(s,r),hr(r);break;case 13:Qn(s,r),hr(r),p=r.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Qd=Ye())),h&4&&py(r);break;case 22:if(re=l!==null&&l.memoizedState!==null,r.mode&1?(qt=($=qt)||re,Qn(s,r),qt=$):Qn(s,r),hr(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!re&&(r.mode&1)!==0)for(pe=r,re=r.child;re!==null;){for(se=pe=re;pe!==null;){switch(ee=pe,fe=ee.child,ee.tag){case 0:case 11:case 14:case 15:Qa(4,ee,ee.return);break;case 1:Ao(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){h=ee,l=ee.return;try{s=h,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(_e){ct(h,l,_e)}}break;case 5:Ao(ee,ee.return);break;case 22:if(ee.memoizedState!==null){_y(se);continue}}fe!==null?(fe.return=ee,pe=fe):_y(se)}re=re.sibling}e:for(re=null,se=r;;){if(se.tag===5){if(re===null){re=se;try{p=se.stateNode,$?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=se.stateNode,L=se.memoizedProps.style,w=L!=null&&L.hasOwnProperty("display")?L.display:null,P.style.display=ha("display",w))}catch(_e){ct(r,r.return,_e)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=$?"":se.memoizedProps}catch(_e){ct(r,r.return,_e)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===r)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===r)break e;for(;se.sibling===null;){if(se.return===null||se.return===r)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Qn(s,r),hr(r),h&4&&py(r);break;case 21:break;default:Qn(s,r),hr(r)}}function hr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(hy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ii(p,""),h.flags&=-33);var g=dy(r);Hd(r,g,p);break;case 3:case 4:var w=h.stateNode.containerInfo,P=dy(r);Wd(r,P,w);break;default:throw Error(t(161))}}catch(L){ct(r,r.return,L)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function BT(r,s,l){pe=r,gy(r)}function gy(r,s,l){for(var h=(r.mode&1)!==0;pe!==null;){var p=pe,g=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||Ju;if(!w){var P=p.alternate,L=P!==null&&P.memoizedState!==null||qt;P=Ju;var $=qt;if(Ju=w,(qt=L)&&!$)for(pe=p;pe!==null;)w=pe,L=w.child,w.tag===22&&w.memoizedState!==null?vy(p):L!==null?(L.return=w,pe=L):vy(p);for(;g!==null;)pe=g,gy(g),g=g.sibling;pe=p,Ju=P,qt=$}yy(r)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,pe=g):yy(r)}}function yy(r){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:qt||Yu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!qt)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:Kn(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&_g(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}_g(s,w,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var re=$.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&$n(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||s.flags&512&&qd(s)}catch(ee){ct(s,s.return,ee)}}if(s===r){pe=null;break}if(l=s.sibling,l!==null){l.return=s.return,pe=l;break}pe=s.return}}function _y(r){for(;pe!==null;){var s=pe;if(s===r){pe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,pe=l;break}pe=s.return}}function vy(r){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Yu(4,s)}catch(L){ct(s,l,L)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(L){ct(s,p,L)}}var g=s.return;try{qd(s)}catch(L){ct(s,g,L)}break;case 5:var w=s.return;try{qd(s)}catch(L){ct(s,w,L)}}}catch(L){ct(s,s.return,L)}if(s===r){pe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,pe=P;break}pe=s.return}}var zT=Math.ceil,Xu=G.ReactCurrentDispatcher,Kd=G.ReactCurrentOwner,On=G.ReactCurrentBatchConfig,$e=0,kt=null,gt=null,Lt=0,En=0,Co=gi(0),St=0,Ja=null,ys=0,Zu=0,Gd=0,Ya=null,an=null,Qd=0,ko=1/0,Br=null,ec=!1,Jd=null,Ti=null,tc=!1,Ii=null,nc=0,Xa=0,Yd=null,rc=-1,ic=0;function en(){return($e&6)!==0?Ye():rc!==-1?rc:rc=Ye()}function Si(r){return(r.mode&1)===0?1:($e&2)!==0&&Lt!==0?Lt&-Lt:RT.transition!==null?(ic===0&&(ic=ss()),ic):(r=Ue,r!==0||(r=window.event,r=r===void 0?16:Aa(r.type)),r)}function Jn(r,s,l,h){if(50<Xa)throw Xa=0,Yd=null,Error(t(185));li(r,l,h),(($e&2)===0||r!==kt)&&(r===kt&&(($e&2)===0&&(Zu|=l),St===4&&Ri(r,Lt)),ln(r,h),l===1&&$e===0&&(s.mode&1)===0&&(ko=Ye()+500,bu&&_i()))}function ln(r,s){var l=r.callbackNode;Pr(r,s);var h=is(r,r===kt?Lt:0);if(h===0)l!==null&&Ea(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&Ea(l),s===1)r.tag===0?ST(Ey.bind(null,r)):og(Ey.bind(null,r)),wT(function(){($e&6)===0&&_i()}),l=null;else{switch(ci(h)){case 1:l=ns;break;case 4:l=si;break;case 16:l=An;break;case 536870912:l=iu;break;default:l=An}l=Py(l,wy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function wy(r,s){if(rc=-1,ic=0,($e&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Po()&&r.callbackNode!==l)return null;var h=is(r,r===kt?Lt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=sc(r,h);else{s=h;var p=$e;$e|=2;var g=Iy();(kt!==r||Lt!==s)&&(Br=null,ko=Ye()+500,vs(r,s));do try{WT();break}catch(P){Ty(r,P)}while(!0);md(),Xu.current=g,$e=p,gt!==null?s=0:(kt=null,Lt=0,s=St)}if(s!==0){if(s===2&&(p=gn(r),p!==0&&(h=p,s=Xd(r,p))),s===1)throw l=Ja,vs(r,0),Ri(r,h),ln(r,Ye()),l;if(s===6)Ri(r,h);else{if(p=r.current.alternate,(h&30)===0&&!$T(p)&&(s=sc(r,h),s===2&&(g=gn(r),g!==0&&(h=g,s=Xd(r,g))),s===1))throw l=Ja,vs(r,0),Ri(r,h),ln(r,Ye()),l;switch(r.finishedWork=p,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ws(r,an,Br);break;case 3:if(Ri(r,h),(h&130023424)===h&&(s=Qd+500-Ye(),10<s)){if(is(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){en(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=id(ws.bind(null,r,an,Br),s);break}ws(r,an,Br);break;case 4:if(Ri(r,h),(h&4194240)===h)break;for(s=r.eventTimes,p=-1;0<h;){var w=31-Yt(h);g=1<<w,w=s[w],w>p&&(p=w),h&=~g}if(h=p,h=Ye()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zT(h/1960))-h,10<h){r.timeoutHandle=id(ws.bind(null,r,an,Br),h);break}ws(r,an,Br);break;case 5:ws(r,an,Br);break;default:throw Error(t(329))}}}return ln(r,Ye()),r.callbackNode===l?wy.bind(null,r):null}function Xd(r,s){var l=Ya;return r.current.memoizedState.isDehydrated&&(vs(r,s).flags|=256),r=sc(r,s),r!==2&&(s=an,an=l,s!==null&&Zd(s)),r}function Zd(r){an===null?an=r:an.push.apply(an,r)}function $T(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],g=p.getSnapshot;p=p.value;try{if(!Wn(g(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ri(r,s){for(s&=~Gd,s&=~Zu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Yt(s),h=1<<l;r[l]=-1,s&=~h}}function Ey(r){if(($e&6)!==0)throw Error(t(327));Po();var s=is(r,0);if((s&1)===0)return ln(r,Ye()),null;var l=sc(r,s);if(r.tag!==0&&l===2){var h=gn(r);h!==0&&(s=h,l=Xd(r,h))}if(l===1)throw l=Ja,vs(r,0),Ri(r,s),ln(r,Ye()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ws(r,an,Br),ln(r,Ye()),null}function ef(r,s){var l=$e;$e|=1;try{return r(s)}finally{$e=l,$e===0&&(ko=Ye()+500,bu&&_i())}}function _s(r){Ii!==null&&Ii.tag===0&&($e&6)===0&&Po();var s=$e;$e|=1;var l=On.transition,h=Ue;try{if(On.transition=null,Ue=1,r)return r()}finally{Ue=h,On.transition=l,$e=s,($e&6)===0&&_i()}}function tf(){En=Co.current,et(Co)}function vs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,vT(l)),gt!==null)for(l=gt.return;l!==null;){var h=l;switch(cd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Nu();break;case 3:So(),et(rn),et(Bt),Id();break;case 5:Ed(h);break;case 4:So();break;case 13:et(st);break;case 19:et(st);break;case 10:gd(h.type._context);break;case 22:case 23:tf()}l=l.return}if(kt=r,gt=r=Ai(r.current,null),Lt=En=s,St=0,Ja=null,Gd=Zu=ys=0,an=Ya=null,ps!==null){for(s=0;s<ps.length;s++)if(l=ps[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=p,h.next=w}l.pending=h}ps=null}return r}function Ty(r,s){do{var l=gt;try{if(md(),zu.current=Hu,$u){for(var h=ot.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}$u=!1}if(gs=0,Ct=It=ot=null,qa=!1,Wa=0,Kd.current=null,l===null||l.return===null){St=1,Ja=s,gt=null;break}e:{var g=r,w=l.return,P=l,L=s;if(s=Lt,P.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=L,re=P,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ee=re.alternate;ee?(re.updateQueue=ee.updateQueue,re.memoizedState=ee.memoizedState,re.lanes=ee.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=Kg(w);if(fe!==null){fe.flags&=-257,Gg(fe,w,P,g,s),fe.mode&1&&Hg(g,$,s),s=fe,L=$;var me=s.updateQueue;if(me===null){var _e=new Set;_e.add(L),s.updateQueue=_e}else me.add(L);break e}else{if((s&1)===0){Hg(g,$,s),nf();break e}L=Error(t(426))}}else if(it&&P.mode&1){var ft=Kg(w);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Gg(ft,w,P,g,s),fd(Ro(L,P));break e}}g=L=Ro(L,P),St!==4&&(St=2),Ya===null?Ya=[g]:Ya.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=qg(g,L,s);yg(g,B);break e;case 1:P=L;var F=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ti===null||!Ti.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var ue=Wg(g,P,s);yg(g,ue);break e}}g=g.return}while(g!==null)}Ry(l)}catch(Ee){s=Ee,gt===l&&l!==null&&(gt=l=l.return);continue}break}while(!0)}function Iy(){var r=Xu.current;return Xu.current=Hu,r===null?Hu:r}function nf(){(St===0||St===3||St===2)&&(St=4),kt===null||(ys&268435455)===0&&(Zu&268435455)===0||Ri(kt,Lt)}function sc(r,s){var l=$e;$e|=2;var h=Iy();(kt!==r||Lt!==s)&&(Br=null,vs(r,s));do try{qT();break}catch(p){Ty(r,p)}while(!0);if(md(),$e=l,Xu.current=h,gt!==null)throw Error(t(261));return kt=null,Lt=0,St}function qT(){for(;gt!==null;)Sy(gt)}function WT(){for(;gt!==null&&!nu();)Sy(gt)}function Sy(r){var s=ky(r.alternate,r,En);r.memoizedProps=r.pendingProps,s===null?Ry(r):gt=s,Kd.current=null}function Ry(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=MT(l,s,En),l!==null){gt=l;return}}else{if(l=FT(l,s),l!==null){l.flags&=32767,gt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{St=6,gt=null;return}}if(s=s.sibling,s!==null){gt=s;return}gt=s=r}while(s!==null);St===0&&(St=5)}function ws(r,s,l){var h=Ue,p=On.transition;try{On.transition=null,Ue=1,HT(r,s,l,h)}finally{On.transition=p,Ue=h}return null}function HT(r,s,l,h){do Po();while(Ii!==null);if(($e&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Qe(r,g),r===kt&&(gt=kt=null,Lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||tc||(tc=!0,Py(An,function(){return Po(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=On.transition,On.transition=null;var w=Ue;Ue=1;var P=$e;$e|=4,Kd.current=null,jT(r,l),my(l,r),dT(nd),di=!!td,nd=td=null,r.current=l,BT(l),Uh(),$e=P,Ue=w,On.transition=g}else r.current=l;if(tc&&(tc=!1,Ii=r,nc=p),g=r.pendingLanes,g===0&&(Ti=null),su(l.stateNode),ln(r,Ye()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(ec)throw ec=!1,r=Jd,Jd=null,r;return(nc&1)!==0&&r.tag!==0&&Po(),g=r.pendingLanes,(g&1)!==0?r===Yd?Xa++:(Xa=0,Yd=r):Xa=0,_i(),null}function Po(){if(Ii!==null){var r=ci(nc),s=On.transition,l=Ue;try{if(On.transition=null,Ue=16>r?16:r,Ii===null)var h=!1;else{if(r=Ii,Ii=null,nc=0,($e&6)!==0)throw Error(t(331));var p=$e;for($e|=4,pe=r.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var P=g.deletions;if(P!==null){for(var L=0;L<P.length;L++){var $=P[L];for(pe=$;pe!==null;){var re=pe;switch(re.tag){case 0:case 11:case 15:Qa(8,re,g)}var se=re.child;if(se!==null)se.return=re,pe=se;else for(;pe!==null;){re=pe;var ee=re.sibling,fe=re.return;if(cy(re),re===$){pe=null;break}if(ee!==null){ee.return=fe,pe=ee;break}pe=fe}}}var me=g.alternate;if(me!==null){var _e=me.child;if(_e!==null){me.child=null;do{var ft=_e.sibling;_e.sibling=null,_e=ft}while(_e!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Qa(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,pe=B;break e}pe=g.return}}var F=r.current;for(pe=F;pe!==null;){w=pe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,pe=z;else e:for(w=F;pe!==null;){if(P=pe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Yu(9,P)}}catch(Ee){ct(P,P.return,Ee)}if(P===w){pe=null;break e}var ue=P.sibling;if(ue!==null){ue.return=P.return,pe=ue;break e}pe=P.return}}if($e=p,_i(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(rs,r)}catch{}h=!0}return h}finally{Ue=l,On.transition=s}}return!1}function Ay(r,s,l){s=Ro(l,s),s=qg(r,s,1),r=wi(r,s,1),s=en(),r!==null&&(li(r,1,s),ln(r,s))}function ct(r,s,l){if(r.tag===3)Ay(r,r,l);else for(;s!==null;){if(s.tag===3){Ay(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ti===null||!Ti.has(h))){r=Ro(l,r),r=Wg(s,r,1),s=wi(s,r,1),r=en(),s!==null&&(li(s,1,r),ln(s,r));break}}s=s.return}}function KT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=en(),r.pingedLanes|=r.suspendedLanes&l,kt===r&&(Lt&l)===l&&(St===4||St===3&&(Lt&130023424)===Lt&&500>Ye()-Qd?vs(r,0):Gd|=l),ln(r,s)}function Cy(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ys,Ys<<=1,(Ys&130023424)===0&&(Ys=4194304)));var l=en();r=Fr(r,s),r!==null&&(li(r,s,l),ln(r,l))}function GT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Cy(r,l)}function QT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Cy(r,l)}var ky;ky=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||rn.current)on=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return on=!1,VT(r,s,l);on=(r.flags&131072)!==0}else on=!1,it&&(s.flags&1048576)!==0&&ag(s,Du,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Qu(r,s),r=s.pendingProps;var p=yo(s,Bt.current);Io(s,l),p=Ad(null,s,h,r,p,l);var g=Cd();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,sn(h)?(g=!0,xu(s)):g=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,vd(s),p.updater=Ku,s.stateNode=p,p._reactInternals=s,Od(s,h,r,l),s=Md(null,s,h,!0,g,l)):(s.tag=0,it&&g&&ud(s),Zt(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Qu(r,s),r=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=YT(h),r=Kn(h,r),p){case 0:s=Vd(null,s,h,r,l);break e;case 1:s=ey(null,s,h,r,l);break e;case 11:s=Qg(null,s,h,r,l);break e;case 14:s=Jg(null,s,h,Kn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Kn(h,p),Vd(r,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Kn(h,p),ey(r,s,h,p,l);case 3:e:{if(ty(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,p=g.element,gg(r,s),ju(s,h,null,l);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){p=Ro(Error(t(423)),s),s=ny(r,s,h,l,p);break e}else if(h!==p){p=Ro(Error(t(424)),s),s=ny(r,s,h,l,p);break e}else for(wn=mi(s.stateNode.containerInfo.firstChild),vn=s,it=!0,Hn=null,l=pg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(wo(),h===p){s=jr(r,s,l);break e}Zt(r,s,h,l)}s=s.child}return s;case 5:return vg(s),r===null&&dd(s),h=s.type,p=s.pendingProps,g=r!==null?r.memoizedProps:null,w=p.children,rd(h,p)?w=null:g!==null&&rd(h,g)&&(s.flags|=32),Zg(r,s),Zt(r,s,w,l),s.child;case 6:return r===null&&dd(s),null;case 13:return ry(r,s,l);case 4:return wd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Eo(s,null,h,l):Zt(r,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Kn(h,p),Qg(r,s,h,p,l);case 7:return Zt(r,s,s.pendingProps,l),s.child;case 8:return Zt(r,s,s.pendingProps.children,l),s.child;case 12:return Zt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,g=s.memoizedProps,w=p.value,Xe(Mu,h._currentValue),h._currentValue=w,g!==null)if(Wn(g.value,w)){if(g.children===p.children&&!rn.current){s=jr(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var L=P.firstContext;L!==null;){if(L.context===h){if(g.tag===1){L=Ur(-1,l&-l),L.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var re=$.pending;re===null?L.next=L:(L.next=re.next,re.next=L),$.pending=L}}g.lanes|=l,L=g.alternate,L!==null&&(L.lanes|=l),yd(g.return,l,s),P.lanes|=l;break}L=L.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,P=w.alternate,P!==null&&(P.lanes|=l),yd(w,l,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Zt(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Io(s,l),p=xn(p),h=h(p),s.flags|=1,Zt(r,s,h,l),s.child;case 14:return h=s.type,p=Kn(h,s.pendingProps),p=Kn(h.type,p),Jg(r,s,h,p,l);case 15:return Yg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Kn(h,p),Qu(r,s),s.tag=1,sn(h)?(r=!0,xu(s)):r=!1,Io(s,l),zg(s,h,p),Od(s,h,p,l),Md(null,s,h,!0,r,l);case 19:return sy(r,s,l);case 22:return Xg(r,s,l)}throw Error(t(156,s.tag))};function Py(r,s){return Qs(r,s)}function JT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(r,s,l,h){return new JT(r,s,l,h)}function rf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function YT(r){if(typeof r=="function")return rf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===qe)return 14}return 2}function Ai(r,s){var l=r.alternate;return l===null?(l=Dn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function oc(r,s,l,h,p,g){var w=2;if(h=r,typeof r=="function")rf(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case k:return Es(l.children,p,g,s);case I:w=8,p|=8;break;case A:return r=Dn(12,l,s,p|2),r.elementType=A,r.lanes=g,r;case R:return r=Dn(13,l,s,p),r.elementType=R,r.lanes=g,r;case ge:return r=Dn(19,l,s,p),r.elementType=ge,r.lanes=g,r;case Ve:return ac(l,p,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:w=10;break e;case O:w=9;break e;case D:w=11;break e;case qe:w=14;break e;case Fe:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Dn(w,l,s,p),s.elementType=r,s.type=h,s.lanes=g,s}function Es(r,s,l,h){return r=Dn(7,r,h,s),r.lanes=l,r}function ac(r,s,l,h){return r=Dn(22,r,h,s),r.elementType=Ve,r.lanes=l,r.stateNode={isHidden:!1},r}function sf(r,s,l){return r=Dn(6,r,null,s),r.lanes=l,r}function of(r,s,l){return s=Dn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function XT(r,s,l,h,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ai(0),this.expirationTimes=ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function af(r,s,l,h,p,g,w,P,L){return r=new XT(r,s,l,P,L),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Dn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(g),r}function ZT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function Ny(r){if(!r)return yi;r=r._reactInternals;e:{if(Fn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(sn(l))return ig(r,l,s)}return s}function xy(r,s,l,h,p,g,w,P,L){return r=af(l,h,!0,r,p,g,w,P,L),r.context=Ny(null),l=r.current,h=en(),p=Si(l),g=Ur(h,p),g.callback=s??null,wi(l,g,p),r.current.lanes=p,li(r,p,h),ln(r,h),r}function lc(r,s,l,h){var p=s.current,g=en(),w=Si(p);return l=Ny(l),s.context===null?s.context=l:s.pendingContext=l,s=Ur(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=wi(p,s,w),r!==null&&(Jn(r,p,w,g),Uu(r,p,w)),w}function uc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function by(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function lf(r,s){by(r,s),(r=r.alternate)&&by(r,s)}function eI(){return null}var Oy=typeof reportError=="function"?reportError:function(r){console.error(r)};function uf(r){this._internalRoot=r}cc.prototype.render=uf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));lc(r,s,null,null)},cc.prototype.unmount=uf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;_s(function(){lc(null,r,null,null)}),s[Dr]=null}};function cc(r){this._internalRoot=r}cc.prototype.unstable_scheduleHydration=function(r){if(r){var s=cu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<ir.length&&s!==0&&s<ir[l].priority;l++);ir.splice(l,0,r),l===0&&fu(r)}};function cf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function hc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function tI(r,s,l,h,p){if(p){if(typeof h=="function"){var g=h;h=function(){var $=uc(w);g.call($)}}var w=xy(s,h,r,0,null,!1,!1,"",Dy);return r._reactRootContainer=w,r[Dr]=w.current,Va(r.nodeType===8?r.parentNode:r),_s(),w}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var P=h;h=function(){var $=uc(L);P.call($)}}var L=af(r,0,!1,null,null,!1,!1,"",Dy);return r._reactRootContainer=L,r[Dr]=L.current,Va(r.nodeType===8?r.parentNode:r),_s(function(){lc(s,L,l,h)}),L}function dc(r,s,l,h,p){var g=l._reactRootContainer;if(g){var w=g;if(typeof p=="function"){var P=p;p=function(){var L=uc(w);P.call(L)}}lc(s,w,r,p)}else w=tI(l,s,r,p,h);return uc(w)}lu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=oi(s.pendingLanes);l!==0&&(ui(s,l|1),ln(s,Ye()),($e&6)===0&&(ko=Ye()+500,_i()))}break;case 13:_s(function(){var h=Fr(r,1);if(h!==null){var p=en();Jn(h,r,1,p)}}),lf(r,1)}},Xs=function(r){if(r.tag===13){var s=Fr(r,134217728);if(s!==null){var l=en();Jn(s,r,134217728,l)}lf(r,134217728)}},uu=function(r){if(r.tag===13){var s=Si(r),l=Fr(r,s);if(l!==null){var h=en();Jn(l,r,s,h)}lf(r,s)}},cu=function(){return Ue},hu=function(r,s){var l=Ue;try{return Ue=r,s()}finally{Ue=l}},$s=function(r,s,l){switch(s){case"input":if(Sn(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var p=Pu(h);if(!p)throw Error(t(90));ht(h),Sn(h,p)}}}break;case"textarea":Bs(r,l);break;case"select":s=l.value,s!=null&&Ar(r,!!l.multiple,s,!1)}},Xi=ef,ya=_s;var nI={usingClientEntryPoint:!1,Events:[Ua,mo,Pu,nr,ga,ef]},Za={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rI={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=wa(r),r===null?null:r.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||eI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{rs=fc.inject(rI),mn=fc}catch{}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nI,un.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(s))throw Error(t(200));return ZT(r,s,null,l)},un.createRoot=function(r,s){if(!cf(r))throw Error(t(299));var l=!1,h="",p=Oy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=af(r,1,!1,null,null,l,!1,h,p),r[Dr]=s.current,Va(r.nodeType===8?r.parentNode:r),new uf(s)},un.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=wa(s),r=r===null?null:r.stateNode,r},un.flushSync=function(r){return _s(r)},un.hydrate=function(r,s,l){if(!hc(s))throw Error(t(200));return dc(null,r,s,!0,l)},un.hydrateRoot=function(r,s,l){if(!cf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,g="",w=Oy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=xy(s,null,r,1,l??null,p,!1,g,w),r[Dr]=s.current,Va(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new cc(s)},un.render=function(r,s,l){if(!hc(s))throw Error(t(200));return dc(null,r,s,!1,l)},un.unmountComponentAtNode=function(r){if(!hc(r))throw Error(t(40));return r._reactRootContainer?(_s(function(){dc(null,null,r,!1,function(){r._reactRootContainer=null,r[Dr]=null})}),!0):!1},un.unstable_batchedUpdates=ef,un.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!hc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return dc(r,s,l,!1,h)},un.version="18.3.1-next-f1338f8080-20240426",un}var zy;function Hv(){if(zy)return ff.exports;zy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ff.exports=dI(),ff.exports}var $y;function fI(){if($y)return pc;$y=1;var n=Hv();return pc.createRoot=n.createRoot,pc.hydrateRoot=n.hydrateRoot,pc}var pI=fI();const mI=qv(pI);var qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},gI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,y=f?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,V=y&63;f||(V=64,u||(S=64)),i.push(t[_],t[E],t[S],t[V])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Kv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||E==null)throw new yI;const S=a<<2|d>>4;if(i.push(S),y!==64){const V=d<<4&240|y>>2;if(i.push(V),E!==64){const x=y<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _I=function(n){const e=Kv(n);return Gv.encodeByteArray(e,!0)},Uc=function(n){return _I(n).replace(/\./g,"")},Qv=function(n){try{return Gv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=()=>vI().__FIREBASE_DEFAULTS__,EI=()=>{if(typeof process>"u"||typeof qy>"u")return;const n=qy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qv(n[1]);return e&&JSON.parse(e)},oh=()=>{try{return wI()||EI()||TI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jv=n=>{var e,t;return(t=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Yv=n=>{const e=Jv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Xv=()=>{var n;return(n=oh())===null||n===void 0?void 0:n.config},Zv=n=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uc(JSON.stringify(t)),Uc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function RI(){var n;const e=(n=oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PI(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NI(){return!RI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xI(){try{return typeof indexedDB=="object"}catch{return!1}}function bI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="FirebaseError";class Er extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OI,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?DI(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Er(o,d,i)}}function DI(n,e){return n.replace(LI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const LI=/\{\$([^}]+)}/g;function VI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Wy(a)&&Wy(u)){if(!jo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Wy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ll(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MI(n,e){const t=new FI(n,e);return t.subscribe.bind(t)}class FI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");UI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=gf),o.error===void 0&&(o.error=gf),o.complete===void 0&&(o.complete=gf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n){return n&&n._delegate?n._delegate:n}class Bi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new II;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zI(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BI(n){return n===Ts?void 0:n}function zI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const qI={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},WI=je.INFO,HI={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},KI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=HI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=WI,this._logHandler=KI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const GI=(n,e)=>e.some(t=>n instanceof t);let Hy,Ky;function QI(){return Hy||(Hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JI(){return Ky||(Ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,Bf=new WeakMap,nw=new WeakMap,yf=new WeakMap,Rp=new WeakMap;function YI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Li(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tw.set(t,n)}).catch(()=>{}),Rp.set(e,n),e}function XI(n){if(Bf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Bf.set(n,e)}let zf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZI(n){zf=n(zf)}function eS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(_f(this),e,...t);return nw.set(i,e.sort?e.sort():[e]),Li(i)}:JI().includes(n)?function(...e){return n.apply(_f(this),e),Li(tw.get(this))}:function(...e){return Li(n.apply(_f(this),e))}}function tS(n){return typeof n=="function"?eS(n):(n instanceof IDBTransaction&&XI(n),GI(n,QI())?new Proxy(n,zf):n)}function Li(n){if(n instanceof IDBRequest)return YI(n);if(yf.has(n))return yf.get(n);const e=tS(n);return e!==n&&(yf.set(n,e),Rp.set(e,n)),e}const _f=n=>Rp.get(n);function nS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Li(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Li(u.result),f.oldVersion,f.newVersion,Li(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const rS=["get","getKey","getAll","getAllKeys","count"],iS=["put","add","delete","clear"],vf=new Map;function Gy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=iS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||rS.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let y=f.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&f.done]))[0]};return vf.set(e,a),a}ZI(n=>({...n,get:(e,t,i)=>Gy(e,t)||n.get(e,t,i),has:(e,t)=>!!Gy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function oS(n){const e=n.getComponent();return e?.type==="VERSION"}const $f="@firebase/app",Qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Sp("@firebase/app"),aS="@firebase/app-compat",lS="@firebase/analytics-compat",uS="@firebase/analytics",cS="@firebase/app-check-compat",hS="@firebase/app-check",dS="@firebase/auth",fS="@firebase/auth-compat",pS="@firebase/database",mS="@firebase/data-connect",gS="@firebase/database-compat",yS="@firebase/functions",_S="@firebase/functions-compat",vS="@firebase/installations",wS="@firebase/installations-compat",ES="@firebase/messaging",TS="@firebase/messaging-compat",IS="@firebase/performance",SS="@firebase/performance-compat",RS="@firebase/remote-config",AS="@firebase/remote-config-compat",CS="@firebase/storage",kS="@firebase/storage-compat",PS="@firebase/firestore",NS="@firebase/vertexai-preview",xS="@firebase/firestore-compat",bS="firebase",OS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",DS={[$f]:"fire-core",[aS]:"fire-core-compat",[uS]:"fire-analytics",[lS]:"fire-analytics-compat",[hS]:"fire-app-check",[cS]:"fire-app-check-compat",[dS]:"fire-auth",[fS]:"fire-auth-compat",[pS]:"fire-rtdb",[mS]:"fire-data-connect",[gS]:"fire-rtdb-compat",[yS]:"fire-fn",[_S]:"fire-fn-compat",[vS]:"fire-iid",[wS]:"fire-iid-compat",[ES]:"fire-fcm",[TS]:"fire-fcm-compat",[IS]:"fire-perf",[SS]:"fire-perf-compat",[RS]:"fire-rc",[AS]:"fire-rc-compat",[CS]:"fire-gcs",[kS]:"fire-gcs-compat",[PS]:"fire-fst",[xS]:"fire-fst-compat",[NS]:"fire-vertex","fire-js":"fire-js",[bS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new Map,LS=new Map,Wf=new Map;function Jy(n,e){try{n.container.addComponent(e)}catch(t){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cs(n){const e=n.name;if(Wf.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,n);for(const t of vl.values())Jy(t,n);for(const t of LS.values())Jy(t,n);return!0}function Vl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vi=new Dl("app","Firebase",VS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=OS;function rw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Vi.create("bad-app-name",{appName:String(o)});if(t||(t=Xv()),!t)throw Vi.create("no-options");const a=vl.get(o);if(a){if(jo(t,a.options)&&jo(i,a.config))return a;throw Vi.create("duplicate-app",{appName:o})}const u=new $I(o);for(const f of Wf.values())u.addComponent(f);const d=new MS(t,i,u);return vl.set(o,d),d}function ah(n=qf){const e=vl.get(n);if(!e&&n===qf&&Xv())return rw();if(!e)throw Vi.create("no-app",{appName:n});return e}function FS(){return Array.from(vl.values())}function pr(n,e,t){var i;let o=(i=DS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(d.join(" "));return}Cs(new Bi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebase-heartbeat-database",jS=1,wl="firebase-heartbeat-store";let wf=null;function iw(){return wf||(wf=nS(US,jS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vi.create("idb-open",{originalErrorMessage:n.message})})),wf}async function BS(n){try{const t=(await iw()).transaction(wl),i=await t.objectStore(wl).get(sw(n));return await t.done,i}catch(e){if(e instanceof Er)Kr.warn(e.message);else{const t=Vi.create("idb-get",{originalErrorMessage:e?.message});Kr.warn(t.message)}}}async function Yy(n,e){try{const i=(await iw()).transaction(wl,"readwrite");await i.objectStore(wl).put(e,sw(n)),await i.done}catch(t){if(t instanceof Er)Kr.warn(t.message);else{const i=Vi.create("idb-set",{originalErrorMessage:t?.message});Kr.warn(i.message)}}}function sw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=1024,$S=720*60*60*1e3;class qS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Xy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=$S}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Kr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xy(),{heartbeatsToSend:i,unsentEntries:o}=WS(this._heartbeatsCache.heartbeats),a=Uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Kr.warn(t),""}}}function Xy(){return new Date().toISOString().substring(0,10)}function WS(n,e=zS){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Zy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class HS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xI()?bI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zy(n){return Uc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){Cs(new Bi("platform-logger",e=>new sS(e),"PRIVATE")),Cs(new Bi("heartbeat",e=>new qS(e),"PRIVATE")),pr($f,Qy,n),pr($f,Qy,"esm2017"),pr("fire-js","")}KS("");function Ap(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GS=ow,aw=new Dl("auth","Firebase",ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Sp("@firebase/auth");function QS(n,...e){jc.logLevel<=je.WARN&&jc.warn(`Auth (${Ls}): ${n}`,...e)}function Ic(n,...e){jc.logLevel<=je.ERROR&&jc.error(`Auth (${Ls}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(n,...e){throw Cp(n,...e)}function mr(n,...e){return Cp(n,...e)}function lw(n,e,t){const i=Object.assign(Object.assign({},GS()),{[e]:t});return new Dl("auth","Firebase",i).create(e,{appName:n.name})}function Wr(n){return lw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return aw.create(n,...e)}function Ce(n,e,...t){if(!n)throw Cp(e,...t)}function zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ic(e),new Error(e)}function Gr(n,e){n||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JS(){return e_()==="http:"||e_()==="https:"}function e_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JS()||CI()||"connection"in navigator)?navigator.onLine:!0}function XS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=SI()||kI()}get(){return YS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n,e){Gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Ml(3e4,6e4);function Zr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ei(n,e,t,i,o={}){return cw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Ll(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:f},a);return AI()||(y.referrerPolicy="no-referrer"),uw.fetch()(hw(n,n.config.apiHost,t,d),y)})}async function cw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},ZS),e);try{const o=new nR(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw mc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,y]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw mc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw mc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw mc(n,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw lw(n,_,y);Xn(n,_)}}catch(o){if(o instanceof Er)throw o;Xn(n,"network-request-failed",{message:String(o)})}}async function Fl(n,e,t,i,o={}){const a=await ei(n,e,t,i,o);return"mfaPendingCredential"in a&&Xn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function hw(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?kp(n.config,o):`${n.config.apiScheme}://${o}`}function tR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),eR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=mr(n,e,i);return o.customData._tokenResponse=t,o}function t_(n){return n!==void 0&&n.enterprise!==void 0}class rR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iR(n,e){return ei(n,"GET","/v2/recaptchaConfig",Zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(n,e){return ei(n,"POST","/v1/accounts:delete",e)}async function dw(n,e){return ei(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oR(n,e=!1){const t=vt(n),i=await t.getIdToken(e),o=Pp(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:fl(Ef(o.auth_time)),issuedAtTime:fl(Ef(o.iat)),expirationTime:fl(Ef(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ef(n){return Number(n)*1e3}function Pp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const o=Qv(t);return o?JSON.parse(o):(Ic("Failed to decode base64 JWT payload"),null)}catch(o){return Ic("Caught error parsing JWT payload as JSON",o?.toString()),null}}function n_(n){const e=Pp(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Er&&aR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await El(n,dw(t,{idToken:i}));Ce(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?fw(a.providerUserInfo):[],d=cR(n.providerData,u),f=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!d?.length,_=f?y:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Kf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function uR(n){const e=vt(n);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function fw(n){return n.map(e=>{var{providerId:t}=e,i=Ap(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e){const t=await cw(n,{},async()=>{const i=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=hw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",uw.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dR(n,e){return ei(n,"POST","/v2/accounts:revokeToken",Zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=n_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await hR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Vo;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Kf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await El(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oR(this,e)}reload(){return uR(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Bc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(Wr(this.auth));const e=await this.getIdToken();return await El(this,sR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,f,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,V=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,C=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,te=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ne,emailVerified:G,isAnonymous:K,providerData:Z,stsTokenManager:k}=t;Ce(ne&&k,e,"internal-error");const I=Vo.fromJSON(this.name,k);Ce(typeof ne=="string",e,"internal-error"),ki(E,e.name),ki(S,e.name),Ce(typeof G=="boolean",e,"internal-error"),Ce(typeof K=="boolean",e,"internal-error"),ki(V,e.name),ki(x,e.name),ki(M,e.name),ki(C,e.name),ki(Y,e.name),ki(te,e.name);const A=new $r({uid:ne,auth:e,email:S,emailVerified:G,displayName:E,isAnonymous:K,photoURL:x,phoneNumber:V,tenantId:M,stsTokenManager:I,createdAt:Y,lastLoginAt:te});return Z&&Array.isArray(Z)&&(A.providerData=Z.map(b=>Object.assign({},b))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new Vo;o.updateFromServerResponse(t);const a=new $r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Bc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?fw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new Vo;d.updateFromIdToken(i);const f=new $r({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Kf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,y),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function qr(n){Gr(n instanceof Function,"Expected a class definition");let e=r_.get(n);return e?(Gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,r_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pw.type="NONE";const i_=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(n,e,t){return`firebase:${n}:${e}:${t}`}class Mo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Sc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Sc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Mo(qr(i_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||qr(i_);const u=Sc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(u);if(_){const E=$r._fromJSON(e,_);y!==a&&(d=E),a=y;break}}catch{}const f=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Mo(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new Mo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ww(e))return"Blackberry";if(Ew(e))return"Webos";if(gw(e))return"Safari";if((e.includes("chrome/")||yw(e))&&!e.includes("edge/"))return"Chrome";if(vw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function mw(n=Jt()){return/firefox\//i.test(n)}function gw(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yw(n=Jt()){return/crios\//i.test(n)}function _w(n=Jt()){return/iemobile/i.test(n)}function vw(n=Jt()){return/android/i.test(n)}function ww(n=Jt()){return/blackberry/i.test(n)}function Ew(n=Jt()){return/webos/i.test(n)}function Np(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fR(n=Jt()){var e;return Np(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pR(){return PI()&&document.documentMode===10}function Tw(n=Jt()){return Np(n)||vw(n)||Ew(n)||ww(n)||/windows phone/i.test(n)||_w(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n,e=[]){let t;switch(n){case"Browser":t=s_(Jt());break;case"Worker":t=`${s_(Jt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ls}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e={}){return ei(n,"GET","/v2/passwordPolicy",Zr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class _R{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:yR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new mR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dw(this,{idToken:e}),i=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(Wr(this));const t=e?vt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(Wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(Wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gR(this),t=new _R(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qr(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&QS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Hi(n){return vt(n)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=MI(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wR(n){lh=n}function Sw(n){return lh.loadJS(n)}function ER(){return lh.recaptchaEnterpriseScript}function TR(){return lh.gapiScript}function IR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const SR="recaptcha-enterprise",RR="NO_RECAPTCHA";class AR{constructor(e){this.type=SR,this.auth=Hi(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{iR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new rR(f);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(f=>{d(f)})})}function o(a,u,d){const f=window.grecaptcha;t_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(RR)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&t_(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ER();f.length!==0&&(f+=d),Sw(f).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function a_(n,e,t,i=!1){const o=new AR(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function zc(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await a_(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await a_(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n,e){const t=Vl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(jo(a,e??{}))return o;Xn(o,"already-initialized")}return t.initialize({options:e})}function kR(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(qr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function PR(n,e,t){const i=Hi(n);Ce(i._canInitEmulator,i,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Rw(e),{host:u,port:d}=NR(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),xR()}function Rw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NR(n){const e=Rw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:l_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:l_(u)}}}function l_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}async function bR(n,e){return ei(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e){return Fl(n,"POST","/v1/accounts:signInWithPassword",Zr(n,e))}async function DR(n,e){return ei(n,"POST","/v1/accounts:sendOobCode",Zr(n,e))}async function LR(n,e){return DR(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){return Fl(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))}async function MR(n,e){return Fl(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends xp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Tl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Tl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,t,"signInWithPassword",OR);case"emailLink":return VR(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,i,"signUpPassword",bR);case"emailLink":return MR(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(n,e){return Fl(n,"POST","/v1/accounts:signInWithIdp",Zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="http://localhost";class ks extends xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Ap(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new ks(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Fo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Fo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fo(e,t)}buildRequest(){const e={requestUri:FR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jR(n){const e=al(ll(n)).link,t=e?al(ll(e)).deep_link_id:null,i=al(ll(n)).deep_link_id;return(i?al(ll(i)).link:null)||i||t||e||n}class bp{constructor(e){var t,i,o,a,u,d;const f=al(ll(e)),y=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,E=UR((o=f.mode)!==null&&o!==void 0?o:null);Ce(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=jR(e);try{return new bp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,t){return Tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=bp.parseLink(t);return Ce(i,"argument-error"),Tl._fromEmailAndCode(e,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends Aw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Ul{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ks._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ni.credential(t,i)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Ul{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Ul{constructor(){super("twitter.com")}static credential(e,t){return ks._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return bi.credential(t,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(n,e){return Fl(n,"POST","/v1/accounts:signUp",Zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await $r._fromIdTokenResponse(e,i,o),u=u_(i);return new Ps({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=u_(i);return new Ps({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function u_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Er{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new $c(e,t,i,o)}}function Cw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(n,a,e,i):a})}async function zR(n,e,t=!1){const i=await El(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ps._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(n,e,t=!1){const{auth:i}=n;if(fr(i.app))return Promise.reject(Wr(i));const o="reauthenticate";try{const a=await El(n,Cw(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Pp(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),Ps._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Xn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(n,e,t=!1){if(fr(n.app))return Promise.reject(Wr(n));const i="signIn",o=await Cw(n,i,e),a=await Ps._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function qR(n,e){return kw(Hi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pw(n){const e=Hi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WR(n,e,t){const i=Hi(n);await zc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",LR)}async function HR(n,e,t){if(fr(n.app))return Promise.reject(Wr(n));const i=Hi(n),u=await zc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BR).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Pw(n),f}),d=await Ps._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function KR(n,e,t){return fr(n.app)?Promise.reject(Wr(n)):qR(vt(n),Yo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Pw(n),i})}function GR(n,e,t,i){return vt(n).onIdTokenChanged(e,t,i)}function QR(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}function JR(n,e,t,i){return vt(n).onAuthStateChanged(e,t,i)}function YR(n){return vt(n).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,ZR=10;class xw extends Nw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);pR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xw.type="LOCAL";const eA=xw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends Nw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bw.type="SESSION";const Ow=bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new uh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),f=await tA(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const y=Op("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function rA(n){gr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function iA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function oA(){return Dw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",aA=1,Wc="firebaseLocalStorage",Vw="fbase_key";class jl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ch(n,e){return n.transaction([Wc],e?"readwrite":"readonly").objectStore(Wc)}function lA(){const n=indexedDB.deleteDatabase(Lw);return new jl(n).toPromise()}function Gf(){const n=indexedDB.open(Lw,aA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Wc,{keyPath:Vw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Wc)?e(i):(i.close(),await lA(),e(await Gf()))})})}async function c_(n,e,t){const i=ch(n,!0).put({[Vw]:e,value:t});return new jl(i).toPromise()}async function uA(n,e){const t=ch(n,!1).get(e),i=await new jl(t).toPromise();return i===void 0?null:i.value}function h_(n,e){const t=ch(n,!0).delete(e);return new jl(t).toPromise()}const cA=800,hA=3;class Mw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>hA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(oA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await iA(),!this.activeServiceWorker)return;this.sender=new nA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gf();return await c_(e,qc,"1"),await h_(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>c_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>uA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>h_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ch(o,!1).getAll();return new jl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mw.type="LOCAL";const dA=Mw;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,e){return e?qr(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pA(n){return kw(n.auth,new Dp(n),n.bypassAuthState)}function mA(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),$R(t,new Dp(n),n.bypassAuthState)}async function gA(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),zR(t,new Dp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pA;case"linkViaPopup":case"linkViaRedirect":return gA;case"reauthViaPopup":case"reauthViaRedirect":return mA;default:Xn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new Ml(2e3,1e4);class Do extends Fw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yA.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="pendingRedirect",Rc=new Map;class vA extends Fw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Rc.get(this.auth._key());if(!e){try{const i=await wA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rc.set(this.auth._key(),e)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wA(n,e){const t=IA(e),i=TA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function EA(n,e){Rc.set(n._key(),e)}function TA(n){return qr(n._redirectPersistence)}function IA(n){return Sc(_A,n.config.apiKey,n.name)}async function SA(n,e,t=!1){if(fr(n.app))return Promise.reject(Wr(n));const i=Hi(n),o=fA(i,e),u=await new vA(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=600*1e3;class AA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Uw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RA&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Uw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function CA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(n,e={}){return ei(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NA=/^https?/;async function xA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kA(n);for(const t of e)try{if(bA(t))return}catch{}Xn(n,"unauthorized-domain")}function bA(n){const e=Hf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!NA.test(t))return!1;if(PA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Ml(3e4,6e4);function f_(){const n=gr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DA(n){return new Promise((e,t)=>{var i,o,a;function u(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),t(mr(n,"network-request-failed"))},timeout:OA.get()})}if(!((o=(i=gr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=gr().gapi)===null||a===void 0)&&a.load)u();else{const d=IR("iframefcb");return gr()[d]=()=>{gapi.load?u():t(mr(n,"network-request-failed"))},Sw(`${TR()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Ac=null,e})}let Ac=null;function LA(n){return Ac=Ac||DA(n),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Ml(5e3,15e3),MA="__/auth/iframe",FA="emulator/auth/iframe",UA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BA(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?kp(e,FA):`https://${n.config.authDomain}/${MA}`,i={apiKey:e.apiKey,appName:n.name,v:Ls},o=jA.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ll(i).slice(1)}`}async function zA(n){const e=await LA(n),t=gr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:BA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=mr(n,"network-request-failed"),d=gr().setTimeout(()=>{a(u)},VA.get());function f(){gr().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qA=500,WA=600,HA="_blank",KA="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GA(n,e,t,i=qA,o=WA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},$A),{width:i.toString(),height:o.toString(),top:a,left:u}),y=Jt().toLowerCase();t&&(d=yw(y)?HA:t),mw(y)&&(e=e||KA,f.scrollbars="yes");const _=Object.entries(f).reduce((S,[V,x])=>`${S}${V}=${x},`,"");if(fR(y)&&d!=="_self")return QA(e||"",d),new p_(null);const E=window.open(e||"",d,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new p_(E)}function QA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="__/auth/handler",YA="emulator/auth/handler",XA=encodeURIComponent("fac");async function m_(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ls,eventId:o};if(e instanceof Aw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",VI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Ul){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),y=f?`#${XA}=${encodeURIComponent(f)}`:"";return`${ZA(n)}?${Ll(d).slice(1)}${y}`}function ZA({config:n}){return n.emulator?kp(n,YA):`https://${n.authDomain}/${JA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="webStorageSupport";class eC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=SA,this._overrideRedirectResult=EA}async _openPopup(e,t,i,o){var a;Gr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await m_(e,t,i,Hf(),o);return GA(e,u,Op())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await m_(e,t,i,Hf(),o);return rA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Gr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await zA(e),i=new AA(e);return t.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tf,{type:Tf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[Tf];u!==void 0&&t(!!u),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tw()||gw()||Np()}}const tC=eC;var g_="@firebase/auth",y_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iC(n){Cs(new Bi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iw(n)},y=new vR(i,o,a,f);return kR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Cs(new Bi("auth-internal",e=>{const t=Hi(e.getProvider("auth").getImmediate());return(i=>new nC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(g_,y_,rC(n)),pr(g_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=300,oC=Zv("authIdTokenMaxAge")||sC;let __=null;const aC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>oC)return;const o=t?.token;__!==o&&(__=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lC(n=ah()){const e=Vl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=CR(n,{popupRedirectResolver:tC,persistence:[dA,eA,Ow]}),i=Zv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=aC(a.toString());QR(t,u,()=>u(t.currentUser)),GR(t,d=>u(d))}}const o=Jv("auth");return o&&PR(t,`http://${o}`),t}function uC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=mr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",uC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iC("Browser");var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,jw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(b,O,D){for(var R=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)R[ge-2]=arguments[ge];return I.prototype[O].apply(b,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,A){A||(A=0);var b=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)b[O]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(O=0;16>O;++O)b[O]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],O=k.g[2];var D=k.g[3],R=I+(D^A&(O^D))+b[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=D+(O^I&(A^O))+b[1]+3905402710&4294967295,D=I+(R<<12&4294967295|R>>>20),R=O+(A^D&(I^A))+b[2]+606105819&4294967295,O=D+(R<<17&4294967295|R>>>15),R=A+(I^O&(D^I))+b[3]+3250441966&4294967295,A=O+(R<<22&4294967295|R>>>10),R=I+(D^A&(O^D))+b[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=D+(O^I&(A^O))+b[5]+1200080426&4294967295,D=I+(R<<12&4294967295|R>>>20),R=O+(A^D&(I^A))+b[6]+2821735955&4294967295,O=D+(R<<17&4294967295|R>>>15),R=A+(I^O&(D^I))+b[7]+4249261313&4294967295,A=O+(R<<22&4294967295|R>>>10),R=I+(D^A&(O^D))+b[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=D+(O^I&(A^O))+b[9]+2336552879&4294967295,D=I+(R<<12&4294967295|R>>>20),R=O+(A^D&(I^A))+b[10]+4294925233&4294967295,O=D+(R<<17&4294967295|R>>>15),R=A+(I^O&(D^I))+b[11]+2304563134&4294967295,A=O+(R<<22&4294967295|R>>>10),R=I+(D^A&(O^D))+b[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=D+(O^I&(A^O))+b[13]+4254626195&4294967295,D=I+(R<<12&4294967295|R>>>20),R=O+(A^D&(I^A))+b[14]+2792965006&4294967295,O=D+(R<<17&4294967295|R>>>15),R=A+(I^O&(D^I))+b[15]+1236535329&4294967295,A=O+(R<<22&4294967295|R>>>10),R=I+(O^D&(A^O))+b[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=D+(A^O&(I^A))+b[6]+3225465664&4294967295,D=I+(R<<9&4294967295|R>>>23),R=O+(I^A&(D^I))+b[11]+643717713&4294967295,O=D+(R<<14&4294967295|R>>>18),R=A+(D^I&(O^D))+b[0]+3921069994&4294967295,A=O+(R<<20&4294967295|R>>>12),R=I+(O^D&(A^O))+b[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=D+(A^O&(I^A))+b[10]+38016083&4294967295,D=I+(R<<9&4294967295|R>>>23),R=O+(I^A&(D^I))+b[15]+3634488961&4294967295,O=D+(R<<14&4294967295|R>>>18),R=A+(D^I&(O^D))+b[4]+3889429448&4294967295,A=O+(R<<20&4294967295|R>>>12),R=I+(O^D&(A^O))+b[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=D+(A^O&(I^A))+b[14]+3275163606&4294967295,D=I+(R<<9&4294967295|R>>>23),R=O+(I^A&(D^I))+b[3]+4107603335&4294967295,O=D+(R<<14&4294967295|R>>>18),R=A+(D^I&(O^D))+b[8]+1163531501&4294967295,A=O+(R<<20&4294967295|R>>>12),R=I+(O^D&(A^O))+b[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=D+(A^O&(I^A))+b[2]+4243563512&4294967295,D=I+(R<<9&4294967295|R>>>23),R=O+(I^A&(D^I))+b[7]+1735328473&4294967295,O=D+(R<<14&4294967295|R>>>18),R=A+(D^I&(O^D))+b[12]+2368359562&4294967295,A=O+(R<<20&4294967295|R>>>12),R=I+(A^O^D)+b[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=D+(I^A^O)+b[8]+2272392833&4294967295,D=I+(R<<11&4294967295|R>>>21),R=O+(D^I^A)+b[11]+1839030562&4294967295,O=D+(R<<16&4294967295|R>>>16),R=A+(O^D^I)+b[14]+4259657740&4294967295,A=O+(R<<23&4294967295|R>>>9),R=I+(A^O^D)+b[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=D+(I^A^O)+b[4]+1272893353&4294967295,D=I+(R<<11&4294967295|R>>>21),R=O+(D^I^A)+b[7]+4139469664&4294967295,O=D+(R<<16&4294967295|R>>>16),R=A+(O^D^I)+b[10]+3200236656&4294967295,A=O+(R<<23&4294967295|R>>>9),R=I+(A^O^D)+b[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=D+(I^A^O)+b[0]+3936430074&4294967295,D=I+(R<<11&4294967295|R>>>21),R=O+(D^I^A)+b[3]+3572445317&4294967295,O=D+(R<<16&4294967295|R>>>16),R=A+(O^D^I)+b[6]+76029189&4294967295,A=O+(R<<23&4294967295|R>>>9),R=I+(A^O^D)+b[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=D+(I^A^O)+b[12]+3873151461&4294967295,D=I+(R<<11&4294967295|R>>>21),R=O+(D^I^A)+b[15]+530742520&4294967295,O=D+(R<<16&4294967295|R>>>16),R=A+(O^D^I)+b[2]+3299628645&4294967295,A=O+(R<<23&4294967295|R>>>9),R=I+(O^(A|~D))+b[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=D+(A^(I|~O))+b[7]+1126891415&4294967295,D=I+(R<<10&4294967295|R>>>22),R=O+(I^(D|~A))+b[14]+2878612391&4294967295,O=D+(R<<15&4294967295|R>>>17),R=A+(D^(O|~I))+b[5]+4237533241&4294967295,A=O+(R<<21&4294967295|R>>>11),R=I+(O^(A|~D))+b[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=D+(A^(I|~O))+b[3]+2399980690&4294967295,D=I+(R<<10&4294967295|R>>>22),R=O+(I^(D|~A))+b[10]+4293915773&4294967295,O=D+(R<<15&4294967295|R>>>17),R=A+(D^(O|~I))+b[1]+2240044497&4294967295,A=O+(R<<21&4294967295|R>>>11),R=I+(O^(A|~D))+b[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=D+(A^(I|~O))+b[15]+4264355552&4294967295,D=I+(R<<10&4294967295|R>>>22),R=O+(I^(D|~A))+b[6]+2734768916&4294967295,O=D+(R<<15&4294967295|R>>>17),R=A+(D^(O|~I))+b[13]+1309151649&4294967295,A=O+(R<<21&4294967295|R>>>11),R=I+(O^(A|~D))+b[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=D+(A^(I|~O))+b[11]+3174756917&4294967295,D=I+(R<<10&4294967295|R>>>22),R=O+(I^(D|~A))+b[2]+718787259&4294967295,O=D+(R<<15&4294967295|R>>>17),R=A+(D^(O|~I))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+D&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,b=this.B,O=this.h,D=0;D<I;){if(O==0)for(;D<=A;)o(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<I;)if(b[O++]=k.charCodeAt(D++),O==this.blockSize){o(this,b),O=0;break}}else for(;D<I;)if(b[O++]=k[D++],O==this.blockSize){o(this,b),O=0;break}}this.h=O,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var b=0;32>b;b+=8)k[A++]=this.g[I]>>>b&255;return k};function a(k,I){var A=d;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function u(k,I){this.h=I;for(var A=[],b=!0,O=k.length-1;0<=O;O--){var D=k[O]|0;b&&D==I||(A[O]=D,b=!1)}this.g=A}var d={};function f(k){return-128<=k&&128>k?a(k,function(I){return new u([I|0],0>I?-1:0)}):new u([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return C(y(-k));for(var I=[],A=1,b=0;k>=A;b++)I[b]=k/A|0,A*=4294967296;return new u(I,0)}function _(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return C(_(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(I,8)),b=E,O=0;O<k.length;O+=8){var D=Math.min(8,k.length-O),R=parseInt(k.substring(O,O+D),I);8>D?(D=y(Math.pow(I,D)),b=b.j(D).add(y(R))):(b=b.j(A),b=b.add(y(R)))}return b}var E=f(0),S=f(1),V=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-C(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var b=this.i(A);k+=(0<=b?b:4294967296+b)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(M(this))return"-"+C(this).toString(k);for(var I=y(Math.pow(k,6)),A=this,b="";;){var O=G(A,I).g;A=Y(A,O.j(I));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=O,x(A))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=Y(this,k),M(k)?-1:x(k)?0:1};function C(k){for(var I=k.g.length,A=[],b=0;b<I;b++)A[b]=~k.g[b];return new u(A,~k.h).add(S)}n.abs=function(){return M(this)?C(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],b=0,O=0;O<=I;O++){var D=b+(this.i(O)&65535)+(k.i(O)&65535),R=(D>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);b=R>>>16,D&=65535,R&=65535,A[O]=R<<16|D}return new u(A,A[A.length-1]&-2147483648?-1:0)};function Y(k,I){return k.add(C(I))}n.j=function(k){if(x(this)||x(k))return E;if(M(this))return M(k)?C(this).j(C(k)):C(C(this).j(k));if(M(k))return C(this.j(C(k)));if(0>this.l(V)&&0>k.l(V))return y(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],b=0;b<2*I;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var O=0;O<k.g.length;O++){var D=this.i(b)>>>16,R=this.i(b)&65535,ge=k.i(O)>>>16,qe=k.i(O)&65535;A[2*b+2*O]+=R*qe,te(A,2*b+2*O),A[2*b+2*O+1]+=D*qe,te(A,2*b+2*O+1),A[2*b+2*O+1]+=R*ge,te(A,2*b+2*O+1),A[2*b+2*O+2]+=D*ge,te(A,2*b+2*O+2)}for(b=0;b<I;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=I;b<2*I;b++)A[b]=0;return new u(A,0)};function te(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function ne(k,I){this.g=k,this.h=I}function G(k,I){if(x(I))throw Error("division by zero");if(x(k))return new ne(E,E);if(M(k))return I=G(C(k),I),new ne(C(I.g),C(I.h));if(M(I))return I=G(k,C(I)),new ne(C(I.g),I.h);if(30<k.g.length){if(M(k)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var A=S,b=I;0>=b.l(k);)A=K(A),b=K(b);var O=Z(A,1),D=Z(b,1);for(b=Z(b,2),A=Z(A,2);!x(b);){var R=D.add(b);0>=R.l(k)&&(O=O.add(A),D=R),b=Z(b,1),A=Z(A,1)}return I=Y(k,O.j(I)),new ne(O,I)}for(O=E;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=y(A),R=D.j(I);M(R)||0<R.l(k);)A-=b,D=y(A),R=D.j(I);x(D)&&(D=S),O=O.add(D),k=Y(k,R)}return new ne(O,k)}n.A=function(k){return G(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],b=0;b<I;b++)A[b]=this.i(b)&k.i(b);return new u(A,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],b=0;b<I;b++)A[b]=this.i(b)|k.i(b);return new u(A,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],b=0;b<I;b++)A[b]=this.i(b)^k.i(b);return new u(A,this.h^k.h)};function K(k){for(var I=k.g.length+1,A=[],b=0;b<I;b++)A[b]=k.i(b)<<1|k.i(b-1)>>>31;return new u(A,k.h)}function Z(k,I){var A=I>>5;I%=32;for(var b=k.g.length-A,O=[],D=0;D<b;D++)O[D]=0<I?k.i(D+A)>>>I|k.i(D+A+1)<<32-I:k.i(D+A);return new u(O,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,jw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=_,Rs=u}).apply(typeof v_<"u"?v_:typeof self<"u"?self:typeof window<"u"?window:{});var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bw,ul,zw,Cc,Qf,$w,qw,Ww;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gc=="object"&&gc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var v=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var j=c[T];if(!(j in v))break e;v=v[j]}c=c[c.length-1],T=v[c],m=m(T),m!=T&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var v=0,T=!1,j={next:function(){if(!T&&v<c.length){var H=v++;return{value:m(H,c[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function E(c,m,v){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function S(c,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function V(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function x(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(T,j,H){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return m.prototype[j].apply(T,ce)}}function M(c){const m=c.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=c[T];return v}return[]}function C(c,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(f(T)){const j=c.length||0,H=T.length||0;c.length=j+H;for(let ce=0;ce<H;ce++)c[j+ce]=T[ce]}else c.push(T)}}class Y{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function te(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var K=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Z(c,m,v){for(const T in c)m.call(v,c[T],T,c)}function k(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function I(c){const m={};for(const v in c)m[v]=c[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,m){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)c[v]=T[v];for(let H=0;H<A.length;H++)v=A[H],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function O(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function D(c){d.setTimeout(()=>{throw c},0)}function R(){var c=we;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ge{constructor(){this.h=this.g=null}add(m,v){const T=qe.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var qe=new Y(()=>new Fe,c=>c.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,ae=!1,we=new ge,he=()=>{const c=d.Promise.resolve(void 0);Ve=()=>{c.then(U)}};var U=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(v){D(v)}var m=qe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}ae=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return c})();function xe(c,m){if(ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(K){e:{try{G(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:X[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}x(xe,ye);var X={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),le=0;function Te(c,m,v,T,j){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=j,this.key=++le,this.da=this.fa=!1}function Je(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function nt(c){this.src=c,this.g={},this.h=0}nt.prototype.add=function(c,m,v,T,j){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var ce=xt(c,m,T,j);return-1<ce?(m=c[ce],v||(m.fa=!1)):(m=new Te(m,this.src,H,!!T,j),m.fa=v,c.push(m)),m};function ht(c,m){var v=m.type;if(v in c.g){var T=c.g[v],j=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=j)&&Array.prototype.splice.call(T,j,1),H&&(Je(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function xt(c,m,v,T){for(var j=0;j<c.length;++j){var H=c[j];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return j}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),Ir={};function Sr(c,m,v,T,j){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Sr(c,m[H],v,T,j);return null}return v=ua(v),c&&c[oe]?c.K(m,v,y(T)?!!T.capture:!1,j):Sn(c,m,v,!1,T,j)}function Sn(c,m,v,T,j,H){if(!m)throw Error("Invalid event type");var ce=y(j)?!!j.capture:!!j,Ke=js(c);if(Ke||(c[pn]=Ke=new nt(c)),v=Ke.add(m,v,T,ce,H),v.proxy)return v;if(T=Gi(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)Pe||(j=ce),j===void 0&&(j=!1),c.addEventListener(m.toString(),T,j);else if(c.attachEvent)c.attachEvent(Ar(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gi(){function c(v){return m.call(c.src,c.listener,v)}const m=la;return c}function Us(c,m,v,T,j){if(Array.isArray(m))for(var H=0;H<m.length;H++)Us(c,m[H],v,T,j);else T=y(T)?!!T.capture:!!T,v=ua(v),c&&c[oe]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],v=xt(H,v,T,j),-1<v&&(Je(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=js(c))&&(m=c.g[m.toString()],c=-1,m&&(c=xt(m,v,T,j)),(v=-1<c?m[c]:null)&&Rr(v))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[oe])ht(m.i,c);else{var v=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(v,T,c.capture):m.detachEvent?m.detachEvent(Ar(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=js(m))?(ht(v,c),v.h==0&&(v.src=null,m[pn]=null)):Je(c)}}}function Ar(c){return c in Ir?Ir[c]:Ir[c]="on"+c}function la(c,m){if(c.da)c=!0;else{m=new xe(m,this);var v=c.listener,T=c.ha||c.src;c.fa&&Rr(c),c=v.call(T,m)}return c}function js(c){return c=c[pn],c instanceof nt?c:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ua(c){return typeof c=="function"?c:(c[Bs]||(c[Bs]=function(m){return c.handleEvent(m)}),c[Bs])}function wt(){Q.call(this),this.i=new nt(this),this.M=this,this.F=null}x(wt,Q),wt.prototype[oe]=!0,wt.prototype.removeEventListener=function(c,m,v,T){Us(this,c,m,v,T)};function Et(c,m){var v,T=c.F;if(T)for(v=[];T;T=T.F)v.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new ye(m,c);else if(m instanceof ye)m.target=m.target||c;else{var j=m;m=new ye(T,c),b(m,j)}if(j=!0,v)for(var H=v.length-1;0<=H;H--){var ce=m.g=v[H];j=Cr(ce,T,!0,m)&&j}if(ce=m.g=c,j=Cr(ce,T,!0,m)&&j,j=Cr(ce,T,!1,m)&&j,v)for(H=0;H<v.length;H++)ce=m.g=v[H],j=Cr(ce,T,!1,m)&&j}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],T=0;T<v.length;T++)Je(v[T]);delete c.g[m],c.h--}}this.F=null},wt.prototype.K=function(c,m,v,T){return this.i.add(String(c),m,!1,v,T)},wt.prototype.L=function(c,m,v,T){return this.i.add(String(c),m,!0,v,T)};function Cr(c,m,v,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,H=0;H<m.length;++H){var ce=m[H];if(ce&&!ce.da&&ce.capture==v){var Ke=ce.listener,Tt=ce.ha||ce.src;ce.fa&&ht(c.i,ce),j=Ke.call(Tt,T)!==!1&&j}}return j&&!T.defaultPrevented}function ca(c,m,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function ii(c){c.g=ca(()=>{c.g=null,c.i&&(c.i=!1,ii(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Qi extends Q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(c){Q.call(this),this.h=c,this.g={}}x(Ji,Q);var ha=[];function da(c){Z(c.g,function(m,v){this.g.hasOwnProperty(v)&&Rr(m)},c),c.g={}}Ji.prototype.N=function(){Ji.aa.N.call(this),da(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fa=d.JSON.stringify,pa=d.JSON.parse,ma=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Yi(){}Yi.prototype.h=null;function zs(c){return c.h||(c.h=c.i())}function $s(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){ye.call(this,"d")}x(tr,ye);function qs(){ye.call(this,"c")}x(qs,ye);var nr={},ga=null;function Xi(){return ga=ga||new wt}nr.La="serverreachability";function ya(c){ye.call(this,nr.La,c)}x(ya,ye);function kr(c){const m=Xi();Et(m,new ya(m))}nr.STAT_EVENT="statevent";function _a(c,m){ye.call(this,nr.STAT_EVENT,c),this.stat=m}x(_a,ye);function dt(c){const m=Xi();Et(m,new _a(m,c))}nr.Ma="timingevent";function Ws(c,m){ye.call(this,nr.Ma,c),this.size=m}x(Ws,ye);function Vn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function es(c,m,v,T,j,H){c.info(function(){if(c.g)if(H)for(var ce="",Ke=H.split("&"),Tt=0;Tt<Ke.length;Tt++){var Be=Ke[Tt].split("=");if(1<Be.length){var At=Be[0];Be=Be[1];var mt=At.split("_");ce=2<=mt.length&&mt[1]=="type"?ce+(At+"="+Be+"&"):ce+(At+"=redacted&")}}else ce=null;else ce=H;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+v+`
`+ce})}function Hs(c,m,v,T,j,H,ce){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+v+`
`+H+" "+ce})}function Mn(c,m,v,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Fh(c,v)+(T?" "+T:"")})}function va(c,m){c.info(function(){return"TIMEOUT: "+m})}Zi.prototype.info=function(){};function Fh(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var T=v[c];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ce=1;ce<j.length;ce++)j[ce]=""}}}}return fa(v)}catch{return m}}var Ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function ts(){}x(ts,Yi),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Fn=new ts;function Un(c,m,v,T){this.j=c,this.i=m,this.l=v,this.R=T||1,this.U=new Ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tu}function tu(){this.i=null,this.g="",this.h=!1}var wa={},Gs={};function Qs(c,m,v){c.L=1,c.v=ui(gn(m)),c.m=v,c.P=!0,Ea(c,null)}function Ea(c,m){c.F=Date.now(),Ye(c),c.A=gn(c.v);var v=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),hi(v.i,"t",T),c.C=0,v=c.j.J,c.h=new tu,c.g=vu(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Qi(S(c.Y,c,c.g),c.O)),m=c.U,v=c.g,T=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(ha[0]=j.toString()),j=ha);for(var H=0;H<j.length;H++){var ce=Sr(v,j[H],T||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),kr(),es(c.i,c.u,c.A,c.l,c.R,c.m)}Un.prototype.ca=function(c){c=c.target;const m=this.M;m&&nn(c)==3?m.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{const mt=nn(this.g);var m=this.g.Ba();const kn=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Ca(this.g)))){this.J||mt!=4||m==7||(m==8||0>=kn?kr(3):kr(2)),ns(this);var v=this.g.Z();this.X=v;t:if(nu(this)){var T=Ca(this.g);c="";var j=T.length,H=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),si(this);var ce="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(H&&m==j-1)});T.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,Hs(this.i,this.u,this.A,this.l,this.R,mt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ke)){var Be=Ke;break t}}Be=null}if(v=Be)Mn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ta(this,v);else{this.o=!1,this.s=3,dt(12),An(this),si(this);break e}}if(this.P){v=!0;let _n;for(;!this.J&&this.C<ce.length;)if(_n=Uh(this,ce),_n==Gs){mt==4&&(this.s=4,dt(14),v=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==wa){this.s=4,dt(15),Mn(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else Mn(this.i,this.l,_n,null),Ta(this,_n);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||ce.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)Mn(this.i,this.l,ce,"[Invalid Chunked Response]"),An(this),si(this);else if(0<ce.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Pa(At),At.M=!0,dt(11))}}else Mn(this.i,this.l,ce,null),Ta(this,ce);mt==4&&An(this),this.o&&!this.J&&(mt==4?oo(this.j,this):(this.o=!1,Ye(this)))}else to(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),An(this),si(this)}}}catch{}finally{}};function nu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Uh(c,m){var v=c.C,T=m.indexOf(`
`,v);return T==-1?Gs:(v=Number(m.substring(v,T)),isNaN(v)?wa:(T+=1,T+v>m.length?Gs:(m=m.slice(T,T+v),c.C=T+v,m)))}Un.prototype.cancel=function(){this.J=!0,An(this)};function Ye(c){c.S=Date.now()+c.I,ru(c,c.I)}function ru(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Vn(S(c.ba,c),m)}function ns(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Un.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(va(this.i,this.A),this.L!=2&&(kr(),dt(17)),An(this),this.s=2,si(this)):ru(this,this.S-c)};function si(c){c.j.G==0||c.J||oo(c.j,c)}function An(c){ns(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,da(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Ta(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||Yt(v.h,c))){if(!c.K&&Yt(v.h,c)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)so(v),qn(v);else break e;io(v),dt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Vn(S(v.Za,v),6e3));if(1>=su(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Or(v,11)}else if((c.K||v.g==c)&&so(v),!te(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Be=j[m];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const At=Be[3];At!=null&&(v.la=At,v.j.info("VER="+v.la));const mt=Be[4];mt!=null&&(v.Aa=mt,v.j.info("SVER="+v.Aa));const kn=Be[5];kn!=null&&typeof kn=="number"&&0<kn&&(T=1.5*kn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const _n=c.g;if(_n){const us=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var H=T.h;H.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ia(H,H.h),H.h=null))}if(T.D){const lo=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(T.ya=lo,Qe(T.I,T.D,lo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ce=c;if(T.qa=_u(T,T.J?T.ia:null,T.W),ce.K){ou(T.h,ce);var Ke=ce,Tt=T.L;Tt&&(Ke.I=Tt),Ke.B&&(ns(Ke),Ye(Ke)),T.g=ce}else ls(T);0<v.i.length&&or(v)}else Be[0]!="stop"&&Be[0]!="close"||Or(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Or(v,7):Ot(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}kr(4)}catch{}}var iu=class{constructor(c,m){this.g=c,this.map=m}};function rs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function su(c){return c.h?1:c.g?c.g.size:0}function Yt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Ia(c,m){c.g?c.g.add(m):c.h=m}function ou(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}rs.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return M(c.i)}function Js(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var m=[],v=c.length,T=0;T<v;T++)m.push(c[T]);return m}m=[],v=0;for(T in c)m[v++]=c[T];return m}function Ys(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const T in c)m[v++]=T;return m}}}function oi(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=Ys(c),T=Js(c),j=T.length,H=0;H<j;H++)m.call(void 0,T[H],v&&v[H],c)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jh(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var T=c[v].indexOf("="),j=null;if(0<=T){var H=c[v].substring(0,T);j=c[v].substring(T+1)}else H=c[v];m(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Pr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pr){this.h=c.h,ss(this,c.j),this.o=c.o,this.g=c.g,ai(this,c.s),this.l=c.l;var m=c.i,v=new rr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),li(this,v),this.m=c.m}else c&&(m=String(c).match(is))?(this.h=!1,ss(this,m[1]||"",!0),this.o=Ue(m[2]||""),this.g=Ue(m[3]||"",!0),ai(this,m[4]),this.l=Ue(m[5]||"",!0),li(this,m[6]||"",!0),this.m=Ue(m[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Pr.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ci(m,Xs,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ci(m,Xs,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ci(v,v.charAt(0)=="/"?cu:uu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ci(v,Sa)),c.join("")};function gn(c){return new Pr(c)}function ss(c,m,v){c.j=v?Ue(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ai(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function li(c,m,v){m instanceof rr?(c.i=m,ir(c.i,c.h)):(v||(m=ci(m,hu)),c.i=new rr(m,c.h))}function Qe(c,m,v){c.i.set(m,v)}function ui(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ue(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ci(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,lu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xs=/[#\/\?@]/g,uu=/[#\?:]/g,cu=/[#\?]/g,hu=/[#\?@]/g,Sa=/#/g;function rr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function bt(c){c.g||(c.g=new Map,c.h=0,c.i&&jh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=rr.prototype,n.add=function(c,m){bt(this),this.i=null,c=Cn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function jn(c,m){bt(c),m=Cn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Bn(c,m){return bt(c),m=Cn(c,m),c.g.has(m)}n.forEach=function(c,m){bt(this),this.g.forEach(function(v,T){v.forEach(function(j){c.call(m,j,T,this)},this)},this)},n.na=function(){bt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const j=c[T];for(let H=0;H<j.length;H++)v.push(m[T])}return v},n.V=function(c){bt(this);let m=[];if(typeof c=="string")Bn(this,c)&&(m=m.concat(this.g.get(Cn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},n.set=function(c,m){return bt(this),this.i=null,c=Cn(this,c),Bn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function hi(c,m,v){jn(c,m),0<v.length&&(c.i=null,c.g.set(Cn(c,m),M(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const H=encodeURIComponent(String(T)),ce=this.V(T);for(T=0;T<ce.length;T++){var j=H;ce[T]!==""&&(j+="="+encodeURIComponent(String(ce[T]))),c.push(j)}}return this.i=c.join("&")};function Cn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function ir(c,m){m&&!c.j&&(bt(c),c.i=null,c.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(jn(this,T),hi(this,j,v))},c)),c.j=m}function Bh(c,m){const v=new Zi;if(d.Image){const T=new Image;T.onload=V(tn,v,"TestLoadImage: loaded",!0,m,T),T.onerror=V(tn,v,"TestLoadImage: error",!1,m,T),T.onabort=V(tn,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=V(tn,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function du(c,m){const v=new Zi,T=new AbortController,j=setTimeout(()=>{T.abort(),tn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout(j),H.ok?tn(v,"TestPingServer: ok",!0,m):tn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),tn(v,"TestPingServer: error",!1,m)})}function tn(c,m,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function zh(){this.g=new ma}function fu(c,m,v){const T=v||"";try{oi(c,function(j,H){let ce=j;y(j)&&(ce=fa(j)),m.push(T+H+"="+encodeURIComponent(ce))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function Nr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Nr,Yi),Nr.prototype.g=function(){return new os(this.l,this.j)},Nr.prototype.i=(function(c){return function(){return c}})({});function os(c,m){wt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(os,wt),n=os.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,$n(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function pu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?zn(this):$n(this),this.readyState==3&&pu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,zn(this))},n.Qa=function(c){this.g&&(this.response=c,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$n(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function $n(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xr(c){let m="";return Z(c,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function di(c,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=xr(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Qe(c,m,v))}function rt(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(rt,wt);var $h=/^https?$/i,Ra=["POST","PUT"];n=rt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?zs(this.o):zs(Fn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){as(this,H);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),j=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ra,m,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ce]of v)this.g.setRequestHeader(H,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){as(this,H)}};function as(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Zs(c),yn(c)}function Zs(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Aa(this):this.bb())},n.bb=function(){Aa(this)};function Aa(c){if(c.h&&typeof u<"u"&&(!c.v[1]||nn(c)!=4||c.Z()!=2)){if(c.u&&nn(c)==4)ca(c.Ea,0,c);else if(Et(c,"readystatechange"),nn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ce===0){var j=String(c.D).match(is)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!$h.test(j?j.toLowerCase():"")}v=T}if(v)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var H=2<nn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Zs(c)}}finally{yn(c)}}}}function yn(c,m){if(c.g){eo(c);const v=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Et(c,"ready");try{v.onreadystatechange=T}catch{}}}function eo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function nn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),pa(m)}};function Ca(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function to(c){const m={};c=(c.g&&2<=nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(te(c[T]))continue;var v=O(c[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[j]||[];m[j]=H,H.push(v)}k(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function ka(c){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,c),this.cb=sr("retryDelaySeedMs",1e4,c),this.Wa=sr("forwardChannelMaxRetries",2,c),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(c&&c.concurrentRequestLimit),this.Da=new zh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ka.prototype,n.la=8,n.G=1,n.connect=function(c,m,v,T){dt(0),this.W=c,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=_u(this,null,this.W),or(this)};function Ot(c){if(no(c),c.G==3){var m=c.U++,v=gn(c.I);if(Qe(v,"SID",c.K),Qe(v,"RID",m),Qe(v,"TYPE","terminate"),br(c,v),m=new Un(c,c.j,m),m.L=2,m.v=ui(gn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=vu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ye(m)}yu(c)}function qn(c){c.g&&(Pa(c),c.g.cancel(),c.g=null)}function no(c){qn(c),c.u&&(d.clearTimeout(c.u),c.u=null),so(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function or(c){if(!mn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ve||he(),ae||(Ve(),ae=!0),we.add(m,c),c.B=0}}function qh(c,m){return su(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Vn(S(c.Ga,c,m),gu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Un(this,this.j,c);let H=this.o;if(this.S&&(H?(H=I(H),b(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=fi(this,j,m),v=gn(this.I),Qe(v,"RID",c),Qe(v,"CVER",22),this.D&&Qe(v,"X-HTTP-Session-Id",this.D),br(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(xr(H)))+"&"+m:this.m&&di(v,this.m,H)),Ia(this.h,j),this.Ua&&Qe(v,"TYPE","init"),this.P?(Qe(v,"$req",m),Qe(v,"SID","null"),j.T=!0,Qs(j,v,null)):Qs(j,v,m),this.G=2}}else this.G==3&&(c?ro(this,c):this.i.length==0||mn(this.h)||ro(this))};function ro(c,m){var v;m?v=m.l:v=c.U++;const T=gn(c.I);Qe(T,"SID",c.K),Qe(T,"RID",v),Qe(T,"AID",c.T),br(c,T),c.m&&c.o&&di(T,c.m,c.o),v=new Un(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=fi(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ia(c.h,v),Qs(v,T,m)}function br(c,m){c.H&&Z(c.H,function(v,T){Qe(m,T,v)}),c.l&&oi({},function(v,T){Qe(m,T,v)})}function fi(c,m,v){v=Math.min(c.i.length,v);var T=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let H=-1;for(;;){const ce=["count="+v];H==-1?0<v?(H=j[0].g,ce.push("ofs="+H)):H=0:ce.push("ofs="+H);let Ke=!0;for(let Tt=0;Tt<v;Tt++){let Be=j[Tt].g;const At=j[Tt].map;if(Be-=H,0>Be)H=Math.max(0,j[Tt].g-100),Ke=!1;else try{fu(At,ce,"req"+Be+"_")}catch{T&&T(At)}}if(Ke){T=ce.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,T}function ls(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ve||he(),ae||(Ve(),ae=!0),we.add(m,c),c.v=0}}function io(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Vn(S(c.Fa,c),gu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Vn(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),qn(this),mu(this))};function Pa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function mu(c){c.g=new Un(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=gn(c.qa);Qe(m,"RID","rpc"),Qe(m,"SID",c.K),Qe(m,"AID",c.T),Qe(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(m,"TO",c.ja),Qe(m,"TYPE","xmlhttp"),br(c,m),c.m&&c.o&&di(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ui(gn(m)),v.m=null,v.P=!0,Ea(v,c)}n.Za=function(){this.C!=null&&(this.C=null,qn(this),io(this),dt(19))};function so(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function oo(c,m){var v=null;if(c.g==m){so(c),Pa(c),c.g=null;var T=2}else if(Yt(c.h,m))v=m.D,ou(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;T=Xi(),Et(T,new Ws(T,v)),or(c)}else ls(c);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&qh(c,m)||T==2&&io(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),j){case 1:Or(c,5);break;case 4:Or(c,10);break;case 3:Or(c,6);break;default:Or(c,2)}}}function gu(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function Or(c,m){if(c.j.info("Error code "+m),m==2){var v=S(c.fb,c),T=c.Xa;const j=!T;T=new Pr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ss(T,"https"),ui(T),j?Bh(T.toString(),v):du(T.toString(),v)}else dt(2);c.G=0,c.l&&c.l.sa(m),yu(c),no(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function yu(c){if(c.G=0,c.ka=[],c.l){const m=au(c.h);(m.length!=0||c.i.length!=0)&&(C(c.ka,m),C(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function _u(c,m,v){var T=v instanceof Pr?gn(v):new Pr(v);if(T.g!="")m&&(T.g=m+"."+T.g),ai(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var H=new Pr(null);T&&ss(H,T),m&&(H.g=m),j&&ai(H,j),v&&(H.l=v),T=H}return v=c.D,m=c.ya,v&&m&&Qe(T,v,m),Qe(T,"VER",c.la),br(c,T),T}function vu(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new rt(new Nr({eb:v})):new rt(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Na(){}n=Na.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ao(){}ao.prototype.g=function(c,m){return new Xt(c,m)};function Xt(c,m){wt.call(this),this.g=new ka(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!te(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!te(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ar(this)}x(Xt,wt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Ot(this.g)},Xt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=fa(c),c=v);m.i.push(new iu(m.Ya++,c)),m.G==3&&or(m)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Xt.aa.N.call(this)};function wu(c){tr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}x(wu,tr);function Eu(){qs.call(this),this.status=1}x(Eu,qs);function ar(c){this.g=c}x(ar,Na),ar.prototype.ua=function(){Et(this.g,"a")},ar.prototype.ta=function(c){Et(this.g,new wu(c))},ar.prototype.sa=function(c){Et(this.g,new Eu)},ar.prototype.ra=function(){Et(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Ww=function(){return new ao},qw=function(){return Xi()},$w=nr,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,Cc=Ks,eu.COMPLETE="complete",zw=eu,$s.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,ul=$s,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Bw=rt}).apply(typeof gc<"u"?gc:typeof self<"u"?self:typeof window<"u"?window:{});const w_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Sp("@firebase/firestore");function tl(){return Ns.logLevel}function ve(n,...e){if(Ns.logLevel<=je.DEBUG){const t=e.map(Lp);Ns.debug(`Firestore (${Xo}): ${n}`,...t)}}function Qr(n,...e){if(Ns.logLevel<=je.ERROR){const t=e.map(Lp);Ns.error(`Firestore (${Xo}): ${n}`,...t)}}function Bo(n,...e){if(Ns.logLevel<=je.WARN){const t=e.map(Lp);Ns.warn(`Firestore (${Xo}): ${n}`,...t)}}function Lp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+n;throw Qr(e),new Error(e)}function Ge(n,e){n||Ne()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class hC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dC{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ge(typeof i.accessToken=="string"),new Hw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Ht(e)}}class fC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new fC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ge(this.o===void 0);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ge(typeof t.token=="string"),this.R=t.token,new mC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=yC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function zo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Rt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Rt(0,0))}static max(){return new be(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(),i===void 0?i=e.length-t:i>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Il.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Il?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tt extends Il{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const _C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Il{construct(e,t,i){return new Ft(e,t,i)}static isValidIdentifier(e){return _C.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(tt.fromString(e))}static fromName(e){return new Ie(tt.fromString(e).popFirst(5))}static empty(){return new Ie(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new tt(e.slice()))}}function vC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new Rt(t+1,0):new Rt(t,i));return new zi(o,Ie.empty(),e)}function wC(n){return new zi(n.readTime,n.key,-1)}class zi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new zi(be.min(),Ie.empty(),-1)}static max(){return new zi(be.max(),Ie.empty(),-1)}}function EC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==TC)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(f=>i(f)))})),u=!0,a===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((o=>o?ie.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const y=f;t(e[y]).next((_=>{u[y]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new ie(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function SC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vp.oe=-1;function hh(n){return n==null}function Hc(n){return n===0&&1/n==-1/0}function RC(n){return typeof n=="number"&&Number.isInteger(n)&&!Hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=a??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new T_(this.data.getIterator())}getIteratorFrom(e){return new T_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class T_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new Ut(Ft.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Qw("Invalid base64 string: "+a):a}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const AC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(Ge(!!n),typeof n=="string"){let e=0;const t=AC.exec(n);if(Ge(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Fp(n){const e=n.mapValue.fields.__previous_value__;return Mp(e)?Fp(e):e}function Sl(n){const e=$i(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,i,o,a,u,d,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=y}}class Rl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c={mapValue:{}};function bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:PC(n)?9007199254740991:kC(n)?10:11:Ne()}function vr(n,e){if(n===e)return!0;const t=bs(n);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=$i(o.timestampValue),d=$i(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return xs(o.bytesValue).isEqual(xs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return pt(o.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return pt(o.integerValue)===pt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=pt(o.doubleValue),d=pt(a.doubleValue);return u===d?Hc(u)===Hc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(E_(u)!==E_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!vr(u[f],d[f])))return!1;return!0})(n,e);default:return Ne()}}function Al(n,e){return(n.values||[]).find((t=>vr(t,e)))!==void 0}function $o(n,e){if(n===e)return 0;const t=bs(n),i=bs(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=pt(a.integerValue||a.doubleValue),f=pt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return I_(n.timestampValue,e.timestampValue);case 4:return I_(Sl(n),Sl(e));case 5:return He(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=xs(a),f=xs(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let y=0;y<d.length&&y<f.length;y++){const _=He(d[y],f[y]);if(_!==0)return _}return He(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=He(pt(a.latitude),pt(u.latitude));return d!==0?d:He(pt(a.longitude),pt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return S_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,y,_;const E=a.fields||{},S=u.fields||{},V=(d=E.value)===null||d===void 0?void 0:d.arrayValue,x=(f=S.value)===null||f===void 0?void 0:f.arrayValue,M=He(((y=V?.values)===null||y===void 0?void 0:y.length)||0,((_=x?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:S_(V,x)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===_c.mapValue&&u===_c.mapValue)return 0;if(a===_c.mapValue)return 1;if(u===_c.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),y=u.fields||{},_=Object.keys(y);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const S=He(f[E],_[E]);if(S!==0)return S;const V=$o(d[f[E]],y[_[E]]);if(V!==0)return V}return He(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Ne()}}function I_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=$i(n),i=$i(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function S_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=$o(t[o],i[o]);if(a)return a}return He(t.length,i.length)}function qo(n){return Jf(n)}function Jf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=$i(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Jf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Jf(t.fields[u])}`;return o+"}"})(n.mapValue):Ne()}function R_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yf(n){return!!n&&"integerValue"in n}function Up(n){return!!n&&"arrayValue"in n}function A_(n){return!!n&&"nullValue"in n}function C_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kc(n){return!!n&&"mapValue"in n}function kC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=pl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!kc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=Ft.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=pl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());kc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];kc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Vs(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new cn(pl(this.value))}}function Jw(n){const e=[];return Vs(n.fields,((t,i)=>{const o=new Ft([t]);if(kc(i)){const a=Jw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Kt(e,0,be.min(),be.min(),be.min(),cn.empty(),0)}static newFoundDocument(e,t,i,o){return new Kt(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new Kt(e,2,t,be.min(),be.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,be.min(),be.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.position=e,this.inclusive=t}}function k_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ie.comparator(Ie.fromName(u.referenceValue),t.key):i=$o(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function P_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t="asc"){this.field=e,this.dir=t}}function NC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{}class _t extends Yw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new bC(e,t,i):t==="array-contains"?new LC(e,i):t==="in"?new VC(e,i):t==="not-in"?new MC(e,i):t==="array-contains-any"?new FC(e,i):new _t(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new OC(e,i):new DC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($o(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends Yw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Zn(e,t)}matches(e){return Xw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xw(n){return n.op==="and"}function Zw(n){return xC(n)&&Xw(n)}function xC(n){for(const e of n.filters)if(e instanceof Zn)return!1;return!0}function Xf(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(Zw(n))return n.filters.map((e=>Xf(e))).join(",");{const e=n.filters.map((t=>Xf(t))).join(",");return`${n.op}(${e})`}}function eE(n,e){return n instanceof _t?(function(i,o){return o instanceof _t&&i.op===o.op&&i.field.isEqual(o.field)&&vr(i.value,o.value)})(n,e):n instanceof Zn?(function(i,o){return o instanceof Zn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&eE(u,o.filters[d])),!0):!1})(n,e):void Ne()}function tE(n){return n instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(n):n instanceof Zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(tE).join(" ,")+"}"})(n):"Filter"}class bC extends _t{constructor(e,t,i){super(e,t,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class OC extends _t{constructor(e,t){super(e,"in",t),this.keys=nE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class DC extends _t{constructor(e,t){super(e,"not-in",t),this.keys=nE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function nE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ie.fromName(i.referenceValue)))}class LC extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Up(t)&&Al(t.arrayValue,this.value)}}class VC extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}}class MC extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Al(this.value.arrayValue,t)}}class FC extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Up(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Al(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function N_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new UC(n,e,t,i,o,a,u)}function jp(n){const e=Oe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Xf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>qo(i))).join(",")),e.ue=t}return e.ue}function Bp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P_(n.startAt,e.startAt)&&P_(n.endAt,e.endAt)}function Zf(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jC(n,e,t,i,o,a,u,d){return new Zo(n,e,t,i,o,a,u,d)}function dh(n){return new Zo(n)}function x_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rE(n){return n.collectionGroup!==null}function ml(n){const e=Oe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ut(Ft.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Cl(a,i))})),t.has(Ft.keyField().canonicalString())||e.ce.push(new Cl(Ft.keyField(),i))}return e.ce}function yr(n){const e=Oe(n);return e.le||(e.le=BC(e,ml(n))),e.le}function BC(n,e){if(n.limitType==="F")return N_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Cl(o.field,a)}));const t=n.endAt?new Kc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Kc(n.startAt.position,n.startAt.inclusive):null;return N_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ep(n,e){const t=n.filters.concat([e]);return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gc(n,e,t){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fh(n,e){return Bp(yr(n),yr(e))&&n.limitType===e.limitType}function iE(n){return`${jp(yr(n))}|lt:${n.limitType}`}function No(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>tE(o))).join(", ")}]`),hh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${i})`})(yr(n))}; limitType=${n.limitType})`}function ph(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ie.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of ml(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,f){const y=k_(u,d,f);return u.inclusive?y<=0:y<0})(i.startAt,ml(i),o)||i.endAt&&!(function(u,d,f){const y=k_(u,d,f);return u.inclusive?y>=0:y>0})(i.endAt,ml(i),o))})(n,e)}function zC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sE(n){return(e,t)=>{let i=!1;for(const o of ml(n)){const a=$C(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function $C(n,e,t){const i=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),y=d.data.field(a);return f!==null&&y!==null?$o(f,y):Ne()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new lt(Ie.comparator);function Jr(){return qC}const oE=new lt(Ie.comparator);function cl(...n){let e=oE;for(const t of n)e=e.insert(t.key,t);return e}function aE(n){let e=oE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Is(){return gl()}function lE(){return gl()}function gl(){return new ea((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WC=new lt(Ie.comparator),HC=new Ut(Ie.comparator);function Me(...n){let e=HC;for(const t of n)e=e.add(t);return e}const KC=new Ut(He);function GC(){return KC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function uE(n){return{integerValue:""+n}}function QC(n,e){return RC(e)?uE(e):zp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this._=void 0}}function JC(n,e,t){return n instanceof kl?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Mp(a)&&(a=Fp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Pl?hE(n,e):n instanceof Wo?dE(n,e):(function(o,a){const u=cE(o,a),d=b_(u)+b_(o.Pe);return Yf(u)&&Yf(o.Pe)?uE(d):zp(o.serializer,d)})(n,e)}function YC(n,e,t){return n instanceof Pl?hE(n,e):n instanceof Wo?dE(n,e):t}function cE(n,e){return n instanceof Qc?(function(i){return Yf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class kl extends mh{}class Pl extends mh{constructor(e){super(),this.elements=e}}function hE(n,e){const t=fE(e);for(const i of n.elements)t.some((o=>vr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Wo extends mh{constructor(e){super(),this.elements=e}}function dE(n,e){let t=fE(e);for(const i of n.elements)t=t.filter((o=>!vr(o,i)));return{arrayValue:{values:t}}}class Qc extends mh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function b_(n){return pt(n.integerValue||n.doubleValue)}function fE(n){return Up(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.field=e,this.transform=t}}function XC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Pl&&o instanceof Pl||i instanceof Wo&&o instanceof Wo?zo(i.elements,o.elements,vr):i instanceof Qc&&o instanceof Qc?vr(i.Pe,o.Pe):i instanceof kl&&o instanceof kl})(n.transform,e.transform)}class ZC{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gh{}function mE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $p(n.key,Ln.none()):new $l(n.key,n.data,Ln.none());{const t=n.data,i=cn.empty();let o=new Ut(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ki(n.key,i,new Tn(o.toArray()),Ln.none())}}function ek(n,e,t){n instanceof $l?(function(o,a,u){const d=o.value.clone(),f=D_(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ki?(function(o,a,u){if(!Pc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=D_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(gE(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function yl(n,e,t,i){return n instanceof $l?(function(a,u,d,f){if(!Pc(a.precondition,u))return d;const y=a.value.clone(),_=L_(a.fieldTransforms,f,u);return y.setAll(_),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ki?(function(a,u,d,f){if(!Pc(a.precondition,u))return d;const y=L_(a.fieldTransforms,f,u),_=u.data;return _.setAll(gE(a)),_.setAll(y),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Pc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function tk(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=cE(i.transform,o||null);a!=null&&(t===null&&(t=cn.empty()),t.set(i.field,a))}return t||null}function O_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&zo(i,o,((a,u)=>XC(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $l extends gh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ki extends gh{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function gE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function D_(n,e,t){const i=new Map;Ge(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,YC(u,d,t[o]))}return i}function L_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,JC(a,u,e))}return i}class $p extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nk extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&ek(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=lE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=mE(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>O_(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>O_(t,i)))}}class qp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ge(e.mutations.length===i.length);let o=(function(){return WC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new qp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,ze;function ok(n){switch(n){default:return Ne();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function yE(n){if(n===void 0)return Qr("GRPC error has no .code"),J.UNKNOWN;switch(n){case yt.OK:return J.OK;case yt.CANCELLED:return J.CANCELLED;case yt.UNKNOWN:return J.UNKNOWN;case yt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case yt.INTERNAL:return J.INTERNAL;case yt.UNAVAILABLE:return J.UNAVAILABLE;case yt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case yt.NOT_FOUND:return J.NOT_FOUND;case yt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case yt.ABORTED:return J.ABORTED;case yt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case yt.DATA_LOSS:return J.DATA_LOSS;default:return Ne()}}(ze=yt||(yt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Rs([4294967295,4294967295],0);function V_(n){const e=ak().encode(n),t=new jw;return t.update(e),new Uint8Array(t.digest())}function M_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rs([t,i],0),new Rs([o,a],0)]}class Wp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(i<0)throw new hl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Rs.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(Rs.fromNumber(i)));return o.compare(lk)===1&&(o=new Rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=V_(e),[i,o]=M_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Wp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=V_(e),[i,o]=M_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yh(be.min(),o,new lt(He),Jr(),Me())}}class ql{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ql(i,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class _E{constructor(e,t){this.targetId=e,this.me=t}}class vE{constructor(e,t,i=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class F_{constructor(){this.fe=0,this.ge=j_(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),i=Me();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne()}})),new ql(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=j_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=U_(),this.Qe=new lt(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ne()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Zf(a))if(i===0){const u=new Ie(a.path);this.Ue(t,u,Kt.newNoDocument(u,be.min()))}else Ge(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),f=d?this.Xe(d,e,u):1;if(f!==0){this.je(t);const y=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=xs(i).toUint8Array()}catch(f){if(f instanceof Qw)return Bo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Wp(u,o,a)}catch(f){return Bo(f instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&Zf(d.target)){const f=new Ie(d.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Kt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let i=Me();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const y=this.Je(f);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new yh(e,t,this.Qe,this.ke,i);return this.ke=Jr(),this.qe=U_(),this.Qe=new lt(He),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new F_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ut(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new F_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function U_(){return new lt(Ie.comparator)}function j_(){return new lt(Ie.comparator)}const ck={asc:"ASCENDING",desc:"DESCENDING"},hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dk={and:"AND",or:"OR"};class fk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tp(n,e){return n.useProto3Json||hh(e)?e:{value:e}}function Jc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pk(n,e){return Jc(n,e.toTimestamp())}function _r(n){return Ge(!!n),be.fromTimestamp((function(t){const i=$i(t);return new Rt(i.seconds,i.nanos)})(n))}function Hp(n,e){return np(n,e).canonicalString()}function np(n,e){const t=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function EE(n){const e=tt.fromString(n);return Ge(AE(e)),e}function rp(n,e){return Hp(n.databaseId,e.path)}function If(n,e){const t=EE(e);if(t.get(1)!==n.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(IE(t))}function TE(n,e){return Hp(n.databaseId,e)}function mk(n){const e=EE(n);return e.length===4?tt.emptyPath():IE(e)}function ip(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IE(n){return Ge(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function B_(n,e,t){return{name:rp(n,e),fields:t.value.mapValue.fields}}function gk(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,_){return y.useProto3Json?(Ge(_===void 0||typeof _=="string"),jt.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),jt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const _=y.code===void 0?J.UNKNOWN:yE(y.code);return new de(_,y.message||"")})(u);t=new vE(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=If(n,i.document.name),a=_r(i.document.updateTime),u=i.document.createTime?_r(i.document.createTime):be.min(),d=new cn({mapValue:{fields:i.document.fields}}),f=Kt.newFoundDocument(o,a,u,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Nc(y,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=If(n,i.document),a=i.readTime?_r(i.readTime):be.min(),u=Kt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Nc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=If(n,i.document),a=i.removedTargetIds||[];t=new Nc([],a,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new sk(o,a),d=i.targetId;t=new _E(d,u)}}return t}function yk(n,e){let t;if(e instanceof $l)t={update:B_(n,e.key,e.value)};else if(e instanceof $p)t={delete:rp(n,e.key)};else if(e instanceof Ki)t={update:B_(n,e.key,e.data),updateMask:Ak(e.fieldMask)};else{if(!(e instanceof nk))return Ne();t={verify:rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof kl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Wo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Ne()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:pk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne()})(n,e.precondition)),t}function _k(n,e){return n&&n.length>0?(Ge(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?_r(o.updateTime):_r(a);return u.isEqual(be.min())&&(u=_r(a)),new ZC(u,o.transformResults||[])})(t,e)))):[]}function vk(n,e){return{documents:[TE(n,e.path)]}}function wk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=TE(n,o);const a=(function(y){if(y.length!==0)return RE(Zn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((_=>(function(S){return{field:xo(S.field),direction:Ik(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=tp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function Ek(n){let e=mk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ge(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const S=SE(E);return S instanceof Zn&&Zw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(x){return new Cl(bo(x.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,hh(S)?null:S})(t.limit));let f=null;t.startAt&&(f=(function(E){const S=!!E.before,V=E.values||[];return new Kc(V,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,V=E.values||[];return new Kc(V,S)})(t.endAt)),jC(e,o,u,a,d,"F",f,y)}function Tk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bo(t.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bo(t.unaryFilter.field);return _t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bo(t.unaryFilter.field);return _t.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}})(n):n.fieldFilter!==void 0?(function(t){return _t.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zn.create(t.compositeFilter.filters.map((i=>SE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}})(t.compositeFilter.op))})(n):Ne()}function Ik(n){return ck[n]}function Sk(n){return hk[n]}function Rk(n){return dk[n]}function xo(n){return{fieldPath:n.canonicalString()}}function bo(n){return Ft.fromServerFormat(n.fieldPath)}function RE(n){return n instanceof _t?(function(t){if(t.op==="=="){if(C_(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(A_(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C_(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(A_(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:Sk(t.op),value:t.value}}})(n):n instanceof Zn?(function(t){const i=t.getFilters().map((o=>RE(o)));return i.length===1?i[0]:{compositeFilter:{op:Rk(t.op),filters:i}}})(n):Ne()}function Ak(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,i,o,a=be.min(),u=be.min(),d=jt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.ct=e}}function kk(n){const e=Ek({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.un=new Nk}addToCollectionParentIndex(e,t){return this.un.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(zi.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Nk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ut(tt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ut(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ho(0)}static kn(){return new Ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.changes=new ea((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&yl(i.mutation,o,Tn.empty(),Rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Me()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Me()){const o=Is();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=cl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Is();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Me())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Jr();const u=gl(),d=(function(){return gl()})();return t.forEach(((f,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ki)?a=a.insert(y.key,y):_!==void 0?(u.set(y.key,_.mutation.getFieldMask()),yl(_.mutation,y,_.mutation.getFieldMask(),Rt.now())):u.set(y.key,Tn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((y,_)=>u.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new bk(_,(E=u.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=gl();let o=new lt(((u,d)=>u-d)),a=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const y=t.get(f);if(y===null)return;let _=i.get(f)||Tn.empty();_=d.applyToLocalView(y,_),i.set(f,_);const E=(o.get(d.batchId)||Me()).add(f);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,_=f.value,E=lE();_.forEach((S=>{if(!a.has(S)){const V=mE(t.get(S),i.get(S));V!==null&&E.set(S,V),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ie.resolve(Is());let d=-1,f=a;return u.next((y=>ie.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{f=f.insert(_,S)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,f,y,Me()))).next((_=>({batchId:d,changes:aE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((i=>{let o=cl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=cl();return this.indexManager.getCollectionParents(e,a).next((d=>ie.forEach(d,(f=>{const y=(function(E,S){return new Zo(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((f,y)=>{const _=y.getKey();u.get(_)===null&&(u=u.insert(_,Kt.newInvalidDocument(_)))}));let d=cl();return u.forEach(((f,y)=>{const _=a.get(f);_!==void 0&&yl(_.mutation,y,Tn.empty(),Rt.now()),ph(t,y)&&(d=d.insert(f,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ie.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_r(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:kk(o.bundledQuery),readTime:_r(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.overlays=new lt(Ie.comparator),this.Ir=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Is();return ie.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.ht(e,t,a)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const o=Is(),a=t.length+1,u=new Ie(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new lt(((y,_)=>y-_));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=a.get(y.largestBatchId);_===null&&(_=Is(),a=a.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=Is(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return ie.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new ik(t,i));let a=this.Ir.get(t);a===void 0&&(a=Me(),this.Ir.set(t,a)),this.Ir.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.Tr=new Ut(Nt.Er),this.dr=new Ut(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Nt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Nt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new Ie(new tt([])),i=new Nt(t,e),o=new Nt(t,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ie(new tt([])),i=new Nt(t,e),o=new Nt(t,e+1);let a=Me();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Nt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ie.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ut(Nt.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new rk(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new Nt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),a=o<0?0:o;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(He);return t.forEach((o=>{const a=new Nt(o,0),u=new Nt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ie.isDocumentKey(a)||(a=a.child(""));const u=new Nt(new Ie(a),0);let d=new Ut(He);return this.br.forEachWhile((f=>{const y=f.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(f.wr)),!0)}),u),ie.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ge(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(t.mutations,(o=>{const a=new Nt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Nt(t,0),o=this.br.firstAfterOrEqual(i);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Mr=e,this.docs=(function(){return new lt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let i=Jr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Kt.newInvalidDocument(o))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Jr();const u=t.path,d=new Ie(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:y,value:{document:_}}=f.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||EC(wC(_),i)<=0||(o.has(_.key)||ph(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ne()}Or(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Uk(this)}getSize(e){return ie.resolve(this.size)}}class Uk extends xk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.persistence=e,this.Nr=new ea((t=>jp(t)),Bp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kp,this.targetCount=0,this.kr=Ho.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Kn(t),ie.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(a).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vp(0),this.Kr=!1,this.Kr=!0,this.$r=new Vk,this.referenceDelegate=e(this),this.Ur=new jk(this),this.indexManager=new Pk,this.remoteDocumentCache=(function(o){return new Fk(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new Ck(t),this.Gr=new Dk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Mk(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new zk(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return ie.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class zk extends IC{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Jr=new Kp,this.Yr=null}static Zr(e){return new Gp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,(i=>{const o=Ie.fromPath(i);return this.ei(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ie.or([()=>ie.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Me(),o=Me();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Qp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return NI()?8:SC(Jt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new $k;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(tl()<=je.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",No(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(tl()<=je.DEBUG&&ve("QueryEngine","Query:",No(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(tl()<=je.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",No(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(t))):ie.resolve())}Yi(e,t){if(x_(t))return ie.resolve(null);let i=yr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Gc(t,null,"F"),i=yr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Me(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const y=this.ts(t,d);return this.ns(t,y,u,f.readTime)?this.Yi(e,Gc(t,null,"F")):this.rs(e,y,t,f)}))))})))))}Zi(e,t,i,o){return x_(t)||o.isEqual(be.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(t,a);return this.ns(t,u,i,o)?ie.resolve(null):(tl()<=je.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(t)),this.rs(e,u,t,vC(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Ut(sE(e));return t.forEach(((o,a)=>{ph(e,a)&&(i=i.add(a))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,i){return tl()<=je.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",No(t)),this.Ji.getDocumentsMatchingQuery(e,t,zi.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new lt(He),this._s=new ea((a=>jp(a)),Bp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ok(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Hk(n,e,t,i){return new Wk(n,e,t,i)}async function CE(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=Me();for(const y of o){u.push(y.batchId);for(const _ of y.mutations)f=f.add(_.key)}for(const y of a){d.push(y.batchId);for(const _ of y.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next((y=>({hs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function Kk(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,y,_){const E=y.batch,S=E.keys();let V=ie.resolve();return S.forEach((x=>{V=V.next((()=>_.getEntry(f,x))).next((M=>{const C=y.docVersions.get(x);Ge(C!==null),M.version.compareTo(C)<0&&(E.applyToRemoteDocument(M,y),M.isValidDocument()&&(M.setReadTime(y.commitVersion),_.addEntry(M)))}))})),V.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Me();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(f=f.add(d.batch.mutations[y].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function kE(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Gk(n,e){const t=Oe(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=o.get(E);if(!S)return;d.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,E))));let V=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken(jt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,i)),o=o.insert(E,V),(function(M,C,Y){return M.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,V,_)&&d.push(t.Ur.updateTargetData(a,V))}));let f=Jr(),y=Me();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Qk(a,u,e.documentUpdates).next((_=>{f=_.Ps,y=_.Is}))),!i.isEqual(be.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ie.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,y))).next((()=>f))})).then((a=>(t.os=o,a)))}function Qk(n,e,t){let i=Me(),o=Me();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Jr();return t.forEach(((d,f)=>{const y=a.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||f.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)})),{Ps:u,Is:o}}))}function Jk(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Yk(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((a=>a?(o=a,ie.resolve(o)):t.Ur.allocateTargetId(i).next((u=>(o=new Oi(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function sp(n,e,t){const i=Oe(n),o=i.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!zl(u))throw u;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function z_(n,e,t){const i=Oe(n);let o=be.min(),a=Me();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,y,_){const E=Oe(f),S=E._s.get(_);return S!==void 0?ie.resolve(E.os.get(S)):E.Ur.getTargetData(y,_)})(i,u,yr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:Me()))).next((d=>(Xk(i,zC(e),d),{documents:d,Ts:a})))))}function Xk(n,e,t){let i=n.us.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.us.set(e,i)}class $_{constructor(){this.activeTargetIds=GC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zk{constructor(){this.so=new $_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function Sf(){return vc===null?vc=(function(){return 268435456+Math.round(2147483648*Math.random())})():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class rP extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,i,o,a,u){const d=Sf(),f=this.xo(t,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${d}:`,f,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,a,u),this.No(t,f,y,o).then((_=>(ve("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw Bo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",f,"request:",o),_}))}Lo(t,i,o,a,u,d){return this.Mo(t,i,o,a,u)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,i){const o=tP[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const a=Sf();return new Promise(((u,d)=>{const f=new Bw;f.setWithCredentials(!0),f.listenOnce(zw.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Cc.NO_ERROR:const _=f.getResponseJson();ve(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Cc.TIMEOUT:ve(Wt,`RPC '${e}' ${a} timed out`),d(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const E=f.getStatus();if(ve(Wt,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S?.error;if(V&&V.status&&V.message){const x=(function(C){const Y=C.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN})(V.status);d(new de(x,V.message))}else d(new de(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new de(J.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ve(Wt,`RPC '${e}' ${a} completed.`)}}));const y=JSON.stringify(o);ve(Wt,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=Sf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ww(),d=qw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(f.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");ve(Wt,`Creating RPC '${e}' stream ${o}: ${_}`,f);const E=u.createWebChannel(_,f);let S=!1,V=!1;const x=new nP({Io:C=>{V?ve(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(S||(ve(Wt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ve(Wt,`RPC '${e}' stream ${o} sending:`,C),E.send(C))},To:()=>E.close()}),M=(C,Y,te)=>{C.listen(Y,(ne=>{try{te(ne)}catch(G){setTimeout((()=>{throw G}),0)}}))};return M(E,ul.EventType.OPEN,(()=>{V||(ve(Wt,`RPC '${e}' stream ${o} transport opened.`),x.yo())})),M(E,ul.EventType.CLOSE,(()=>{V||(V=!0,ve(Wt,`RPC '${e}' stream ${o} transport closed`),x.So())})),M(E,ul.EventType.ERROR,(C=>{V||(V=!0,Bo(Wt,`RPC '${e}' stream ${o} transport errored:`,C),x.So(new de(J.UNAVAILABLE,"The operation could not be completed")))})),M(E,ul.EventType.MESSAGE,(C=>{var Y;if(!V){const te=C.data[0];Ge(!!te);const ne=te,G=ne.error||((Y=ne[0])===null||Y===void 0?void 0:Y.error);if(G){ve(Wt,`RPC '${e}' stream ${o} received error:`,G);const K=G.status;let Z=(function(A){const b=yt[A];if(b!==void 0)return yE(b)})(K),k=G.message;Z===void 0&&(Z=J.INTERNAL,k="Unknown error status: "+K+" with message "+G.message),V=!0,x.So(new de(Z,k)),E.close()}else ve(Wt,`RPC '${e}' stream ${o} received:`,te),x.bo(te)}})),M(d,$w.STAT_EVENT,(C=>{C.stat===Qf.PROXY?ve(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===Qf.NOPROXY&&ve(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{x.wo()}),0),x}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n){return new fk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,i,o,a,u,d,f){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Qr(t.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iP extends NE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=gk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?_r(u.readTime):be.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=ip(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Zf(f)?{documents:vk(a,f)}:{query:wk(a,f)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=wE(a,u.resumeToken);const y=tp(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=Jc(a,u.snapshotVersion.toTimestamp());const y=tp(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=Tk(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=ip(this.serializer),t.removeTarget=e,this.a_(t)}}class sP extends NE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=_k(e.writeResults,e.commitTime),i=_r(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=ip(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>yk(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,np(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(J.UNKNOWN,a.toString())}))}Lo(e,t,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,np(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class aP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qr(t),this.D_=!1):ve("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{Ms(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const y=Oe(f);y.L_.add(4),await Wl(y),y.q_.set("Unknown"),y.L_.delete(4),await vh(y)})(this))}))})),this.q_=new aP(i,o)}}async function vh(n){if(Ms(n))for(const e of n.B_)await e(!0)}async function Wl(n){for(const e of n.B_)await e(!1)}function xE(n,e){const t=Oe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Zp(t)?Xp(t):ta(t).r_()&&Yp(t,e))}function Jp(n,e){const t=Oe(n),i=ta(t);t.N_.delete(e),i.r_()&&bE(t,e),t.N_.size===0&&(i.r_()?i.o_():Ms(t)&&t.q_.set("Unknown"))}function Yp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(n).A_(e)}function bE(n,e){n.Q_.xe(e),ta(n).R_(e)}function Xp(n){n.Q_=new uk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ta(n).start(),n.q_.v_()}function Zp(n){return Ms(n)&&!ta(n).n_()&&n.N_.size>0}function Ms(n){return Oe(n).L_.size===0}function OE(n){n.Q_=void 0}async function uP(n){n.q_.set("Online")}async function cP(n){n.N_.forEach(((e,t)=>{Yp(n,e)}))}async function hP(n,e){OE(n),Zp(n)?(n.q_.M_(e),Xp(n)):n.q_.set("Unknown")}async function dP(n,e,t){if(n.q_.set("Online"),e instanceof vE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yc(n,i)}else if(e instanceof Nc?n.Q_.Ke(e):e instanceof _E?n.Q_.He(e):n.Q_.We(e),!t.isEqual(be.min()))try{const i=await kE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(y);_&&a.N_.set(y,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,y)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(jt.EMPTY_BYTE_STRING,_.snapshotVersion)),bE(a,f);const E=new Oi(_.target,f,y,_.sequenceNumber);Yp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Yc(n,i)}}async function Yc(n,e,t){if(!zl(e))throw e;n.L_.add(1),await Wl(n),n.q_.set("Offline"),t||(t=()=>kE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await vh(n)}))}function DE(n,e){return e().catch((t=>Yc(n,t,e)))}async function wh(n){const e=Oe(n),t=qi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fP(e);)try{const o=await Jk(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,pP(e,o)}catch(o){await Yc(e,o)}LE(e)&&VE(e)}function fP(n){return Ms(n)&&n.O_.length<10}function pP(n,e){n.O_.push(e);const t=qi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function LE(n){return Ms(n)&&!qi(n).n_()&&n.O_.length>0}function VE(n){qi(n).start()}async function mP(n){qi(n).p_()}async function gP(n){const e=qi(n);for(const t of n.O_)e.m_(t.mutations)}async function yP(n,e,t){const i=n.O_.shift(),o=qp.from(i,e,t);await DE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await wh(n)}async function _P(n,e){e&&qi(n).V_&&await(async function(i,o){if((function(u){return ok(u)&&u!==J.ABORTED})(o.code)){const a=i.O_.shift();qi(i).s_(),await DE(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await wh(i)}})(n,e),LE(n)&&VE(n)}async function W_(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=Ms(t);t.L_.add(3),await Wl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await vh(t)}async function vP(n,e){const t=Oe(n);e?(t.L_.delete(2),await vh(t)):e||(t.L_.add(2),await Wl(t),t.q_.set("Unknown"))}function ta(n){return n.K_||(n.K_=(function(t,i,o){const a=Oe(t);return a.w_(),new iP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:uP.bind(null,n),Ro:cP.bind(null,n),mo:hP.bind(null,n),d_:dP.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Zp(n)?Xp(n):n.q_.set("Unknown")):(await n.K_.stop(),OE(n))}))),n.K_}function qi(n){return n.U_||(n.U_=(function(t,i,o){const a=Oe(t);return a.w_(),new sP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mP.bind(null,n),mo:_P.bind(null,n),f_:gP.bind(null,n),g_:yP.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await wh(n)):(await n.U_.stop(),n.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new em(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tm(n,e){if(Qr("AsyncQueue",`${e}: ${n}`),zl(n))return new de(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ie.comparator(t.key,i.key):(t,i)=>Ie.comparator(t.key,i.key),this.keyedMap=cl(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new Uo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.W_=new lt(Ie.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ko{constructor(e,t,i,o,a,u,d,f,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ko(e,t,Uo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class EP{constructor(){this.queries=K_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Oe(t),a=o.queries;o.queries=K_(),a.forEach(((u,d)=>{for(const f of d.j_)f.onError(i)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function K_(){return new ea((n=>iE(n)),fh)}async function nm(n,e){const t=Oe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new wP,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=tm(u,`Initialization of query '${No(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&im(t)}async function rm(n,e){const t=Oe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function TP(n,e){const t=Oe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&im(t)}function IP(n,e,t){const i=Oe(n),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(t);i.queries.delete(e)}function im(n){n.Y_.forEach((e=>{e.next()}))}var op,G_;(G_=op||(op={})).ea="default",G_.Cache="cache";class sm{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.key=e}}class FE{constructor(e){this.key=e}}class SP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=sE(e),this.Ra=new Uo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new H_,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const S=o.get(_),V=ph(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),M=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let C=!1;S&&V?S.data.isEqual(V.data)?x!==M&&(i.track({type:3,doc:V}),C=!0):this.ga(S,V)||(i.track({type:2,doc:V}),C=!0,(f&&this.Aa(V,f)>0||y&&this.Aa(V,y)<0)&&(d=!0)):!S&&V?(i.track({type:0,doc:V}),C=!0):S&&!V&&(i.track({type:1,doc:S}),C=!0,(f||y)&&(d=!0)),C&&(V?(u=u.add(V),a=M?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(V,x){const M=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return M(V)-M(x)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],f=this.da.size===0&&this.current&&!o?1:0,y=f!==this.Ea;return this.Ea=f,u.length!==0||y?{snapshot:new Ko(this.query,e.Ra,a,u,e.mutatedKeys,f===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new H_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new FE(i))})),this.da.forEach((i=>{e.has(i)||t.push(new ME(i))})),t}ba(e){this.Ta=e.Ts,this.da=Me();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class AP{constructor(e){this.key=e,this.va=!1}}class CP{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new ea((d=>iE(d)),fh),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(Ie.comparator),this.Na=new Map,this.La=new Kp,this.Ba={},this.ka=new Map,this.qa=Ho.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kP(n,e,t=!0){const i=qE(n);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await UE(i,e,t,!0),o}async function PP(n,e){const t=qE(n);await UE(t,e,!0,!1)}async function UE(n,e,t,i){const o=await Yk(n.localStore,yr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await NP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&xE(n.remoteStore,o),d}async function NP(n,e,t,i,o){n.Ka=(E,S,V)=>(async function(M,C,Y,te){let ne=C.view.ma(Y);ne.ns&&(ne=await z_(M.localStore,C.query,!1).then((({documents:k})=>C.view.ma(k,ne))));const G=te&&te.targetChanges.get(C.targetId),K=te&&te.targetMismatches.get(C.targetId)!=null,Z=C.view.applyChanges(ne,M.isPrimaryClient,G,K);return J_(M,C.targetId,Z.wa),Z.snapshot})(n,E,S,V);const a=await z_(n.localStore,e,!0),u=new SP(e,a.Ts),d=u.ma(a.documents),f=ql.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,f);J_(n,t,y.wa);const _=new RP(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function xP(n,e,t){const i=Oe(n),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!fh(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Jp(i.remoteStore,o.targetId),ap(i,o.targetId)})).catch(Bl)):(ap(i,o.targetId),await sp(i.localStore,o.targetId,!0))}async function bP(n,e){const t=Oe(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Jp(t.remoteStore,i.targetId))}async function OP(n,e,t){const i=jP(n);try{const o=await(function(u,d){const f=Oe(u),y=Rt.now(),_=d.reduce(((V,x)=>V.add(x.key)),Me());let E,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let x=Jr(),M=Me();return f.cs.getEntries(V,_).next((C=>{x=C,x.forEach(((Y,te)=>{te.isValidDocument()||(M=M.add(Y))}))})).next((()=>f.localDocuments.getOverlayedDocuments(V,x))).next((C=>{E=C;const Y=[];for(const te of d){const ne=tk(te,E.get(te.key).overlayedDocument);ne!=null&&Y.push(new Ki(te.key,ne,Jw(ne.value.mapValue),Ln.exists(!0)))}return f.mutationQueue.addMutationBatch(V,y,Y,d)})).next((C=>{S=C;const Y=C.applyToLocalDocumentSet(E,M);return f.documentOverlayCache.saveOverlays(V,C.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:aE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let y=u.Ba[u.currentUser.toKey()];y||(y=new lt(He)),y=y.insert(d,f),u.Ba[u.currentUser.toKey()]=y})(i,o.batchId,t),await Hl(i,o.changes),await wh(i.remoteStore)}catch(o){const a=tm(o,"Failed to persist write");t.reject(a)}}async function jE(n,e){const t=Oe(n);try{const i=await Gk(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ge(u.va):o.removedDocuments.size>0&&(Ge(u.va),u.va=!1))})),await Hl(t,i,e)}catch(i){await Bl(i)}}function Q_(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=Oe(u);f.onlineState=d;let y=!1;f.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(y=!0)})),y&&im(f)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function DP(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new lt(Ie.comparator);u=u.insert(a,Kt.newNoDocument(a,be.min()));const d=Me().add(a),f=new yh(be.min(),new Map,new lt(He),u,d);await jE(i,f),i.Oa=i.Oa.remove(a),i.Na.delete(e),om(i)}else await sp(i.localStore,e,!1).then((()=>ap(i,e,t))).catch(Bl)}async function LP(n,e){const t=Oe(n),i=e.batch.batchId;try{const o=await Kk(t.localStore,e);zE(t,i,null),BE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hl(t,o)}catch(o){await Bl(o)}}async function VP(n,e,t){const i=Oe(n);try{const o=await(function(u,d){const f=Oe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return f.mutationQueue.lookupMutationBatch(y,d).next((E=>(Ge(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(y,E)))).next((()=>f.mutationQueue.performConsistencyCheck(y))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>f.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);zE(i,e,t),BE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hl(i,o)}catch(o){await Bl(o)}}function BE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function zE(n,e,t){const i=Oe(n);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||$E(n,i)}))}function $E(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Jp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),om(n))}function J_(n,e,t){for(const i of t)i instanceof ME?(n.La.addReference(i.key,e),MP(n,i)):i instanceof FE?(ve("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||$E(n,i.key)):Ne()}function MP(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ve("SyncEngine","New document in limbo: "+t),n.xa.add(i),om(n))}function om(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ie(tt.fromString(e)),i=n.qa.next();n.Na.set(i,new AP(t)),n.Oa=n.Oa.insert(t,i),xE(n.remoteStore,new Oi(yr(dh(t.path)),i,"TargetPurposeLimboResolution",Vp.oe))}}async function Hl(n,e,t){const i=Oe(n),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,f)=>{u.push(i.Ka(f,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Qp.Wi(f.targetId,y);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(f,y){const _=Oe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(y,(S=>ie.forEach(S.$i,(V=>_.persistence.referenceDelegate.addReference(E,S.targetId,V))).next((()=>ie.forEach(S.Ui,(V=>_.persistence.referenceDelegate.removeReference(E,S.targetId,V)))))))))}catch(E){if(!zl(E))throw E;ve("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const V=_.os.get(S),x=V.snapshotVersion,M=V.withLastLimboFreeSnapshotVersion(x);_.os=_.os.insert(S,M)}}})(i.localStore,a))}async function FP(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await CE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((f=>{f.reject(new de(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hl(t,i.hs)}}function UP(n,e){const t=Oe(n),i=t.Na.get(e);if(i&&i.va)return Me().add(i.key);{let o=Me();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const d=t.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function qE(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DP.bind(null,e),e.Ca.d_=TP.bind(null,e.eventManager),e.Ca.$a=IP.bind(null,e.eventManager),e}function jP(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VP.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Hk(this.persistence,new qk,e.initialUser,this.serializer)}Ga(e){return new Bk(Gp.Zr,this.serializer)}Wa(e){return new Zk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Q_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FP.bind(null,this.syncEngine),await vP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EP})()}createDatastore(e){const t=_h(e.databaseInfo.databaseId),i=(function(a){return new rP(a)})(e.databaseInfo);return(function(a,u,d,f){return new oP(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new lP(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Q_(this.syncEngine,t,0)),(function(){return q_.D()?new q_:new eP})())}createSyncEngine(e,t){return(function(o,a,u,d,f,y,_){const E=new CP(o,a,u,d,f,y);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Oe(o);ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Wl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Kw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ve("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=tm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Af(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await CE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Y_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zP(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>W_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>W_(e.remoteStore,o))),n._onlineComponents=e}async function zP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Af(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Bo("Error using user provided cache. Falling back to memory cache: "+t),await Af(n,new Xc)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Af(n,new Xc);return n._offlineComponents}async function WE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await Y_(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await Y_(n,new lp))),n._onlineComponents}function $P(n){return WE(n).then((e=>e.syncEngine))}async function Zc(n){const e=await WE(n),t=e.eventManager;return t.onListen=kP.bind(null,e.syncEngine),t.onUnlisten=xP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),t}function qP(n,e,t={}){const i=new Hr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,y){const _=new am({next:S=>{_.Za(),u.enqueueAndForget((()=>rm(a,E)));const V=S.docs.has(d);!V&&S.fromCache?y.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&f&&f.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new sm(dh(d.path),_,{includeMetadataChanges:!0,_a:!0});return nm(a,E)})(await Zc(n),n.asyncQueue,e,t,i))),i.promise}function WP(n,e,t={}){const i=new Hr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,y){const _=new am({next:S=>{_.Za(),u.enqueueAndForget((()=>rm(a,E))),S.fromCache&&f.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new sm(d,_,{includeMetadataChanges:!0,_a:!0});return nm(a,E)})(await Zc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HP(n,e,t,i){if(e===!0&&i===!0)throw new de(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z_(n){if(!Ie.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ev(n){if(Ie.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Eh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Eh(n);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KP(n,e){if(e<=0)throw new de(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new cC;switch(i.type){case"firstParty":return new pC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=X_.get(t);i&&(ve("ComponentProvider","Removing Datastore"),X_.delete(t),i.terminate())})(this),Promise.resolve()}}function GP(n,e,t,i={}){var o;const a=(n=hn(n,Th))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=Ht.MOCK_USER;else{d=ew(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ht(y)}n._authCredentials=new hC(new Hw(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Mi extends ti{constructor(e,t,i){super(e,t,dh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ie(e))}withConverter(e){return new Mi(this.firestore,e,this._path)}}function Yr(n,e,...t){if(n=vt(n),KE("collection","path",e),n instanceof Th){const i=tt.fromString(e,...t);return ev(i),new Mi(n,null,i)}{if(!(n instanceof Qt||n instanceof Mi))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return ev(i),new Mi(n.firestore,null,i)}}function Mt(n,e,...t){if(n=vt(n),arguments.length===1&&(e=Kw.newId()),KE("doc","path",e),n instanceof Th){const i=tt.fromString(e,...t);return Z_(i),new Qt(n,null,new Ie(i))}{if(!(n instanceof Qt||n instanceof Mi))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return Z_(i),new Qt(n.firestore,n instanceof Mi?n.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PE(this,"async_queue_retry"),this.Vu=()=>{const i=Rf();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Rf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Rf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Hr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zl(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw Qr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=em.createAndSchedule(this,e,t,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function rv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Xr extends Th{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new nv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,await e}}}function QP(n,e,t){t||(t="(default)");const i=Vl(n,"firestore");if(i.isInitialized(t)){const o=i.getImmediate({identifier:t}),a=i.getOptions(t);if(jo(a,e))return o;throw new de(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:t})}function JP(n,e){const t=typeof n=="object"?n:ah(),i=typeof n=="string"?n:"(default)",o=Vl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Yv("firestore");a&&GP(o,...a)}return o}function Ih(n){if(n._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YP(n),n._firestoreClient}function YP(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,f,y,_){return new CC(d,f,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,HE(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new BP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Go(jt.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Go(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=/^__.*__$/;class ZP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new $l(e,this.data,t,this.fieldTransforms)}}class GE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Rh{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QE(this.Cu)&&XP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_h(e)}Qu(e,t,i,o=!1){return new Rh({Cu:e,methodName:t,qu:i,path:Ft.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(n){const e=n._freezeSettings(),t=_h(n._databaseId);return new eN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JE(n,e,t,i,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);dm("Data must be an object, but it was:",u,i);const d=YE(i,u);let f,y;if(a.merge)f=new Tn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const S=up(e,E,t);if(!u.contains(S))throw new de(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ZE(_,S)||_.push(S)}f=new Tn(_),y=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,y=u.fieldTransforms;return new ZP(new cn(d),f,y)}class Gl extends Kl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function tN(n,e,t){return new Rh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cm extends Kl{_toFieldTransform(e){return new pE(e.path,new kl)}isEqual(e){return e instanceof cm}}class hm extends Kl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=tN(this,e,!0),i=this.Ku.map((a=>na(a,t))),o=new Wo(i);return new pE(e.path,o)}isEqual(e){return e instanceof hm&&jo(this.Ku,e.Ku)}}function nN(n,e,t,i){const o=n.Qu(1,e,t);dm("Data must be an object, but it was:",o,i);const a=[],u=cn.empty();Vs(i,((f,y)=>{const _=fm(e,f,t);y=vt(y);const E=o.Nu(_);if(y instanceof Gl)a.push(_);else{const S=na(y,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new Tn(a);return new GE(u,d,o.fieldTransforms)}function rN(n,e,t,i,o,a){const u=n.Qu(1,e,t),d=[up(e,i,t)],f=[o];if(a.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(up(e,a[S])),f.push(a[S+1]);const y=[],_=cn.empty();for(let S=d.length-1;S>=0;--S)if(!ZE(y,d[S])){const V=d[S];let x=f[S];x=vt(x);const M=u.Nu(V);if(x instanceof Gl)y.push(V);else{const C=na(x,M);C!=null&&(y.push(V),_.set(V,C))}}const E=new Tn(y);return new GE(_,E,u.fieldTransforms)}function iN(n,e,t,i=!1){return na(t,n.Qu(i?4:3,e))}function na(n,e){if(XE(n=vt(n)))return dm("Unsupported field value:",e,n),YE(n,e);if(n instanceof Kl)return(function(i,o){if(!QE(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let f=na(d,o.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return QC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Rt.fromDate(i);return{timestampValue:Jc(o.serializer,a)}}if(i instanceof Rt){const a=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jc(o.serializer,a)}}if(i instanceof lm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Go)return{bytesValue:wE(o.serializer,i._byteString)};if(i instanceof Qt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Hp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof um)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return zp(d.serializer,f)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Eh(i)}`)})(n,e)}function YE(n,e){const t={};return Gw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(n,((i,o)=>{const a=na(o,e.Mu(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function XE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof lm||n instanceof Go||n instanceof Qt||n instanceof Kl||n instanceof um)}function dm(n,e,t){if(!XE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=Eh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function up(n,e,t){if((e=vt(e))instanceof Sh)return e._internalPath;if(typeof e=="string")return fm(n,e);throw eh("Field path arguments must be of type string or ",n,!1,void 0,t)}const sN=new RegExp("[~\\*/\\[\\]]");function fm(n,e,t){if(e.search(sN)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sh(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new de(J.INVALID_ARGUMENT,d+n+f)}function ZE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ch("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oN extends e0{data(){return super.data()}}function Ch(n,e){return typeof e=="string"?fm(n,e):e instanceof Sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class mm extends pm{}function Nl(n,e,...t){let i=[];e instanceof pm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((f=>f instanceof gm)).length,d=a.filter((f=>f instanceof kh)).length;if(u>1||u>0&&d>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class kh extends mm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new kh(e,t,i)}_apply(e){const t=this._parse(e);return r0(e._query,t),new ti(e.firestore,e.converter,ep(e._query,t))}_parse(e){const t=Ah(e.firestore);return(function(a,u,d,f,y,_,E){let S;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){sv(E,_);const V=[];for(const x of E)V.push(iv(f,a,x));S={arrayValue:{values:V}}}else S=iv(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||sv(E,_),S=iN(d,u,E,_==="in"||_==="not-in");return _t.create(y,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cp(n,e,t){const i=e,o=Ch("where",n);return kh._create(o,i,t)}class gm extends pm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)r0(u,f),u=ep(u,f)})(e._query,t),new ti(e.firestore,e.converter,ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ym extends mm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ym(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cl(a,u)})(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Zo(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function n0(n,e="asc"){const t=e,i=Ch("orderBy",n);return ym._create(i,t)}class _m extends mm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new _m(e,t,i)}_apply(e){return new ti(e.firestore,e.converter,Gc(e._query,this._limit,this._limitType))}}function hp(n){return KP("limit",n),_m._create("limit",n,"F")}function iv(n,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rE(e)&&t.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!Ie.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return R_(n,new Ie(i))}if(t instanceof Qt)return R_(n,t._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eh(t)}.`)}function sv(n,e){if(!Array.isArray(n)||n.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r0(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class aN{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Vs(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>pt(u.doubleValue)));return new um(a)}convertGeoPoint(e){return new lm(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=$i(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Ge(AE(i));const o=new Rl(i.get(1),i.get(3)),a=new Ie(i.popFirst(5));return o.isEqual(t)||Qr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class s0 extends e0{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ch("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class xc extends s0{data(e={}){return super.data(e)}}class o0{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new xc(this._firestore,this._userDataWriter,i.key,i,new dl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new xc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new xc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:lN(d.type),doc:f,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){n=hn(n,Qt);const e=hn(n.firestore,Xr);return qP(Ih(e),n._key).then((t=>u0(e,n,t)))}class vm extends aN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function Os(n){n=hn(n,ti);const e=hn(n.firestore,Xr),t=Ih(e),i=new vm(e);return t0(n._query),WP(t,n._query).then((o=>new o0(e,i,n,o)))}function a0(n,e,t){n=hn(n,Qt);const i=hn(n.firestore,Xr),o=i0(n.converter,e,t);return Ph(i,[JE(Ah(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Ln.none())])}function _l(n,e,t,...i){n=hn(n,Qt);const o=hn(n.firestore,Xr),a=Ah(o);let u;return u=typeof(e=vt(e))=="string"||e instanceof Sh?rN(a,"updateDoc",n._key,e,t,i):nN(a,"updateDoc",n._key,e),Ph(o,[u.toMutation(n._key,Ln.exists(!0))])}function bc(n){return Ph(hn(n.firestore,Xr),[new $p(n._key,Ln.none())])}function l0(n,e){const t=hn(n.firestore,Xr),i=Mt(n),o=i0(n.converter,e);return Ph(t,[JE(Ah(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Ln.exists(!1))]).then((()=>i))}function uN(n,...e){var t,i,o;n=vt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||rv(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(rv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let f,y,_;if(n instanceof Qt)y=hn(n.firestore,Xr),_=dh(n._key.path),f={next:E=>{e[u]&&e[u](u0(y,n,E))},error:e[u+1],complete:e[u+2]};else{const E=hn(n,ti);y=hn(E.firestore,Xr),_=E._query;const S=new vm(y);f={next:V=>{e[u]&&e[u](new o0(y,S,E,V))},error:e[u+1],complete:e[u+2]},t0(n._query)}return(function(S,V,x,M){const C=new am(M),Y=new sm(V,C,x);return S.asyncQueue.enqueueAndForget((async()=>nm(await Zc(S),Y))),()=>{C.Za(),S.asyncQueue.enqueueAndForget((async()=>rm(await Zc(S),Y)))}})(Ih(y),_,d,f)}function Ph(n,e){return(function(i,o){const a=new Hr;return i.asyncQueue.enqueueAndForget((async()=>OP(await $P(i),o,a))),a.promise})(Ih(n),e)}function u0(n,e,t){const i=t.docs.get(e._key),o=new vm(n);return new s0(n,o,e._key,i,new dl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return new Gl("deleteField")}function Lo(){return new cm("serverTimestamp")}function cN(...n){return new hm("arrayRemove",n)}(function(e,t=!0){(function(o){Xo=o})(Ls),Cs(new Bi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Xr(new dC(i.getProvider("auth-internal")),new gC(i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(y.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),pr(w_,"4.7.3",e),pr(w_,"4.7.3","esm2017")})();var hN="firebase",dN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(hN,dN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="firebasestorage.googleapis.com",fN="storageBucket",pN=120*1e3,mN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Er{constructor(e,t,i=0){super(Cf(e),`Firebase Storage: ${t} (${Cf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wr||(wr={}));function Cf(n){return"storage/"+n}function gN(){const n="An unknown error occurred, please check the error payload for server response.";return new Tr(wr.UNKNOWN,n)}function yN(){return new Tr(wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _N(){return new Tr(wr.CANCELED,"User canceled the upload/download.")}function vN(n){return new Tr(wr.INVALID_URL,"Invalid URL '"+n+"'.")}function wN(n){return new Tr(wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function av(n){return new Tr(wr.INVALID_ARGUMENT,n)}function h0(){return new Tr(wr.APP_DELETED,"The Firebase app was deleted.")}function EN(n){return new Tr(wr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Yn.makeFromUrl(e,t)}catch{return new Yn(e,"")}if(i.path==="")return i;throw wN(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function y(G){G.path_=decodeURIComponent(G.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",V=new RegExp(`^https?://${E}/${_}/b/${o}/o${S}`,"i"),x={bucket:1,path:3},M=t===c0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",Y=new RegExp(`^https?://${M}/${o}/${C}`,"i"),ne=[{regex:d,indices:f,postModify:a},{regex:V,indices:x,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let G=0;G<ne.length;G++){const K=ne[G],Z=K.regex.exec(e);if(Z){const k=Z[K.indices.bucket];let I=Z[K.indices.path];I||(I=""),i=new Yn(k,I),K.postModify(i);break}}if(i==null)throw vN(e);return i}}class TN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function f(){return d===2}let y=!1;function _(...C){y||(y=!0,e.apply(null,C))}function E(C){o=setTimeout(()=>{o=null,n(V,f())},C)}function S(){a&&clearTimeout(a)}function V(C,...Y){if(y){S();return}if(C){S(),_.call(null,C,...Y);return}if(f()||u){S(),_.call(null,C,...Y);return}i<64&&(i*=2);let ne;d===1?(d=2,ne=0):ne=(i+Math.random())*1e3,E(ne)}let x=!1;function M(C){x||(x=!0,S(),!y&&(o!==null?(C||(d=2),clearTimeout(o),E(0)):C||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,M(!0)},t),M}function SN(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n){return n!==void 0}function lv(n,e,t,i){if(i<e)throw av(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw av(`Invalid value for '${n}'. Expected ${t} or less.`)}function AN(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var th;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(th||(th={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t,i,o,a,u,d,f,y,_,E,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,x)=>{this.resolve_=V,this.reject_=x,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new wc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,y)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===th.NO_ERROR,f=a.getStatus();if(!d||CN(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===th.ABORT;i(!1,new wc(!1,null,_));return}const y=this.successCodes_.indexOf(f)!==-1;i(!0,new wc(y,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());RN(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=gN();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(o.canceled){const f=this.appDelete_?h0():_N();u(f)}else{const f=yN();u(f)}};this.canceled_?t(!1,new wc(!1,null,!0)):this.backoffId_=IN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function PN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function NN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bN(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ON(n,e,t,i,o,a,u=!0){const d=AN(n.urlParams),f=n.url+d,y=Object.assign({},n.headers);return xN(y,e),PN(y,t),NN(y,a),bN(y,i),new kN(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function LN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t){this._service=e,t instanceof Yn?this._location=t:this._location=Yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nh(e,t)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LN(this._location.path)}get storage(){return this._service}get parent(){const e=DN(this._location.path);if(e===null)return null;const t=new Yn(this._location.bucket,e);return new nh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw EN(e)}}function uv(n,e){const t=e?.[fN];return t==null?null:Yn.makeFromBucketSpec(t,n)}function VN(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:ew(o,n.app.options.projectId))}class MN{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=c0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pN,this._maxUploadRetryTime=mN,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=uv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=uv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new TN(h0());{const u=ON(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const cv="@firebase/storage",hv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="storage";function FN(n=ah(),e){n=vt(n);const i=Vl(n,d0).getImmediate({identifier:e}),o=Yv("storage");return o&&UN(i,...o),i}function UN(n,e,t,i={}){VN(n,e,t,i)}function jN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new MN(t,i,o,e,Ls)}function BN(){Cs(new Bi(d0,jN,"PUBLIC").setMultipleInstances(!0)),pr(cv,hv,""),pr(cv,hv,"esm2017")}BN();const f0={apiKey:"AIzaSyC1ciO4ZxGRNcx4Q87BxJa0y7lFpsvKurc",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.appspot.com",messagingSenderId:"301206293641",appId:"1:301206293641:web:c9635693f4519d3dbdca58"},zN=Object.values(f0).every(Boolean);let nl,In=null,Ae=null,$N=null;if(zN)try{nl=FS().length?ah():rw(f0),In=lC(nl);try{Ae=QP(nl,{...{experimentalForceLongPolling:!0,useFetchStreams:!1}})}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code||"").toLowerCase():"")!=="failed-precondition")throw n;Ae=JP(nl)}$N=FN(nl)}catch(n){console.error("No se pudo inicializar Firebase, se usara modo demostracion.",n)}try{window.__fb={auth:In,db:Ae},console.log("🔥 Firebase projectId =>",In?.app?.options?.projectId)}catch{}const Oc=()=>new Date().toISOString(),qN=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:["corte","lavado"],createdAt:Oc()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:["alisado","planchado"],createdAt:Oc()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:["otros"],createdAt:Oc()}];let Wi=[...qN];const Dc=(n,e,t)=>({id:`demo-photo-${Math.random().toString(36).slice(2,10)}`,url:n,deleteToken:e??null,barberId:t}),WN={"carlos-ruiz":[Dc("https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",null,"demo-barber"),Dc("https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80",null,"demo-barber")],"maria-garcia":[Dc("https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80",null,"demo-barber")],"leo-suarez":[]};let Fi=Object.fromEntries(Object.entries(WN).map(([n,e])=>[n,e.map(t=>({...t}))]));const p0=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let Ui=[...p0];const HN=p0[0]?.id??"demo-barber";function Lc(){return[...Wi]}function m0(n){return Wi.find(e=>e.id===n)||null}function KN(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||HN,notes:n.notes??[],createdAt:Oc()};return Wi=[e,...Wi],e}function GN(n,e){return Wi=Wi.map(t=>t.id===n?{...t,...e}:t),m0(n)}function QN(n){Wi=Wi.filter(e=>e.id!==n),delete Fi[n]}function g0(n){return[...Fi[n]||[]]}function JN(n,e){const t=Dc(e.url,e.deleteToken,e.barberId),i=Fi[n]||[];return Fi[n]=[t,...i],Fi[n]}function YN(n,e){const t=Fi[n]||[];return Fi[n]=t.filter(i=>i.id!==e),Fi[n]}function y0(){return[...Ui]}function XN(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return Ui=[e,...Ui],e}function dv(n,e){return Ui=Ui.map(t=>t.id===n?{...t,...e}:t),Ui.find(t=>t.id===n)||null}function ZN(n){Ui=Ui.filter(e=>e.id!==n)}const ex="barberiawebpro@gmail.com",fv="users",pv="barberos",_0=W.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!1,loginDemo:()=>{},logout:async()=>{}}),ra=()=>W.useContext(_0),v0=n=>n?.trim().toLowerCase()||null,kf=n=>{if(!n)return;const e=String(n).trim().toLowerCase();if(["admin","administrador","administrator"].includes(e))return"admin";if(e.includes("barber"))return"barbero"},Pf=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;return e&&t?`${e} ${t}`.trim():e||t||void 0},tx=async(n,e)=>{if(!Ae)return{};try{const t=await xl(Mt(Ae,pv,n));if(t.exists()){const a=t.data();return{role:kf(a.role)??"barbero",displayName:Pf(a)}}const i=await xl(Mt(Ae,fv,n));if(i.exists()){const a=i.data();return{role:kf(a.role)??"barbero",displayName:Pf(a)}}const o=v0(e);if(o){const a=Nl(Yr(Ae,fv),cp("emailLower","==",o),hp(1)),u=Nl(Yr(Ae,pv),cp("emailLower","==",o),hp(1)),[d,f]=await Promise.all([Os(a),Os(u)]),y=d.docs[0]||f.docs[0];if(y){const _=y.data();return{role:kf(_.role)??"barbero",displayName:Pf(_)}}}return{}}catch(t){return console.error("Error al obtener perfil del usuario:",t),{}}},nx=n=>({uid:n.id,email:n.email,displayName:n.displayName});function rx({children:n}){const[e,t]=W.useState(null),[i,o]=W.useState(),[a,u]=W.useState(),[d,f]=W.useState(!0),[y,_]=W.useState(!1);W.useEffect(()=>{if(!In){t(null),o(void 0),u(void 0),f(!1),_(!0);return}const V=JR(In,async x=>{if(!x){t(null),o(void 0),u(void 0),f(!1),_(!1);return}const M=v0(x.email)===ex?"admin":void 0,C=await tx(x.uid,x.email),Y=C.role||M||"barbero",te=C.displayName||x.displayName||x.email||void 0;t(x),o(Y),u(te),f(!1),_(!1)});return()=>V()},[]);const E=V=>{const x=y0().find(M=>M.id===V);x&&(t(nx(x)),o(x.role),u(x.displayName),_(!0),f(!1))},S=async()=>{In&&await YR(In),t(null),o(void 0),u(void 0),f(!1),_(!1)};return N.jsx(_0.Provider,{value:{user:e,role:i,profileName:a,loading:d,demoMode:y,loginDemo:E,logout:S},children:n})}Hv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bl.apply(this,arguments)}var Di;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Di||(Di={}));const mv="popstate";function ix(n){n===void 0&&(n={});function e(o,a){let{pathname:u="/",search:d="",hash:f=""}=Fs(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),dp("",{pathname:u,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=o.location.href,y=f.indexOf("#");d=y===-1?f:f.slice(0,y)}return d+"#"+(typeof a=="string"?a:rh(a))}function i(o,a){wm(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return ox(e,t,i,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sx(){return Math.random().toString(36).substr(2,8)}function gv(n,e){return{usr:n.state,key:n.key,idx:e}}function dp(n,e,t,i){return t===void 0&&(t=null),bl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Fs(e):e,{state:t,key:e&&e.key||i||sx()})}function rh(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Fs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function ox(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=Di.Pop,f=null,y=_();y==null&&(y=0,u.replaceState(bl({},u.state,{idx:y}),""));function _(){return(u.state||{idx:null}).idx}function E(){d=Di.Pop;let C=_(),Y=C==null?null:C-y;y=C,f&&f({action:d,location:M.location,delta:Y})}function S(C,Y){d=Di.Push;let te=dp(M.location,C,Y);t&&t(te,C),y=_()+1;let ne=gv(te,y),G=M.createHref(te);try{u.pushState(ne,"",G)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(G)}a&&f&&f({action:d,location:M.location,delta:1})}function V(C,Y){d=Di.Replace;let te=dp(M.location,C,Y);t&&t(te,C),y=_();let ne=gv(te,y),G=M.createHref(te);u.replaceState(ne,"",G),a&&f&&f({action:d,location:M.location,delta:0})}function x(C){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof C=="string"?C:rh(C);return te=te.replace(/ $/,"%20"),at(Y,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,Y)}let M={get action(){return d},get location(){return n(o,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(mv,E),f=C,()=>{o.removeEventListener(mv,E),f=null}},createHref(C){return e(o,C)},createURL:x,encodeLocation(C){let Y=x(C);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:V,go(C){return u.go(C)}};return M}var yv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yv||(yv={}));function ax(n,e,t){return t===void 0&&(t="/"),lx(n,e,t)}function lx(n,e,t,i){let o=typeof e=="string"?Fs(e):e,a=Qo(o.pathname||"/",t);if(a==null)return null;let u=w0(n);ux(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let y=wx(a);d=_x(u[f],y)}return d}function w0(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(at(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let y=ji([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(at(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),w0(a.children,e,_,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:gx(y,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of E0(a.path))o(a,u,f)}),e}function E0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=E0(i.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function ux(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const cx=/^:[\w-]+$/,hx=3,dx=2,fx=1,px=10,mx=-2,_v=n=>n==="*";function gx(n,e){let t=n.split("/"),i=t.length;return t.some(_v)&&(i+=mx),e&&(i+=dx),t.filter(o=>!_v(o)).reduce((o,a)=>o+(cx.test(a)?hx:a===""?fx:px),i)}function yx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function _x(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],y=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=fp({path:f.relativePath,caseSensitive:f.caseSensitive,end:y},_),S=f.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:ji([a,E.pathname]),pathnameBase:Sx(ji([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=ji([a,E.pathnameBase]))}return u}function fp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=vx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:S,isOptional:V}=_;if(S==="*"){let M=d[E]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const x=d[E];return V&&!x?y[S]=void 0:y[S]=(x||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function vx(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function wx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Qo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Ex(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Fs(n):n;return{pathname:t?t.startsWith("/")?t:Tx(t,e):e,search:Rx(i),hash:Ax(o)}}function Tx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Nf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ix(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Em(n,e){let t=Ix(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Tm(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Fs(n):(o=bl({},n),at(!o.pathname||!o.pathname.includes("?"),Nf("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),Nf("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),Nf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let f=Ex(o,d),y=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(y||_)&&(f.pathname+="/"),f}const ji=n=>n.join("/").replace(/\/\/+/g,"/"),Sx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Rx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ax=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Cx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const T0=["post","put","patch","delete"];new Set(T0);const kx=["get",...T0];new Set(kx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ol.apply(this,arguments)}const Nh=W.createContext(null),I0=W.createContext(null),ni=W.createContext(null),xh=W.createContext(null),ri=W.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=W.createContext(null);function Px(n,e){let{relative:t}=e===void 0?{}:e;ia()||at(!1);let{basename:i,navigator:o}=W.useContext(ni),{hash:a,pathname:u,search:d}=bh(n,{relative:t}),f=u;return i!=="/"&&(f=u==="/"?i:ji([i,u])),o.createHref({pathname:f,search:d,hash:a})}function ia(){return W.useContext(xh)!=null}function sa(){return ia()||at(!1),W.useContext(xh).location}function R0(n){W.useContext(ni).static||W.useLayoutEffect(n)}function Ql(){let{isDataRoute:n}=W.useContext(ri);return n?$x():Nx()}function Nx(){ia()||at(!1);let n=W.useContext(Nh),{basename:e,future:t,navigator:i}=W.useContext(ni),{matches:o}=W.useContext(ri),{pathname:a}=sa(),u=JSON.stringify(Em(o,t.v7_relativeSplatPath)),d=W.useRef(!1);return R0(()=>{d.current=!0}),W.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=Tm(y,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ji([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,u,a,n])}function xx(){let{matches:n}=W.useContext(ri),e=n[n.length-1];return e?e.params:{}}function bh(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=W.useContext(ni),{matches:o}=W.useContext(ri),{pathname:a}=sa(),u=JSON.stringify(Em(o,i.v7_relativeSplatPath));return W.useMemo(()=>Tm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function bx(n,e){return Ox(n,e)}function Ox(n,e,t,i){ia()||at(!1);let{navigator:o}=W.useContext(ni),{matches:a}=W.useContext(ri),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let y=sa(),_;if(e){var E;let C=typeof e=="string"?Fs(e):e;f==="/"||(E=C.pathname)!=null&&E.startsWith(f)||at(!1),_=C}else _=y;let S=_.pathname||"/",V=S;if(f!=="/"){let C=f.replace(/^\//,"").split("/");V="/"+S.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=ax(n,{pathname:V}),M=Fx(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:ji([f,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:ji([f,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,i);return e&&M?W.createElement(xh.Provider,{value:{location:Ol({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Di.Pop}},M):M}function Dx(){let n=zx(),e=Cx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:o},t):null,null)}const Lx=W.createElement(Dx,null);class Vx extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(ri.Provider,{value:this.props.routeContext},W.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mx(n){let{routeContext:e,match:t,children:i}=n,o=W.useContext(Nh);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(ri.Provider,{value:e},i)}function Fx(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||at(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:S,errors:V}=t,x=E.route.loader&&S[E.route.id]===void 0&&(!V||V[E.route.id]===void 0);if(E.route.lazy||x){f=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((_,E,S)=>{let V,x=!1,M=null,C=null;t&&(V=d&&E.route.id?d[E.route.id]:void 0,M=E.route.errorElement||Lx,f&&(y<0&&S===0?(qx("route-fallback"),x=!0,C=null):y===S&&(x=!0,C=E.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,S+1)),te=()=>{let ne;return V?ne=M:x?ne=C:E.route.Component?ne=W.createElement(E.route.Component,null):E.route.element?ne=E.route.element:ne=_,W.createElement(Mx,{match:E,routeContext:{outlet:_,matches:Y,isDataRoute:t!=null},children:ne})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?W.createElement(Vx,{location:t.location,revalidation:t.revalidation,component:M,error:V,children:te(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):te()},null)}var A0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(A0||{}),C0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(C0||{});function Ux(n){let e=W.useContext(Nh);return e||at(!1),e}function jx(n){let e=W.useContext(I0);return e||at(!1),e}function Bx(n){let e=W.useContext(ri);return e||at(!1),e}function k0(n){let e=Bx(),t=e.matches[e.matches.length-1];return t.route.id||at(!1),t.route.id}function zx(){var n;let e=W.useContext(S0),t=jx(),i=k0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function $x(){let{router:n}=Ux(A0.UseNavigateStable),e=k0(C0.UseNavigateStable),t=W.useRef(!1);return R0(()=>{t.current=!0}),W.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Ol({fromRouteId:e},a)))},[n,e])}const vv={};function qx(n,e,t){vv[n]||(vv[n]=!0)}function Wx(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function pp(n){let{to:e,replace:t,state:i,relative:o}=n;ia()||at(!1);let{future:a,static:u}=W.useContext(ni),{matches:d}=W.useContext(ri),{pathname:f}=sa(),y=Ql(),_=Tm(e,Em(d,a.v7_relativeSplatPath),f,o==="path"),E=JSON.stringify(_);return W.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function Oo(n){at(!1)}function Hx(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Di.Pop,navigator:a,static:u=!1,future:d}=n;ia()&&at(!1);let f=e.replace(/^\/*/,"/"),y=W.useMemo(()=>({basename:f,navigator:a,static:u,future:Ol({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof i=="string"&&(i=Fs(i));let{pathname:_="/",search:E="",hash:S="",state:V=null,key:x="default"}=i,M=W.useMemo(()=>{let C=Qo(_,f);return C==null?null:{location:{pathname:C,search:E,hash:S,state:V,key:x},navigationType:o}},[f,_,E,S,V,x,o]);return M==null?null:W.createElement(ni.Provider,{value:y},W.createElement(xh.Provider,{children:t,value:M}))}function Kx(n){let{children:e,location:t}=n;return bx(mp(e),t)}new Promise(()=>{});function mp(n,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(n,(i,o)=>{if(!W.isValidElement(i))return;let a=[...e,o];if(i.type===W.Fragment){t.push.apply(t,mp(i.props.children,a));return}i.type!==Oo&&at(!1),!i.props.index||!i.props.children||at(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=mp(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ih.apply(this,arguments)}function P0(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function Gx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Qx(n,e){return n.button===0&&(!e||e==="_self")&&!Gx(n)}const Jx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Yx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Xx="6";try{window.__reactRouterVersion=Xx}catch{}const Zx=W.createContext({isTransitioning:!1}),e1="startTransition",wv=uI[e1];function t1(n){let{basename:e,children:t,future:i,window:o}=n,a=W.useRef();a.current==null&&(a.current=ix({window:o,v5Compat:!0}));let u=a.current,[d,f]=W.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},_=W.useCallback(E=>{y&&wv?wv(()=>f(E)):f(E)},[f,y]);return W.useLayoutEffect(()=>u.listen(_),[u,_]),W.useEffect(()=>Wx(i),[i]),W.createElement(Hx,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const n1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Im=W.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:f,to:y,preventScrollReset:_,viewTransition:E}=e,S=P0(e,Jx),{basename:V}=W.useContext(ni),x,M=!1;if(typeof y=="string"&&r1.test(y)&&(x=y,n1))try{let ne=new URL(window.location.href),G=y.startsWith("//")?new URL(ne.protocol+y):new URL(y),K=Qo(G.pathname,V);G.origin===ne.origin&&K!=null?y=K+G.search+G.hash:M=!0}catch{}let C=Px(y,{relative:o}),Y=s1(y,{replace:u,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:E});function te(ne){i&&i(ne),ne.defaultPrevented||Y(ne)}return W.createElement("a",ih({},S,{href:x||C,onClick:M||a?i:te,ref:t,target:f}))}),Ev=W.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:f,viewTransition:y,children:_}=e,E=P0(e,Yx),S=bh(f,{relative:E.relative}),V=sa(),x=W.useContext(I0),{navigator:M,basename:C}=W.useContext(ni),Y=x!=null&&o1(S)&&y===!0,te=M.encodeLocation?M.encodeLocation(S).pathname:S.pathname,ne=V.pathname,G=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;o||(ne=ne.toLowerCase(),G=G?G.toLowerCase():null,te=te.toLowerCase()),G&&C&&(G=Qo(G,C)||G);const K=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let Z=ne===te||!u&&ne.startsWith(te)&&ne.charAt(K)==="/",k=G!=null&&(G===te||!u&&G.startsWith(te)&&G.charAt(te.length)==="/"),I={isActive:Z,isPending:k,isTransitioning:Y},A=Z?i:void 0,b;typeof a=="function"?b=a(I):b=[a,Z?"active":null,k?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(I):d;return W.createElement(Im,ih({},E,{"aria-current":A,className:b,ref:t,style:O,to:f,viewTransition:y}),typeof _=="function"?_(I):_)});var gp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(gp||(gp={}));var Tv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Tv||(Tv={}));function i1(n){let e=W.useContext(Nh);return e||at(!1),e}function s1(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=Ql(),y=sa(),_=bh(n,{relative:u});return W.useCallback(E=>{if(Qx(E,t)){E.preventDefault();let S=i!==void 0?i:rh(y)===rh(_);f(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,f,_,i,o,t,n,a,u,d])}function o1(n,e){e===void 0&&(e={});let t=W.useContext(Zx);t==null&&at(!1);let{basename:i}=i1(gp.useViewTransitionState),o=bh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Qo(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Qo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return fp(o.pathname,u)!=null||fp(o.pathname,a)!=null}function xf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=ra();return i?N.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?N.jsx(pp,{to:"/clientes",replace:!0}):n:N.jsx(pp,{to:"/login",replace:!0})}const Sm=["corte","alisado","lavado","planchado","otros"],a1={corte:"Corte",alisado:"Alisado",lavado:"Lavado",planchado:"Planchado",otros:"Otros"},Iv=n=>{if(typeof n!="string")return null;const e=n.trim().toLowerCase();return Sm.includes(e)?e:null},yp=n=>{if(!n)return[];if(Array.isArray(n)){const e=n.map(t=>Iv(t)).filter(t=>t!==null);return Array.from(new Set(e))}if(typeof n=="string"){const e=n.split(/[,;\n]/).map(i=>Iv(i)).filter(i=>i!==null);if(e.length>0)return Array.from(new Set(e));const t=n.toLowerCase();return Sm.filter(i=>t.includes(i))}return[]},l1=n=>Array.isArray(n)?n.join(" "):"",Sv="clientes",u1=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",u=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:u,fullName_lower:e.fullName_lower||u.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:yp(e.notes??e.Informacion??e.info),createdAt:e.createdAt??null}},Ec=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(a=>{if(t&&i&&a.mainBarberId&&a.mainBarberId!==i)return!1;if(!o)return!0;const u=(a.fullName||"").toLowerCase(),d=(a.phone||"").toLowerCase(),f=l1(a.notes).toLowerCase();return u.includes(o)||d.includes(o)||f.includes(o)})};function c1(){const{user:n,role:e}=ra(),t=!Ae,i=e==="admin"||e==="barbero",[o,a]=W.useState(!1),[u,d]=W.useState(""),[f,y]=W.useState(()=>t?Lc():[]),[_,E]=W.useState(()=>Ec(f,u,o,n?.uid)),[S,V]=W.useState(()=>!t),[x,M]=W.useState(!1),[C,Y]=W.useState({fullName:"",phone:""}),[te,ne]=W.useState(!1),[G,K]=W.useState(null),[Z,k]=W.useState(null),I=W.useCallback(()=>{const D=Lc();y(D),E(Ec(D,u,o,n?.uid)),V(!1),k(null)},[o,u,n?.uid]),A=W.useCallback(async()=>{if(!Ae){I();return}V(!0),k(null);try{const D=Ae;if(!D){I();return}const qe=(await Os(Yr(D,Sv))).docs.map(Fe=>u1(Fe.id,Fe.data(),n?.uid)).sort((Fe,Ve)=>Fe.fullName.localeCompare(Ve.fullName));y(qe)}catch(D){console.error("No pudimos cargar clientes",D),y([]),k("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{V(!1)}},[I,n?.uid]);W.useEffect(()=>{if(t){I();return}A()},[t,A,I]),W.useEffect(()=>{if(t){const D=Lc();E(Ec(D,u,o,n?.uid));return}E(Ec(f,u,o,n?.uid))},[u,o,f,n?.uid,t]);const b=async D=>{D.preventDefault();const R=C.fullName.trim(),ge=C.phone.trim();if(!R){K("El nombre es obligatorio.");return}ne(!0),K(null);try{Ae?(await l0(Yr(Ae,Sv),{fullName:R,fullName_lower:R.toLowerCase(),phone:ge||void 0,mainBarberId:n?.uid||"",notes:[],createdAt:Lo()}),await A()):(KN({fullName:R,phone:ge,mainBarberId:n?.uid}),I()),Y({fullName:"",phone:""}),M(!1)}catch(qe){console.error("No pudimos crear el cliente",qe),K("No pudimos crear el cliente. Intenta de nuevo.")}finally{ne(!1)}},O=_;return N.jsxs("div",{className:"panel space-y-8",children:[N.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),N.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),N.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&N.jsx("button",{className:"btn btn-primary",onClick:()=>M(D=>!D),children:x?"Cerrar formulario":"Nuevo cliente"})]}),N.jsxs("section",{className:"space-y-4",children:[N.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[N.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:u,onChange:D=>d(D.target.value)}),N.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[N.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(D=>!D),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),x&&i&&N.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:b,children:[N.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),N.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:C.fullName,onChange:D=>Y(R=>({...R,fullName:D.target.value}))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),N.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:C.phone,onChange:D=>Y(R=>({...R,phone:D.target.value}))})]})]}),G&&N.jsx("p",{className:"text-xs text-red-500",children:G}),N.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.jsx("button",{className:"btn btn-primary",type:"submit",disabled:te,children:te?"Guardando...":"Guardar"}),N.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>M(!1),children:"Cancelar"})]})]})]}),N.jsxs("section",{className:"space-y-3",children:[S&&N.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),Z&&!S&&N.jsx("div",{className:"text-sm text-red-600",children:Z}),!S&&!Z&&O.map(D=>N.jsxs(Im,{to:`/clientes/${D.id}`,className:"list-item",children:[N.jsx("div",{className:"avatar",children:D.fullName.split(" ").map(R=>R[0]).slice(0,2)}),N.jsxs("div",{className:"flex-1",children:[N.jsx("div",{className:"title",children:D.fullName}),D.phone&&N.jsx("div",{className:"sub",children:D.phone})]}),N.jsx("span",{className:"sub",children:"Ver"})]},D.id)),!S&&!Z&&O.length===0&&N.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&N.jsx("footer",{className:"flex items-center justify-end",children:N.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void A(),disabled:S,children:"Actualizar"})}),N.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",N.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function h1({photos:n,onDelete:e,canDelete:t,onSelect:i}){if(!n?.length)return N.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."});const o=t&&typeof e=="function";return N.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:n.map((a,u)=>{const d=a.id||`${a.url}-${u}`;return N.jsxs("div",{className:`relative overflow-hidden rounded-xl shadow-lg ${i?"cursor-zoom-in":""}`,role:i?"button":void 0,tabIndex:i?0:void 0,onClick:()=>i?.(a,u),onKeyDown:f=>{i&&(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),i(a,u))},children:[N.jsx("img",{src:a.url,className:"aspect-square w-full object-cover"}),o&&N.jsx("button",{type:"button",className:"absolute right-2 top-2 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-black/90",onClick:f=>{f.stopPropagation(),e?.(a)},children:"Borrar"})]},d)})})}const Rv=(n,e)=>{if(!Number.isFinite(n)||e<=0)return 0;const t=e-1;return n<0?0:n>t?t:n};function d1({photos:n,initialIndex:e,onClose:t}){const i=n.length,[o,a]=W.useState(()=>Rv(e,i));W.useEffect(()=>{a(Rv(e,i))},[e,i]),W.useEffect(()=>{i||t()},[i,t]);const u=W.useCallback(()=>{i<=1||a(y=>(y+1)%i)},[i]),d=W.useCallback(()=>{i<=1||a(y=>(y-1+i)%i)},[i]);W.useEffect(()=>{const y=_=>{_.key==="Escape"?(_.preventDefault(),t()):_.key==="ArrowRight"?(_.preventDefault(),u()):_.key==="ArrowLeft"&&(_.preventDefault(),d())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[u,d,t]),W.useEffect(()=>{const{overflow:y,paddingRight:_}=document.body.style,E=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",E>0&&(document.body.style.paddingRight=`${E}px`),()=>{document.body.style.overflow=y,document.body.style.paddingRight=_}},[]);const f=W.useMemo(()=>n[o],[n,o]);return!i||!f?null:N.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex bg-black/90 p-4 sm:p-8",onClick:t,children:N.jsxs("div",{className:"relative mx-auto flex max-w-4xl grow items-center justify-center",onClick:y=>y.stopPropagation(),children:[N.jsx("img",{src:f.url,alt:"Foto del cliente",className:"max-h-[80vh] w-auto max-w-full rounded-2xl shadow-2xl"}),i>1?N.jsxs(N.Fragment,{children:[N.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 px-3 py-2 text-lg text-white transition hover:bg-white/40",onClick:d,"aria-label":"Foto anterior",children:"<"}),N.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 px-3 py-2 text-lg text-white transition hover:bg-white/40",onClick:u,"aria-label":"Foto siguiente",children:">"})]}):null,N.jsx("button",{type:"button",className:"absolute right-4 top-4 rounded-full bg-white/20 px-2 py-1 text-sm text-white transition hover:bg-white/40",onClick:t,"aria-label":"Cerrar galeria",children:"X"}),N.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full bg-black/60 px-3 py-1 text-xs uppercase tracking-[0.3em] text-white",children:[o+1," / ",i]})]})})}function N0(n,e){return function(){return n.apply(e,arguments)}}const{toString:f1}=Object.prototype,{getPrototypeOf:Rm}=Object,{iterator:Oh,toStringTag:x0}=Symbol,Dh=(n=>e=>{const t=f1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),er=n=>(n=n.toLowerCase(),e=>Dh(e)===n),Lh=n=>e=>typeof e===n,{isArray:oa}=Array,Jo=Lh("undefined");function Jl(n){return n!==null&&!Jo(n)&&n.constructor!==null&&!Jo(n.constructor)&&dn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const b0=er("ArrayBuffer");function p1(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&b0(n.buffer),e}const m1=Lh("string"),dn=Lh("function"),O0=Lh("number"),Yl=n=>n!==null&&typeof n=="object",g1=n=>n===!0||n===!1,Vc=n=>{if(Dh(n)!=="object")return!1;const e=Rm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(x0 in n)&&!(Oh in n)},y1=n=>{if(!Yl(n)||Jl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},_1=er("Date"),v1=er("File"),w1=er("Blob"),E1=er("FileList"),T1=n=>Yl(n)&&dn(n.pipe),I1=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||dn(n.append)&&((e=Dh(n))==="formdata"||e==="object"&&dn(n.toString)&&n.toString()==="[object FormData]"))},S1=er("URLSearchParams"),[R1,A1,C1,k1]=["ReadableStream","Request","Response","Headers"].map(er),P1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),oa(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Jl(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function D0(n,e){if(Jl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const Ss=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L0=n=>!Jo(n)&&n!==Ss;function _p(){const{caseless:n,skipUndefined:e}=L0(this)&&this||{},t={},i=(o,a)=>{const u=n&&D0(t,a)||a;Vc(t[u])&&Vc(o)?t[u]=_p(t[u],o):Vc(o)?t[u]=_p({},o):oa(o)?t[u]=o.slice():(!e||!Jo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Xl(arguments[o],i);return t}const N1=(n,e,t,{allOwnKeys:i}={})=>(Xl(e,(o,a)=>{t&&dn(o)?n[a]=N0(o,t):n[a]=o},{allOwnKeys:i}),n),x1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),b1=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},O1=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Rm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},D1=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},L1=n=>{if(!n)return null;if(oa(n))return n;let e=n.length;if(!O0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},V1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Rm(Uint8Array)),M1=(n,e)=>{const i=(n&&n[Oh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},F1=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},U1=er("HTMLFormElement"),j1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Av=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),B1=er("RegExp"),V0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Xl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},z1=n=>{V0(n,(e,t)=>{if(dn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(dn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$1=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return oa(n)?i(n):i(String(n).split(e)),t},q1=()=>{},W1=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function H1(n){return!!(n&&dn(n.append)&&n[x0]==="FormData"&&n[Oh])}const K1=n=>{const e=new Array(10),t=(i,o)=>{if(Yl(i)){if(e.indexOf(i)>=0)return;if(Jl(i))return i;if(!("toJSON"in i)){e[o]=i;const a=oa(i)?[]:{};return Xl(i,(u,d)=>{const f=t(u,o+1);!Jo(f)&&(a[d]=f)}),e[o]=void 0,a}}return i};return t(n,0)},G1=er("AsyncFunction"),Q1=n=>n&&(Yl(n)||dn(n))&&dn(n.then)&&dn(n.catch),M0=((n,e)=>n?setImmediate:e?((t,i)=>(Ss.addEventListener("message",({source:o,data:a})=>{o===Ss&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),Ss.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",dn(Ss.postMessage)),J1=typeof queueMicrotask<"u"?queueMicrotask.bind(Ss):typeof process<"u"&&process.nextTick||M0,Y1=n=>n!=null&&dn(n[Oh]),q={isArray:oa,isArrayBuffer:b0,isBuffer:Jl,isFormData:I1,isArrayBufferView:p1,isString:m1,isNumber:O0,isBoolean:g1,isObject:Yl,isPlainObject:Vc,isEmptyObject:y1,isReadableStream:R1,isRequest:A1,isResponse:C1,isHeaders:k1,isUndefined:Jo,isDate:_1,isFile:v1,isBlob:w1,isRegExp:B1,isFunction:dn,isStream:T1,isURLSearchParams:S1,isTypedArray:V1,isFileList:E1,forEach:Xl,merge:_p,extend:N1,trim:P1,stripBOM:x1,inherits:b1,toFlatObject:O1,kindOf:Dh,kindOfTest:er,endsWith:D1,toArray:L1,forEachEntry:M1,matchAll:F1,isHTMLForm:U1,hasOwnProperty:Av,hasOwnProp:Av,reduceDescriptors:V0,freezeMethods:z1,toObjectSet:$1,toCamelCase:j1,noop:q1,toFiniteNumber:W1,findKey:D0,global:Ss,isContextDefined:L0,isSpecCompliantForm:H1,toJSONObject:K1,isAsyncFn:G1,isThenable:Q1,setImmediate:M0,asap:J1,isIterable:Y1};function De(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const F0=De.prototype,U0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{U0[n]={value:n}});Object.defineProperties(De,U0);Object.defineProperty(F0,"isAxiosError",{value:!0});De.from=(n,e,t,i,o,a)=>{const u=Object.create(F0);q.toFlatObject(n,u,function(_){return _!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",f=e==null&&n?n.code:e;return De.call(u,d,f,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const X1=null;function vp(n){return q.isPlainObject(n)||q.isArray(n)}function j0(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function Cv(n,e,t){return n?n.concat(e).map(function(o,a){return o=j0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function Z1(n){return q.isArray(n)&&!n.some(vp)}const eb=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Vh(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,C){return!q.isUndefined(C[M])});const i=t.metaTokens,o=t.visitor||_,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(x){if(x===null)return"";if(q.isDate(x))return x.toISOString();if(q.isBoolean(x))return x.toString();if(!f&&q.isBlob(x))throw new De("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(x)||q.isTypedArray(x)?f&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,M,C){let Y=x;if(x&&!C&&typeof x=="object"){if(q.endsWith(M,"{}"))M=i?M:M.slice(0,-2),x=JSON.stringify(x);else if(q.isArray(x)&&Z1(x)||(q.isFileList(x)||q.endsWith(M,"[]"))&&(Y=q.toArray(x)))return M=j0(M),Y.forEach(function(ne,G){!(q.isUndefined(ne)||ne===null)&&e.append(u===!0?Cv([M],G,a):u===null?M:M+"[]",y(ne))}),!1}return vp(x)?!0:(e.append(Cv(C,M,a),y(x)),!1)}const E=[],S=Object.assign(eb,{defaultVisitor:_,convertValue:y,isVisitable:vp});function V(x,M){if(!q.isUndefined(x)){if(E.indexOf(x)!==-1)throw Error("Circular reference detected in "+M.join("."));E.push(x),q.forEach(x,function(Y,te){(!(q.isUndefined(Y)||Y===null)&&o.call(e,Y,q.isString(te)?te.trim():te,M,S))===!0&&V(Y,M?M.concat(te):[te])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return V(n),e}function kv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Am(n,e){this._pairs=[],n&&Vh(n,this,e)}const B0=Am.prototype;B0.append=function(e,t){this._pairs.push([e,t])};B0.toString=function(e){const t=e?function(i){return e.call(this,i,kv)}:kv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function tb(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function z0(n,e,t){if(!e)return n;const i=t&&t.encode||tb;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=q.isURLSearchParams(e)?e.toString():new Am(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Pv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const $0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nb=typeof URLSearchParams<"u"?URLSearchParams:Am,rb=typeof FormData<"u"?FormData:null,ib=typeof Blob<"u"?Blob:null,sb={isBrowser:!0,classes:{URLSearchParams:nb,FormData:rb,Blob:ib},protocols:["http","https","file","blob","url","data"]},Cm=typeof window<"u"&&typeof document<"u",wp=typeof navigator=="object"&&navigator||void 0,ob=Cm&&(!wp||["ReactNative","NativeScript","NS"].indexOf(wp.product)<0),ab=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lb=Cm&&window.location.href||"http://localhost",ub=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cm,hasStandardBrowserEnv:ob,hasStandardBrowserWebWorkerEnv:ab,navigator:wp,origin:lb},Symbol.toStringTag,{value:"Module"})),Gt={...ub,...sb};function cb(n,e){return Vh(n,new Gt.classes.URLSearchParams,{visitor:function(t,i,o,a){return Gt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function hb(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function db(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function q0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=a>=t.length;return u=!u&&q.isArray(o)?o.length:u,f?(q.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!q.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&q.isArray(o[u])&&(o[u]=db(o[u])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(hb(i),o,t,0)}),t}return null}function fb(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Zl={transitional:$0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=q.isObject(e);if(a&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(q0(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return cb(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Vh(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),fb(e)):e}],transformResponse:[function(e){const t=this.transitional||Zl.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?De.from(d,De.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Zl.headers[n]={}});const pb=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mb=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&pb[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Nv=Symbol("internals");function rl(n){return n&&String(n).trim().toLowerCase()}function Mc(n){return n===!1||n==null?n:q.isArray(n)?n.map(Mc):String(n)}function gb(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const yb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function bf(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function _b(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function vb(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let fn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,f,y){const _=rl(f);if(!_)throw new Error("header name must be a non-empty string");const E=q.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||f]=Mc(d))}const u=(d,f)=>q.forEach(d,(y,_)=>a(y,_,f));if(q.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(q.isString(e)&&(e=e.trim())&&!yb(e))u(mb(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},f,y;for(const _ of e){if(!q.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[y=_[0]]=(f=d[y])?q.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=rl(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return gb(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rl(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||bf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=rl(u),u){const d=q.findKey(i,u);d&&(!t||bf(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||bf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,a)=>{const u=q.findKey(i,a);if(u){t[u]=Mc(o),delete t[a];return}const d=e?_b(a):String(a).trim();d!==a&&delete t[a],t[d]=Mc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Nv]=this[Nv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=rl(u);i[d]||(vb(o,u),i[d]=!0)}return q.isArray(e)?e.forEach(a):a(e),this}};fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(fn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(fn);function Of(n,e){const t=this||Zl,i=e||t,o=fn.from(i.headers);let a=i.data;return q.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function W0(n){return!!(n&&n.__CANCEL__)}function aa(n,e,t){De.call(this,n??"canceled",De.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(aa,De,{__CANCEL__:!0});function H0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new De("Request failed with status code "+t.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function wb(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Eb(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const y=Date.now(),_=i[a];u||(u=y),t[o]=f,i[o]=y;let E=a,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const V=_&&y-_;return V?Math.round(S*1e3/V):void 0}}function Tb(n,e){let t=0,i=1e3/e,o,a;const u=(y,_=Date.now())=>{t=_,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?u(y,_):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const sh=(n,e,t=3)=>{let i=0;const o=Eb(50,250);return Tb(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,f=u-i,y=o(f),_=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:y||void 0,estimated:y&&d&&_?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},xv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},bv=n=>(...e)=>q.asap(()=>n(...e)),Ib=Gt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Gt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Sb=Gt.hasStandardBrowserEnv?{write(n,e,t,i,o,a){const u=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),q.isString(i)&&u.push("path="+i),q.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Rb(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Ab(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function K0(n,e,t){let i=!Rb(e);return n&&(i||t==!1)?Ab(n,e):e}const Ov=n=>n instanceof fn?{...n}:n;function Ds(n,e){e=e||{};const t={};function i(y,_,E,S){return q.isPlainObject(y)&&q.isPlainObject(_)?q.merge.call({caseless:S},y,_):q.isPlainObject(_)?q.merge({},_):q.isArray(_)?_.slice():_}function o(y,_,E,S){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y,E,S)}else return i(y,_,E,S)}function a(y,_){if(!q.isUndefined(_))return i(void 0,_)}function u(y,_){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,_,E)=>o(Ov(y),Ov(_),E,!0)};return q.forEach(Object.keys({...n,...e}),function(_){const E=f[_]||o,S=E(n[_],e[_],_);q.isUndefined(S)&&E!==d||(t[_]=S)}),t}const G0=n=>{const e=Ds({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=fn.from(u),e.url=z0(K0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(t)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(q.isFunction(t.getHeaders)){const f=t.getHeaders(),y=["content-type","content-length"];Object.entries(f).forEach(([_,E])=>{y.includes(_.toLowerCase())&&u.set(_,E)})}}if(Gt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&Ib(e.url))){const f=o&&a&&Sb.read(a);f&&u.set(o,f)}return e},Cb=typeof XMLHttpRequest<"u",kb=Cb&&function(n){return new Promise(function(t,i){const o=G0(n);let a=o.data;const u=fn.from(o.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:y}=o,_,E,S,V,x;function M(){V&&V(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let C=new XMLHttpRequest;C.open(o.method.toUpperCase(),o.url,!0),C.timeout=o.timeout;function Y(){if(!C)return;const ne=fn.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),K={data:!d||d==="text"||d==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:ne,config:n,request:C};H0(function(k){t(k),M()},function(k){i(k),M()},K),C=null}"onloadend"in C?C.onloadend=Y:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(Y)},C.onabort=function(){C&&(i(new De("Request aborted",De.ECONNABORTED,n,C)),C=null)},C.onerror=function(G){const K=G&&G.message?G.message:"Network Error",Z=new De(K,De.ERR_NETWORK,n,C);Z.event=G||null,i(Z),C=null},C.ontimeout=function(){let G=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const K=o.transitional||$0;o.timeoutErrorMessage&&(G=o.timeoutErrorMessage),i(new De(G,K.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,n,C)),C=null},a===void 0&&u.setContentType(null),"setRequestHeader"in C&&q.forEach(u.toJSON(),function(G,K){C.setRequestHeader(K,G)}),q.isUndefined(o.withCredentials)||(C.withCredentials=!!o.withCredentials),d&&d!=="json"&&(C.responseType=o.responseType),y&&([S,x]=sh(y,!0),C.addEventListener("progress",S)),f&&C.upload&&([E,V]=sh(f),C.upload.addEventListener("progress",E),C.upload.addEventListener("loadend",V)),(o.cancelToken||o.signal)&&(_=ne=>{C&&(i(!ne||ne.type?new aa(null,n,C):ne),C.abort(),C=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const te=wb(o.url);if(te&&Gt.protocols.indexOf(te)===-1){i(new De("Unsupported protocol "+te+":",De.ERR_BAD_REQUEST,n));return}C.send(a||null)})},Pb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof De?_:new aa(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,a(new De(`timeout ${e} of ms exceeded`,De.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>q.asap(d),f}},Nb=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},xb=async function*(n,e){for await(const t of bb(n))yield*Nb(t,e)},bb=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Dv=(n,e,t,i)=>{const o=xb(n,e);let a=0,u,d=f=>{u||(u=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:y,value:_}=await o.next();if(y){d(),f.close();return}let E=_.byteLength;if(t){let S=a+=E;t(S)}f.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(f){return d(f),o.return()}},{highWaterMark:2})},Lv=64*1024,{isFunction:Tc}=q,Ob=(({Request:n,Response:e})=>({Request:n,Response:e}))(q.global),{ReadableStream:Vv,TextEncoder:Mv}=q.global,Fv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Db=n=>{n=q.merge.call({skipUndefined:!0},Ob,n);const{fetch:e,Request:t,Response:i}=n,o=e?Tc(e):typeof fetch=="function",a=Tc(t),u=Tc(i);if(!o)return!1;const d=o&&Tc(Vv),f=o&&(typeof Mv=="function"?(x=>M=>x.encode(M))(new Mv):async x=>new Uint8Array(await new t(x).arrayBuffer())),y=a&&d&&Fv(()=>{let x=!1;const M=new t(Gt.origin,{body:new Vv,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!M}),_=u&&d&&Fv(()=>q.isReadableStream(new i("").body)),E={stream:_&&(x=>x.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!E[x]&&(E[x]=(M,C)=>{let Y=M&&M[x];if(Y)return Y.call(M);throw new De(`Response type '${x}' is not supported`,De.ERR_NOT_SUPPORT,C)})});const S=async x=>{if(x==null)return 0;if(q.isBlob(x))return x.size;if(q.isSpecCompliantForm(x))return(await new t(Gt.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(q.isArrayBufferView(x)||q.isArrayBuffer(x))return x.byteLength;if(q.isURLSearchParams(x)&&(x=x+""),q.isString(x))return(await f(x)).byteLength},V=async(x,M)=>{const C=q.toFiniteNumber(x.getContentLength());return C??S(M)};return async x=>{let{url:M,method:C,data:Y,signal:te,cancelToken:ne,timeout:G,onDownloadProgress:K,onUploadProgress:Z,responseType:k,headers:I,withCredentials:A="same-origin",fetchOptions:b}=G0(x),O=e||fetch;k=k?(k+"").toLowerCase():"text";let D=Pb([te,ne&&ne.toAbortSignal()],G),R=null;const ge=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let qe;try{if(Z&&y&&C!=="get"&&C!=="head"&&(qe=await V(I,Y))!==0){let U=new t(M,{method:"POST",body:Y,duplex:"half"}),Q;if(q.isFormData(Y)&&(Q=U.headers.get("content-type"))&&I.setContentType(Q),U.body){const[ye,Pe]=xv(qe,sh(bv(Z)));Y=Dv(U.body,Lv,ye,Pe)}}q.isString(A)||(A=A?"include":"omit");const Fe=a&&"credentials"in t.prototype,Ve={...b,signal:D,method:C.toUpperCase(),headers:I.normalize().toJSON(),body:Y,duplex:"half",credentials:Fe?A:void 0};R=a&&new t(M,Ve);let ae=await(a?O(R,b):O(M,Ve));const we=_&&(k==="stream"||k==="response");if(_&&(K||we&&ge)){const U={};["status","statusText","headers"].forEach(xe=>{U[xe]=ae[xe]});const Q=q.toFiniteNumber(ae.headers.get("content-length")),[ye,Pe]=K&&xv(Q,sh(bv(K),!0))||[];ae=new i(Dv(ae.body,Lv,ye,()=>{Pe&&Pe(),ge&&ge()}),U)}k=k||"text";let he=await E[q.findKey(E,k)||"text"](ae,x);return!we&&ge&&ge(),await new Promise((U,Q)=>{H0(U,Q,{data:he,headers:fn.from(ae.headers),status:ae.status,statusText:ae.statusText,config:x,request:R})})}catch(Fe){throw ge&&ge(),Fe&&Fe.name==="TypeError"&&/Load failed|fetch/i.test(Fe.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,x,R),{cause:Fe.cause||Fe}):De.from(Fe,Fe&&Fe.code,x,R)}}},Lb=new Map,Q0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,f,y,_=Lb;for(;d--;)f=a[d],y=_.get(f),y===void 0&&_.set(f,y=d?new Map:Db(e)),_=y;return y};Q0();const Ep={http:X1,xhr:kb,fetch:{get:Q0}};q.forEach(Ep,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Uv=n=>`- ${n}`,Vb=n=>q.isFunction(n)||n===null||n===!1,J0={getAdapter:(n,e)=>{n=q.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!Vb(i)&&(o=Ep[(d=String(i)).toLowerCase()],o===void 0))throw new De(`Unknown adapter '${d}'`);if(o&&(q.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([f,y])=>`adapter ${f} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(Uv).join(`
`):" "+Uv(u[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:Ep};function Df(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new aa(null,n)}function jv(n){return Df(n),n.headers=fn.from(n.headers),n.data=Of.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),J0.getAdapter(n.adapter||Zl.adapter,n)(n).then(function(i){return Df(n),i.data=Of.call(n,n.transformResponse,i),i.headers=fn.from(i.headers),i},function(i){return W0(i)||(Df(n),i&&i.response&&(i.response.data=Of.call(n,n.transformResponse,i.response),i.response.headers=fn.from(i.response.headers))),Promise.reject(i)})}const Y0="1.12.2",Mh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Mh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Bv={};Mh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+Y0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new De(o(u," has been removed"+(t?" in "+t:"")),De.ERR_DEPRECATED);return t&&!Bv[u]&&(Bv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Mh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Mb(n,e,t){if(typeof n!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],f=d===void 0||u(d,a,n);if(f!==!0)throw new De("option "+a+" must be "+f,De.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new De("Unknown option "+a,De.ERR_BAD_OPTION)}}const Fc={assertOptions:Mb,validators:Mh},dr=Fc.validators;let As=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Pv,response:new Pv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ds(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&Fc.assertOptions(i,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:Fc.assertOptions(o,{encode:dr.function,serialize:dr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fc.assertOptions(t,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&q.merge(a.common,a[t.method]);a&&q.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=fn.concat(u,a);const d=[];let f=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(t)===!1||(f=f&&M.synchronous,d.unshift(M.fulfilled,M.rejected))});const y=[];this.interceptors.response.forEach(function(M){y.push(M.fulfilled,M.rejected)});let _,E=0,S;if(!f){const x=[jv.bind(this),void 0];for(x.unshift(...d),x.push(...y),S=x.length,_=Promise.resolve(t);E<S;)_=_.then(x[E++],x[E++]);return _}S=d.length;let V=t;for(;E<S;){const x=d[E++],M=d[E++];try{V=x(V)}catch(C){M.call(this,C);break}}try{_=jv.call(this,V)}catch(x){return Promise.reject(x)}for(E=0,S=y.length;E<S;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=Ds(this.defaults,e);const t=K0(e.baseURL,e.url,e.allowAbsoluteUrls);return z0(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){As.prototype[e]=function(t,i){return this.request(Ds(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(Ds(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}As.prototype[e]=t(),As.prototype[e+"Form"]=t(!0)});let Fb=class X0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new aa(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new X0(function(o){e=o}),cancel:e}}};function Ub(n){return function(t){return n.apply(null,t)}}function jb(n){return q.isObject(n)&&n.isAxiosError===!0}const Tp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tp).forEach(([n,e])=>{Tp[e]=n});function Z0(n){const e=new As(n),t=N0(As.prototype.request,e);return q.extend(t,As.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Z0(Ds(n,o))},t}const ut=Z0(Zl);ut.Axios=As;ut.CanceledError=aa;ut.CancelToken=Fb;ut.isCancel=W0;ut.VERSION=Y0;ut.toFormData=Vh;ut.AxiosError=De;ut.Cancel=ut.CanceledError;ut.all=function(e){return Promise.all(e)};ut.spread=Ub;ut.isAxiosError=jb;ut.mergeConfig=Ds;ut.AxiosHeaders=fn;ut.formToJSON=n=>q0(q.isHTMLForm(n)?new FormData(n):n);ut.getAdapter=J0.getAdapter;ut.HttpStatusCode=Tp;ut.default=ut;const{Axios:sO,AxiosError:oO,CanceledError:aO,isCancel:lO,CancelToken:uO,VERSION:cO,all:hO,Cancel:dO,isAxiosError:fO,spread:pO,toFormData:mO,AxiosHeaders:gO,HttpStatusCode:yO,formToJSON:_O,getAdapter:vO,mergeConfig:wO}=ut,eT="dm7y9ywjq",tT="barberia_unsigned",km=!!tT,Bb=n=>n.total?Math.round(n.loaded/n.total*100):0;async function zb(n,e={}){const{folder:t="barberia",onProgress:i}=e;if(!km)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");const o=`https://api.cloudinary.com/v1_1/${eT}/image/upload`,a=new FormData;a.append("file",n),a.append("upload_preset",tT),t&&a.append("folder",t);const u=!1,d=async f=>{const y=new FormData;a.forEach((S,V)=>{y.append(V,S)});const{data:_}=await ut.post(o,y,{onUploadProgress:S=>{if(!i)return;const V=Bb(S);V>0&&i(V)}});i?.(100);const E=typeof _.delete_token=="string"&&_.delete_token.trim().length?_.delete_token:null;return{url:_.secure_url,deleteToken:E}};try{return await d(u)}catch(f){if(console.error("No pudimos subir la imagen a Cloudinary",f),ut.isAxiosError(f)){const y=typeof f.response?.data?.error?.message=="string"?f.response.data.error.message:typeof f.response?.data?.message=="string"?f.response.data.message:null;throw new Error(y?`Cloudinary rechazo la imagen: ${y}`:"No pudimos subir la imagen. Intenta de nuevo.")}throw new Error("No pudimos subir la imagen. Intenta de nuevo.")}}async function $b(n){if(!n)throw new Error("Token de eliminacion invalido.");if(!km)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");try{const e=`https://api.cloudinary.com/v1_1/${eT}/delete_by_token`,t=new FormData;t.append("token",n),await ut.post(e,t)}catch(e){throw console.error("No pudimos eliminar la imagen en Cloudinary",e),new Error("No pudimos eliminar la imagen. Intenta de nuevo.")}}function qb({onUploaded:n,folder:e,disabled:t}){const[i,o]=W.useState(!1),[a,u]=W.useState(0),[d,f]=W.useState(null),y=async S=>{const V=S.target,x=V.files?.[0];if(x){o(!0),u(0),f(null);try{const M=await zb(x,{folder:e,onProgress:C=>u(C)});n(M)}catch(M){console.error(M),f(M instanceof Error?M.message:"No pudimos subir la imagen.")}finally{V.value="",o(!1),u(0)}}},_=t||i,E=i?`Subiendo...${a>0?` ${a}%`:""}`:"Subir imagen";return N.jsxs("div",{className:"space-y-1",children:[N.jsxs("label",{className:`uploader-trigger${_?" disabled":""}`,children:[N.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:_,onChange:y}),N.jsx("span",{children:E})]}),d&&N.jsx("p",{className:"text-xs text-red-500 text-right",children:d})]})}const Lf="clientes",Vf="cuts",Mf="public_portfolio";function Wb(){const{id:n}=xx(),e=Ql(),{user:t,role:i,demoMode:o}=ra(),[a,u]=W.useState([]),[d,f]=W.useState({fullName:"",phone:"",notes:[]}),[y,_]=W.useState(!0),[E,S]=W.useState(!1),[V,x]=W.useState(!1),[M,C]=W.useState(null),[Y,te]=W.useState(null),[ne,G]=W.useState(null),[K,Z]=W.useState(null),k=!Ae,I=i==="admin"||i==="barbero",A=km,b=k?"demo":n?`clientes/${n}`:"clientes",O=X=>X.map(oe=>({key:oe.id,id:oe.id,url:oe.url,deleteToken:oe.deleteToken??null,barberId:oe.barberId,demoId:oe.id})),D=(X,oe)=>{if(typeof X=="string"){const le={url:X,deleteToken:null};return oe&&(le.barberId=oe),{url:X,deleteToken:null,barberId:oe,rawValue:le,needsMigration:!0}}if(X&&typeof X=="object"){const le=X,Te=typeof le.url=="string"?le.url:typeof le.secure_url=="string"?le.secure_url:typeof le.path=="string"?le.path:"";if(!Te)return null;const nt=(typeof le.deleteToken=="string"?le.deleteToken:typeof le.delete_token=="string"?le.delete_token:null)??null,ht=typeof le.barberId=="string"&&le.barberId.trim().length>0,xt=ht?le.barberId.trim():oe,pn={url:Te,deleteToken:nt};xt&&(pn.barberId=xt);const Sr=!ht&&!!oe||typeof le.deleteToken>"u"||typeof le.delete_token=="string";return{url:Te,deleteToken:nt,barberId:xt,rawValue:pn,needsMigration:Sr}}return null},R=X=>{u(oe=>oe.filter(le=>le.key!==X))},ge=async(X,oe)=>{if(!(!Ae||!n))try{const le=Mt(Ae,Mf,X.key),Te={url:X.url,clientId:n,cutId:X.cutId??null,updatedAt:Lo()};oe?Te.createdAt=oe:Te.createdAt=Lo(),await a0(le,Te,{merge:!0})}catch(le){console.error("No pudimos publicar la foto en el portafolio publico.",le)}},qe=async X=>{if(!(!Ae||!n||!X.length))try{await Promise.all(X.map(async({photo:oe,createdAt:le})=>{const Te=Mt(Ae,Mf,oe.key);(await xl(Te)).exists()||await ge(oe,le)}))}catch(oe){console.error("No pudimos sincronizar el portafolio publico.",oe)}},Fe=async X=>{if(Ae)try{await bc(Mt(Ae,Mf,X))}catch(oe){console.error("No pudimos quitar la foto del portafolio publico.",oe)}},Ve=async X=>{if(!(!n||ne||!window.confirm("Seguro que deseas eliminar esta foto?"))){te(null),G(X.key);try{if(k){X.demoId&&YN(n,X.demoId),R(X.key);return}if(!X.deleteToken)throw new Error("No podemos eliminar esta imagen porque se subio antes de activar los tokens de Cloudinary.");if(await $b(X.deleteToken),X.cutId){const le=Mt(Ae,Vf,X.cutId);X.docHasSinglePhoto?await bc(le):X.rawValue!==void 0&&await _l(le,{photos:cN(X.rawValue)})}R(X.key),await Fe(X.key)}catch(le){console.error("No pudimos eliminar la foto",le),te(le instanceof Error?le.message:"No pudimos eliminar la imagen. Intenta de nuevo.")}finally{G(null)}}},ae=(X,oe)=>{if(!a.length)return;if(oe>=0&&oe<a.length){Z(oe);return}const le=a.findIndex(Te=>Te.key===X.key);Z(le>=0?le:0)};W.useEffect(()=>{if(K===null)return;if(!a.length){Z(null);return}const X=a.length-1;K>X&&Z(X)},[a,K]),W.useEffect(()=>{if(!n)return;if(te(null),G(null),k){const oe=m0(n);if(!oe){_(!1);return}_(!0),f({fullName:oe.fullName,phone:oe.phone==null?"":String(oe.phone),notes:yp(oe.notes)}),u(O(g0(n)));return}const X=uN(Mt(Ae,Lf,n),oe=>{if(!oe.exists()){_(!1);return}const le=oe.data();_(!0),f({fullName:le.fullName||"",phone:le.phone==null?"":String(le.phone),notes:yp(le.notes)})});return(async()=>{const oe=Nl(Yr(Ae,Vf),cp("clientId","==",n)),le=await Os(oe),Te=[];let Je=!1;le.forEach(nt=>{const ht=nt.data(),xt=Array.isArray(ht.photos)?ht.photos:[],pn=typeof ht.barberId=="string"&&ht.barberId.trim().length?ht.barberId.trim():void 0;xt.forEach((Ir,Sr)=>{const Sn=D(Ir,pn);if(!Sn)return;const Gi=`${nt.id}-${Sr}`;Te.push({photo:{key:Gi,id:Gi,url:Sn.url,deleteToken:Sn.deleteToken,cutId:nt.id,rawValue:Sn.rawValue,docHasSinglePhoto:xt.length<=1,barberId:Sn.barberId,createdAtRaw:ht.createdAt},createdAt:ht.createdAt}),Sn.needsMigration&&!Je&&(Je=!0,console.warn("Se detectaron fotos antiguas sin barberId. Actualiza manualmente esos documentos si tus reglas de seguridad lo permiten."))})}),Te.sort((nt,ht)=>{const xt=nt.createdAt?.toMillis?nt.createdAt.toMillis():Number(nt.createdAt)||0;return(ht.createdAt?.toMillis?ht.createdAt.toMillis():Number(ht.createdAt)||0)-xt}),u(Te.map(nt=>nt.photo).slice(0,12)),k||qe(Te)})(),()=>X()},[n,k]);const we=W.useMemo(()=>k?N.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[k]),he=async X=>{if(!n)return;if(te(null),k){const le=JN(n,{url:X.url,deleteToken:X.deleteToken??null,barberId:t?.uid||"demo-barber"});u(O(le).slice(0,12));return}const oe={url:X.url,deleteToken:X.deleteToken??null,barberId:t?.uid||""};try{const le=await l0(Yr(Ae,Vf),{clientId:n,barberId:t?.uid||"",photos:[oe],createdAt:Lo()}),Te=`${le.id}-0`,Je={key:Te,id:Te,url:X.url,deleteToken:X.deleteToken??null,cutId:le.id,rawValue:oe,docHasSinglePhoto:!0,barberId:t?.uid||"",createdAtRaw:Lo()};u(nt=>[Je,...nt].slice(0,12)),ge(Je)}catch(le){console.error("No pudimos registrar la foto",le),te("No pudimos guardar la foto en el cliente.")}},U=async()=>{if(!n)return;const X=(d.fullName??"").toString().trim(),oe=(d.phone??"").toString().trim();if(!X){C("El nombre es obligatorio.");return}S(!0),C(null);try{const le=Array.isArray(d.notes)?[...d.notes]:[];if(k)GN(n,{fullName:X,phone:oe||void 0,notes:le});else{const Te={fullName:X,fullName_lower:X.toLowerCase()};oe?Te.phone=oe:Te.phone=ov(),le.length>0?Te.notes=le:Te.notes=ov(),await _l(Mt(Ae,Lf,n),Te)}}catch(le){console.error("No pudimos actualizar el cliente",le),C("No pudimos actualizar el cliente.")}finally{S(!1)}},Q=X=>{f(oe=>{const le=oe.notes.includes(X);return{...oe,notes:le?oe.notes.filter(Te=>Te!==X):[...oe.notes,X]}})},ye=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){x(!0),C(null);try{k?QN(n):await bc(Mt(Ae,Lf,n)),e("/clientes")}catch(oe){console.error("No pudimos eliminar el cliente",oe),C("No pudimos eliminar el cliente."),x(!1)}}};if(!y)return N.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const Pe=(d.fullName??"").toString().trim()||"Cliente sin nombre",xe=(d.phone??"").toString().trim();return N.jsxs("div",{className:"panel space-y-8",children:[we,N.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),N.jsx("h1",{className:"detail-title",children:Pe}),N.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:xe?`Tel. ${xe}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),I&&N.jsxs("div",{className:"flex flex-col items-end gap-2",children:[N.jsx(qb,{onUploaded:he,folder:b}),N.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"}),!A&&!k&&N.jsxs("span",{className:"text-xs text-red-500",children:["Configura Cloudinary en el archivo ",N.jsx("code",{children:".env"})," para subir las imagenes a la nube."]})]})]}),N.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[N.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[N.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),N.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),N.jsx("input",{className:"input mt-1",value:d.fullName,onChange:X=>f(oe=>({...oe,fullName:X.target.value})),disabled:!I})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),N.jsx("input",{className:"input mt-1",value:d.phone,onChange:X=>f(oe=>({...oe,phone:X.target.value})),disabled:!I})]})]}),M&&N.jsx("p",{className:"text-xs text-red-500",children:M}),I&&N.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.jsx("button",{className:"btn btn-primary",onClick:()=>void U(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),N.jsx("button",{className:"btn btn-ghost",onClick:()=>void ye(),disabled:V,children:V?"Eliminando...":"Eliminar"})]})]}),N.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h2",{className:"detail-sub",children:"Galeria"}),a.length>0&&N.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[a.length," fotos"]})]}),N.jsx(h1,{photos:a,canDelete:I,onDelete:X=>void Ve(X),onSelect:(X,oe)=>ae(X,oe)}),Y&&N.jsx("p",{className:"text-xs text-red-500",children:Y}),k&&!o||!A?N.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:A?"Configura Cloudinary para guardar fotos reales.":"Las variables de Cloudinary no estan definidas. Usa tus credenciales para guardar las imagenes."}):null,!A&&N.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Mientras tanto se utilizaran imagenes de muestra temporales."})]})]}),N.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[N.jsx("h2",{className:"detail-sub",children:"Notas"}),N.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:Sm.map(X=>{const oe=d.notes.includes(X);return N.jsxs("label",{className:`flex items-center gap-3 rounded-xl border border-[var(--border-soft)] bg-white/60 px-3 py-2 text-sm text-[var(--ink)] ${I?"cursor-pointer hover:border-[var(--accent-soft)]":"opacity-70"}`,children:[N.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-[var(--accent)]",checked:oe,onChange:()=>Q(X),disabled:!I}),N.jsx("span",{children:a1[X]})]},X)})}),I&&N.jsx("button",{onClick:()=>void U(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]}),K!==null&&a.length>0?N.jsx(d1,{photos:a,initialIndex:K,onClose:()=>Z(null)}):null]})}const Hb=5e3,Kb=1300;function Gb({items:n,intervalMs:e=Hb,transitionMs:t=Kb}){const[i,o]=W.useState(0),a=W.useRef(null),u=W.useMemo(()=>n.filter(f=>!!f?.url),[n]),d=u.length;return W.useEffect(()=>{o(f=>d===0||f>=d?0:f)},[d]),W.useEffect(()=>{if(!(d<=1))return a.current&&window.clearInterval(a.current),a.current=window.setInterval(()=>{o(f=>(f+1)%d)},Math.max(e,t)),()=>{a.current&&(window.clearInterval(a.current),a.current=null)}},[d,e,t]),d?N.jsx("div",{className:"auto-carousel-container",children:u.map((f,y)=>{const _=y===i;return N.jsxs("div",{className:"auto-carousel-slide","data-active":_?"true":"false",style:{transition:`opacity ${t}ms ease-in-out`},children:[N.jsx("img",{src:f.url,alt:f.alt||f.caption||"Foto de cliente"}),f.caption?N.jsx("div",{className:"auto-carousel-caption",children:f.caption}):null]},f.id)})}):N.jsx("div",{className:"auto-carousel-placeholder",children:N.jsx("span",{children:"No hay imágenes disponibles aún."})})}const zv={"auth/invalid-email":"El correo no tiene un formato válido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contraseña incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales inválidas. Verifica tus datos.","auth/user-disabled":"La cuenta está deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},$v=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in zv)return zv[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesión. Verifica tus datos."}return"No pudimos iniciar sesión. Verifica tu correo y contraseña."},Ff=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al día con las imágenes de cada servicio"}];function Qb(){const[n,e]=W.useState(""),[t,i]=W.useState(""),[o,a]=W.useState(!1),[u,d]=W.useState(null),[f,y]=W.useState(null),[_,E]=W.useState([]),S=Ql(),{user:V,loading:x}=ra(),M=!Ae,C=W.useMemo(()=>{if(_.length)return _;const G=Ff[2];return[{id:"portfolio-fallback",url:G.src,alt:G.caption}]},[_]);W.useEffect(()=>{!x&&V&&S("/clientes",{replace:!0})},[V,x,S]),W.useEffect(()=>{let G=!0;const K=b=>{if(typeof b=="string")return b;if(b&&typeof b=="object"){const O=b;if(typeof O.url=="string"&&O.url)return O.url;if(typeof O.secure_url=="string"&&O.secure_url)return O.secure_url;if(typeof O.path=="string"&&O.path)return O.path}return null},Z=()=>{const b=Lc(),O=[];return b.forEach(D=>{g0(D.id).forEach((ge,qe)=>{ge?.url&&O.push({id:`${D.id}-${ge.id??qe}`,url:ge.url})})}),O},k=async()=>{if(!Ae)return[];const b=Yr(Ae,"cuts"),O=await Os(b),D=[];return O.forEach(R=>{const ge=R.data(),qe=ge.createdAt?.toMillis?ge.createdAt.toMillis():typeof ge.createdAt=="number"?ge.createdAt:0;(Array.isArray(ge.photos)?ge.photos:[]).forEach((Ve,ae)=>{const we=K(Ve);we&&D.push({id:`${R.id}-${ae}`,url:we,createdAt:qe})})}),D.sort((R,ge)=>ge.createdAt-R.createdAt),D.map(({id:R,url:ge})=>({id:R,url:ge}))},I=async()=>{if(!Ae)return[];const b=Yr(Ae,"public_portfolio"),O=Nl(b,n0("createdAt","desc"),hp(30));return(await Os(O)).docs.map(R=>{const ge=R.data(),qe=typeof ge.url=="string"?ge.url:null;return qe?{id:R.id,url:qe}:null}).filter(Boolean)};return(async()=>{if(M||!Ae){const b=Z();G&&E(b);return}try{const b=await I();if(b.length){G&&E(b);return}}catch(b){console.error("No pudimos acceder al portafolio publico.",b)}try{const b=await k();G&&E(b)}catch(b){console.error("No pudimos cargar las imagenes del portafolio visual.",b),G&&E([])}})().catch(b=>console.error("Error inesperado al cargar portafolio visual.",b)),()=>{G=!1}},[M]);const Y=async G=>{if(G.preventDefault(),!In||!Ae)return;const K=n.trim(),Z=t.trim();if(!K||!Z){d("Completa ambos campos para continuar.");return}a(!0),d(null),y(null);try{const I=(await KR(In,K,Z)).user.uid,A=Mt(Ae,"barberos",I),b=await xl(A);let O=null;if(b.exists())O=b.data().role||null;else{const D=Mt(Ae,"users",I),R=await xl(D);R.exists()&&(O=R.data().role||null)}if(!O)throw new Error("No se encontró el rol del usuario.");if(O==="admin")S("/admin/usuarios",{replace:!0});else if(O==="barbero")S("/clientes",{replace:!0});else throw new Error("Rol desconocido o no autorizado.")}catch(k){console.error("Error al iniciar sesión:",k),d($v(k))}finally{a(!1)}},te=async()=>{if(!In)return;const G=n.trim();if(!G){d("Ingresa tu correo para recuperar la contraseña.");return}try{await WR(In,G),y("Te enviamos un correo para restablecer tu contraseña."),d(null)}catch(K){console.error("Error al enviar correo de recuperación:",K),d($v(K)),y(null)}};return N.jsx("div",{className:"login-hero",children:N.jsxs("div",{className:"login-hero-inner",children:[N.jsx("div",{className:"space-y-4 text-center",children:N.jsxs("div",{className:"look-fusion-lockup",children:[N.jsx("img",{src:"/barberia/images/logo.png",alt:"Logotipo Look Fusion",className:"look-fusion-logo"}),N.jsx("h1",{className:"login-heading look-fusion-wordmark",children:"LOOK FUSION"})]})}),N.jsxs("div",{className:"login-card",children:[N.jsxs("div",{className:"login-gallery",children:[N.jsx("div",{className:"login-gallery-top",children:Ff.slice(0,2).map(G=>N.jsxs("figure",{children:[N.jsx("img",{src:G.src,alt:G.caption}),N.jsx("figcaption",{children:G.caption})]},G.caption))}),N.jsxs("figure",{children:[N.jsx(Gb,{items:C,transitionMs:1300}),N.jsx("figcaption",{children:Ff[2].caption})]})]}),N.jsxs("div",{className:"login-panel",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("h2",{children:"Inicia sesión"}),N.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automáticamente al módulo correspondiente según tu rol."})]}),N.jsxs("form",{className:"login-form",onSubmit:Y,children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),N.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:G=>e(G.target.value),type:"email",autoComplete:"email",required:!0})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contraseña"}),N.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:G=>i(G.target.value),autoComplete:"current-password",required:!0,minLength:6})]}),u&&N.jsx("p",{className:"text-xs text-red-600",children:u}),f&&N.jsx("p",{className:"text-xs text-green-600",children:f}),N.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Ingresando...":"Entrar"}),N.jsx("button",{className:"mt-2 text-sm font-semibold text-[#d67c21] underline hover:text-[#b86516]",type:"button",disabled:o,onClick:te,children:"Olvidé mi contraseña"})]}),N.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[N.jsxs("p",{children:[N.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),N.jsxs("p",{children:[N.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galería asignada."]}),N.jsxs("p",{children:["Soporte: ",N.jsx("span",{className:"font-semibold text-black/70",children:"barberiawebpro@gmail.com"})]})]})]})]})]})})}async function Jb(n){if(!In||!Ae)return{success:!1,message:"Firebase no está inicializado."};try{const t=(await HR(In,n.email,n.password)).user.uid;return await a0(Mt(Ae,"barberos",t),{email:n.email.toLowerCase(),displayName:n.displayName,role:"barbero",createdAt:Lo()}),console.log("✅ Barbero registrado correctamente:",n.email),{success:!0,uid:t}}catch(e){return console.error("❌ Error al registrar barbero:",e),typeof e=="object"&&e&&"code"in e&&e.code==="auth/email-already-in-use"?{success:!1,message:"El correo ya está registrado."}:{success:!1,message:e instanceof Error?e.message:"Error desconocido"}}}const il="barberos",Yb=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,sl=(n,e)=>`${n??""} ${e??""}`.trim(),Uf={firstName:"",lastName:"",email:"",dni:"",role:"barbero",password:""},ol=()=>y0().map(n=>{const e=(n.displayName||"").trim().split(" "),t=e.shift()||n.displayName||"",i=e.join(" ");return{id:n.id,displayName:n.displayName,firstName:t,lastName:i,email:n.email,emailLower:n.email.toLowerCase(),dni:n.id.replace("demo-user-",""),role:n.role}});function Xb(){const{role:n,loading:e}=ra(),t=!Ae,[i,o]=W.useState(()=>t?ol():[]),[a,u]=W.useState(""),[d,f]=W.useState(!1),[y,_]=W.useState(!1),[E,S]=W.useState(Uf),[V,x]=W.useState(null);W.useEffect(()=>{if(!Ae){o(ol());return}(async()=>{const Z=await Os(Nl(Yr(Ae,il),n0("displayName")));o(Z.docs.map(k=>{const I=k.data(),A=I.firstName||I.nombre||"",b=I.lastName||I.apellido||"",O=I.dni||"";return{id:k.id,displayName:I.displayName||sl(A,b),firstName:A,lastName:b,email:I.email,emailLower:I.emailLower,dni:O,role:I.role}}))})()},[Ae]);const M=a.trim().toLowerCase(),C=W.useMemo(()=>i.filter(K=>{if(!M)return!0;const Z=(K.displayName||sl(K.firstName,K.lastName)).toLowerCase(),k=K.emailLower||K.email?.toLowerCase()||"",I=(K.dni||"").toLowerCase();return Z.includes(M)||k.includes(M)||I.includes(M)}),[i,M]),Y=K=>{if(K){const k=(K.displayName||sl(K.firstName,K.lastName)).split(" "),I=K.firstName||k.shift()||"",A=K.lastName||k.join(" ");S({id:K.id,firstName:I,lastName:A,email:K.email||"",dni:K.dni||"",role:K.role||"barbero",password:""})}else S(Uf);x(null),_(!0)},te=async K=>{K.preventDefault();const Z=E.firstName.trim(),k=E.lastName.trim(),I=E.email.trim(),A=E.dni.trim(),b=E.password.trim();if(!Z||!k||!I||!A){x("Nombre, apellido, email y DNI son obligatorios.");return}if(!Yb.test(I)){x("Ingresa un correo válido.");return}const O=sl(Z,k),D=I.toLowerCase();f(!0),x(null);try{if(!Ae)E.id?dv(E.id,{displayName:O,email:I,role:E.role}):XN({displayName:O,email:I,role:E.role}),o(ol());else if(E.id)await _l(Mt(Ae,il,E.id),{firstName:Z,lastName:k,displayName:O,email:I,emailLower:D,dni:A,role:E.role}),o(R=>R.map(ge=>ge.id===E.id?{...ge,firstName:Z,lastName:k,displayName:O,email:I,emailLower:D,dni:A,role:E.role}:ge));else{if(b.length<6){x("La contraseña debe tener al menos 6 caracteres."),f(!1);return}const R=await Jb({displayName:O,email:I,password:b});if(!R.success||!R.uid)throw new Error(R.message||"No pudimos registrar el barbero.");await _l(Mt(Ae,il,R.uid),{firstName:Z,lastName:k,email:I,emailLower:D,dni:A,role:E.role}),o(ge=>[{id:R.uid,firstName:Z,lastName:k,displayName:O,email:I,emailLower:D,dni:A,role:E.role},...ge])}_(!1),S(Uf)}catch(R){console.error("No pudimos guardar el usuario",R);const ge=R instanceof Error?R.message:"No pudimos guardar el usuario.";x(ge)}finally{f(!1)}},ne=async(K,Z)=>{if(!Ae){dv(K,{role:Z}),o(ol());return}await _l(Mt(Ae,il,K),{role:Z}),o(k=>k.map(I=>I.id===K?{...I,role:Z}:I))},G=async K=>{if(window.confirm("Seguro que deseas eliminar este barbero?"))try{Ae?(await bc(Mt(Ae,il,K)),o(Z=>Z.filter(k=>k.id!==K))):(ZN(K),o(ol()))}catch(Z){console.error("No pudimos eliminar el usuario",Z),x("No pudimos eliminar el usuario.")}};return e?N.jsx("div",{className:"panel text-[var(--ink)]",children:"Cargando usuarios…"}):n!=="admin"?N.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta página."}):N.jsxs("div",{className:"panel space-y-6",children:[N.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),N.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Gestión de barberos"}),N.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:"Crea cuentas nuevas, asigna roles y mantén la información de tu staff al día."})]}),N.jsx("button",{className:"btn btn-primary",onClick:()=>Y(),children:"Nuevo barbero"})]}),N.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:N.jsx("input",{className:"searchbar",placeholder:"Buscar por nombre, correo o DNI",value:a,onChange:K=>u(K.target.value)})}),y&&N.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:te,children:[N.jsxs("div",{className:"grid gap-3 md:grid-cols-5",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),N.jsx("input",{className:"input mt-1",placeholder:"Ej. Ana",value:E.firstName,onChange:K=>S(Z=>({...Z,firstName:K.target.value}))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Apellido"}),N.jsx("input",{className:"input mt-1",placeholder:"Ej. Gómez",value:E.lastName,onChange:K=>S(Z=>({...Z,lastName:K.target.value}))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"DNI"}),N.jsx("input",{className:"input mt-1",placeholder:"Ej. 12345678",value:E.dni,onChange:K=>S(Z=>({...Z,dni:K.target.value}))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),N.jsx("input",{className:"input mt-1",placeholder:"correo@dominio.com",value:E.email,onChange:K=>S(Z=>({...Z,email:K.target.value})),type:"email"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),N.jsxs("select",{className:"input mt-1",value:E.role,onChange:K=>S(Z=>({...Z,role:K.target.value})),children:[N.jsx("option",{value:"barbero",children:"barbero"}),N.jsx("option",{value:"admin",children:"admin"})]})]})]}),!E.id&&N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Contraseña temporal"}),N.jsx("input",{className:"input mt-1",placeholder:"Mínimo 6 caracteres",type:"password",value:E.password,onChange:K=>S(Z=>({...Z,password:K.target.value})),required:!0,minLength:6})]}),V&&N.jsx("p",{className:"text-xs text-red-500",children:V}),N.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),N.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>_(!1),children:"Cancelar"})]})]}),N.jsxs("div",{className:"overflow-x-auto",children:[N.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[N.jsx("thead",{children:N.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[N.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre completo"}),N.jsx("th",{className:"py-2 pr-3 font-semibold",children:"DNI"}),N.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),N.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),N.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),N.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:C.map(K=>N.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[N.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre completo",children:K.displayName||sl(K.firstName,K.lastName)||"-"}),N.jsx("td",{className:"py-3 pr-3","data-label":"DNI",children:K.dni||"-"}),N.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:K.email||"-"}),N.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:K.role}),N.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:N.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[N.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:K.role,onChange:Z=>ne(K.id,Z.target.value),children:[N.jsx("option",{value:"barbero",children:"barbero"}),N.jsx("option",{value:"admin",children:"admin"})]}),N.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Y(K),children:"Editar"}),N.jsx("button",{className:"w-full sm:w-auto rounded-full px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:()=>void G(K.id),disabled:K.role==="admin",children:"Eliminar"})]})})]},K.id))})]}),!C.length&&N.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),N.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Las cuentas creadas desde este panel generan usuario en Firebase Auth y perfil en Firestore automáticamente."})]})}function jf({children:n}){const{role:e,logout:t,user:i,profileName:o}=ra(),a=e?e.charAt(0).toUpperCase()+e.slice(1):null,u=o||i?.displayName||i?.email||a||"Perfil",d=Ql(),[f,y]=W.useState(!1),_="/barberia/images/logo.png",E=({isActive:C})=>`nav-pill${C?" active":""}`,S=e==="admin"?"/admin/usuarios":"/clientes",V=async()=>{await t(),d("/login"),y(!1)},x=()=>y(!1),M=()=>y(C=>!C);return N.jsxs("div",{className:"app-shell",children:[N.jsx("nav",{className:"navbar",children:N.jsxs("div",{className:"inner",children:[N.jsxs("div",{className:"navbar-heading",children:[N.jsxs(Im,{to:S,className:"brand",onClick:x,children:[N.jsx("img",{src:_,alt:"Logotipo Look Fusion",className:"brand-logo"}),N.jsx("span",{className:"brand-wordmark",children:"LOOK FUSION"})]}),N.jsxs("button",{type:"button",className:"navbar-toggle",onClick:M,"aria-expanded":f,"aria-controls":"primary-nav",children:[N.jsx("span",{className:"sr-only",children:"Abrir menu"}),N.jsx("span",{className:"line"}),N.jsx("span",{className:"line"}),N.jsx("span",{className:"line"})]})]}),N.jsxs("div",{id:"primary-nav",className:`nav-links${f?" open":""}`,children:[N.jsx(Ev,{to:"/clientes",className:E,onClick:x,children:"Clientes"}),e==="admin"&&N.jsx(Ev,{to:"/admin/usuarios",className:E,onClick:x,children:"Dashboard"}),i&&N.jsx("span",{className:"nav-pill",children:u}),i&&N.jsx("button",{type:"button",className:"nav-pill",onClick:V,children:"Salir"})]})]})}),N.jsx("main",{className:"page-container",children:n})]})}function Zb(){return N.jsx(rx,{children:N.jsx(t1,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:N.jsxs(Kx,{children:[N.jsx(Oo,{path:"/",element:N.jsx(pp,{to:"/clientes",replace:!0})}),N.jsx(Oo,{path:"/login",element:N.jsx(Qb,{})}),N.jsx(Oo,{path:"/clientes",element:N.jsx(xf,{children:N.jsx(jf,{children:N.jsx(c1,{})})})}),N.jsx(Oo,{path:"/clientes/:id",element:N.jsx(xf,{children:N.jsx(jf,{children:N.jsx(Wb,{})})})}),N.jsx(Oo,{path:"/admin/usuarios",element:N.jsx(xf,{allowedRoles:["admin"],children:N.jsx(jf,{children:N.jsx(Xb,{})})})})]})})})}mI.createRoot(document.getElementById("root")).render(N.jsx(Wv.StrictMode,{children:N.jsx(Zb,{})}));
