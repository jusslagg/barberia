function eI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function zv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uf={exports:{}},Ya={},cf={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function tI(){if(Oy)return be;Oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,U={};function R(b,j,ue){this.props=b,this.context=j,this.refs=U,this.updater=ue||F}R.prototype.isReactComponent={},R.prototype.setState=function(b,j){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,j,"setState")},R.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function Y(){}Y.prototype=R.prototype;function ee(b,j,ue){this.props=b,this.context=j,this.refs=U,this.updater=ue||F}var X=ee.prototype=new Y;X.constructor=ee,P(X,R.prototype),X.isPureReactComponent=!0;var re=Array.isArray,K=Object.prototype.hasOwnProperty,Z={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(b,j,ue){var Te,_e={},Ie=null,xe=null;if(j!=null)for(Te in j.ref!==void 0&&(xe=j.ref),j.key!==void 0&&(Ie=""+j.key),j)K.call(j,Te)&&!N.hasOwnProperty(Te)&&(_e[Te]=j[Te]);var Oe=arguments.length-2;if(Oe===1)_e.children=ue;else if(1<Oe){for(var We=Array(Oe),lt=0;lt<Oe;lt++)We[lt]=arguments[lt+2];_e.children=We}if(b&&b.defaultProps)for(Te in Oe=b.defaultProps,Oe)_e[Te]===void 0&&(_e[Te]=Oe[Te]);return{$$typeof:n,type:b,key:Ie,ref:xe,props:_e,_owner:Z.current}}function C(b,j){return{$$typeof:n,type:b.type,key:j,ref:b.ref,props:b.props,_owner:b._owner}}function O(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function V(b){var j={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ue){return j[ue]})}var L=/\/+/g;function A(b,j){return typeof b=="object"&&b!==null&&b.key!=null?V(""+b.key):j.toString(36)}function Pe(b,j,ue,Te,_e){var Ie=typeof b;(Ie==="undefined"||Ie==="boolean")&&(b=null);var xe=!1;if(b===null)xe=!0;else switch(Ie){case"string":case"number":xe=!0;break;case"object":switch(b.$$typeof){case n:case e:xe=!0}}if(xe)return xe=b,_e=_e(xe),b=Te===""?"."+A(xe,0):Te,re(_e)?(ue="",b!=null&&(ue=b.replace(L,"$&/")+"/"),Pe(_e,j,ue,"",function(lt){return lt})):_e!=null&&(O(_e)&&(_e=C(_e,ue+(!_e.key||xe&&xe.key===_e.key?"":(""+_e.key).replace(L,"$&/")+"/")+b)),j.push(_e)),1;if(xe=0,Te=Te===""?".":Te+":",re(b))for(var Oe=0;Oe<b.length;Oe++){Ie=b[Oe];var We=Te+A(Ie,Oe);xe+=Pe(Ie,j,ue,We,_e)}else if(We=S(b),typeof We=="function")for(b=We.call(b),Oe=0;!(Ie=b.next()).done;)Ie=Ie.value,We=Te+A(Ie,Oe++),xe+=Pe(Ie,j,ue,We,_e);else if(Ie==="object")throw j=String(b),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return xe}function Qe(b,j,ue){if(b==null)return b;var Te=[],_e=0;return Pe(b,Te,"","",function(Ie){return j.call(ue,Ie,_e++)}),Te}function Ue(b){if(b._status===-1){var j=b._result;j=j(),j.then(function(ue){(b._status===0||b._status===-1)&&(b._status=1,b._result=ue)},function(ue){(b._status===0||b._status===-1)&&(b._status=2,b._result=ue)}),b._status===-1&&(b._status=0,b._result=j)}if(b._status===1)return b._result.default;throw b._result}var Ve={current:null},oe={transition:null},ye={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:oe,ReactCurrentOwner:Z};function G(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:Qe,forEach:function(b,j,ue){Qe(b,function(){j.apply(this,arguments)},ue)},count:function(b){var j=0;return Qe(b,function(){j++}),j},toArray:function(b){return Qe(b,function(j){return j})||[]},only:function(b){if(!O(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},be.Component=R,be.Fragment=t,be.Profiler=o,be.PureComponent=ee,be.StrictMode=i,be.Suspense=p,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,be.act=G,be.cloneElement=function(b,j,ue){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Te=P({},b.props),_e=b.key,Ie=b.ref,xe=b._owner;if(j!=null){if(j.ref!==void 0&&(Ie=j.ref,xe=Z.current),j.key!==void 0&&(_e=""+j.key),b.type&&b.type.defaultProps)var Oe=b.type.defaultProps;for(We in j)K.call(j,We)&&!N.hasOwnProperty(We)&&(Te[We]=j[We]===void 0&&Oe!==void 0?Oe[We]:j[We])}var We=arguments.length-2;if(We===1)Te.children=ue;else if(1<We){Oe=Array(We);for(var lt=0;lt<We;lt++)Oe[lt]=arguments[lt+2];Te.children=Oe}return{$$typeof:n,type:b.type,key:_e,ref:Ie,props:Te,_owner:xe}},be.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:a,_context:b},b.Consumer=b},be.createElement=I,be.createFactory=function(b){var j=I.bind(null,b);return j.type=b,j},be.createRef=function(){return{current:null}},be.forwardRef=function(b){return{$$typeof:d,render:b}},be.isValidElement=O,be.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Ue}},be.memo=function(b,j){return{$$typeof:y,type:b,compare:j===void 0?null:j}},be.startTransition=function(b){var j=oe.transition;oe.transition={};try{b()}finally{oe.transition=j}},be.unstable_act=G,be.useCallback=function(b,j){return Ve.current.useCallback(b,j)},be.useContext=function(b){return Ve.current.useContext(b)},be.useDebugValue=function(){},be.useDeferredValue=function(b){return Ve.current.useDeferredValue(b)},be.useEffect=function(b,j){return Ve.current.useEffect(b,j)},be.useId=function(){return Ve.current.useId()},be.useImperativeHandle=function(b,j,ue){return Ve.current.useImperativeHandle(b,j,ue)},be.useInsertionEffect=function(b,j){return Ve.current.useInsertionEffect(b,j)},be.useLayoutEffect=function(b,j){return Ve.current.useLayoutEffect(b,j)},be.useMemo=function(b,j){return Ve.current.useMemo(b,j)},be.useReducer=function(b,j,ue){return Ve.current.useReducer(b,j,ue)},be.useRef=function(b){return Ve.current.useRef(b)},be.useState=function(b){return Ve.current.useState(b)},be.useSyncExternalStore=function(b,j,ue){return Ve.current.useSyncExternalStore(b,j,ue)},be.useTransition=function(){return Ve.current.useTransition()},be.version="18.3.1",be}var Dy;function wp(){return Dy||(Dy=1,cf.exports=tI()),cf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function nI(){if(Ly)return Ya;Ly=1;var n=wp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,y){var v,E={},S=null,F=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(F=p.ref);for(v in p)i.call(p,v)&&!a.hasOwnProperty(v)&&(E[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)E[v]===void 0&&(E[v]=p[v]);return{$$typeof:e,type:d,key:S,ref:F,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=u,Ya.jsxs=u,Ya}var Vy;function rI(){return Vy||(Vy=1,uf.exports=nI()),uf.exports}var x=rI(),Q=wp();const $v=zv(Q),iI=eI({__proto__:null,default:$v},[Q]);var hc={},hf={exports:{}},on={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function sI(){return My||(My=1,(function(n){function e(oe,ye){var G=oe.length;oe.push(ye);e:for(;0<G;){var b=G-1>>>1,j=oe[b];if(0<o(j,ye))oe[b]=ye,oe[G]=j,G=b;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ye=oe[0],G=oe.pop();if(G!==ye){oe[0]=G;e:for(var b=0,j=oe.length,ue=j>>>1;b<ue;){var Te=2*(b+1)-1,_e=oe[Te],Ie=Te+1,xe=oe[Ie];if(0>o(_e,G))Ie<j&&0>o(xe,_e)?(oe[b]=xe,oe[Ie]=G,b=Ie):(oe[b]=_e,oe[Te]=G,b=Te);else if(Ie<j&&0>o(xe,G))oe[b]=xe,oe[Ie]=G,b=Ie;else break e}}return ye}function o(oe,ye){var G=oe.sortIndex-ye.sortIndex;return G!==0?G:oe.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],y=[],v=1,E=null,S=3,F=!1,P=!1,U=!1,R=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(oe){for(var ye=t(y);ye!==null;){if(ye.callback===null)i(y);else if(ye.startTime<=oe)i(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(y)}}function re(oe){if(U=!1,X(oe),!P)if(t(p)!==null)P=!0,Ue(K);else{var ye=t(y);ye!==null&&Ve(re,ye.startTime-oe)}}function K(oe,ye){P=!1,U&&(U=!1,Y(I),I=-1),F=!0;var G=S;try{for(X(ye),E=t(p);E!==null&&(!(E.expirationTime>ye)||oe&&!V());){var b=E.callback;if(typeof b=="function"){E.callback=null,S=E.priorityLevel;var j=b(E.expirationTime<=ye);ye=n.unstable_now(),typeof j=="function"?E.callback=j:E===t(p)&&i(p),X(ye)}else i(p);E=t(p)}if(E!==null)var ue=!0;else{var Te=t(y);Te!==null&&Ve(re,Te.startTime-ye),ue=!1}return ue}finally{E=null,S=G,F=!1}}var Z=!1,N=null,I=-1,C=5,O=-1;function V(){return!(n.unstable_now()-O<C)}function L(){if(N!==null){var oe=n.unstable_now();O=oe;var ye=!0;try{ye=N(!0,oe)}finally{ye?A():(Z=!1,N=null)}}else Z=!1}var A;if(typeof ee=="function")A=function(){ee(L)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Qe=Pe.port2;Pe.port1.onmessage=L,A=function(){Qe.postMessage(null)}}else A=function(){R(L,0)};function Ue(oe){N=oe,Z||(Z=!0,A())}function Ve(oe,ye){I=R(function(){oe(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){P||F||(P=!0,Ue(K))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(S){case 1:case 2:case 3:var ye=3;break;default:ye=S}var G=S;S=ye;try{return oe()}finally{S=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ye){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var G=S;S=oe;try{return ye()}finally{S=G}},n.unstable_scheduleCallback=function(oe,ye,G){var b=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?b+G:b):G=b,oe){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=G+j,oe={id:v++,callback:ye,priorityLevel:oe,startTime:G,expirationTime:j,sortIndex:-1},G>b?(oe.sortIndex=G,e(y,oe),t(p)===null&&oe===t(y)&&(U?(Y(I),I=-1):U=!0,Ve(re,G-b))):(oe.sortIndex=j,e(p,oe),P||F||(P=!0,Ue(K))),oe},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(oe){var ye=S;return function(){var G=S;S=ye;try{return oe.apply(this,arguments)}finally{S=G}}}})(ff)),ff}var Fy;function oI(){return Fy||(Fy=1,df.exports=sI()),df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function aI(){if(Uy)return on;Uy=1;var n=wp(),e=oI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(r){return p.call(E,r)?!0:p.call(v,r)?!1:y.test(r)?E[r]=!0:(v[r]=!0,!1)}function F(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,s,l,h){if(s===null||typeof s>"u"||F(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,l,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){R[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];R[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){R[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){R[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){R[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){R[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){R[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){R[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){R[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Y,ee);R[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Y,ee);R[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Y,ee);R[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){R[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),R.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){R[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,l,h){var f=R.hasOwnProperty(s)?R[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),Z=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Qe=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var G=Object.assign,b;function j(r){if(b===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+r}var ue=!1;function Te(r,s){if(!r||ue)return"";ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var h=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){h=q}r.call(s.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,k=g.length-1;1<=w&&0<=k&&f[w]!==g[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==g[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==g[k]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=k);break}}}finally{ue=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?j(r):""}function _e(r){switch(r.tag){case 5:return j(r.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return r=Te(r.type,!1),r;case 11:return r=Te(r.type.render,!1),r;case 1:return r=Te(r.type,!0),r;default:return""}}function Ie(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case Z:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Qe:return s=r.displayName||null,s!==null?s:Ie(r.type)||"Memo";case Ue:s=r._payload,r=r._init;try{return Ie(r(s))}catch{}}return null}function xe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lt(r){var s=We(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Mt(r){r._valueTracker||(r._valueTracker=lt(r))}function vr(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=We(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Xr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function $i(r,s){var l=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ds(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Oe(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ra(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ia(r,s){ra(r,s);var l=Oe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ls(r,s.type,l):s.hasOwnProperty("defaultValue")&&Ls(r,s.type,Oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Jl(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ls(r,s,l){(s!=="number"||Xr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var wr=Array.isArray;function Er(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Oe(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function sa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Vs(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(wr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Oe(l)}}function Ms(r,s){var l=Oe(s.value),h=Oe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function oa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Tr,aa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Tr=Tr||document.createElement("div"),Tr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Tr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Zr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wi=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(r){Wi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),qi[s]=qi[r]})});function la(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||qi.hasOwnProperty(r)&&qi[r]?(""+s).trim():s+"px"}function ua(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=la(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ca=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(r,s){if(s){if(ca[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Fs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Us=null,En=null,Yn=null;function js(r){if(r=Va(r)){if(typeof Us!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Au(s),Us(r.stateNode,r.type,s))}}function Xn(r){En?Yn?Yn.push(r):Yn=[r]:En=r}function fa(){if(En){var r=En,s=Yn;if(Yn=En=null,js(r),s)for(r=0;r<s.length;r++)js(s[r])}}function Ki(r,s){return r(s)}function pa(){}var Ir=!1;function ma(r,s,l){if(Ir)return r(s,l);Ir=!0;try{return Ki(r,s,l)}finally{Ir=!1,(En!==null||Yn!==null)&&(pa(),fa())}}function ct(r,s){var l=r.stateNode;if(l===null)return null;var h=Au(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Bs=!1;if(d)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Bs=!1}function Gi(r,s,l,h,f,g,w,k,D){var q=Array.prototype.slice.call(arguments,3);try{s.apply(l,q)}catch(ne){this.onError(ne)}}var Qi=!1,zs=null,On=!1,ga=null,Vh={onError:function(r){Qi=!0,zs=r}};function $s(r,s,l,h,f,g,w,k,D){Qi=!1,zs=null,Gi.apply(Vh,arguments)}function Yl(r,s,l,h,f,g,w,k,D){if($s.apply(this,arguments),Qi){if(Qi){var q=zs;Qi=!1,zs=null}else throw Error(t(198));On||(On=!0,ga=q)}}function Dn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Ji(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ln(r){if(Dn(r)!==r)throw Error(t(188))}function Xl(r){var s=r.alternate;if(!s){if(s=Dn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Ln(f),r;if(g===h)return Ln(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var w=!1,k=f.child;k;){if(k===l){w=!0,l=f,h=g;break}if(k===h){w=!0,h=f,l=g;break}k=k.sibling}if(!w){for(k=g.child;k;){if(k===l){w=!0,l=g,h=f;break}if(k===h){w=!0,h=g,l=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ya(r){return r=Xl(r),r!==null?qs(r):null}function qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=qs(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,_a=e.unstable_cancelCallback,Zl=e.unstable_shouldYield,Mh=e.unstable_requestPaint,Je=e.unstable_now,eu=e.unstable_getCurrentPriorityLevel,Yi=e.unstable_ImmediatePriority,ei=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,va=e.unstable_LowPriority,tu=e.unstable_IdlePriority,Xi=null,dn=null;function nu(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Xi,r,void 0,(r.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:iu,wa=Math.log,ru=Math.LN2;function iu(r){return r>>>=0,r===0?32:31-(wa(r)/ru|0)|0}var Hs=64,Ks=4194304;function ti(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Zi(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=l&268435455;if(w!==0){var k=w&~f;k!==0?h=ti(k):(g&=w,g!==0&&(h=ti(g)))}else w=l&~f,w!==0?h=ti(w):g!==0&&(h=ti(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Gt(s),f=1<<l,h|=r[l],s&=~f;return h}function Fh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Gt(g),k=1<<w,D=f[w];D===-1?((k&l)===0||(k&h)!==0)&&(f[w]=Fh(k,s)):D<=s&&(r.expiredLanes|=k),g&=~k}}function fn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function es(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function ni(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function ri(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Gt(s),r[s]=l}function Ge(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Gt(l),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~g}}function ii(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Gt(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Me=0;function si(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var su,Gs,ou,au,lu,Ea=!1,Zn=[],Pt=null,Vn=null,Mn=null,oi=new Map,In=new Map,er=[],Uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(r,s){switch(r){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":oi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(s.pointerId)}}function Xt(r,s,l,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Va(s),s!==null&&Gs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function jh(r,s,l,h,f){switch(s){case"focusin":return Pt=Xt(Pt,r,s,l,h,f),!0;case"dragenter":return Vn=Xt(Vn,r,s,l,h,f),!0;case"mouseover":return Mn=Xt(Mn,r,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return oi.set(g,Xt(oi.get(g)||null,r,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,In.set(g,Xt(In.get(g)||null,r,s,l,h,f)),!0}return!1}function cu(r){var s=ss(r.target);if(s!==null){var l=Dn(s);if(l!==null){if(s=l.tag,s===13){if(s=Ji(l),s!==null){r.blockedOn=s,lu(r.priority,function(){ou(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Hi=h,l.target.dispatchEvent(h),Hi=null}else return s=Va(l),s!==null&&Gs(s),r.blockedOn=l,!1;s.shift()}return!0}function ts(r,s,l){Rr(r)&&l.delete(s)}function hu(){Ea=!1,Pt!==null&&Rr(Pt)&&(Pt=null),Vn!==null&&Rr(Vn)&&(Vn=null),Mn!==null&&Rr(Mn)&&(Mn=null),oi.forEach(ts),In.forEach(ts)}function Fn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hu)))}function Un(r){function s(f){return Fn(f,r)}if(0<Zn.length){Fn(Zn[0],r);for(var l=1;l<Zn.length;l++){var h=Zn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Pt!==null&&Fn(Pt,r),Vn!==null&&Fn(Vn,r),Mn!==null&&Fn(Mn,r),oi.forEach(s),In.forEach(s),l=0;l<er.length;l++)h=er[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<er.length&&(l=er[0],l.blockedOn===null);)cu(l),l.blockedOn===null&&er.shift()}var Ar=re.ReactCurrentBatchConfig,ai=!0;function tt(r,s,l,h){var f=Me,g=Ar.transition;Ar.transition=null;try{Me=1,Ta(r,s,l,h)}finally{Me=f,Ar.transition=g}}function Bh(r,s,l,h){var f=Me,g=Ar.transition;Ar.transition=null;try{Me=4,Ta(r,s,l,h)}finally{Me=f,Ar.transition=g}}function Ta(r,s,l,h){if(ai){var f=Qs(r,s,l,h);if(f===null)Xh(r,s,h,ns,l),uu(r,h);else if(jh(f,r,s,l,h))h.stopPropagation();else if(uu(r,h),s&4&&-1<Uh.indexOf(r)){for(;f!==null;){var g=Va(f);if(g!==null&&su(g),g=Qs(r,s,l,h),g===null&&Xh(r,s,h,ns,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else Xh(r,s,h,null,l)}}var ns=null;function Qs(r,s,l,h){if(ns=null,r=Fs(h),r=ss(r),r!==null)if(s=Dn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Ji(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return ns=r,null}function Ia(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eu()){case Yi:return 1;case ei:return 4;case Tn:case va:return 16;case tu:return 536870912;default:return 16}default:return 16}}var pn=null,Js=null,Zt=null;function Sa(){if(Zt)return Zt;var r,s=Js,l=s.length,h,f="value"in pn?pn.value:pn.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(h=1;h<=w&&s[l-h]===f[g-h];h++);return Zt=f.slice(r,1<h?1-h:void 0)}function Ys(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function tr(){return!0}function Ra(){return!1}function Nt(r){function s(l,h,f,g,w){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?tr:Ra,this.isPropagationStopped=Ra,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Nt(jn),nr=G({},jn,{view:0,detail:0}),zh=Nt(nr),Zs,Cr,li,rs=G({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==li&&(li&&r.type==="mousemove"?(Zs=r.screenX-li.screenX,Cr=r.screenY-li.screenY):Cr=Zs=0,li=r),Zs)},movementY:function(r){return"movementY"in r?r.movementY:Cr}}),eo=Nt(rs),Aa=G({},rs,{dataTransfer:0}),du=Nt(Aa),to=G({},nr,{relatedTarget:0}),no=Nt(to),fu=G({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),kr=Nt(fu),pu=G({},jn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mu=Nt(pu),gu=G({},jn,{data:0}),Ca=Nt(gu),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=yu[r])?!!s[r]:!1}function rr(){return _u}var c=G({},nr,{key:function(r){if(r.key){var s=ro[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(r){return r.type==="keypress"?Ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Nt(c),_=G({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(_),B=G({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),H=Nt(B),le=G({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Nt(le),wt=G({},rs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Nt(wt),St=[9,13,27,32],ft=d&&"CompositionEvent"in window,Sn=null;d&&"documentMode"in document&&(Sn=document.documentMode);var mn=d&&"TextEvent"in window&&!Sn,is=d&&(!ft||Sn&&8<Sn&&11>=Sn),io=" ",Cm=!1;function km(r,s){switch(r){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function Y0(r,s){switch(r){case"compositionend":return Pm(s);case"keypress":return s.which!==32?null:(Cm=!0,io);case"textInput":return r=s.data,r===io&&Cm?null:r;default:return null}}function X0(r,s){if(so)return r==="compositionend"||!ft&&km(r,s)?(r=Sa(),Zt=Js=pn=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return is&&s.locale!=="ko"?null:s.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Z0[r.type]:s==="textarea"}function xm(r,s,l,h){Xn(h),s=Iu(s,"onChange"),0<s.length&&(l=new Xs("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ka=null,Pa=null;function eT(r){Qm(r,0)}function vu(r){var s=co(r);if(vr(s))return r}function tT(r,s){if(r==="change")return s}var bm=!1;if(d){var $h;if(d){var qh="oninput"in document;if(!qh){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),qh=typeof Om.oninput=="function"}$h=qh}else $h=!1;bm=$h&&(!document.documentMode||9<document.documentMode)}function Dm(){ka&&(ka.detachEvent("onpropertychange",Lm),Pa=ka=null)}function Lm(r){if(r.propertyName==="value"&&vu(Pa)){var s=[];xm(s,Pa,r,Fs(r)),ma(eT,s)}}function nT(r,s,l){r==="focusin"?(Dm(),ka=s,Pa=l,ka.attachEvent("onpropertychange",Lm)):r==="focusout"&&Dm()}function rT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Pa)}function iT(r,s){if(r==="click")return vu(s)}function sT(r,s){if(r==="input"||r==="change")return vu(s)}function oT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Bn=typeof Object.is=="function"?Object.is:oT;function Na(r,s){if(Bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Bn(r[f],s[f]))return!1}return!0}function Vm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mm(r,s){var l=Vm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vm(l)}}function Fm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Um(){for(var r=window,s=Xr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Xr(r.document)}return s}function Wh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function aT(r){var s=Um(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Fm(l.ownerDocument.documentElement,l)){if(h!==null&&Wh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Mm(l,g);var w=Mm(l,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var lT=d&&"documentMode"in document&&11>=document.documentMode,oo=null,Hh=null,xa=null,Kh=!1;function jm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kh||oo==null||oo!==Xr(h)||(h=oo,"selectionStart"in h&&Wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xa&&Na(xa,h)||(xa=h,h=Iu(Hh,"onSelect"),0<h.length&&(s=new Xs("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=oo)))}function wu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ao={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Gh={},Bm={};d&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Eu(r){if(Gh[r])return Gh[r];if(!ao[r])return r;var s=ao[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bm)return Gh[r]=s[l];return r}var zm=Eu("animationend"),$m=Eu("animationiteration"),qm=Eu("animationstart"),Wm=Eu("transitionend"),Hm=new Map,Km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(r,s){Hm.set(r,s),a(s,[r])}for(var Qh=0;Qh<Km.length;Qh++){var Jh=Km[Qh],uT=Jh.toLowerCase(),cT=Jh[0].toUpperCase()+Jh.slice(1);ui(uT,"on"+cT)}ui(zm,"onAnimationEnd"),ui($m,"onAnimationIteration"),ui(qm,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(Wm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Gm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Yl(h,s,void 0,r),r.currentTarget=null}function Qm(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var k=h[w],D=k.instance,q=k.currentTarget;if(k=k.listener,D!==g&&f.isPropagationStopped())break e;Gm(f,k,q),g=D}else for(w=0;w<h.length;w++){if(k=h[w],D=k.instance,q=k.currentTarget,k=k.listener,D!==g&&f.isPropagationStopped())break e;Gm(f,k,q),g=D}}}if(On)throw r=ga,On=!1,ga=null,r}function Xe(r,s){var l=s[id];l===void 0&&(l=s[id]=new Set);var h=r+"__bubble";l.has(h)||(Jm(s,r,2,!1),l.add(h))}function Yh(r,s,l){var h=0;s&&(h|=4),Jm(l,r,h,s)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Oa(r){if(!r[Tu]){r[Tu]=!0,i.forEach(function(l){l!=="selectionchange"&&(hT.has(l)||Yh(l,!1,r),Yh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Tu]||(s[Tu]=!0,Yh("selectionchange",!1,s))}}function Jm(r,s,l,h){switch(Ia(s)){case 1:var f=tt;break;case 4:f=Bh;break;default:f=Ta}l=f.bind(null,s,l,r),f=void 0,!Bs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Xh(r,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;k!==null;){if(w=ss(k),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}k=k.parentNode}}h=h.return}ma(function(){var q=g,ne=Fs(l),se=[];e:{var te=Hm.get(r);if(te!==void 0){var he=Xs,fe=r;switch(r){case"keypress":if(Ys(l)===0)break e;case"keydown":case"keyup":he=m;break;case"focusin":fe="focus",he=no;break;case"focusout":fe="blur",he=no;break;case"beforeblur":case"afterblur":he=no;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=H;break;case zm:case $m:case qm:he=kr;break;case Wm:he=He;break;case"scroll":he=zh;break;case"wheel":he=je;break;case"copy":case"cut":case"paste":he=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=T}var pe=(s&4)!==0,ht=!pe&&r==="scroll",z=pe?te!==null?te+"Capture":null:te;pe=[];for(var M=q,$;M!==null;){$=M;var ae=$.stateNode;if($.tag===5&&ae!==null&&($=ae,z!==null&&(ae=ct(M,z),ae!=null&&pe.push(Da(M,ae,$)))),ht)break;M=M.return}0<pe.length&&(te=new he(te,fe,null,l,ne),se.push({event:te,listeners:pe}))}}if((s&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",te&&l!==Hi&&(fe=l.relatedTarget||l.fromElement)&&(ss(fe)||fe[Pr]))break e;if((he||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,he?(fe=l.relatedTarget||l.toElement,he=q,fe=fe?ss(fe):null,fe!==null&&(ht=Dn(fe),fe!==ht||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(he=null,fe=q),he!==fe)){if(pe=eo,ae="onMouseLeave",z="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(pe=T,ae="onPointerLeave",z="onPointerEnter",M="pointer"),ht=he==null?te:co(he),$=fe==null?te:co(fe),te=new pe(ae,M+"leave",he,l,ne),te.target=ht,te.relatedTarget=$,ae=null,ss(ne)===q&&(pe=new pe(z,M+"enter",fe,l,ne),pe.target=$,pe.relatedTarget=ht,ae=pe),ht=ae,he&&fe)t:{for(pe=he,z=fe,M=0,$=pe;$;$=lo($))M++;for($=0,ae=z;ae;ae=lo(ae))$++;for(;0<M-$;)pe=lo(pe),M--;for(;0<$-M;)z=lo(z),$--;for(;M--;){if(pe===z||z!==null&&pe===z.alternate)break t;pe=lo(pe),z=lo(z)}pe=null}else pe=null;he!==null&&Ym(se,te,he,pe,!1),fe!==null&&ht!==null&&Ym(se,ht,fe,pe,!0)}}e:{if(te=q?co(q):window,he=te.nodeName&&te.nodeName.toLowerCase(),he==="select"||he==="input"&&te.type==="file")var ge=tT;else if(Nm(te))if(bm)ge=sT;else{ge=rT;var we=nT}else(he=te.nodeName)&&he.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ge=iT);if(ge&&(ge=ge(r,q))){xm(se,ge,l,ne);break e}we&&we(r,te,q),r==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&Ls(te,"number",te.value)}switch(we=q?co(q):window,r){case"focusin":(Nm(we)||we.contentEditable==="true")&&(oo=we,Hh=q,xa=null);break;case"focusout":xa=Hh=oo=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,jm(se,l,ne);break;case"selectionchange":if(lT)break;case"keydown":case"keyup":jm(se,l,ne)}var Ee;if(ft)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else so?km(r,l)&&(Re="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(is&&l.locale!=="ko"&&(so||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&so&&(Ee=Sa()):(pn=ne,Js="value"in pn?pn.value:pn.textContent,so=!0)),we=Iu(q,Re),0<we.length&&(Re=new Ca(Re,r,null,l,ne),se.push({event:Re,listeners:we}),Ee?Re.data=Ee:(Ee=Pm(l),Ee!==null&&(Re.data=Ee)))),(Ee=mn?Y0(r,l):X0(r,l))&&(q=Iu(q,"onBeforeInput"),0<q.length&&(ne=new Ca("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:q}),ne.data=Ee))}Qm(se,s)})}function Da(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Iu(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ct(r,l),g!=null&&h.unshift(Da(r,g,f)),g=ct(r,s),g!=null&&h.push(Da(r,g,f))),r=r.return}return h}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ym(r,s,l,h,f){for(var g=s._reactName,w=[];l!==null&&l!==h;){var k=l,D=k.alternate,q=k.stateNode;if(D!==null&&D===h)break;k.tag===5&&q!==null&&(k=q,f?(D=ct(l,g),D!=null&&w.unshift(Da(l,D,k))):f||(D=ct(l,g),D!=null&&w.push(Da(l,D,k)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var dT=/\r\n?/g,fT=/\u0000|\uFFFD/g;function Xm(r){return(typeof r=="string"?r:""+r).replace(dT,`
`).replace(fT,"")}function Su(r,s,l){if(s=Xm(s),Xm(r)!==s&&l)throw Error(t(425))}function Ru(){}var Zh=null,ed=null;function td(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,pT=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,mT=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(r){return Zm.resolve(null).then(r).catch(gT)}:nd;function gT(r){setTimeout(function(){throw r})}function rd(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Un(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Un(s)}function ci(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function eg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var uo=Math.random().toString(36).slice(2),ir="__reactFiber$"+uo,La="__reactProps$"+uo,Pr="__reactContainer$"+uo,id="__reactEvents$"+uo,yT="__reactListeners$"+uo,_T="__reactHandles$"+uo;function ss(r){var s=r[ir];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Pr]||l[ir]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=eg(r);r!==null;){if(l=r[ir])return l;r=eg(r)}return s}r=l,l=r.parentNode}return null}function Va(r){return r=r[ir]||r[Pr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Au(r){return r[La]||null}var sd=[],ho=-1;function hi(r){return{current:r}}function Ze(r){0>ho||(r.current=sd[ho],sd[ho]=null,ho--)}function Ye(r,s){ho++,sd[ho]=r.current,r.current=s}var di={},Ft=hi(di),en=hi(!1),os=di;function fo(r,s){var l=r.type.contextTypes;if(!l)return di;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function tn(r){return r=r.childContextTypes,r!=null}function Cu(){Ze(en),Ze(Ft)}function tg(r,s,l){if(Ft.current!==di)throw Error(t(168));Ye(Ft,s),Ye(en,l)}function ng(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,xe(r)||"Unknown",f));return G({},l,h)}function ku(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||di,os=Ft.current,Ye(Ft,r),Ye(en,en.current),!0}function rg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=ng(r,s,os),h.__reactInternalMemoizedMergedChildContext=r,Ze(en),Ze(Ft),Ye(Ft,r)):Ze(en),Ye(en,l)}var Nr=null,Pu=!1,od=!1;function ig(r){Nr===null?Nr=[r]:Nr.push(r)}function vT(r){Pu=!0,ig(r)}function fi(){if(!od&&Nr!==null){od=!0;var r=0,s=Me;try{var l=Nr;for(Me=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Nr=null,Pu=!1}catch(f){throw Nr!==null&&(Nr=Nr.slice(r+1)),Ws(Yi,fi),f}finally{Me=s,od=!1}}return null}var po=[],mo=0,Nu=null,xu=0,Rn=[],An=0,as=null,xr=1,br="";function ls(r,s){po[mo++]=xu,po[mo++]=Nu,Nu=r,xu=s}function sg(r,s,l){Rn[An++]=xr,Rn[An++]=br,Rn[An++]=as,as=r;var h=xr;r=br;var f=32-Gt(h)-1;h&=~(1<<f),l+=1;var g=32-Gt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,xr=1<<32-Gt(s)+f|l<<f|h,br=g+r}else xr=1<<g|l<<f|h,br=r}function ad(r){r.return!==null&&(ls(r,1),sg(r,1,0))}function ld(r){for(;r===Nu;)Nu=po[--mo],po[mo]=null,xu=po[--mo],po[mo]=null;for(;r===as;)as=Rn[--An],Rn[An]=null,br=Rn[--An],Rn[An]=null,xr=Rn[--An],Rn[An]=null}var gn=null,yn=null,nt=!1,zn=null;function og(r,s){var l=Nn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function ag(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gn=r,yn=ci(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gn=r,yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=as!==null?{id:xr,overflow:br}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Nn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,gn=r,yn=null,!0):!1;default:return!1}}function ud(r){return(r.mode&1)!==0&&(r.flags&128)===0}function cd(r){if(nt){var s=yn;if(s){var l=s;if(!ag(r,s)){if(ud(r))throw Error(t(418));s=ci(l.nextSibling);var h=gn;s&&ag(r,s)?og(h,l):(r.flags=r.flags&-4097|2,nt=!1,gn=r)}}else{if(ud(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,gn=r}}}function lg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gn=r}function bu(r){if(r!==gn)return!1;if(!nt)return lg(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!td(r.type,r.memoizedProps)),s&&(s=yn)){if(ud(r))throw ug(),Error(t(418));for(;s;)og(r,s),s=ci(s.nextSibling)}if(lg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){yn=ci(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}yn=null}}else yn=gn?ci(r.stateNode.nextSibling):null;return!0}function ug(){for(var r=yn;r;)r=ci(r.nextSibling)}function go(){yn=gn=null,nt=!1}function hd(r){zn===null?zn=[r]:zn.push(r)}var wT=re.ReactCurrentBatchConfig;function Ma(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var k=f.refs;w===null?delete k[g]:k[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Ou(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function cg(r){var s=r._init;return s(r._payload)}function hg(r){function s(z,M){if(r){var $=z.deletions;$===null?(z.deletions=[M],z.flags|=16):$.push(M)}}function l(z,M){if(!r)return null;for(;M!==null;)s(z,M),M=M.sibling;return null}function h(z,M){for(z=new Map;M!==null;)M.key!==null?z.set(M.key,M):z.set(M.index,M),M=M.sibling;return z}function f(z,M){return z=Ei(z,M),z.index=0,z.sibling=null,z}function g(z,M,$){return z.index=$,r?($=z.alternate,$!==null?($=$.index,$<M?(z.flags|=2,M):$):(z.flags|=2,M)):(z.flags|=1048576,M)}function w(z){return r&&z.alternate===null&&(z.flags|=2),z}function k(z,M,$,ae){return M===null||M.tag!==6?(M=nf($,z.mode,ae),M.return=z,M):(M=f(M,$),M.return=z,M)}function D(z,M,$,ae){var ge=$.type;return ge===N?ne(z,M,$.props.children,ae,$.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ue&&cg(ge)===M.type)?(ae=f(M,$.props),ae.ref=Ma(z,M,$),ae.return=z,ae):(ae=rc($.type,$.key,$.props,null,z.mode,ae),ae.ref=Ma(z,M,$),ae.return=z,ae)}function q(z,M,$,ae){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=rf($,z.mode,ae),M.return=z,M):(M=f(M,$.children||[]),M.return=z,M)}function ne(z,M,$,ae,ge){return M===null||M.tag!==7?(M=gs($,z.mode,ae,ge),M.return=z,M):(M=f(M,$),M.return=z,M)}function se(z,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return M=nf(""+M,z.mode,$),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case K:return $=rc(M.type,M.key,M.props,null,z.mode,$),$.ref=Ma(z,null,M),$.return=z,$;case Z:return M=rf(M,z.mode,$),M.return=z,M;case Ue:var ae=M._init;return se(z,ae(M._payload),$)}if(wr(M)||ye(M))return M=gs(M,z.mode,$,null),M.return=z,M;Ou(z,M)}return null}function te(z,M,$,ae){var ge=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ge!==null?null:k(z,M,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case K:return $.key===ge?D(z,M,$,ae):null;case Z:return $.key===ge?q(z,M,$,ae):null;case Ue:return ge=$._init,te(z,M,ge($._payload),ae)}if(wr($)||ye($))return ge!==null?null:ne(z,M,$,ae,null);Ou(z,$)}return null}function he(z,M,$,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return z=z.get($)||null,k(M,z,""+ae,ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case K:return z=z.get(ae.key===null?$:ae.key)||null,D(M,z,ae,ge);case Z:return z=z.get(ae.key===null?$:ae.key)||null,q(M,z,ae,ge);case Ue:var we=ae._init;return he(z,M,$,we(ae._payload),ge)}if(wr(ae)||ye(ae))return z=z.get($)||null,ne(M,z,ae,ge,null);Ou(M,ae)}return null}function fe(z,M,$,ae){for(var ge=null,we=null,Ee=M,Re=M=0,Ct=null;Ee!==null&&Re<$.length;Re++){Ee.index>Re?(Ct=Ee,Ee=null):Ct=Ee.sibling;var $e=te(z,Ee,$[Re],ae);if($e===null){Ee===null&&(Ee=Ct);break}r&&Ee&&$e.alternate===null&&s(z,Ee),M=g($e,M,Re),we===null?ge=$e:we.sibling=$e,we=$e,Ee=Ct}if(Re===$.length)return l(z,Ee),nt&&ls(z,Re),ge;if(Ee===null){for(;Re<$.length;Re++)Ee=se(z,$[Re],ae),Ee!==null&&(M=g(Ee,M,Re),we===null?ge=Ee:we.sibling=Ee,we=Ee);return nt&&ls(z,Re),ge}for(Ee=h(z,Ee);Re<$.length;Re++)Ct=he(Ee,z,Re,$[Re],ae),Ct!==null&&(r&&Ct.alternate!==null&&Ee.delete(Ct.key===null?Re:Ct.key),M=g(Ct,M,Re),we===null?ge=Ct:we.sibling=Ct,we=Ct);return r&&Ee.forEach(function(Ti){return s(z,Ti)}),nt&&ls(z,Re),ge}function pe(z,M,$,ae){var ge=ye($);if(typeof ge!="function")throw Error(t(150));if($=ge.call($),$==null)throw Error(t(151));for(var we=ge=null,Ee=M,Re=M=0,Ct=null,$e=$.next();Ee!==null&&!$e.done;Re++,$e=$.next()){Ee.index>Re?(Ct=Ee,Ee=null):Ct=Ee.sibling;var Ti=te(z,Ee,$e.value,ae);if(Ti===null){Ee===null&&(Ee=Ct);break}r&&Ee&&Ti.alternate===null&&s(z,Ee),M=g(Ti,M,Re),we===null?ge=Ti:we.sibling=Ti,we=Ti,Ee=Ct}if($e.done)return l(z,Ee),nt&&ls(z,Re),ge;if(Ee===null){for(;!$e.done;Re++,$e=$.next())$e=se(z,$e.value,ae),$e!==null&&(M=g($e,M,Re),we===null?ge=$e:we.sibling=$e,we=$e);return nt&&ls(z,Re),ge}for(Ee=h(z,Ee);!$e.done;Re++,$e=$.next())$e=he(Ee,z,Re,$e.value,ae),$e!==null&&(r&&$e.alternate!==null&&Ee.delete($e.key===null?Re:$e.key),M=g($e,M,Re),we===null?ge=$e:we.sibling=$e,we=$e);return r&&Ee.forEach(function(ZT){return s(z,ZT)}),nt&&ls(z,Re),ge}function ht(z,M,$,ae){if(typeof $=="object"&&$!==null&&$.type===N&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case K:e:{for(var ge=$.key,we=M;we!==null;){if(we.key===ge){if(ge=$.type,ge===N){if(we.tag===7){l(z,we.sibling),M=f(we,$.props.children),M.return=z,z=M;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ue&&cg(ge)===we.type){l(z,we.sibling),M=f(we,$.props),M.ref=Ma(z,we,$),M.return=z,z=M;break e}l(z,we);break}else s(z,we);we=we.sibling}$.type===N?(M=gs($.props.children,z.mode,ae,$.key),M.return=z,z=M):(ae=rc($.type,$.key,$.props,null,z.mode,ae),ae.ref=Ma(z,M,$),ae.return=z,z=ae)}return w(z);case Z:e:{for(we=$.key;M!==null;){if(M.key===we)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){l(z,M.sibling),M=f(M,$.children||[]),M.return=z,z=M;break e}else{l(z,M);break}else s(z,M);M=M.sibling}M=rf($,z.mode,ae),M.return=z,z=M}return w(z);case Ue:return we=$._init,ht(z,M,we($._payload),ae)}if(wr($))return fe(z,M,$,ae);if(ye($))return pe(z,M,$,ae);Ou(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,M!==null&&M.tag===6?(l(z,M.sibling),M=f(M,$),M.return=z,z=M):(l(z,M),M=nf($,z.mode,ae),M.return=z,z=M),w(z)):l(z,M)}return ht}var yo=hg(!0),dg=hg(!1),Du=hi(null),Lu=null,_o=null,dd=null;function fd(){dd=_o=Lu=null}function pd(r){var s=Du.current;Ze(Du),r._currentValue=s}function md(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function vo(r,s){Lu=r,dd=_o=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(nn=!0),r.firstContext=null)}function Cn(r){var s=r._currentValue;if(dd!==r)if(r={context:r,memoizedValue:s,next:null},_o===null){if(Lu===null)throw Error(t(308));_o=r,Lu.dependencies={lanes:0,firstContext:r}}else _o=_o.next=r;return s}var us=null;function gd(r){us===null?us=[r]:us.push(r)}function fg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,gd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Or(r,h)}function Or(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var pi=!1;function yd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Dr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function mi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ze&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Or(r,l)}return f=h.interleaved,f===null?(s.next=s,gd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Or(r,l)}function Vu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ii(r,l)}}function mg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Mu(r,s,l,h){var f=r.updateQueue;pi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,q=D.next;D.next=null,w===null?g=q:w.next=q,w=D;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==w&&(k===null?ne.firstBaseUpdate=q:k.next=q,ne.lastBaseUpdate=D))}if(g!==null){var se=f.baseState;w=0,ne=q=D=null,k=g;do{var te=k.lane,he=k.eventTime;if((h&te)===te){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(te=s,he=l,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){se=fe.call(he,se,te);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,te=typeof fe=="function"?fe.call(he,se,te):fe,te==null)break e;se=G({},se,te);break e;case 2:pi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,te=f.effects,te===null?f.effects=[k]:te.push(k))}else he={eventTime:he,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(q=ne=he,D=se):ne=ne.next=he,w|=te;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;te=k,k=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(D=se),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ds|=w,r.lanes=w,r.memoizedState=se}}function gg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Fa={},sr=hi(Fa),Ua=hi(Fa),ja=hi(Fa);function cs(r){if(r===Fa)throw Error(t(174));return r}function _d(r,s){switch(Ye(ja,s),Ye(Ua,r),Ye(sr,Fa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}Ze(sr),Ye(sr,s)}function wo(){Ze(sr),Ze(Ua),Ze(ja)}function yg(r){cs(ja.current);var s=cs(sr.current),l=vt(s,r.type);s!==l&&(Ye(Ua,r),Ye(sr,l))}function vd(r){Ua.current===r&&(Ze(sr),Ze(Ua))}var rt=hi(0);function Fu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wd=[];function Ed(){for(var r=0;r<wd.length;r++)wd[r]._workInProgressVersionPrimary=null;wd.length=0}var Uu=re.ReactCurrentDispatcher,Td=re.ReactCurrentBatchConfig,hs=0,it=null,Et=null,Rt=null,ju=!1,Ba=!1,za=0,ET=0;function Ut(){throw Error(t(321))}function Id(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Bn(r[l],s[l]))return!1;return!0}function Sd(r,s,l,h,f,g){if(hs=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uu.current=r===null||r.memoizedState===null?RT:AT,r=l(h,f),Ba){g=0;do{if(Ba=!1,za=0,25<=g)throw Error(t(301));g+=1,Rt=Et=null,s.updateQueue=null,Uu.current=CT,r=l(h,f)}while(Ba)}if(Uu.current=$u,s=Et!==null&&Et.next!==null,hs=0,Rt=Et=it=null,ju=!1,s)throw Error(t(300));return r}function Rd(){var r=za!==0;return za=0,r}function or(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?it.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function kn(){if(Et===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var s=Rt===null?it.memoizedState:Rt.next;if(s!==null)Rt=s,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?it.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function $a(r,s){return typeof s=="function"?s(r):s}function Ad(r){var s=kn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Et,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var k=w=null,D=null,q=g;do{var ne=q.lane;if((hs&ne)===ne)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var se={lane:ne,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(k=D=se,w=h):D=D.next=se,it.lanes|=ne,ds|=ne}q=q.next}while(q!==null&&q!==g);D===null?w=h:D.next=k,Bn(h,s.memoizedState)||(nn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,ds|=g,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Cd(r){var s=kn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Bn(g,s.memoizedState)||(nn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function _g(){}function vg(r,s){var l=it,h=kn(),f=s(),g=!Bn(h.memoizedState,f);if(g&&(h.memoizedState=f,nn=!0),h=h.queue,kd(Tg.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,qa(9,Eg.bind(null,l,h,f,s),void 0,null),At===null)throw Error(t(349));(hs&30)!==0||wg(l,s,f)}return f}function wg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Eg(r,s,l,h){s.value=l,s.getSnapshot=h,Ig(s)&&Sg(r)}function Tg(r,s,l){return l(function(){Ig(s)&&Sg(r)})}function Ig(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Bn(r,l)}catch{return!0}}function Sg(r){var s=Or(r,1);s!==null&&Hn(s,r,1,-1)}function Rg(r){var s=or();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},s.queue=r,r=r.dispatch=ST.bind(null,it,r),[s.memoizedState,r]}function qa(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Ag(){return kn().memoizedState}function Bu(r,s,l,h){var f=or();it.flags|=r,f.memoizedState=qa(1|s,l,void 0,h===void 0?null:h)}function zu(r,s,l,h){var f=kn();h=h===void 0?null:h;var g=void 0;if(Et!==null){var w=Et.memoizedState;if(g=w.destroy,h!==null&&Id(h,w.deps)){f.memoizedState=qa(s,l,g,h);return}}it.flags|=r,f.memoizedState=qa(1|s,l,g,h)}function Cg(r,s){return Bu(8390656,8,r,s)}function kd(r,s){return zu(2048,8,r,s)}function kg(r,s){return zu(4,2,r,s)}function Pg(r,s){return zu(4,4,r,s)}function Ng(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function xg(r,s,l){return l=l!=null?l.concat([r]):null,zu(4,4,Ng.bind(null,s,r),l)}function Pd(){}function bg(r,s){var l=kn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Og(r,s){var l=kn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Dg(r,s,l){return(hs&21)===0?(r.baseState&&(r.baseState=!1,nn=!0),r.memoizedState=l):(Bn(l,s)||(l=es(),it.lanes|=l,ds|=l,r.baseState=!0),s)}function TT(r,s){var l=Me;Me=l!==0&&4>l?l:4,r(!0);var h=Td.transition;Td.transition={};try{r(!1),s()}finally{Me=l,Td.transition=h}}function Lg(){return kn().memoizedState}function IT(r,s,l){var h=vi(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Vg(r))Mg(s,l);else if(l=fg(r,s,l,h),l!==null){var f=Yt();Hn(l,r,h,f),Fg(l,s,h)}}function ST(r,s,l){var h=vi(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vg(r))Mg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,k=g(w,l);if(f.hasEagerState=!0,f.eagerState=k,Bn(k,w)){var D=s.interleaved;D===null?(f.next=f,gd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}l=fg(r,s,f,h),l!==null&&(f=Yt(),Hn(l,r,h,f),Fg(l,s,h))}}function Vg(r){var s=r.alternate;return r===it||s!==null&&s===it}function Mg(r,s){Ba=ju=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Fg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ii(r,l)}}var $u={readContext:Cn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},RT={readContext:Cn,useCallback:function(r,s){return or().memoizedState=[r,s===void 0?null:s],r},useContext:Cn,useEffect:Cg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Bu(4194308,4,Ng.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Bu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Bu(4,2,r,s)},useMemo:function(r,s){var l=or();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=or();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=IT.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=or();return r={current:r},s.memoizedState=r},useState:Rg,useDebugValue:Pd,useDeferredValue:function(r){return or().memoizedState=r},useTransition:function(){var r=Rg(!1),s=r[0];return r=TT.bind(null,r[1]),or().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=it,f=or();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),At===null)throw Error(t(349));(hs&30)!==0||wg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,Cg(Tg.bind(null,h,g,r),[r]),h.flags|=2048,qa(9,Eg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=or(),s=At.identifierPrefix;if(nt){var l=br,h=xr;l=(h&~(1<<32-Gt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=za++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=ET++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},AT={readContext:Cn,useCallback:bg,useContext:Cn,useEffect:kd,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Og,useReducer:Ad,useRef:Ag,useState:function(){return Ad($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=kn();return Dg(s,Et.memoizedState,r)},useTransition:function(){var r=Ad($a)[0],s=kn().memoizedState;return[r,s]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1},CT={readContext:Cn,useCallback:bg,useContext:Cn,useEffect:kd,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Og,useReducer:Cd,useRef:Ag,useState:function(){return Cd($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=kn();return Et===null?s.memoizedState=r:Dg(s,Et.memoizedState,r)},useTransition:function(){var r=Cd($a)[0],s=kn().memoizedState;return[r,s]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1};function $n(r,s){if(r&&r.defaultProps){s=G({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Nd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:G({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var qu={isMounted:function(r){return(r=r._reactInternals)?Dn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=vi(r),g=Dr(h,f);g.payload=s,l!=null&&(g.callback=l),s=mi(r,g,f),s!==null&&(Hn(s,r,f,h),Vu(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=vi(r),g=Dr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=mi(r,g,f),s!==null&&(Hn(s,r,f,h),Vu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Yt(),h=vi(r),f=Dr(l,h);f.tag=2,s!=null&&(f.callback=s),s=mi(r,f,h),s!==null&&(Hn(s,r,h,l),Vu(s,r,h))}};function Ug(r,s,l,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Na(l,h)||!Na(f,g):!0}function jg(r,s,l){var h=!1,f=di,g=s.contextType;return typeof g=="object"&&g!==null?g=Cn(g):(f=tn(s)?os:Ft.current,h=s.contextTypes,g=(h=h!=null)?fo(r,f):di),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=qu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Bg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&qu.enqueueReplaceState(s,s.state,null)}function xd(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},yd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Cn(g):(g=tn(s)?os:Ft.current,f.context=fo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Nd(r,s,g,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&qu.enqueueReplaceState(f,f.state,null),Mu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Eo(r,s){try{var l="",h=s;do l+=_e(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function bd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Od(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function zg(r,s,l){l=Dr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Yu||(Yu=!0,Gd=h),Od(r,s)},l}function $g(r,s,l){l=Dr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Od(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Od(r,s),typeof h!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function qg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new kT;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=zT.bind(null,r,s,l),s.then(r,r))}function Wg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Hg(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Dr(-1,1),s.tag=2,mi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var PT=re.ReactCurrentOwner,nn=!1;function Jt(r,s,l,h){s.child=r===null?dg(s,null,l,h):yo(s,r.child,l,h)}function Kg(r,s,l,h,f){l=l.render;var g=s.ref;return vo(s,f),h=Sd(r,s,l,h,g,f),l=Rd(),r!==null&&!nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(nt&&l&&ad(s),s.flags|=1,Jt(r,s,h,f),s.child)}function Gg(r,s,l,h,f){if(r===null){var g=l.type;return typeof g=="function"&&!tf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Qg(r,s,g,h,f)):(r=rc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Na,l(w,h)&&r.ref===s.ref)return Lr(r,s,f)}return s.flags|=1,r=Ei(g,h),r.ref=s.ref,r.return=s,s.child=r}function Qg(r,s,l,h,f){if(r!==null){var g=r.memoizedProps;if(Na(g,h)&&r.ref===s.ref)if(nn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(nn=!0);else return s.lanes=r.lanes,Lr(r,s,f)}return Dd(r,s,l,h,f)}function Jg(r,s,l){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Io,_n),_n|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(Io,_n),_n|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Ye(Io,_n),_n|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Ye(Io,_n),_n|=h;return Jt(r,s,f,l),s.child}function Yg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Dd(r,s,l,h,f){var g=tn(l)?os:Ft.current;return g=fo(s,g),vo(s,f),l=Sd(r,s,l,h,g,f),h=Rd(),r!==null&&!nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(nt&&h&&ad(s),s.flags|=1,Jt(r,s,l,f),s.child)}function Xg(r,s,l,h,f){if(tn(l)){var g=!0;ku(s)}else g=!1;if(vo(s,f),s.stateNode===null)Hu(r,s),jg(s,l,h),xd(s,l,h,f),h=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var D=w.context,q=l.contextType;typeof q=="object"&&q!==null?q=Cn(q):(q=tn(l)?os:Ft.current,q=fo(s,q));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||D!==q)&&Bg(s,w,h,q),pi=!1;var te=s.memoizedState;w.state=te,Mu(s,h,w,f),D=s.memoizedState,k!==h||te!==D||en.current||pi?(typeof ne=="function"&&(Nd(s,l,ne,h),D=s.memoizedState),(k=pi||Ug(s,l,k,h,te,D,q))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=q,h=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,pg(r,s),k=s.memoizedProps,q=s.type===s.elementType?k:$n(s.type,k),w.props=q,se=s.pendingProps,te=w.context,D=l.contextType,typeof D=="object"&&D!==null?D=Cn(D):(D=tn(l)?os:Ft.current,D=fo(s,D));var he=l.getDerivedStateFromProps;(ne=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==se||te!==D)&&Bg(s,w,h,D),pi=!1,te=s.memoizedState,w.state=te,Mu(s,h,w,f);var fe=s.memoizedState;k!==se||te!==fe||en.current||pi?(typeof he=="function"&&(Nd(s,l,he,h),fe=s.memoizedState),(q=pi||Ug(s,l,q,h,te,fe,D)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,fe,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,fe,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=fe),w.props=h,w.state=fe,w.context=D,h=q):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),h=!1)}return Ld(r,s,l,h,g,f)}function Ld(r,s,l,h,f,g){Yg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&rg(s,l,!1),Lr(r,s,g);h=s.stateNode,PT.current=s;var k=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=yo(s,r.child,null,g),s.child=yo(s,null,k,g)):Jt(r,s,k,g),s.memoizedState=h.state,f&&rg(s,l,!0),s.child}function Zg(r){var s=r.stateNode;s.pendingContext?tg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&tg(r,s.context,!1),_d(r,s.containerInfo)}function ey(r,s,l,h,f){return go(),hd(f),s.flags|=256,Jt(r,s,l,h),s.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Md(r){return{baseLanes:r,cachePool:null,transitions:null}}function ty(r,s,l){var h=s.pendingProps,f=rt.current,g=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(rt,f&1),r===null)return cd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ic(w,h,0,null),r=gs(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Md(l),s.memoizedState=Vd,r):Fd(s,w));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return NT(r,s,w,h,k,f,l);if(g){g=h.fallback,w=s.mode,f=r.child,k=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=Ei(f,D),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=Ei(k,g):(g=gs(g,w,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Md(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~l,s.memoizedState=Vd,h}return g=r.child,r=g.sibling,h=Ei(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Fd(r,s){return s=ic({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Wu(r,s,l,h){return h!==null&&hd(h),yo(s,r.child,null,l),r=Fd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function NT(r,s,l,h,f,g,w){if(l)return s.flags&256?(s.flags&=-257,h=bd(Error(t(422))),Wu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=ic({mode:"visible",children:h.children},f,0,null),g=gs(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&yo(s,r.child,null,w),s.child.memoizedState=Md(w),s.memoizedState=Vd,g);if((s.mode&1)===0)return Wu(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=bd(g,h,void 0),Wu(r,s,w,h)}if(k=(w&r.childLanes)!==0,nn||k){if(h=At,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Or(r,f),Hn(h,r,f,-1))}return ef(),h=bd(Error(t(421))),Wu(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=$T.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,yn=ci(f.nextSibling),gn=s,nt=!0,zn=null,r!==null&&(Rn[An++]=xr,Rn[An++]=br,Rn[An++]=as,xr=r.id,br=r.overflow,as=s),s=Fd(s,h.children),s.flags|=4096,s)}function ny(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),md(r.return,s,l)}function Ud(r,s,l,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function ry(r,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Jt(r,s,h.children,l),h=rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ny(r,l,s);else if(r.tag===19)ny(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Fu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Ud(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Fu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Ud(s,!0,l,null,g);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Lr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ds|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ei(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ei(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function xT(r,s,l){switch(s.tag){case 3:Zg(s),go();break;case 5:yg(s);break;case 1:tn(s.type)&&ku(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(Du,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(rt,rt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?ty(r,s,l):(Ye(rt,rt.current&1),r=Lr(r,s,l),r!==null?r.sibling:null);Ye(rt,rt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return ry(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,Jg(r,s,l)}return Lr(r,s,l)}var iy,jd,sy,oy;iy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jd=function(){},sy=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,cs(sr.current);var g=null;switch(l){case"input":f=$i(r,f),h=$i(r,h),g=[];break;case"select":f=G({},f,{value:void 0}),h=G({},h,{value:void 0}),g=[];break;case"textarea":f=sa(r,f),h=sa(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Ru)}ha(l,h);var w;l=null;for(q in f)if(!h.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var k=f[q];for(w in k)k.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in h){var D=h[q];if(k=f?.[q],h.hasOwnProperty(q)&&D!==k&&(D!=null||k!=null))if(q==="style")if(k){for(w in k)!k.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in D)D.hasOwnProperty(w)&&k[w]!==D[w]&&(l||(l={}),l[w]=D[w])}else l||(g||(g=[]),g.push(q,l)),l=D;else q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(g=g||[]).push(q,D)):q==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(q,""+D):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(D!=null&&q==="onScroll"&&Xe("scroll",r),g||k===D||(g=[])):(g=g||[]).push(q,D))}l&&(g=g||[]).push("style",l);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},oy=function(r,s,l,h){l!==h&&(s.flags|=4)};function Wa(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function jt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function bT(r,s,l){var h=s.pendingProps;switch(ld(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return tn(s.type)&&Cu(),jt(s),null;case 3:return h=s.stateNode,wo(),Ze(en),Ze(Ft),Ed(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(bu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zn!==null&&(Yd(zn),zn=null))),jd(r,s),jt(s),null;case 5:vd(s);var f=cs(ja.current);if(l=s.type,r!==null&&s.stateNode!=null)sy(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(r=cs(sr.current),bu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[ir]=s,h[La]=g,r=(s.mode&1)!==0,l){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<ba.length;f++)Xe(ba[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":Ds(h,g),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",h);break;case"textarea":Vs(h,g),Xe("invalid",h)}ha(l,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var k=g[w];w==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&Xe("scroll",h)}switch(l){case"input":Mt(h),Jl(h,g,!0);break;case"textarea":Mt(h),oa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ru)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(l,{is:h.is}):(r=w.createElement(l),l==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,l),r[ir]=s,r[La]=h,iy(r,s,!1,!1),s.stateNode=r;e:{switch(w=da(l,h),l){case"dialog":Xe("cancel",r),Xe("close",r),f=h;break;case"iframe":case"object":case"embed":Xe("load",r),f=h;break;case"video":case"audio":for(f=0;f<ba.length;f++)Xe(ba[f],r);f=h;break;case"source":Xe("error",r),f=h;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),f=h;break;case"details":Xe("toggle",r),f=h;break;case"input":Ds(r,h),f=$i(r,h),Xe("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=G({},h,{value:void 0}),Xe("invalid",r);break;case"textarea":Vs(r,h),f=sa(r,h),Xe("invalid",r);break;default:f=h}ha(l,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var D=k[g];g==="style"?ua(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&aa(r,D)):g==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Zr(r,D):typeof D=="number"&&Zr(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&Xe("scroll",r):D!=null&&X(r,g,D,w))}switch(l){case"input":Mt(r),Jl(r,h,!1);break;case"textarea":Mt(r),oa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Oe(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Er(r,!!h.multiple,g,!1):h.defaultValue!=null&&Er(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Ru)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(r&&s.stateNode!=null)oy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=cs(ja.current),cs(sr.current),bu(s)){if(h=s.stateNode,l=s.memoizedProps,h[ir]=s,(g=h.nodeValue!==l)&&(r=gn,r!==null))switch(r.tag){case 3:Su(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[ir]=s,s.stateNode=h}return jt(s),null;case 13:if(Ze(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&yn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ug(),go(),s.flags|=98560,g=!1;else if(g=bu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ir]=s}else go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),g=!1}else zn!==null&&(Yd(zn),zn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?Tt===0&&(Tt=3):ef())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return wo(),jd(r,s),r===null&&Oa(s.stateNode.containerInfo),jt(s),null;case 10:return pd(s.type._context),jt(s),null;case 17:return tn(s.type)&&Cu(),jt(s),null;case 19:if(Ze(rt),g=s.memoizedState,g===null)return jt(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Wa(g,!1);else{if(Tt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Fu(r),w!==null){for(s.flags|=128,Wa(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Je()>So&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304)}else{if(!h)if(r=Fu(w),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!nt)return jt(s),null}else 2*Je()-g.renderingStartTime>So&&l!==1073741824&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(l=g.last,l!==null?l.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,l=rt.current,Ye(rt,h?l&1|2:l&1),s):(jt(s),null);case 22:case 23:return Zd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function OT(r,s){switch(ld(s),s.tag){case 1:return tn(s.type)&&Cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return wo(),Ze(en),Ze(Ft),Ed(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return vd(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return wo(),null;case 10:return pd(s.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var Ku=!1,Bt=!1,DT=typeof WeakSet=="function"?WeakSet:Set,de=null;function To(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ut(r,s,h)}else l.current=null}function Bd(r,s,l){try{l()}catch(h){ut(r,s,h)}}var ay=!1;function LT(r,s){if(Zh=ai,r=Um(),Wh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,k=-1,D=-1,q=0,ne=0,se=r,te=null;t:for(;;){for(var he;se!==l||f!==0&&se.nodeType!==3||(k=w+f),se!==g||h!==0&&se.nodeType!==3||(D=w+h),se.nodeType===3&&(w+=se.nodeValue.length),(he=se.firstChild)!==null;)te=se,se=he;for(;;){if(se===r)break t;if(te===l&&++q===f&&(k=w),te===g&&++ne===h&&(D=w),(he=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=he}l=k===-1||D===-1?null:{start:k,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ed={focusedElem:r,selectionRange:l},ai=!1,de=s;de!==null;)if(s=de,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,de=r;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ht=fe.memoizedState,z=s.stateNode,M=z.getSnapshotBeforeUpdate(s.elementType===s.type?pe:$n(s.type,pe),ht);z.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ut(s,s.return,ae)}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}return fe=ay,ay=!1,fe}function Ha(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Bd(s,l,g)}f=f.next}while(f!==h)}}function Gu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function zd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function ly(r){var s=r.alternate;s!==null&&(r.alternate=null,ly(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ir],delete s[La],delete s[id],delete s[yT],delete s[_T])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function uy(r){return r.tag===5||r.tag===3||r.tag===4}function cy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||uy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $d(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ru));else if(h!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}function qd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(qd(r,s,l),r=r.sibling;r!==null;)qd(r,s,l),r=r.sibling}var xt=null,qn=!1;function gi(r,s,l){for(l=l.child;l!==null;)hy(r,s,l),l=l.sibling}function hy(r,s,l){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Xi,l)}catch{}switch(l.tag){case 5:Bt||To(l,s);case 6:var h=xt,f=qn;xt=null,gi(r,s,l),xt=h,qn=f,xt!==null&&(qn?(r=xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):xt.removeChild(l.stateNode));break;case 18:xt!==null&&(qn?(r=xt,l=l.stateNode,r.nodeType===8?rd(r.parentNode,l):r.nodeType===1&&rd(r,l),Un(r)):rd(xt,l.stateNode));break;case 4:h=xt,f=qn,xt=l.stateNode.containerInfo,qn=!0,gi(r,s,l),xt=h,qn=f;break;case 0:case 11:case 14:case 15:if(!Bt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Bd(l,s,w),f=f.next}while(f!==h)}gi(r,s,l);break;case 1:if(!Bt&&(To(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){ut(l,s,k)}gi(r,s,l);break;case 21:gi(r,s,l);break;case 22:l.mode&1?(Bt=(h=Bt)||l.memoizedState!==null,gi(r,s,l),Bt=h):gi(r,s,l);break;default:gi(r,s,l)}}function dy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new DT),s.forEach(function(h){var f=qT.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Wn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:xt=k.stateNode,qn=!1;break e;case 3:xt=k.stateNode.containerInfo,qn=!0;break e;case 4:xt=k.stateNode.containerInfo,qn=!0;break e}k=k.return}if(xt===null)throw Error(t(160));hy(g,w,f),xt=null,qn=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(q){ut(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fy(s,r),s=s.sibling}function fy(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Wn(s,r),ar(r),h&4){try{Ha(3,r,r.return),Gu(3,r)}catch(pe){ut(r,r.return,pe)}try{Ha(5,r,r.return)}catch(pe){ut(r,r.return,pe)}}break;case 1:Wn(s,r),ar(r),h&512&&l!==null&&To(l,l.return);break;case 5:if(Wn(s,r),ar(r),h&512&&l!==null&&To(l,l.return),r.flags&32){var f=r.stateNode;try{Zr(f,"")}catch(pe){ut(r,r.return,pe)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=l!==null?l.memoizedProps:g,k=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&ra(f,g),da(k,w);var q=da(k,g);for(w=0;w<D.length;w+=2){var ne=D[w],se=D[w+1];ne==="style"?ua(f,se):ne==="dangerouslySetInnerHTML"?aa(f,se):ne==="children"?Zr(f,se):X(f,ne,se,q)}switch(k){case"input":ia(f,g);break;case"textarea":Ms(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var he=g.value;he!=null?Er(f,!!g.multiple,he,!1):te!==!!g.multiple&&(g.defaultValue!=null?Er(f,!!g.multiple,g.defaultValue,!0):Er(f,!!g.multiple,g.multiple?[]:"",!1))}f[La]=g}catch(pe){ut(r,r.return,pe)}}break;case 6:if(Wn(s,r),ar(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(pe){ut(r,r.return,pe)}}break;case 3:if(Wn(s,r),ar(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Un(s.containerInfo)}catch(pe){ut(r,r.return,pe)}break;case 4:Wn(s,r),ar(r);break;case 13:Wn(s,r),ar(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Kd=Je())),h&4&&dy(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(Bt=(q=Bt)||ne,Wn(s,r),Bt=q):Wn(s,r),ar(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!ne&&(r.mode&1)!==0)for(de=r,ne=r.child;ne!==null;){for(se=de=ne;de!==null;){switch(te=de,he=te.child,te.tag){case 0:case 11:case 14:case 15:Ha(4,te,te.return);break;case 1:To(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){h=te,l=te.return;try{s=h,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){ut(h,l,pe)}}break;case 5:To(te,te.return);break;case 22:if(te.memoizedState!==null){gy(se);continue}}he!==null?(he.return=te,de=he):gy(se)}ne=ne.sibling}e:for(ne=null,se=r;;){if(se.tag===5){if(ne===null){ne=se;try{f=se.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=se.stateNode,D=se.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=la("display",w))}catch(pe){ut(r,r.return,pe)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=q?"":se.memoizedProps}catch(pe){ut(r,r.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===r)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===r)break e;for(;se.sibling===null;){if(se.return===null||se.return===r)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Wn(s,r),ar(r),h&4&&dy(r);break;case 21:break;default:Wn(s,r),ar(r)}}function ar(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(uy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Zr(f,""),h.flags&=-33);var g=cy(r);qd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,k=cy(r);$d(r,k,w);break;default:throw Error(t(161))}}catch(D){ut(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function VT(r,s,l){de=r,py(r)}function py(r,s,l){for(var h=(r.mode&1)!==0;de!==null;){var f=de,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Ku;if(!w){var k=f.alternate,D=k!==null&&k.memoizedState!==null||Bt;k=Ku;var q=Bt;if(Ku=w,(Bt=D)&&!q)for(de=f;de!==null;)w=de,D=w.child,w.tag===22&&w.memoizedState!==null?yy(f):D!==null?(D.return=w,de=D):yy(f);for(;g!==null;)de=g,py(g),g=g.sibling;de=f,Ku=k,Bt=q}my(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,de=g):my(r)}}function my(r){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Bt||Gu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Bt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:$n(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&gg(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}gg(s,w,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var ne=q.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&Un(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&zd(s)}catch(te){ut(s,s.return,te)}}if(s===r){de=null;break}if(l=s.sibling,l!==null){l.return=s.return,de=l;break}de=s.return}}function gy(r){for(;de!==null;){var s=de;if(s===r){de=null;break}var l=s.sibling;if(l!==null){l.return=s.return,de=l;break}de=s.return}}function yy(r){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Gu(4,s)}catch(D){ut(s,l,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){ut(s,f,D)}}var g=s.return;try{zd(s)}catch(D){ut(s,g,D)}break;case 5:var w=s.return;try{zd(s)}catch(D){ut(s,w,D)}}}catch(D){ut(s,s.return,D)}if(s===r){de=null;break}var k=s.sibling;if(k!==null){k.return=s.return,de=k;break}de=s.return}}var MT=Math.ceil,Qu=re.ReactCurrentDispatcher,Wd=re.ReactCurrentOwner,Pn=re.ReactCurrentBatchConfig,ze=0,At=null,pt=null,bt=0,_n=0,Io=hi(0),Tt=0,Ka=null,ds=0,Ju=0,Hd=0,Ga=null,rn=null,Kd=0,So=1/0,Vr=null,Yu=!1,Gd=null,yi=null,Xu=!1,_i=null,Zu=0,Qa=0,Qd=null,ec=-1,tc=0;function Yt(){return(ze&6)!==0?Je():ec!==-1?ec:ec=Je()}function vi(r){return(r.mode&1)===0?1:(ze&2)!==0&&bt!==0?bt&-bt:wT.transition!==null?(tc===0&&(tc=es()),tc):(r=Me,r!==0||(r=window.event,r=r===void 0?16:Ia(r.type)),r)}function Hn(r,s,l,h){if(50<Qa)throw Qa=0,Qd=null,Error(t(185));ri(r,l,h),((ze&2)===0||r!==At)&&(r===At&&((ze&2)===0&&(Ju|=l),Tt===4&&wi(r,bt)),sn(r,h),l===1&&ze===0&&(s.mode&1)===0&&(So=Je()+500,Pu&&fi()))}function sn(r,s){var l=r.callbackNode;Sr(r,s);var h=Zi(r,r===At?bt:0);if(h===0)l!==null&&_a(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&_a(l),s===1)r.tag===0?vT(vy.bind(null,r)):ig(vy.bind(null,r)),mT(function(){(ze&6)===0&&fi()}),l=null;else{switch(si(h)){case 1:l=Yi;break;case 4:l=ei;break;case 16:l=Tn;break;case 536870912:l=tu;break;default:l=Tn}l=Cy(l,_y.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function _y(r,s){if(ec=-1,tc=0,(ze&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Ro()&&r.callbackNode!==l)return null;var h=Zi(r,r===At?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=nc(r,h);else{s=h;var f=ze;ze|=2;var g=Ey();(At!==r||bt!==s)&&(Vr=null,So=Je()+500,ps(r,s));do try{jT();break}catch(k){wy(r,k)}while(!0);fd(),Qu.current=g,ze=f,pt!==null?s=0:(At=null,bt=0,s=Tt)}if(s!==0){if(s===2&&(f=fn(r),f!==0&&(h=f,s=Jd(r,f))),s===1)throw l=Ka,ps(r,0),wi(r,h),sn(r,Je()),l;if(s===6)wi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!FT(f)&&(s=nc(r,h),s===2&&(g=fn(r),g!==0&&(h=g,s=Jd(r,g))),s===1))throw l=Ka,ps(r,0),wi(r,h),sn(r,Je()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ms(r,rn,Vr);break;case 3:if(wi(r,h),(h&130023424)===h&&(s=Kd+500-Je(),10<s)){if(Zi(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Yt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=nd(ms.bind(null,r,rn,Vr),s);break}ms(r,rn,Vr);break;case 4:if(wi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Gt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*MT(h/1960))-h,10<h){r.timeoutHandle=nd(ms.bind(null,r,rn,Vr),h);break}ms(r,rn,Vr);break;case 5:ms(r,rn,Vr);break;default:throw Error(t(329))}}}return sn(r,Je()),r.callbackNode===l?_y.bind(null,r):null}function Jd(r,s){var l=Ga;return r.current.memoizedState.isDehydrated&&(ps(r,s).flags|=256),r=nc(r,s),r!==2&&(s=rn,rn=l,s!==null&&Yd(s)),r}function Yd(r){rn===null?rn=r:rn.push.apply(rn,r)}function FT(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Bn(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wi(r,s){for(s&=~Hd,s&=~Ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Gt(s),h=1<<l;r[l]=-1,s&=~h}}function vy(r){if((ze&6)!==0)throw Error(t(327));Ro();var s=Zi(r,0);if((s&1)===0)return sn(r,Je()),null;var l=nc(r,s);if(r.tag!==0&&l===2){var h=fn(r);h!==0&&(s=h,l=Jd(r,h))}if(l===1)throw l=Ka,ps(r,0),wi(r,s),sn(r,Je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ms(r,rn,Vr),sn(r,Je()),null}function Xd(r,s){var l=ze;ze|=1;try{return r(s)}finally{ze=l,ze===0&&(So=Je()+500,Pu&&fi())}}function fs(r){_i!==null&&_i.tag===0&&(ze&6)===0&&Ro();var s=ze;ze|=1;var l=Pn.transition,h=Me;try{if(Pn.transition=null,Me=1,r)return r()}finally{Me=h,Pn.transition=l,ze=s,(ze&6)===0&&fi()}}function Zd(){_n=Io.current,Ze(Io)}function ps(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,pT(l)),pt!==null)for(l=pt.return;l!==null;){var h=l;switch(ld(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cu();break;case 3:wo(),Ze(en),Ze(Ft),Ed();break;case 5:vd(h);break;case 4:wo();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:pd(h.type._context);break;case 22:case 23:Zd()}l=l.return}if(At=r,pt=r=Ei(r.current,null),bt=_n=s,Tt=0,Ka=null,Hd=Ju=ds=0,rn=Ga=null,us!==null){for(s=0;s<us.length;s++)if(l=us[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}l.pending=h}us=null}return r}function wy(r,s){do{var l=pt;try{if(fd(),Uu.current=$u,ju){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}ju=!1}if(hs=0,Rt=Et=it=null,Ba=!1,za=0,Wd.current=null,l===null||l.return===null){Tt=1,Ka=s,pt=null;break}e:{var g=r,w=l.return,k=l,D=s;if(s=bt,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,ne=k,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=Wg(w);if(he!==null){he.flags&=-257,Hg(he,w,k,g,s),he.mode&1&&qg(g,q,s),s=he,D=q;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(D),s.updateQueue=pe}else fe.add(D);break e}else{if((s&1)===0){qg(g,q,s),ef();break e}D=Error(t(426))}}else if(nt&&k.mode&1){var ht=Wg(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Hg(ht,w,k,g,s),hd(Eo(D,k));break e}}g=D=Eo(D,k),Tt!==4&&(Tt=2),Ga===null?Ga=[g]:Ga.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=zg(g,D,s);mg(g,z);break e;case 1:k=D;var M=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(yi===null||!yi.has($)))){g.flags|=65536,s&=-s,g.lanes|=s;var ae=$g(g,k,s);mg(g,ae);break e}}g=g.return}while(g!==null)}Iy(l)}catch(ge){s=ge,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function Ey(){var r=Qu.current;return Qu.current=$u,r===null?$u:r}function ef(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||(ds&268435455)===0&&(Ju&268435455)===0||wi(At,bt)}function nc(r,s){var l=ze;ze|=2;var h=Ey();(At!==r||bt!==s)&&(Vr=null,ps(r,s));do try{UT();break}catch(f){wy(r,f)}while(!0);if(fd(),ze=l,Qu.current=h,pt!==null)throw Error(t(261));return At=null,bt=0,Tt}function UT(){for(;pt!==null;)Ty(pt)}function jT(){for(;pt!==null&&!Zl();)Ty(pt)}function Ty(r){var s=Ay(r.alternate,r,_n);r.memoizedProps=r.pendingProps,s===null?Iy(r):pt=s,Wd.current=null}function Iy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=bT(l,s,_n),l!==null){pt=l;return}}else{if(l=OT(l,s),l!==null){l.flags&=32767,pt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Tt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=r}while(s!==null);Tt===0&&(Tt=5)}function ms(r,s,l){var h=Me,f=Pn.transition;try{Pn.transition=null,Me=1,BT(r,s,l,h)}finally{Pn.transition=f,Me=h}return null}function BT(r,s,l,h){do Ro();while(_i!==null);if((ze&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Ge(r,g),r===At&&(pt=At=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,Cy(Tn,function(){return Ro(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=Pn.transition,Pn.transition=null;var w=Me;Me=1;var k=ze;ze|=4,Wd.current=null,LT(r,l),fy(l,r),aT(ed),ai=!!Zh,ed=Zh=null,r.current=l,VT(l),Mh(),ze=k,Me=w,Pn.transition=g}else r.current=l;if(Xu&&(Xu=!1,_i=r,Zu=f),g=r.pendingLanes,g===0&&(yi=null),nu(l.stateNode),sn(r,Je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Yu)throw Yu=!1,r=Gd,Gd=null,r;return(Zu&1)!==0&&r.tag!==0&&Ro(),g=r.pendingLanes,(g&1)!==0?r===Qd?Qa++:(Qa=0,Qd=r):Qa=0,fi(),null}function Ro(){if(_i!==null){var r=si(Zu),s=Pn.transition,l=Me;try{if(Pn.transition=null,Me=16>r?16:r,_i===null)var h=!1;else{if(r=_i,_i=null,Zu=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,de=r.current;de!==null;){var g=de,w=g.child;if((de.flags&16)!==0){var k=g.deletions;if(k!==null){for(var D=0;D<k.length;D++){var q=k[D];for(de=q;de!==null;){var ne=de;switch(ne.tag){case 0:case 11:case 15:Ha(8,ne,g)}var se=ne.child;if(se!==null)se.return=ne,de=se;else for(;de!==null;){ne=de;var te=ne.sibling,he=ne.return;if(ly(ne),ne===q){de=null;break}if(te!==null){te.return=he,de=te;break}de=he}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}de=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,de=w;else e:for(;de!==null;){if(g=de,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ha(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,de=z;break e}de=g.return}}var M=r.current;for(de=M;de!==null;){w=de;var $=w.child;if((w.subtreeFlags&2064)!==0&&$!==null)$.return=w,de=$;else e:for(w=M;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Gu(9,k)}}catch(ge){ut(k,k.return,ge)}if(k===w){de=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,de=ae;break e}de=k.return}}if(ze=f,fi(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Xi,r)}catch{}h=!0}return h}finally{Me=l,Pn.transition=s}}return!1}function Sy(r,s,l){s=Eo(l,s),s=zg(r,s,1),r=mi(r,s,1),s=Yt(),r!==null&&(ri(r,1,s),sn(r,s))}function ut(r,s,l){if(r.tag===3)Sy(r,r,l);else for(;s!==null;){if(s.tag===3){Sy(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(yi===null||!yi.has(h))){r=Eo(l,r),r=$g(s,r,1),s=mi(s,r,1),r=Yt(),s!==null&&(ri(s,1,r),sn(s,r));break}}s=s.return}}function zT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Yt(),r.pingedLanes|=r.suspendedLanes&l,At===r&&(bt&l)===l&&(Tt===4||Tt===3&&(bt&130023424)===bt&&500>Je()-Kd?ps(r,0):Hd|=l),sn(r,s)}function Ry(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ks,Ks<<=1,(Ks&130023424)===0&&(Ks=4194304)));var l=Yt();r=Or(r,s),r!==null&&(ri(r,s,l),sn(r,l))}function $T(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Ry(r,l)}function qT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ry(r,l)}var Ay;Ay=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||en.current)nn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return nn=!1,xT(r,s,l);nn=(r.flags&131072)!==0}else nn=!1,nt&&(s.flags&1048576)!==0&&sg(s,xu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Hu(r,s),r=s.pendingProps;var f=fo(s,Ft.current);vo(s,l),f=Sd(null,s,h,r,f,l);var g=Rd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,tn(h)?(g=!0,ku(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,yd(s),f.updater=qu,s.stateNode=f,f._reactInternals=s,xd(s,h,r,l),s=Ld(null,s,h,!0,g,l)):(s.tag=0,nt&&g&&ad(s),Jt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Hu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=HT(h),r=$n(h,r),f){case 0:s=Dd(null,s,h,r,l);break e;case 1:s=Xg(null,s,h,r,l);break e;case 11:s=Kg(null,s,h,r,l);break e;case 14:s=Gg(null,s,h,$n(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Dd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Xg(r,s,h,f,l);case 3:e:{if(Zg(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,pg(r,s),Mu(s,h,null,l);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Eo(Error(t(423)),s),s=ey(r,s,h,l,f);break e}else if(h!==f){f=Eo(Error(t(424)),s),s=ey(r,s,h,l,f);break e}else for(yn=ci(s.stateNode.containerInfo.firstChild),gn=s,nt=!0,zn=null,l=dg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(go(),h===f){s=Lr(r,s,l);break e}Jt(r,s,h,l)}s=s.child}return s;case 5:return yg(s),r===null&&cd(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,td(h,f)?w=null:g!==null&&td(h,g)&&(s.flags|=32),Yg(r,s),Jt(r,s,w,l),s.child;case 6:return r===null&&cd(s),null;case 13:return ty(r,s,l);case 4:return _d(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=yo(s,null,h,l):Jt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Kg(r,s,h,f,l);case 7:return Jt(r,s,s.pendingProps,l),s.child;case 8:return Jt(r,s,s.pendingProps.children,l),s.child;case 12:return Jt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ye(Du,h._currentValue),h._currentValue=w,g!==null)if(Bn(g.value,w)){if(g.children===f.children&&!en.current){s=Lr(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){w=g.child;for(var D=k.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Dr(-1,l&-l),D.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var ne=q.pending;ne===null?D.next=D:(D.next=ne.next,ne.next=D),q.pending=D}}g.lanes|=l,D=g.alternate,D!==null&&(D.lanes|=l),md(g.return,l,s),k.lanes|=l;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),md(w,l,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Jt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,vo(s,l),f=Cn(f),h=h(f),s.flags|=1,Jt(r,s,h,l),s.child;case 14:return h=s.type,f=$n(h,s.pendingProps),f=$n(h.type,f),Gg(r,s,h,f,l);case 15:return Qg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:$n(h,f),Hu(r,s),s.tag=1,tn(h)?(r=!0,ku(s)):r=!1,vo(s,l),jg(s,h,f),xd(s,h,f,l),Ld(null,s,h,!0,r,l);case 19:return ry(r,s,l);case 22:return Jg(r,s,l)}throw Error(t(156,s.tag))};function Cy(r,s){return Ws(r,s)}function WT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,l,h){return new WT(r,s,l,h)}function tf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function HT(r){if(typeof r=="function")return tf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===L)return 11;if(r===Qe)return 14}return 2}function Ei(r,s){var l=r.alternate;return l===null?(l=Nn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rc(r,s,l,h,f,g){var w=2;if(h=r,typeof r=="function")tf(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case N:return gs(l.children,f,g,s);case I:w=8,f|=8;break;case C:return r=Nn(12,l,s,f|2),r.elementType=C,r.lanes=g,r;case A:return r=Nn(13,l,s,f),r.elementType=A,r.lanes=g,r;case Pe:return r=Nn(19,l,s,f),r.elementType=Pe,r.lanes=g,r;case Ve:return ic(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case V:w=9;break e;case L:w=11;break e;case Qe:w=14;break e;case Ue:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Nn(w,l,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function gs(r,s,l,h){return r=Nn(7,r,h,s),r.lanes=l,r}function ic(r,s,l,h){return r=Nn(22,r,h,s),r.elementType=Ve,r.lanes=l,r.stateNode={isHidden:!1},r}function nf(r,s,l){return r=Nn(6,r,null,s),r.lanes=l,r}function rf(r,s,l){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function KT(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ni(0),this.expirationTimes=ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function sf(r,s,l,h,f,g,w,k,D){return r=new KT(r,s,l,k,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(g),r}function GT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function ky(r){if(!r)return di;r=r._reactInternals;e:{if(Dn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(tn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(tn(l))return ng(r,l,s)}return s}function Py(r,s,l,h,f,g,w,k,D){return r=sf(l,h,!0,r,f,g,w,k,D),r.context=ky(null),l=r.current,h=Yt(),f=vi(l),g=Dr(h,f),g.callback=s??null,mi(l,g,f),r.current.lanes=f,ri(r,f,h),sn(r,h),r}function sc(r,s,l,h){var f=s.current,g=Yt(),w=vi(f);return l=ky(l),s.context===null?s.context=l:s.pendingContext=l,s=Dr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=mi(f,s,w),r!==null&&(Hn(r,f,w,g),Vu(r,f,w)),w}function oc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ny(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function of(r,s){Ny(r,s),(r=r.alternate)&&Ny(r,s)}function QT(){return null}var xy=typeof reportError=="function"?reportError:function(r){console.error(r)};function af(r){this._internalRoot=r}ac.prototype.render=af.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));sc(r,s,null,null)},ac.prototype.unmount=af.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;fs(function(){sc(null,r,null,null)}),s[Pr]=null}};function ac(r){this._internalRoot=r}ac.prototype.unstable_scheduleHydration=function(r){if(r){var s=au();r={blockedOn:null,target:r,priority:s};for(var l=0;l<er.length&&s!==0&&s<er[l].priority;l++);er.splice(l,0,r),l===0&&cu(r)}};function lf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function by(){}function JT(r,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var q=oc(w);g.call(q)}}var w=Py(s,h,r,0,null,!1,!1,"",by);return r._reactRootContainer=w,r[Pr]=w.current,Oa(r.nodeType===8?r.parentNode:r),fs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var q=oc(D);k.call(q)}}var D=sf(r,0,!1,null,null,!1,!1,"",by);return r._reactRootContainer=D,r[Pr]=D.current,Oa(r.nodeType===8?r.parentNode:r),fs(function(){sc(s,D,l,h)}),D}function uc(r,s,l,h,f){var g=l._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var k=f;f=function(){var D=oc(w);k.call(D)}}sc(s,w,r,f)}else w=JT(l,s,r,f,h);return oc(w)}su=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=ti(s.pendingLanes);l!==0&&(ii(s,l|1),sn(s,Je()),(ze&6)===0&&(So=Je()+500,fi()))}break;case 13:fs(function(){var h=Or(r,1);if(h!==null){var f=Yt();Hn(h,r,1,f)}}),of(r,1)}},Gs=function(r){if(r.tag===13){var s=Or(r,134217728);if(s!==null){var l=Yt();Hn(s,r,134217728,l)}of(r,134217728)}},ou=function(r){if(r.tag===13){var s=vi(r),l=Or(r,s);if(l!==null){var h=Yt();Hn(l,r,s,h)}of(r,s)}},au=function(){return Me},lu=function(r,s){var l=Me;try{return Me=r,s()}finally{Me=l}},Us=function(r,s,l){switch(s){case"input":if(ia(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Au(h);if(!f)throw Error(t(90));vr(h),ia(h,f)}}}break;case"textarea":Ms(r,l);break;case"select":s=l.value,s!=null&&Er(r,!!l.multiple,s,!1)}},Ki=Xd,pa=fs;var YT={usingClientEntryPoint:!1,Events:[Va,co,Au,Xn,fa,Xd]},Ja={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XT={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ya(r),r===null?null:r.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||QT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Xi=cc.inject(XT),dn=cc}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT,on.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(s))throw Error(t(200));return GT(r,s,null,l)},on.createRoot=function(r,s){if(!lf(r))throw Error(t(299));var l=!1,h="",f=xy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=sf(r,1,!1,null,null,l,!1,h,f),r[Pr]=s.current,Oa(r.nodeType===8?r.parentNode:r),new af(s)},on.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ya(s),r=r===null?null:r.stateNode,r},on.flushSync=function(r){return fs(r)},on.hydrate=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!0,l)},on.hydrateRoot=function(r,s,l){if(!lf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",w=xy;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=Py(s,null,r,1,l??null,f,!1,g,w),r[Pr]=s.current,Oa(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new ac(s)},on.render=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!1,l)},on.unmountComponentAtNode=function(r){if(!lc(r))throw Error(t(40));return r._reactRootContainer?(fs(function(){uc(null,null,r,!1,function(){r._reactRootContainer=null,r[Pr]=null})}),!0):!1},on.unstable_batchedUpdates=Xd,on.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!lc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return uc(r,s,l,!1,h)},on.version="18.3.1-next-f1338f8080-20240426",on}var jy;function qv(){if(jy)return hf.exports;jy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hf.exports=aI(),hf.exports}var By;function lI(){if(By)return hc;By=1;var n=qv();return hc.createRoot=n.createRoot,hc.hydrateRoot=n.hydrateRoot,hc}var uI=lI();const cI=zv(uI);var zy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},hI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Hv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,F=y&63;p||(F=64,u||(S=64)),i.push(t[v],t[E],t[S],t[F])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Wv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||E==null)throw new dI;const S=a<<2|d>>4;if(i.push(S),y!==64){const F=d<<4&240|y>>2;if(i.push(F),E!==64){const P=y<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class dI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(n){const e=Wv(n);return Hv.encodeByteArray(e,!0)},Lc=function(n){return fI(n).replace(/\./g,"")},Kv=function(n){try{return Hv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>pI().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof zy>"u")return;const n=zy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kv(n[1]);return e&&JSON.parse(e)},ih=()=>{try{return mI()||gI()||yI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gv=n=>{var e,t;return(t=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qv=n=>{const e=Gv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Jv=()=>{var n;return(n=ih())===null||n===void 0?void 0:n.config},Yv=n=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lc(JSON.stringify(t)),Lc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function wI(){var n;const e=(n=ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function II(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SI(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RI(){return!wI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AI(){try{return typeof indexedDB=="object"}catch{return!1}}function CI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="FirebaseError";class yr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kI,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?PI(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new yr(o,d,i)}}function PI(n,e){return n.replace(NI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const NI=/\{\$([^}]+)}/g;function xI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if($y(a)&&$y(u)){if(!Lo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function $y(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function sl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bI(n,e){const t=new OI(n,e);return t.subscribe.bind(t)}class OI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");DI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pf),o.error===void 0&&(o.error=pf),o.complete===void 0&&(o.complete=pf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class Vi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new _I;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MI(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:VI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VI(n){return n===ys?void 0:n}function MI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new LI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const UI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},jI=Fe.INFO,BI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},zI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=BI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=jI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const $I=(n,e)=>e.some(t=>n instanceof t);let qy,Wy;function qI(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zv=new WeakMap,Ff=new WeakMap,ew=new WeakMap,mf=new WeakMap,Tp=new WeakMap;function HI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ni(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Zv.set(t,n)}).catch(()=>{}),Tp.set(e,n),e}function KI(n){if(Ff.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ff.set(n,e)}let Uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ff.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ew.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ni(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GI(n){Uf=n(Uf)}function QI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(gf(this),e,...t);return ew.set(i,e.sort?e.sort():[e]),Ni(i)}:WI().includes(n)?function(...e){return n.apply(gf(this),e),Ni(Zv.get(this))}:function(...e){return Ni(n.apply(gf(this),e))}}function JI(n){return typeof n=="function"?QI(n):(n instanceof IDBTransaction&&KI(n),$I(n,qI())?new Proxy(n,Uf):n)}function Ni(n){if(n instanceof IDBRequest)return HI(n);if(mf.has(n))return mf.get(n);const e=JI(n);return e!==n&&(mf.set(n,e),Tp.set(e,n)),e}const gf=n=>Tp.get(n);function YI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ni(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ni(u.result),p.oldVersion,p.newVersion,Ni(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const XI=["get","getKey","getAll","getAllKeys","count"],ZI=["put","add","delete","clear"],yf=new Map;function Hy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ZI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||XI.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return yf.set(e,a),a}GI(n=>({...n,get:(e,t,i)=>Hy(e,t)||n.get(e,t,i),has:(e,t)=>!!Hy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tS(n){const e=n.getComponent();return e?.type==="VERSION"}const jf="@firebase/app",Ky="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Ep("@firebase/app"),nS="@firebase/app-compat",rS="@firebase/analytics-compat",iS="@firebase/analytics",sS="@firebase/app-check-compat",oS="@firebase/app-check",aS="@firebase/auth",lS="@firebase/auth-compat",uS="@firebase/database",cS="@firebase/data-connect",hS="@firebase/database-compat",dS="@firebase/functions",fS="@firebase/functions-compat",pS="@firebase/installations",mS="@firebase/installations-compat",gS="@firebase/messaging",yS="@firebase/messaging-compat",_S="@firebase/performance",vS="@firebase/performance-compat",wS="@firebase/remote-config",ES="@firebase/remote-config-compat",TS="@firebase/storage",IS="@firebase/storage-compat",SS="@firebase/firestore",RS="@firebase/vertexai-preview",AS="@firebase/firestore-compat",CS="firebase",kS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",PS={[jf]:"fire-core",[nS]:"fire-core-compat",[iS]:"fire-analytics",[rS]:"fire-analytics-compat",[oS]:"fire-app-check",[sS]:"fire-app-check-compat",[aS]:"fire-auth",[lS]:"fire-auth-compat",[uS]:"fire-rtdb",[cS]:"fire-data-connect",[hS]:"fire-rtdb-compat",[dS]:"fire-fn",[fS]:"fire-fn-compat",[pS]:"fire-iid",[mS]:"fire-iid-compat",[gS]:"fire-fcm",[yS]:"fire-fcm-compat",[_S]:"fire-perf",[vS]:"fire-perf-compat",[wS]:"fire-rc",[ES]:"fire-rc-compat",[TS]:"fire-gcs",[IS]:"fire-gcs-compat",[SS]:"fire-fst",[AS]:"fire-fst-compat",[RS]:"fire-vertex","fire-js":"fire-js",[CS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,NS=new Map,zf=new Map;function Gy(n,e){try{n.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ts(n){const e=n.name;if(zf.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(const t of gl.values())Gy(t,n);for(const t of NS.values())Gy(t,n);return!0}function bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ur(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Nl("app","Firebase",xS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=kS;function tw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(t||(t=Jv()),!t)throw xi.create("no-options");const a=gl.get(o);if(a){if(Lo(t,a.options)&&Lo(i,a.config))return a;throw xi.create("duplicate-app",{appName:o})}const u=new FI(o);for(const p of zf.values())u.addComponent(p);const d=new bS(t,i,u);return gl.set(o,d),d}function sh(n=Bf){const e=gl.get(n);if(!e&&n===Bf&&Jv())return tw();if(!e)throw xi.create("no-app",{appName:n});return e}function OS(){return Array.from(gl.values())}function cr(n,e,t){var i;let o=(i=PS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(d.join(" "));return}Ts(new Vi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="firebase-heartbeat-database",LS=1,yl="firebase-heartbeat-store";let _f=null;function nw(){return _f||(_f=YI(DS,LS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),_f}async function VS(n){try{const t=(await nw()).transaction(yl),i=await t.objectStore(yl).get(rw(n));return await t.done,i}catch(e){if(e instanceof yr)zr.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e?.message});zr.warn(t.message)}}}async function Qy(n,e){try{const i=(await nw()).transaction(yl,"readwrite");await i.objectStore(yl).put(e,rw(n)),await i.done}catch(t){if(t instanceof yr)zr.warn(t.message);else{const i=xi.create("idb-set",{originalErrorMessage:t?.message});zr.warn(i.message)}}}function rw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=1024,FS=720*60*60*1e3;class US{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=FS}),this._storage.overwrite(this._heartbeatsCache))}catch(i){zr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jy(),{heartbeatsToSend:i,unsentEntries:o}=jS(this._heartbeatsCache.heartbeats),a=Lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zr.warn(t),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function jS(n,e=MS){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Yy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Yy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class BS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AI()?CI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Yy(n){return Lc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n){Ts(new Vi("platform-logger",e=>new eS(e),"PRIVATE")),Ts(new Vi("heartbeat",e=>new US(e),"PRIVATE")),cr(jf,Ky,n),cr(jf,Ky,"esm2017"),cr("fire-js","")}zS("");function Ip(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function iw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $S=iw,sw=new Nl("auth","Firebase",iw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Ep("@firebase/auth");function qS(n,...e){Vc.logLevel<=Fe.WARN&&Vc.warn(`Auth (${Ns}): ${n}`,...e)}function Ec(n,...e){Vc.logLevel<=Fe.ERROR&&Vc.error(`Auth (${Ns}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(n,...e){throw Sp(n,...e)}function hr(n,...e){return Sp(n,...e)}function ow(n,e,t){const i=Object.assign(Object.assign({},$S()),{[e]:t});return new Nl("auth","Firebase",i).create(e,{appName:n.name})}function jr(n){return ow(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return sw.create(n,...e)}function Se(n,e,...t){if(!n)throw Sp(e,...t)}function Mr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function $r(n,e){n||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WS(){return Xy()==="http:"||Xy()==="https:"}function Xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WS()||TI()||"connection"in navigator)?navigator.onLine:!0}function KS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,$r(t>e,"Short delay should be less than long delay!"),this.isMobile=vI()||II()}get(){return HS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e){$r(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new Ol(3e4,6e4);function Kr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Gr(n,e,t,i,o={}){return lw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=xl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return EI()||(y.referrerPolicy="no-referrer"),aw.fetch()(uw(n,n.config.apiHost,t,d),y)})}async function lw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},GS),e);try{const o=new YS(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw dc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw dc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw dc(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ow(n,v,y);Gn(n,v)}}catch(o){if(o instanceof yr)throw o;Gn(n,"network-request-failed",{message:String(o)})}}async function Dl(n,e,t,i,o={}){const a=await Gr(n,e,t,i,o);return"mfaPendingCredential"in a&&Gn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function uw(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Rp(n.config,o):`${n.config.apiScheme}://${o}`}function JS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hr(this.auth,"network-request-failed")),QS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hr(n,e,i);return o.customData._tokenResponse=t,o}function Zy(n){return n!==void 0&&n.enterprise!==void 0}class XS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ZS(n,e){return Gr(n,"GET","/v2/recaptchaConfig",Kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e){return Gr(n,"POST","/v1/accounts:delete",e)}async function cw(n,e){return Gr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tR(n,e=!1){const t=yt(n),i=await t.getIdToken(e),o=Ap(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:cl(vf(o.auth_time)),issuedAtTime:cl(vf(o.iat)),expirationTime:cl(vf(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function vf(n){return Number(n)*1e3}function Ap(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kv(t);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o?.toString()),null}}function e_(n){const e=Ap(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof yr&&nR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function nR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await _l(n,cw(t,{idToken:i}));Se(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?hw(a.providerUserInfo):[],d=sR(n.providerData,u),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!d?.length,v=p?y:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new qf(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function iR(n){const e=yt(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function hw(n){return n.map(e=>{var{providerId:t}=e,i=Ip(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,e){const t=await lw(n,{},async()=>{const i=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=uw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",aw.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aR(n,e){return Gr(n,"POST","/v2/accounts:revokeToken",Kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=e_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await oR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new xo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tR(this,e)}reload(){return iR(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await _l(this,eR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,y,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,F=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,P=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(d=t.tenantId)!==null&&d!==void 0?d:void 0,R=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:X,emailVerified:re,isAnonymous:K,providerData:Z,stsTokenManager:N}=t;Se(X&&N,e,"internal-error");const I=xo.fromJSON(this.name,N);Se(typeof X=="string",e,"internal-error"),Ii(E,e.name),Ii(S,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof K=="boolean",e,"internal-error"),Ii(F,e.name),Ii(P,e.name),Ii(U,e.name),Ii(R,e.name),Ii(Y,e.name),Ii(ee,e.name);const C=new Fr({uid:X,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:K,photoURL:P,phoneNumber:F,tenantId:U,stsTokenManager:I,createdAt:Y,lastLoginAt:ee});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(O=>Object.assign({},O))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new xo;o.updateFromServerResponse(t);const a=new Fr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?hw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new xo;d.updateFromIdToken(i);const p=new Fr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function Ur(n){$r(n instanceof Function,"Expected a class definition");let e=t_.get(n);return e?($r(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dw.type="NONE";const n_=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n,e,t){return`firebase:${n}:${e}:${t}`}class bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Tc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new bo(Ur(n_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Ur(n_);const u=Tc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const v=await y._get(u);if(v){const E=Fr._fromJSON(e,v);y!==a&&(d=E),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new bo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new bo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_w(e))return"Blackberry";if(vw(e))return"Webos";if(pw(e))return"Safari";if((e.includes("chrome/")||mw(e))&&!e.includes("edge/"))return"Chrome";if(yw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function fw(n=Kt()){return/firefox\//i.test(n)}function pw(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mw(n=Kt()){return/crios\//i.test(n)}function gw(n=Kt()){return/iemobile/i.test(n)}function yw(n=Kt()){return/android/i.test(n)}function _w(n=Kt()){return/blackberry/i.test(n)}function vw(n=Kt()){return/webos/i.test(n)}function Cp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lR(n=Kt()){var e;return Cp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uR(){return SI()&&document.documentMode===10}function ww(n=Kt()){return Cp(n)||yw(n)||vw(n)||_w(n)||/windows phone/i.test(n)||gw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(n,e=[]){let t;switch(n){case"Browser":t=r_(Kt());break;case"Worker":t=`${r_(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ns}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e={}){return Gr(n,"GET","/v2/passwordPolicy",Kr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=6;class fR{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:dR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new cR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ur(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cw(this,{idToken:e}),i=await Fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ur(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(jr(this));const t=e?yt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hR(this),t=new fR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await aR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ur(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[Ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ew(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&qS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Bi(n){return yt(n)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=bI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mR(n){oh=n}function Tw(n){return oh.loadJS(n)}function gR(){return oh.recaptchaEnterpriseScript}function yR(){return oh.gapiScript}function _R(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const vR="recaptcha-enterprise",wR="NO_RECAPTCHA";class ER{constructor(e){this.type=vR,this.auth=Bi(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{ZS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new XS(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;Zy(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(wR)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&Zy(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=gR();p.length!==0&&(p+=d),Tw(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function s_(n,e,t,i=!1){const o=new ER(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fc(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await s_(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await s_(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n,e){const t=bl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Lo(a,e??{}))return o;Gn(o,"already-initialized")}return t.initialize({options:e})}function IR(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ur);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function SR(n,e,t){const i=Bi(n);Se(i._canInitEmulator,i,"emulator-config-failed"),Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Iw(e),{host:u,port:d}=RR(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),AR()}function Iw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RR(n){const e=Iw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:o_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:o_(u)}}}function o_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function AR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,t){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function CR(n,e){return Gr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,e){return Dl(n,"POST","/v1/accounts:signInWithPassword",Kr(n,e))}async function PR(n,e){return Gr(n,"POST","/v1/accounts:sendOobCode",Kr(n,e))}async function NR(n,e){return PR(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Kr(n,e))}async function bR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends kp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,t,"signInWithPassword",kR);case"emailLink":return xR(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,i,"signUpPassword",CR);case"emailLink":return bR(e,{idToken:t,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return Dl(n,"POST","/v1/accounts:signInWithIdp",Kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="http://localhost";class Is extends kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Ip(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Is(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LR(n){const e=il(sl(n)).link,t=e?il(sl(e)).deep_link_id:null,i=il(sl(n)).deep_link_id;return(i?il(sl(i)).link:null)||i||t||e||n}class Pp{constructor(e){var t,i,o,a,u,d;const p=il(sl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,E=DR((o=p.mode)!==null&&o!==void 0?o:null);Se(y&&v&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=LR(e);try{return new Pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,t){return vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Pp.parseLink(t);return Se(i,"argument-error"),vl._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Ll{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Is._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ri.credential(t,i)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Ll{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Ll{constructor(){super("twitter.com")}static credential(e,t){return Is._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ci.credential(t,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){return Dl(n,"POST","/v1/accounts:signUp",Kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Fr._fromIdTokenResponse(e,i,o),u=a_(i);return new Ss({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=a_(i);return new Ss({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function a_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends yr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Uc(e,t,i,o)}}function Rw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(n,a,e,i):a})}async function MR(n,e,t=!1){const i=await _l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ss._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e,t=!1){const{auth:i}=n;if(ur(i.app))return Promise.reject(jr(i));const o="reauthenticate";try{const a=await _l(n,Rw(i,o,e,n),t);Se(a.idToken,i,"internal-error");const u=Ap(a.idToken);Se(u,i,"internal-error");const{sub:d}=u;return Se(n.uid===d,i,"user-mismatch"),Ss._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Gn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(n,e,t=!1){if(ur(n.app))return Promise.reject(jr(n));const i="signIn",o=await Rw(n,i,e),a=await Ss._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function UR(n,e){return Aw(Bi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(n){const e=Bi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jR(n,e,t){const i=Bi(n);await Fc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",NR)}async function BR(n,e,t){if(ur(n.app))return Promise.reject(jr(n));const i=Bi(n),u=await Fc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Cw(n),p}),d=await Ss._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function zR(n,e,t){return ur(n.app)?Promise.reject(jr(n)):UR(yt(n),Ho.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Cw(n),i})}function $R(n,e,t,i){return yt(n).onIdTokenChanged(e,t,i)}function qR(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function WR(n,e,t,i){return yt(n).onAuthStateChanged(e,t,i)}function HR(n){return yt(n).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1e3,GR=10;class Pw extends kw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ww(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);uR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pw.type="LOCAL";const QR=Pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends kw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nw.type="SESSION";const xw=Nw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ah(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await JR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Np("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function XR(n){dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function ZR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tA(){return bw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="firebaseLocalStorageDb",nA=1,Bc="firebaseLocalStorage",Dw="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lh(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function rA(){const n=indexedDB.deleteDatabase(Ow);return new Vl(n).toPromise()}function Wf(){const n=indexedDB.open(Ow,nA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Bc,{keyPath:Dw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),await rA(),e(await Wf()))})})}async function l_(n,e,t){const i=lh(n,!0).put({[Dw]:e,value:t});return new Vl(i).toPromise()}async function iA(n,e){const t=lh(n,!1).get(e),i=await new Vl(t).toPromise();return i===void 0?null:i.value}function u_(n,e){const t=lh(n,!0).delete(e);return new Vl(t).toPromise()}const sA=800,oA=3;class Lw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>oA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(tA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZR(),!this.activeServiceWorker)return;this.sender=new YR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await l_(e,jc,"1"),await u_(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>l_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>iA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=lh(o,!1).getAll();return new Vl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lw.type="LOCAL";const aA=Lw;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(n,e){return e?Ur(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uA(n){return Aw(n.auth,new xp(n),n.bypassAuthState)}function cA(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),FR(t,new xp(n),n.bypassAuthState)}async function hA(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),MR(t,new xp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uA;case"linkViaPopup":case"linkViaRedirect":return hA;case"reauthViaPopup":case"reauthViaRedirect":return cA;default:Gn(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Ol(2e3,1e4);class No extends Vw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=Np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dA.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="pendingRedirect",Ic=new Map;class pA extends Vw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const i=await mA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mA(n,e){const t=_A(e),i=yA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function gA(n,e){Ic.set(n._key(),e)}function yA(n){return Ur(n._redirectPersistence)}function _A(n){return Tc(fA,n.config.apiKey,n.name)}async function vA(n,e,t=!1){if(ur(n.app))return Promise.reject(jr(n));const i=Bi(n),o=lA(i,e),u=await new pA(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=600*1e3;class EA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Mw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(hr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wA&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(e))}saveEventToCache(e){this.cachedEventUids.add(c_(e)),this.lastProcessedEventTime=Date.now()}}function c_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Mw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function TA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e={}){return Gr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RA=/^https?/;async function AA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IA(n);for(const t of e)try{if(CA(t))return}catch{}Gn(n,"unauthorized-domain")}function CA(n){const e=$f(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!RA.test(t))return!1;if(SA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Ol(3e4,6e4);function h_(){const n=dr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PA(n){return new Promise((e,t)=>{var i,o,a;function u(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),t(hr(n,"network-request-failed"))},timeout:kA.get()})}if(!((o=(i=dr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=dr().gapi)===null||a===void 0)&&a.load)u();else{const d=_R("iframefcb");return dr()[d]=()=>{gapi.load?u():t(hr(n,"network-request-failed"))},Tw(`${yR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function NA(n){return Sc=Sc||PA(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Ol(5e3,15e3),bA="__/auth/iframe",OA="emulator/auth/iframe",DA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VA(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rp(e,OA):`https://${n.config.authDomain}/${bA}`,i={apiKey:e.apiKey,appName:n.name,v:Ns},o=LA.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${xl(i).slice(1)}`}async function MA(n){const e=await NA(n),t=dr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:VA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=hr(n,"network-request-failed"),d=dr().setTimeout(()=>{a(u)},xA.get());function p(){dr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UA=500,jA=600,BA="_blank",zA="http://localhost";class d_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $A(n,e,t,i=UA,o=jA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},FA),{width:i.toString(),height:o.toString(),top:a,left:u}),y=Kt().toLowerCase();t&&(d=mw(y)?BA:t),fw(y)&&(e=e||zA,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[F,P])=>`${S}${F}=${P},`,"");if(lR(y)&&d!=="_self")return qA(e||"",d),new d_(null);const E=window.open(e||"",d,v);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new d_(E)}function qA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__/auth/handler",HA="emulator/auth/handler",KA=encodeURIComponent("fac");async function f_(n,e,t,i,o,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ns,eventId:o};if(e instanceof Sw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",xI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Ll){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),y=p?`#${KA}=${encodeURIComponent(p)}`:"";return`${GA(n)}?${xl(d).slice(1)}${y}`}function GA({config:n}){return n.emulator?Rp(n,HA):`https://${n.authDomain}/${WA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class QA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xw,this._completeRedirectFn=vA,this._overrideRedirectResult=gA}async _openPopup(e,t,i,o){var a;$r((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await f_(e,t,i,$f(),o);return $A(e,u,Np())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await f_(e,t,i,$f(),o);return XR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):($r(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await MA(e),i=new EA(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wf,{type:wf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[wf];u!==void 0&&t(!!u),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ww()||pw()||Cp()}}const JA=QA;var p_="@firebase/auth",m_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZA(n){Ts(new Vi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ew(n)},y=new pR(i,o,a,p);return IR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ts(new Vi("auth-internal",e=>{const t=Bi(e.getProvider("auth").getImmediate());return(i=>new YA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(p_,m_,XA(n)),cr(p_,m_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=300,tC=Yv("authIdTokenMaxAge")||eC;let g_=null;const nC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>tC)return;const o=t?.token;g_!==o&&(g_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rC(n=sh()){const e=bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TR(n,{popupRedirectResolver:JA,persistence:[aA,QR,xw]}),i=Yv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=nC(a.toString());qR(t,u,()=>u(t.currentUser)),$R(t,d=>u(d))}}const o=Gv("auth");return o&&SR(t,`http://${o}`),t}function iC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}mR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=hr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",iC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZA("Browser");var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,Fw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function C(){}C.prototype=I.prototype,N.D=I.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(O,V,L){for(var A=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)A[Pe-2]=arguments[Pe];return I.prototype[V].apply(O,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,C){C||(C=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(V=0;16>V;++V)O[V]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=N.g[0],C=N.g[1],V=N.g[2];var L=N.g[3],A=I+(L^C&(V^L))+O[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[1]+3905402710&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[2]+606105819&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[3]+3250441966&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[5]+1200080426&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[6]+2821735955&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[7]+4249261313&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[9]+2336552879&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[10]+4294925233&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[11]+2304563134&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(L^C&(V^L))+O[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=L+(V^I&(C^V))+O[13]+4254626195&4294967295,L=I+(A<<12&4294967295|A>>>20),A=V+(C^L&(I^C))+O[14]+2792965006&4294967295,V=L+(A<<17&4294967295|A>>>15),A=C+(I^V&(L^I))+O[15]+1236535329&4294967295,C=V+(A<<22&4294967295|A>>>10),A=I+(V^L&(C^V))+O[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[6]+3225465664&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[11]+643717713&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[0]+3921069994&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[10]+38016083&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[15]+3634488961&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[4]+3889429448&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[14]+3275163606&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[3]+4107603335&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[8]+1163531501&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(V^L&(C^V))+O[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=L+(C^V&(I^C))+O[2]+4243563512&4294967295,L=I+(A<<9&4294967295|A>>>23),A=V+(I^C&(L^I))+O[7]+1735328473&4294967295,V=L+(A<<14&4294967295|A>>>18),A=C+(L^I&(V^L))+O[12]+2368359562&4294967295,C=V+(A<<20&4294967295|A>>>12),A=I+(C^V^L)+O[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[8]+2272392833&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[11]+1839030562&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[14]+4259657740&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[4]+1272893353&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[7]+4139469664&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[10]+3200236656&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[0]+3936430074&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[3]+3572445317&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[6]+76029189&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(C^V^L)+O[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=L+(I^C^V)+O[12]+3873151461&4294967295,L=I+(A<<11&4294967295|A>>>21),A=V+(L^I^C)+O[15]+530742520&4294967295,V=L+(A<<16&4294967295|A>>>16),A=C+(V^L^I)+O[2]+3299628645&4294967295,C=V+(A<<23&4294967295|A>>>9),A=I+(V^(C|~L))+O[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[7]+1126891415&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[14]+2878612391&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[5]+4237533241&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[3]+2399980690&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[10]+4293915773&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[1]+2240044497&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[15]+4264355552&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[6]+2734768916&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[13]+1309151649&4294967295,C=V+(A<<21&4294967295|A>>>11),A=I+(V^(C|~L))+O[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=L+(C^(I|~V))+O[11]+3174756917&4294967295,L=I+(A<<10&4294967295|A>>>22),A=V+(I^(L|~C))+O[2]+718787259&4294967295,V=L+(A<<15&4294967295|A>>>17),A=C+(L^(V|~I))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var C=I-this.blockSize,O=this.B,V=this.h,L=0;L<I;){if(V==0)for(;L<=C;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<I;)if(O[V++]=N.charCodeAt(L++),V==this.blockSize){o(this,O),V=0;break}}else for(;L<I;)if(O[V++]=N[L++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var C=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=C&255,C/=256;for(this.u(N),N=Array(16),I=C=0;4>I;++I)for(var O=0;32>O;O+=8)N[C++]=this.g[I]>>>O&255;return N};function a(N,I){var C=d;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=I(N)}function u(N,I){this.h=I;for(var C=[],O=!0,V=N.length-1;0<=V;V--){var L=N[V]|0;O&&L==I||(C[V]=L,O=!1)}this.g=C}var d={};function p(N){return-128<=N&&128>N?a(N,function(I){return new u([I|0],0>I?-1:0)}):new u([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return R(y(-N));for(var I=[],C=1,O=0;N>=C;O++)I[O]=N/C|0,C*=4294967296;return new u(I,0)}function v(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return R(v(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(I,8)),O=E,V=0;V<N.length;V+=8){var L=Math.min(8,N.length-V),A=parseInt(N.substring(V,V+L),I);8>L?(L=y(Math.pow(I,L)),O=O.j(L).add(y(A))):(O=O.j(C),O=O.add(y(A)))}return O}var E=p(0),S=p(1),F=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-R(this).m();for(var N=0,I=1,C=0;C<this.g.length;C++){var O=this.i(C);N+=(0<=O?O:4294967296+O)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(U(this))return"-"+R(this).toString(N);for(var I=y(Math.pow(N,6)),C=this,O="";;){var V=re(C,I).g;C=Y(C,V.j(I));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=V,P(C))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=Y(this,N),U(N)?-1:P(N)?0:1};function R(N){for(var I=N.g.length,C=[],O=0;O<I;O++)C[O]=~N.g[O];return new u(C,~N.h).add(S)}n.abs=function(){return U(this)?R(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0,V=0;V<=I;V++){var L=O+(this.i(V)&65535)+(N.i(V)&65535),A=(L>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);O=A>>>16,L&=65535,A&=65535,C[V]=A<<16|L}return new u(C,C[C.length-1]&-2147483648?-1:0)};function Y(N,I){return N.add(R(I))}n.j=function(N){if(P(this)||P(N))return E;if(U(this))return U(N)?R(this).j(R(N)):R(R(this).j(N));if(U(N))return R(this.j(R(N)));if(0>this.l(F)&&0>N.l(F))return y(this.m()*N.m());for(var I=this.g.length+N.g.length,C=[],O=0;O<2*I;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<N.g.length;V++){var L=this.i(O)>>>16,A=this.i(O)&65535,Pe=N.i(V)>>>16,Qe=N.i(V)&65535;C[2*O+2*V]+=A*Qe,ee(C,2*O+2*V),C[2*O+2*V+1]+=L*Qe,ee(C,2*O+2*V+1),C[2*O+2*V+1]+=A*Pe,ee(C,2*O+2*V+1),C[2*O+2*V+2]+=L*Pe,ee(C,2*O+2*V+2)}for(O=0;O<I;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=I;O<2*I;O++)C[O]=0;return new u(C,0)};function ee(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function X(N,I){this.g=N,this.h=I}function re(N,I){if(P(I))throw Error("division by zero");if(P(N))return new X(E,E);if(U(N))return I=re(R(N),I),new X(R(I.g),R(I.h));if(U(I))return I=re(N,R(I)),new X(R(I.g),I.h);if(30<N.g.length){if(U(N)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=I;0>=O.l(N);)C=K(C),O=K(O);var V=Z(C,1),L=Z(O,1);for(O=Z(O,2),C=Z(C,2);!P(O);){var A=L.add(O);0>=A.l(N)&&(V=V.add(C),L=A),O=Z(O,1),C=Z(C,1)}return I=Y(N,V.j(I)),new X(V,I)}for(V=E;0<=N.l(I);){for(C=Math.max(1,Math.floor(N.m()/I.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=y(C),A=L.j(I);U(A)||0<A.l(N);)C-=O,L=y(C),A=L.j(I);P(L)&&(L=S),V=V.add(L),N=Y(N,A)}return new X(V,N)}n.A=function(N){return re(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)&N.i(O);return new u(C,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)|N.i(O);return new u(C,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],O=0;O<I;O++)C[O]=this.i(O)^N.i(O);return new u(C,this.h^N.h)};function K(N){for(var I=N.g.length+1,C=[],O=0;O<I;O++)C[O]=N.i(O)<<1|N.i(O-1)>>>31;return new u(C,N.h)}function Z(N,I){var C=I>>5;I%=32;for(var O=N.g.length-C,V=[],L=0;L<O;L++)V[L]=0<I?N.i(L+C)>>>I|N.i(L+C+1)<<32-I:N.i(L+C);return new u(V,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Fw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,ws=u}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uw,ol,jw,Rc,Hf,Bw,zw,$w;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var _=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var B=c[T];if(!(B in _))break e;_=_[B]}c=c[c.length-1],T=_[c],m=m(T),m!=T&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var _=0,T=!1,B={next:function(){if(!T&&_<c.length){var H=_++;return{value:m(H,c[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function v(c,m,_){return c.call.apply(c.bind,arguments)}function E(c,m,_){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),c.apply(m,B)}}return function(){return c.apply(m,arguments)}}function S(c,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function F(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function P(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(T,B,H){for(var le=Array(arguments.length-2),He=2;He<arguments.length;He++)le[He-2]=arguments[He];return m.prototype[B].apply(T,le)}}function U(c){const m=c.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=c[T];return _}return[]}function R(c,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const B=c.length||0,H=T.length||0;c.length=B+H;for(let le=0;le<H;le++)c[B+le]=T[le]}else c.push(T)}}class Y{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var K=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Z(c,m,_){for(const T in c)m.call(_,c[T],T,c)}function N(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function I(c){const m={};for(const _ in c)m[_]=c[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let _,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(_ in T)c[_]=T[_];for(let H=0;H<C.length;H++)_=C[H],Object.prototype.hasOwnProperty.call(T,_)&&(c[_]=T[_])}}function V(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function L(c){d.setTimeout(()=>{throw c},0)}function A(){var c=ye;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Pe{constructor(){this.h=this.g=null}add(m,_){const T=Qe.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new Y(()=>new Ue,c=>c.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,oe=!1,ye=new Pe,G=()=>{const c=d.Promise.resolve(void 0);Ve=()=>{c.then(b)}};var b=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){L(_)}var m=Qe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}oe=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Te=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return c})();function _e(c,m){if(ue.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(K){e:{try{re(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ie[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_e.aa.h.call(this)}}P(_e,ue);var Ie={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function We(c,m,_,T,B){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=B,this.key=++Oe,this.da=this.fa=!1}function lt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Mt(c){this.src=c,this.g={},this.h=0}Mt.prototype.add=function(c,m,_,T,B){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var le=Xr(c,m,T,B);return-1<le?(m=c[le],_||(m.fa=!1)):(m=new We(m,this.src,H,!!T,B),m.fa=_,c.push(m)),m};function vr(c,m){var _=m.type;if(_ in c.g){var T=c.g[_],B=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=B)&&Array.prototype.splice.call(T,B,1),H&&(lt(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xr(c,m,_,T){for(var B=0;B<c.length;++B){var H=c[B];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==T)return B}return-1}var $i="closure_lm_"+(1e6*Math.random()|0),Ds={};function ra(c,m,_,T,B){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ra(c,m[H],_,T,B);return null}return _=oa(_),c&&c[xe]?c.K(m,_,y(T)?!!T.capture:!1,B):ia(c,m,_,!1,T,B)}function ia(c,m,_,T,B,H){if(!m)throw Error("Invalid event type");var le=y(B)?!!B.capture:!!B,He=Vs(c);if(He||(c[$i]=He=new Mt(c)),_=He.add(m,_,T,le,H),_.proxy)return _;if(T=Jl(),_.proxy=T,T.src=c,T.listener=_,c.addEventListener)Te||(B=le),B===void 0&&(B=!1),c.addEventListener(m.toString(),T,B);else if(c.attachEvent)c.attachEvent(Er(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Jl(){function c(_){return m.call(c.src,c.listener,_)}const m=sa;return c}function Ls(c,m,_,T,B){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ls(c,m[H],_,T,B);else T=y(T)?!!T.capture:!!T,_=oa(_),c&&c[xe]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],_=Xr(H,_,T,B),-1<_&&(lt(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=Vs(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Xr(m,_,T,B)),(_=-1<c?m[c]:null)&&wr(_))}function wr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[xe])vr(m.i,c);else{var _=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(_,T,c.capture):m.detachEvent?m.detachEvent(Er(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Vs(m))?(vr(_,c),_.h==0&&(_.src=null,m[$i]=null)):lt(c)}}}function Er(c){return c in Ds?Ds[c]:Ds[c]="on"+c}function sa(c,m){if(c.da)c=!0;else{m=new _e(m,this);var _=c.listener,T=c.ha||c.src;c.fa&&wr(c),c=_.call(T,m)}return c}function Vs(c){return c=c[$i],c instanceof Mt?c:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(m){return c.handleEvent(m)}),c[Ms])}function _t(){j.call(this),this.i=new Mt(this),this.M=this,this.F=null}P(_t,j),_t.prototype[xe]=!0,_t.prototype.removeEventListener=function(c,m,_,T){Ls(this,c,m,_,T)};function vt(c,m){var _,T=c.F;if(T)for(_=[];T;T=T.F)_.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new ue(m,c);else if(m instanceof ue)m.target=m.target||c;else{var B=m;m=new ue(T,c),O(m,B)}if(B=!0,_)for(var H=_.length-1;0<=H;H--){var le=m.g=_[H];B=Tr(le,T,!0,m)&&B}if(le=m.g=c,B=Tr(le,T,!0,m)&&B,B=Tr(le,T,!1,m)&&B,_)for(H=0;H<_.length;H++)le=m.g=_[H],B=Tr(le,T,!1,m)&&B}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],T=0;T<_.length;T++)lt(_[T]);delete c.g[m],c.h--}}this.F=null},_t.prototype.K=function(c,m,_,T){return this.i.add(String(c),m,!1,_,T)},_t.prototype.L=function(c,m,_,T){return this.i.add(String(c),m,!0,_,T)};function Tr(c,m,_,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,H=0;H<m.length;++H){var le=m[H];if(le&&!le.da&&le.capture==_){var He=le.listener,wt=le.ha||le.src;le.fa&&vr(c.i,le),B=He.call(wt,T)!==!1&&B}}return B&&!T.defaultPrevented}function aa(c,m,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function Zr(c){c.g=aa(()=>{c.g=null,c.i&&(c.i=!1,Zr(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class qi extends j{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Zr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(c){j.call(this),this.h=c,this.g={}}P(Wi,j);var la=[];function ua(c){Z(c.g,function(m,_){this.g.hasOwnProperty(_)&&wr(m)},c),c.g={}}Wi.prototype.N=function(){Wi.aa.N.call(this),ua(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Hi(){}Hi.prototype.h=null;function Fs(c){return c.h||(c.h=c.i())}function Us(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){ue.call(this,"d")}P(Yn,ue);function js(){ue.call(this,"c")}P(js,ue);var Xn={},fa=null;function Ki(){return fa=fa||new _t}Xn.La="serverreachability";function pa(c){ue.call(this,Xn.La,c)}P(pa,ue);function Ir(c){const m=Ki();vt(m,new pa(m))}Xn.STAT_EVENT="statevent";function ma(c,m){ue.call(this,Xn.STAT_EVENT,c),this.stat=m}P(ma,ue);function ct(c){const m=Ki();vt(m,new ma(m,c))}Xn.Ma="timingevent";function Bs(c,m){ue.call(this,Xn.Ma,c),this.size=m}P(Bs,ue);function bn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function Qi(c,m,_,T,B,H){c.info(function(){if(c.g)if(H)for(var le="",He=H.split("&"),wt=0;wt<He.length;wt++){var je=He[wt].split("=");if(1<je.length){var St=je[0];je=je[1];var ft=St.split("_");le=2<=ft.length&&ft[1]=="type"?le+(St+"="+je+"&"):le+(St+"=redacted&")}}else le=null;else le=H;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+m+`
`+_+`
`+le})}function zs(c,m,_,T,B,H,le){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+m+`
`+_+`
`+H+" "+le})}function On(c,m,_,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vh(c,_)+(T?" "+T:"")})}function ga(c,m){c.info(function(){return"TIMEOUT: "+m})}Gi.prototype.info=function(){};function Vh(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var T=_[c];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var le=1;le<B.length;le++)B[le]=""}}}}return ca(_)}catch{return m}}var $s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Ji(){}P(Ji,Hi),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},Dn=new Ji;function Ln(c,m,_,T){this.j=c,this.i=m,this.l=_,this.R=T||1,this.U=new Wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}var ya={},qs={};function Ws(c,m,_){c.L=1,c.v=ii(fn(m)),c.m=_,c.P=!0,_a(c,null)}function _a(c,m){c.F=Date.now(),Je(c),c.A=fn(c.v);var _=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),oi(_.i,"t",T),c.C=0,_=c.j.J,c.h=new Xl,c.g=gu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new qi(S(c.Y,c,c.g),c.O)),m=c.U,_=c.g,T=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(la[0]=B.toString()),B=la);for(var H=0;H<B.length;H++){var le=ra(_,B[H],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Ir(),Qi(c.i,c.u,c.A,c.l,c.R,c.m)}Ln.prototype.ca=function(c){c=c.target;const m=this.M;m&&Zt(c)==3?m.j():this.Y(c)},Ln.prototype.Y=function(c){try{if(c==this.g)e:{const ft=Zt(this.g);var m=this.g.Ba();const Sn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||ft!=4||m==7||(m==8||0>=Sn?Ir(3):Ir(2)),Yi(this);var _=this.g.Z();this.X=_;t:if(Zl(this)){var T=Sa(this.g);c="";var B=T.length,H=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),ei(this);var le="";break t}this.h.i=new d.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(H&&m==B-1)});T.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,zs(this.i,this.u,this.A,this.l,this.R,ft,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,wt=this.g;if((He=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(He)){var je=He;break t}}je=null}if(_=je)On(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,_);else{this.o=!1,this.s=3,ct(12),Tn(this),ei(this);break e}}if(this.P){_=!0;let mn;for(;!this.J&&this.C<le.length;)if(mn=Mh(this,le),mn==qs){ft==4&&(this.s=4,ct(14),_=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==ya){this.s=4,ct(15),On(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else On(this.i,this.l,mn,null),va(this,mn);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||le.length!=0||this.h.h||(this.s=1,ct(16),_=!1),this.o=this.o&&_,!_)On(this.i,this.l,le,"[Invalid Chunked Response]"),Tn(this),ei(this);else if(0<le.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Aa(St),St.M=!0,ct(11))}}else On(this.i,this.l,le,null),va(this,le);ft==4&&Tn(this),this.o&&!this.J&&(ft==4?no(this.j,this):(this.o=!1,Je(this)))}else Ys(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Tn(this),ei(this)}}}catch{}finally{}};function Zl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Mh(c,m){var _=c.C,T=m.indexOf(`
`,_);return T==-1?qs:(_=Number(m.substring(_,T)),isNaN(_)?ya:(T+=1,T+_>m.length?qs:(m=m.slice(T,T+_),c.C=T+_,m)))}Ln.prototype.cancel=function(){this.J=!0,Tn(this)};function Je(c){c.S=Date.now()+c.I,eu(c,c.I)}function eu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=bn(S(c.ba,c),m)}function Yi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Ln.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ga(this.i,this.A),this.L!=2&&(Ir(),ct(17)),Tn(this),this.s=2,ei(this)):eu(this,this.S-c)};function ei(c){c.j.G==0||c.J||no(c.j,c)}function Tn(c){Yi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ua(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function va(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||Gt(_.h,c))){if(!c.K&&Gt(_.h,c)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)to(_),jn(_);else break e;eo(_),ct(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=bn(S(_.Za,_),6e3));if(1>=nu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else kr(_,11)}else if((c.K||_.g==c)&&to(_),!ee(m))for(B=_.Da.g.parse(m),m=0;m<B.length;m++){let je=B[m];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const St=je[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const ft=je[4];ft!=null&&(_.Aa=ft,_.j.info("SVER="+_.Aa));const Sn=je[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(T=1.5*Sn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const mn=c.g;if(mn){const is=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var H=T.h;H.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(wa(H,H.h),H.h=null))}if(T.D){const io=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(T.ya=io,Ge(T.I,T.D,io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var le=c;if(T.qa=mu(T,T.J?T.ia:null,T.W),le.K){ru(T.h,le);var He=le,wt=T.L;wt&&(He.I=wt),He.B&&(Yi(He),Je(He)),T.g=le}else rs(T);0<_.i.length&&nr(_)}else je[0]!="stop"&&je[0]!="close"||kr(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?kr(_,7):Nt(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}Ir(4)}catch{}}var tu=class{constructor(c,m){this.g=c,this.map=m}};function Xi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nu(c){return c.h?1:c.g?c.g.size:0}function Gt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function wa(c,m){c.g?c.g.add(m):c.h=m}function ru(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Xi.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function iu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return U(c.i)}function Hs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],_=c.length,T=0;T<_;T++)m.push(c[T]);return m}m=[],_=0;for(T in c)m[_++]=c[T];return m}function Ks(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const T in c)m[_++]=T;return m}}}function ti(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=Ks(c),T=Hs(c),B=T.length,H=0;H<B;H++)m.call(void 0,T[H],_&&_[H],c)}var Zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fh(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var T=c[_].indexOf("="),B=null;if(0<=T){var H=c[_].substring(0,T);B=c[_].substring(T+1)}else H=c[_];m(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Sr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Sr){this.h=c.h,es(this,c.j),this.o=c.o,this.g=c.g,ni(this,c.s),this.l=c.l;var m=c.i,_=new Zn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),ri(this,_),this.m=c.m}else c&&(m=String(c).match(Zi))?(this.h=!1,es(this,m[1]||"",!0),this.o=Me(m[2]||""),this.g=Me(m[3]||"",!0),ni(this,m[4]),this.l=Me(m[5]||"",!0),ri(this,m[6]||"",!0),this.m=Me(m[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}Sr.prototype.toString=function(){var c=[],m=this.j;m&&c.push(si(m,Gs,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(si(m,Gs,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(si(_,_.charAt(0)=="/"?au:ou,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",si(_,Ea)),c.join("")};function fn(c){return new Sr(c)}function es(c,m,_){c.j=_?Me(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ni(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function ri(c,m,_){m instanceof Zn?(c.i=m,er(c.i,c.h)):(_||(m=si(m,lu)),c.i=new Zn(m,c.h))}function Ge(c,m,_){c.i.set(m,_)}function ii(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Me(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function si(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,su),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function su(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Gs=/[#\/\?@]/g,ou=/[#\?:]/g,au=/[#\?]/g,lu=/[#\?@]/g,Ea=/#/g;function Zn(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Pt(c){c.g||(c.g=new Map,c.h=0,c.i&&Fh(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=Zn.prototype,n.add=function(c,m){Pt(this),this.i=null,c=In(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function Vn(c,m){Pt(c),m=In(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Mn(c,m){return Pt(c),m=In(c,m),c.g.has(m)}n.forEach=function(c,m){Pt(this),this.g.forEach(function(_,T){_.forEach(function(B){c.call(m,B,T,this)},this)},this)},n.na=function(){Pt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const B=c[T];for(let H=0;H<B.length;H++)_.push(m[T])}return _},n.V=function(c){Pt(this);let m=[];if(typeof c=="string")Mn(this,c)&&(m=m.concat(this.g.get(In(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},n.set=function(c,m){return Pt(this),this.i=null,c=In(this,c),Mn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function oi(c,m,_){Vn(c,m),0<_.length&&(c.i=null,c.g.set(In(c,m),U(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const H=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var B=H;le[T]!==""&&(B+="="+encodeURIComponent(String(le[T]))),c.push(B)}}return this.i=c.join("&")};function In(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function er(c,m){m&&!c.j&&(Pt(c),c.i=null,c.g.forEach(function(_,T){var B=T.toLowerCase();T!=B&&(Vn(this,T),oi(this,B,_))},c)),c.j=m}function Uh(c,m){const _=new Gi;if(d.Image){const T=new Image;T.onload=F(Xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=F(Xt,_,"TestLoadImage: error",!1,m,T),T.onabort=F(Xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=F(Xt,_,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function uu(c,m){const _=new Gi,T=new AbortController,B=setTimeout(()=>{T.abort(),Xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout(B),H.ok?Xt(_,"TestPingServer: ok",!0,m):Xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Xt(_,"TestPingServer: error",!1,m)})}function Xt(c,m,_,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(_)}catch{}}function jh(){this.g=new da}function cu(c,m,_){const T=_||"";try{ti(c,function(B,H){let le=B;y(B)&&(le=ca(B)),m.push(T+H+"="+encodeURIComponent(le))})}catch(B){throw m.push(T+"type="+encodeURIComponent("_badmap")),B}}function Rr(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Rr,Hi),Rr.prototype.g=function(){return new ts(this.l,this.j)},Rr.prototype.i=(function(c){return function(){return c}})({});function ts(c,m){_t.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(ts,_t),n=ts.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Un(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Fn(this):Un(this),this.readyState==3&&hu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Fn(this))},n.Qa=function(c){this.g&&(this.response=c,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Un(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Un(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ar(c){let m="";return Z(c,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function ai(c,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ar(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ge(c,m,_))}function tt(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(tt,_t);var Bh=/^https?$/i,Ta=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Fs(this.o):Fs(Dn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){ns(this,H);return}if(c=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)_.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())_.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),B=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ta,m,void 0))||T||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,le]of _)this.g.setRequestHeader(H,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){ns(this,H)}};function ns(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Qs(c),pn(c)}function Qs(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Zt(c)!=4||c.Z()!=2)){if(c.u&&Zt(c)==4)aa(c.Ea,0,c);else if(vt(c,"readystatechange"),Zt(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=le===0){var B=String(c.D).match(Zi)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),T=!Bh.test(B?B.toLowerCase():"")}_=T}if(_)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var H=2<Zt(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Qs(c)}}finally{pn(c)}}}}function pn(c,m){if(c.g){Js(c);const _=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||vt(c,"ready");try{_.onreadystatechange=T}catch{}}}function Js(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Zt(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ha(m)}};function Sa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(c){const m={};c=(c.g&&2<=Zt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(ee(c[T]))continue;var _=V(c[T]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[B]||[];m[B]=H,H.push(_)}N(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function Ra(c){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,c),this.cb=tr("retryDelaySeedMs",1e4,c),this.Wa=tr("forwardChannelMaxRetries",2,c),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(c&&c.concurrentRequestLimit),this.Da=new jh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ra.prototype,n.la=8,n.G=1,n.connect=function(c,m,_,T){ct(0),this.W=c,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=mu(this,null,this.W),nr(this)};function Nt(c){if(Xs(c),c.G==3){var m=c.U++,_=fn(c.I);if(Ge(_,"SID",c.K),Ge(_,"RID",m),Ge(_,"TYPE","terminate"),Cr(c,_),m=new Ln(c,c.j,m),m.L=2,m.v=ii(fn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}pu(c)}function jn(c){c.g&&(Aa(c),c.g.cancel(),c.g=null)}function Xs(c){jn(c),c.u&&(d.clearTimeout(c.u),c.u=null),to(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function nr(c){if(!dn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ve||G(),oe||(Ve(),oe=!0),ye.add(m,c),c.B=0}}function zh(c,m){return nu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=bn(S(c.Ga,c,m),fu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Ln(this,this.j,c);let H=this.o;if(this.S&&(H?(H=I(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=li(this,B,m),_=fn(this.I),Ge(_,"RID",c),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),Cr(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(Ar(H)))+"&"+m:this.m&&ai(_,this.m,H)),wa(this.h,B),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",m),Ge(_,"SID","null"),B.T=!0,Ws(B,_,null)):Ws(B,_,m),this.G=2}}else this.G==3&&(c?Zs(this,c):this.i.length==0||dn(this.h)||Zs(this))};function Zs(c,m){var _;m?_=m.l:_=c.U++;const T=fn(c.I);Ge(T,"SID",c.K),Ge(T,"RID",_),Ge(T,"AID",c.T),Cr(c,T),c.m&&c.o&&ai(T,c.m,c.o),_=new Ln(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=li(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wa(c.h,_),Ws(_,T,m)}function Cr(c,m){c.H&&Z(c.H,function(_,T){Ge(m,T,_)}),c.l&&ti({},function(_,T){Ge(m,T,_)})}function li(c,m,_){_=Math.min(c.i.length,_);var T=c.l?S(c.l.Na,c.l,c):null;e:{var B=c.i;let H=-1;for(;;){const le=["count="+_];H==-1?0<_?(H=B[0].g,le.push("ofs="+H)):H=0:le.push("ofs="+H);let He=!0;for(let wt=0;wt<_;wt++){let je=B[wt].g;const St=B[wt].map;if(je-=H,0>je)H=Math.max(0,B[wt].g-100),He=!1;else try{cu(St,le,"req"+je+"_")}catch{T&&T(St)}}if(He){T=le.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,T}function rs(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ve||G(),oe||(Ve(),oe=!0),ye.add(m,c),c.v=0}}function eo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=bn(S(c.Fa,c),fu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=bn(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),jn(this),du(this))};function Aa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function du(c){c.g=new Ln(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=fn(c.qa);Ge(m,"RID","rpc"),Ge(m,"SID",c.K),Ge(m,"AID",c.T),Ge(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(m,"TO",c.ja),Ge(m,"TYPE","xmlhttp"),Cr(c,m),c.m&&c.o&&ai(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ii(fn(m)),_.m=null,_.P=!0,_a(_,c)}n.Za=function(){this.C!=null&&(this.C=null,jn(this),eo(this),ct(19))};function to(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function no(c,m){var _=null;if(c.g==m){to(c),Aa(c),c.g=null;var T=2}else if(Gt(c.h,m))_=m.D,ru(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var B=c.B;T=Ki(),vt(T,new Bs(T,_)),nr(c)}else rs(c);else if(B=m.s,B==3||B==0&&0<m.X||!(T==1&&zh(c,m)||T==2&&eo(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),B){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function fu(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function kr(c,m){if(c.j.info("Error code "+m),m==2){var _=S(c.fb,c),T=c.Xa;const B=!T;T=new Sr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||es(T,"https"),ii(T),B?Uh(T.toString(),_):uu(T.toString(),_)}else ct(2);c.G=0,c.l&&c.l.sa(m),pu(c),Xs(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const m=iu(c.h);(m.length!=0||c.i.length!=0)&&(R(c.ka,m),R(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function mu(c,m,_){var T=_ instanceof Sr?fn(_):new Sr(_);if(T.g!="")m&&(T.g=m+"."+T.g),ni(T,T.s);else{var B=d.location;T=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var H=new Sr(null);T&&es(H,T),m&&(H.g=m),B&&ni(H,B),_&&(H.l=_),T=H}return _=c.D,m=c.ya,_&&m&&Ge(T,_,m),Ge(T,"VER",c.la),Cr(c,T),T}function gu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new tt(new Rr({eb:_})):new tt(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}n=Ca.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ro(){}ro.prototype.g=function(c,m){return new Qt(c,m)};function Qt(c,m){_t.call(this),this.g=new Ra(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!ee(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new rr(this)}P(Qt,_t),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Nt(this.g)},Qt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ca(c),c=_);m.i.push(new tu(m.Ya++,c)),m.G==3&&nr(m)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Qt.aa.N.call(this)};function yu(c){Yn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}P(yu,Yn);function _u(){js.call(this),this.status=1}P(_u,js);function rr(c){this.g=c}P(rr,Ca),rr.prototype.ua=function(){vt(this.g,"a")},rr.prototype.ta=function(c){vt(this.g,new yu(c))},rr.prototype.sa=function(c){vt(this.g,new _u)},rr.prototype.ra=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,$w=function(){return new ro},zw=function(){return Ki()},Bw=Xn,Hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,Rc=$s,Yl.COMPLETE="complete",jw=Yl,Us.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ol=Us,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Uw=tt}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Ep("@firebase/firestore");function Xa(){return Rs.logLevel}function me(n,...e){if(Rs.logLevel<=Fe.DEBUG){const t=e.map(bp);Rs.debug(`Firestore (${Ko}): ${n}`,...t)}}function qr(n,...e){if(Rs.logLevel<=Fe.ERROR){const t=e.map(bp);Rs.error(`Firestore (${Ko}): ${n}`,...t)}}function Vo(n,...e){if(Rs.logLevel<=Fe.WARN){const t=e.map(bp);Rs.warn(`Firestore (${Ko}): ${n}`,...t)}}function bp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function Ke(n,e){n||Ae()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class oC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class aC{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Br,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Br)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new qw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new $t(e)}}class lC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new lC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new cC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=dC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Mo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new It(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new It(0,0))}static max(){return new Ce(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(),i===void 0?i=e.length-t:i>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends wl{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const fC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends wl{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return fC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function pC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new Mi(o,ve.empty(),e)}function mC(n){return new Mi(n.readTime,n.key,-1)}class Mi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mi(Ce.min(),ve.empty(),-1)}static max(){return new Mi(Ce.max(),ve.empty(),-1)}}function gC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==yC)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((o=>o?ie.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((v=>{u[y]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ie(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function vC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Op.oe=-1;function uh(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function wC(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new Lt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Kw("Invalid base64 string: "+a):a}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const EC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=EC.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function As(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lp(n){const e=n.mapValue.fields.__previous_value__;return Dp(e)?Lp(e):e}function El(n){const e=Fi(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,i,o,a,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc={mapValue:{}};function Cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dp(n)?4:SC(n)?9007199254740991:IC(n)?10:11:Ae()}function mr(n,e){if(n===e)return!0;const t=Cs(n);if(t!==Cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Fi(o.timestampValue),d=Fi(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return As(o.bytesValue).isEqual(As(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return dt(o.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return dt(o.integerValue)===dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=dt(o.doubleValue),d=dt(a.doubleValue);return u===d?zc(u)===zc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Mo(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(v_(u)!==v_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!mr(u[p],d[p])))return!1;return!0})(n,e);default:return Ae()}}function Il(n,e){return(n.values||[]).find((t=>mr(t,e)))!==void 0}function Fo(n,e){if(n===e)return 0;const t=Cs(n),i=Cs(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=dt(a.integerValue||a.doubleValue),p=dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return E_(n.timestampValue,e.timestampValue);case 4:return E_(El(n),El(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=As(a),p=As(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const v=qe(d[y],p[y]);if(v!==0)return v}return qe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(dt(a.latitude),dt(u.latitude));return d!==0?d:qe(dt(a.longitude),dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return T_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,y,v;const E=a.fields||{},S=u.fields||{},F=(d=E.value)===null||d===void 0?void 0:d.arrayValue,P=(p=S.value)===null||p===void 0?void 0:p.arrayValue,U=qe(((y=F?.values)===null||y===void 0?void 0:y.length)||0,((v=P?.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:T_(F,P)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===mc.mapValue&&u===mc.mapValue)return 0;if(a===mc.mapValue)return 1;if(u===mc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=qe(p[E],v[E]);if(S!==0)return S;const F=Fo(d[p[E]],y[v[E]]);if(F!==0)return F}return qe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae()}}function E_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Fi(n),i=Fi(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function T_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Fo(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Uo(n){return Kf(n)}function Kf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Fi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return As(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Kf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Kf(t.fields[u])}`;return o+"}"})(n.mapValue):Ae()}function I_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gf(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function S_(n){return!!n&&"nullValue"in n}function R_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ac(n){return!!n&&"mapValue"in n}function IC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=hl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){xs(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new an(hl(this.value))}}function Gw(n){const e=[];return xs(n.fields,((t,i)=>{const o=new Dt([t]);if(Ac(i)){const a=Gw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new qt(e,0,Ce.min(),Ce.min(),Ce.min(),an.empty(),0)}static newFoundDocument(e,t,i,o){return new qt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new qt(e,2,t,Ce.min(),Ce.min(),an.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Ce.min(),Ce.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.position=e,this.inclusive=t}}function A_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),t.key):i=Fo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function C_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function RC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{}class gt extends Qw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new CC(e,t,i):t==="array-contains"?new NC(e,i):t==="in"?new xC(e,i):t==="not-in"?new bC(e,i):t==="array-contains-any"?new OC(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kC(e,i):new PC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fo(t,this.value)):t!==null&&Cs(this.value)===Cs(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends Qw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Qn(e,t)}matches(e){return Jw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jw(n){return n.op==="and"}function Yw(n){return AC(n)&&Jw(n)}function AC(n){for(const e of n.filters)if(e instanceof Qn)return!1;return!0}function Qf(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(Yw(n))return n.filters.map((e=>Qf(e))).join(",");{const e=n.filters.map((t=>Qf(t))).join(",");return`${n.op}(${e})`}}function Xw(n,e){return n instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&mr(i.value,o.value)})(n,e):n instanceof Qn?(function(i,o){return o instanceof Qn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Xw(u,o.filters[d])),!0):!1})(n,e):void Ae()}function Zw(n){return n instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof Qn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Zw).join(" ,")+"}"})(n):"Filter"}class CC extends gt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class kC extends gt{constructor(e,t){super(e,"in",t),this.keys=eE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class PC extends gt{constructor(e,t){super(e,"not-in",t),this.keys=eE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class NC extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Il(t.arrayValue,this.value)}}class xC extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Il(this.value.arrayValue,t)}}class bC extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Il(this.value.arrayValue,t)}}class OC extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Il(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function k_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new DC(n,e,t,i,o,a,u)}function Mp(n){const e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Uo(i))).join(",")),e.ue=t}return e.ue}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!C_(n.startAt,e.startAt)&&C_(n.endAt,e.endAt)}function Jf(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LC(n,e,t,i,o,a,u,d){return new Go(n,e,t,i,o,a,u,d)}function ch(n){return new Go(n)}function P_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tE(n){return n.collectionGroup!==null}function dl(n){const e=ke(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Lt(Dt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Sl(a,i))})),t.has(Dt.keyField().canonicalString())||e.ce.push(new Sl(Dt.keyField(),i))}return e.ce}function fr(n){const e=ke(n);return e.le||(e.le=VC(e,dl(n))),e.le}function VC(n,e){if(n.limitType==="F")return k_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Sl(o.field,a)}));const t=n.endAt?new $c(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $c(n.startAt.position,n.startAt.inclusive):null;return k_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yf(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qc(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return Fp(fr(n),fr(e))&&n.limitType===e.limitType}function nE(n){return`${Mp(fr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Zw(o))).join(", ")}]`),uh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(fr(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of dl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const y=A_(u,d,p);return u.inclusive?y<=0:y<0})(i.startAt,dl(i),o)||i.endAt&&!(function(u,d,p){const y=A_(u,d,p);return u.inclusive?y>=0:y>0})(i.endAt,dl(i),o))})(n,e)}function MC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rE(n){return(e,t)=>{let i=!1;for(const o of dl(n)){const a=FC(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function FC(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?Fo(p,y):Ae()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return Hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new ot(ve.comparator);function Wr(){return UC}const iE=new ot(ve.comparator);function al(...n){let e=iE;for(const t of n)e=e.insert(t.key,t);return e}function sE(n){let e=iE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function _s(){return fl()}function oE(){return fl()}function fl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const jC=new ot(ve.comparator),BC=new Lt(ve.comparator);function Le(...n){let e=BC;for(const t of n)e=e.add(t);return e}const zC=new Lt(qe);function $C(){return zC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function aE(n){return{integerValue:""+n}}function qC(n,e){return wC(e)?aE(e):Up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function WC(n,e,t){return n instanceof Rl?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Dp(a)&&(a=Lp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Al?uE(n,e):n instanceof jo?cE(n,e):(function(o,a){const u=lE(o,a),d=N_(u)+N_(o.Pe);return Gf(u)&&Gf(o.Pe)?aE(d):Up(o.serializer,d)})(n,e)}function HC(n,e,t){return n instanceof Al?uE(n,e):n instanceof jo?cE(n,e):t}function lE(n,e){return n instanceof Wc?(function(i){return Gf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Rl extends fh{}class Al extends fh{constructor(e){super(),this.elements=e}}function uE(n,e){const t=hE(e);for(const i of n.elements)t.some((o=>mr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class jo extends fh{constructor(e){super(),this.elements=e}}function cE(n,e){let t=hE(e);for(const i of n.elements)t=t.filter((o=>!mr(o,i)));return{arrayValue:{values:t}}}class Wc extends fh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function N_(n){return dt(n.integerValue||n.doubleValue)}function hE(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t){this.field=e,this.transform=t}}function KC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Al&&o instanceof Al||i instanceof jo&&o instanceof jo?Mo(i.elements,o.elements,mr):i instanceof Wc&&o instanceof Wc?mr(i.Pe,o.Pe):i instanceof Rl&&o instanceof Rl})(n.transform,e.transform)}class GC{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ph{}function fE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jp(n.key,xn.none()):new Ul(n.key,n.data,xn.none());{const t=n.data,i=an.empty();let o=new Lt(Dt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new zi(n.key,i,new vn(o.toArray()),xn.none())}}function QC(n,e,t){n instanceof Ul?(function(o,a,u){const d=o.value.clone(),p=b_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof zi?(function(o,a,u){if(!Cc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=b_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(pE(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pl(n,e,t,i){return n instanceof Ul?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=a.value.clone(),v=O_(a.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof zi?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=O_(a.fieldTransforms,p,u),v=u.data;return v.setAll(pE(a)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Cc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function JC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=lE(i.transform,o||null);a!=null&&(t===null&&(t=an.empty()),t.set(i.field,a))}return t||null}function x_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((a,u)=>KC(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ul extends ph{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zi extends ph{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function b_(n,e,t){const i=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,HC(u,d,t[o]))}return i}function O_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,WC(a,u,e))}return i}class jp extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YC extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&QC(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=oE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=fE(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>x_(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>x_(t,i)))}}class Bp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=(function(){return jC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Bp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Be;function tk(n){switch(n){default:return Ae();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function mE(n){if(n===void 0)return qr("GRPC error has no .code"),J.UNKNOWN;switch(n){case mt.OK:return J.OK;case mt.CANCELLED:return J.CANCELLED;case mt.UNKNOWN:return J.UNKNOWN;case mt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case mt.INTERNAL:return J.INTERNAL;case mt.UNAVAILABLE:return J.UNAVAILABLE;case mt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case mt.NOT_FOUND:return J.NOT_FOUND;case mt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case mt.ABORTED:return J.ABORTED;case mt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case mt.DATA_LOSS:return J.DATA_LOSS;default:return Ae()}}(Be=mt||(mt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new ws([4294967295,4294967295],0);function D_(n){const e=nk().encode(n),t=new Fw;return t.update(e),new Uint8Array(t.digest())}function L_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ws([t,i],0),new ws([o,a],0)]}class zp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ll(`Invalid padding: ${t}`);if(i<0)throw new ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ll(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ws.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ws.fromNumber(i)));return o.compare(rk)===1&&(o=new ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=D_(e),[i,o]=L_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new zp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=D_(e),[i,o]=L_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new mh(Ce.min(),o,new ot(qe),Wr(),Le())}}class jl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new jl(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class gE{constructor(e,t){this.targetId=e,this.me=t}}class yE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class V_{constructor(){this.fe=0,this.ge=F_(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),i=Le();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ae()}})),new jl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=F_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ik{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=M_(),this.Qe=new ot(qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ae()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Jf(a))if(i===0){const u=new ve(a.path);this.Ue(t,u,qt.newNoDocument(u,Ce.min()))}else Ke(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),p=d?this.Xe(d,e,u):1;if(p!==0){this.je(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=As(i).toUint8Array()}catch(p){if(p instanceof Kw)return Vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new zp(u,o,a)}catch(p){return Vo(p instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&Jf(d.target)){const p=new ve(d.target.path);this.ke.get(p)!==null||this.it(u,p)||this.Ue(u,p,qt.newNoDocument(p,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let i=Le();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new mh(e,t,this.Qe,this.ke,i);return this.ke=Wr(),this.qe=M_(),this.Qe=new ot(qe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new V_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function M_(){return new ot(ve.comparator)}function F_(){return new ot(ve.comparator)}const sk={asc:"ASCENDING",desc:"DESCENDING"},ok={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ak={and:"AND",or:"OR"};class lk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xf(n,e){return n.useProto3Json||uh(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _E(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uk(n,e){return Hc(n,e.toTimestamp())}function pr(n){return Ke(!!n),Ce.fromTimestamp((function(t){const i=Fi(t);return new It(i.seconds,i.nanos)})(n))}function $p(n,e){return Zf(n,e).canonicalString()}function Zf(n,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vE(n){const e=et.fromString(n);return Ke(SE(e)),e}function ep(n,e){return $p(n.databaseId,e.path)}function Ef(n,e){const t=vE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(EE(t))}function wE(n,e){return $p(n.databaseId,e)}function ck(n){const e=vE(n);return e.length===4?et.emptyPath():EE(e)}function tp(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function U_(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function hk(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,v){return y.useProto3Json?(Ke(v===void 0||typeof v=="string"),Vt.fromBase64String(v||"")):(Ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Vt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const v=y.code===void 0?J.UNKNOWN:mE(y.code);return new ce(v,y.message||"")})(u);t=new yE(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ef(n,i.document.name),a=pr(i.document.updateTime),u=i.document.createTime?pr(i.document.createTime):Ce.min(),d=new an({mapValue:{fields:i.document.fields}}),p=qt.newFoundDocument(o,a,u,d),y=i.targetIds||[],v=i.removedTargetIds||[];t=new kc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ef(n,i.document),a=i.readTime?pr(i.readTime):Ce.min(),u=qt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new kc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ef(n,i.document),a=i.removedTargetIds||[];t=new kc([],a,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new ek(o,a),d=i.targetId;t=new gE(d,u)}}return t}function dk(n,e){let t;if(e instanceof Ul)t={update:U_(n,e.key,e.value)};else if(e instanceof jp)t={delete:ep(n,e.key)};else if(e instanceof zi)t={update:U_(n,e.key,e.data),updateMask:Ek(e.fieldMask)};else{if(!(e instanceof YC))return Ae();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Rl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof jo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Ae()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:uk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()})(n,e.precondition)),t}function fk(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?pr(o.updateTime):pr(a);return u.isEqual(Ce.min())&&(u=pr(a)),new GC(u,o.transformResults||[])})(t,e)))):[]}function pk(n,e){return{documents:[wE(n,e.path)]}}function mk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=wE(n,o);const a=(function(y){if(y.length!==0)return IE(Qn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:Co(S.field),direction:_k(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Xf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function gk(n){let e=ck(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const S=TE(E);return S instanceof Qn&&Yw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(P){return new Sl(ko(P.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,uh(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,F=E.values||[];return new $c(F,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,F=E.values||[];return new $c(F,S)})(t.endAt)),LC(e,o,u,a,d,"F",p,y)}function yk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ko(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ko(t.unaryFilter.field);return gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ko(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}})(n):n.fieldFilter!==void 0?(function(t){return gt.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qn.create(t.compositeFilter.filters.map((i=>TE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}})(t.compositeFilter.op))})(n):Ae()}function _k(n){return sk[n]}function vk(n){return ok[n]}function wk(n){return ak[n]}function Co(n){return{fieldPath:n.canonicalString()}}function ko(n){return Dt.fromServerFormat(n.fieldPath)}function IE(n){return n instanceof gt?(function(t){if(t.op==="=="){if(R_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(S_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(S_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:vk(t.op),value:t.value}}})(n):n instanceof Qn?(function(t){const i=t.getFilters().map((o=>IE(o)));return i.length===1?i[0]:{compositeFilter:{op:wk(t.op),filters:i}}})(n):Ae()}function Ek(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function SE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t,i,o,a=Ce.min(),u=Ce.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ct=e}}function Ik(n){const e=gk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.un=new Rk}addToCollectionParentIndex(e,t){return this.un.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Mi.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Rk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(et.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bo(0)}static kn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&pl(i.mutation,o,vn.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=_s();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=al();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=_s();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Wr();const u=fl(),d=(function(){return fl()})();return t.forEach(((p,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof zi)?a=a.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),pl(v.mutation,y,v.mutation.getFieldMask(),It.now())):u.set(y.key,vn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>{var E;return d.set(y,new Ck(v,(E=u.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=fl();let o=new ot(((u,d)=>u-d)),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||vn.empty();v=d.applyToLocalView(y,v),i.set(p,v);const E=(o.get(d.batchId)||Le()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,v=p.value,E=oE();v.forEach((S=>{if(!a.has(S)){const F=fE(t.get(S),i.get(S));F!==null&&E.set(S,F),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ie.resolve(_s());let d=-1,p=a;return u.next((y=>ie.forEach(y,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,Le()))).next((v=>({batchId:d,changes:sE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=al();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=al();return this.indexManager.getCollectionParents(e,a).next((d=>ie.forEach(d,(p=>{const y=(function(E,S){return new Go(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,qt.newInvalidDocument(v)))}));let d=al();return u.forEach(((p,y)=>{const v=a.get(p);v!==void 0&&pl(v.mutation,y,vn.empty(),It.now()),dh(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ie.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:Ik(o.bundledQuery),readTime:pr(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.overlays=new ot(ve.comparator),this.Ir=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_s();return ie.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.ht(e,t,a)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const o=_s(),a=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new ot(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=a.get(y.largestBatchId);v===null&&(v=_s(),a=a.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=_s(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>d.set(y,v))),!(d.size()>=o)););return ie.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new ZC(t,i));let a=this.Ir.get(t);a===void 0&&(a=Le(),this.Ir.set(t,a)),this.Ir.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Tr=new Lt(kt.Er),this.dr=new Lt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new kt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new ve(new et([])),i=new kt(t,e),o=new kt(t,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new et([])),i=new kt(t,e),o=new kt(t,e+1);let a=Le();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new kt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(kt.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new XC(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new kt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),a=o<0?0:o;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(qe);return t.forEach((o=>{const a=new kt(o,0),u=new kt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new kt(new ve(a),0);let d=new Lt(qe);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.wr)),!0)}),u),ie.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(t.mutations,(o=>{const a=new kt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new kt(t,0),o=this.br.firstAfterOrEqual(i);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let i=Wr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():qt.newInvalidDocument(o))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Wr();const u=t.path,d=new ve(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||gC(mC(v),i)<=0||(o.has(v.key)||dh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ae()}Or(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Dk(this)}getSize(e){return ie.resolve(this.size)}}class Dk extends Ak{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.persistence=e,this.Nr=new Qo((t=>Mp(t)),Fp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qp,this.targetCount=0,this.kr=Bo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Kn(t),ie.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(a).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Op(0),this.Kr=!1,this.Kr=!0,this.$r=new xk,this.referenceDelegate=e(this),this.Ur=new Lk(this),this.indexManager=new Sk,this.remoteDocumentCache=(function(o){return new Ok(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new Tk(t),this.Gr=new Pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new bk(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new Mk(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return ie.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class Mk extends _C{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Jr=new qp,this.Yr=null}static Zr(e){return new Wp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,(i=>{const o=ve.fromPath(i);return this.ei(e,o).next((a=>{a||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ie.or([()=>ie.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Le(),o=Le();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Hp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return RI()?8:vC(Kt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Fk;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Xa()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(Xa()<=Fe.DEBUG&&me("QueryEngine","Query:",Ao(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Xa()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(t))):ie.resolve())}Yi(e,t){if(P_(t))return ie.resolve(null);let i=fr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qc(t,null,"F"),i=fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Le(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(t,d);return this.ns(t,y,u,p.readTime)?this.Yi(e,qc(t,null,"F")):this.rs(e,y,t,p)}))))})))))}Zi(e,t,i,o){return P_(t)||o.isEqual(Ce.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(t,a);return this.ns(t,u,i,o)?ie.resolve(null):(Xa()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.rs(e,u,t,pC(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Lt(rE(e));return t.forEach(((o,a)=>{dh(e,a)&&(i=i.add(a))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,i){return Xa()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mi.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(qe),this._s=new Qo((a=>Mp(a)),Fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Bk(n,e,t,i){return new jk(n,e,t,i)}async function RE(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Le();for(const y of o){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of a){d.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function zk(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,v){const E=y.batch,S=E.keys();let F=ie.resolve();return S.forEach((P=>{F=F.next((()=>v.getEntry(p,P))).next((U=>{const R=y.docVersions.get(P);Ke(R!==null),U.version.compareTo(R)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),F.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Le();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function AE(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function $k(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.Ur.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,v.addedDocuments,E))));let F=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?F=F.withResumeToken(Vt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(v.resumeToken,i)),o=o.insert(E,F),(function(U,R,Y){return U.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,F,v)&&d.push(t.Ur.updateTargetData(a,F))}));let p=Wr(),y=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(qk(a,u,e.documentUpdates).next((v=>{p=v.Ps,y=v.Is}))),!i.isEqual(Ce.min())){const v=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return ie.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.os=o,a)))}function qk(n,e,t){let i=Le(),o=Le();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Wr();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):me("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ps:u,Is:o}}))}function Wk(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Hk(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((a=>a?(o=a,ie.resolve(o)):t.Ur.allocateTargetId(i).next((u=>(o=new ki(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function np(n,e,t){const i=ke(n),o=i.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Fl(u))throw u;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function j_(n,e,t){const i=ke(n);let o=Ce.min(),a=Le();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,v){const E=ke(p),S=E._s.get(v);return S!==void 0?ie.resolve(E.os.get(S)):E.Ur.getTargetData(y,v)})(i,u,fr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?o:Ce.min(),t?a:Le()))).next((d=>(Kk(i,MC(e),d),{documents:d,Ts:a})))))}function Kk(n,e,t){let i=n.us.get(e)||Ce.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.us.set(e,i)}class B_{constructor(){this.activeTargetIds=$C()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gk{constructor(){this.so=new B_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new B_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Tf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class Xk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,i,o,a,u){const d=Tf(),p=this.xo(t,i.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,a,u),this.No(t,p,y,o).then((v=>(me("RestConnection",`Received RPC '${t}' ${d}: `,v),v)),(v=>{throw Vo("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v}))}Lo(t,i,o,a,u,d){return this.Mo(t,i,o,a,u)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,i){const o=Jk[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const a=Tf();return new Promise(((u,d)=>{const p=new Uw;p.setWithCredentials(!0),p.listenOnce(jw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rc.NO_ERROR:const v=p.getResponseJson();me(zt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Rc.TIMEOUT:me(zt,`RPC '${e}' ${a} timed out`),d(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const E=p.getStatus();if(me(zt,`RPC '${e}' ${a} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const F=S?.error;if(F&&F.status&&F.message){const P=(function(R){const Y=R.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN})(F.status);d(new ce(P,F.message))}else d(new ce(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{me(zt,`RPC '${e}' ${a} completed.`)}}));const y=JSON.stringify(o);me(zt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=Tf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$w(),d=zw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");me(zt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=u.createWebChannel(v,p);let S=!1,F=!1;const P=new Yk({Io:R=>{F?me(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,R):(S||(me(zt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),me(zt,`RPC '${e}' stream ${o} sending:`,R),E.send(R))},To:()=>E.close()}),U=(R,Y,ee)=>{R.listen(Y,(X=>{try{ee(X)}catch(re){setTimeout((()=>{throw re}),0)}}))};return U(E,ol.EventType.OPEN,(()=>{F||(me(zt,`RPC '${e}' stream ${o} transport opened.`),P.yo())})),U(E,ol.EventType.CLOSE,(()=>{F||(F=!0,me(zt,`RPC '${e}' stream ${o} transport closed`),P.So())})),U(E,ol.EventType.ERROR,(R=>{F||(F=!0,Vo(zt,`RPC '${e}' stream ${o} transport errored:`,R),P.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),U(E,ol.EventType.MESSAGE,(R=>{var Y;if(!F){const ee=R.data[0];Ke(!!ee);const X=ee,re=X.error||((Y=X[0])===null||Y===void 0?void 0:Y.error);if(re){me(zt,`RPC '${e}' stream ${o} received error:`,re);const K=re.status;let Z=(function(C){const O=mt[C];if(O!==void 0)return mE(O)})(K),N=re.message;Z===void 0&&(Z=J.INTERNAL,N="Unknown error status: "+K+" with message "+re.message),F=!0,P.So(new ce(Z,N)),E.close()}else me(zt,`RPC '${e}' stream ${o} received:`,ee),P.bo(ee)}})),U(d,Bw.STAT_EVENT,(R=>{R.stat===Hf.PROXY?me(zt,`RPC '${e}' stream ${o} detected buffering proxy`):R.stat===Hf.NOPROXY&&me(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){return new lk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,i,o,a,u,d,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zk extends kE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=hk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ce.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?pr(u.readTime):Ce.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Jf(p)?{documents:pk(a,p)}:{query:mk(a,p)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=_E(a,u.resumeToken);const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Hc(a,u.snapshotVersion.toTimestamp());const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=yk(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.a_(t)}}class eP extends kE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=fk(e.writeResults,e.commitTime),i=pr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=tp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>dk(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Zf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())}))}Lo(e,t,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,Zf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class nP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{bs(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=ke(p);y.L_.add(4),await Bl(y),y.q_.set("Unknown"),y.L_.delete(4),await yh(y)})(this))}))})),this.q_=new nP(i,o)}}async function yh(n){if(bs(n))for(const e of n.B_)await e(!0)}async function Bl(n){for(const e of n.B_)await e(!1)}function PE(n,e){const t=ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Jp(t)?Qp(t):Jo(t).r_()&&Gp(t,e))}function Kp(n,e){const t=ke(n),i=Jo(t);t.N_.delete(e),i.r_()&&NE(t,e),t.N_.size===0&&(i.r_()?i.o_():bs(t)&&t.q_.set("Unknown"))}function Gp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).A_(e)}function NE(n,e){n.Q_.xe(e),Jo(n).R_(e)}function Qp(n){n.Q_=new ik({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.q_.v_()}function Jp(n){return bs(n)&&!Jo(n).n_()&&n.N_.size>0}function bs(n){return ke(n).L_.size===0}function xE(n){n.Q_=void 0}async function iP(n){n.q_.set("Online")}async function sP(n){n.N_.forEach(((e,t)=>{Gp(n,e)}))}async function oP(n,e){xE(n),Jp(n)?(n.q_.M_(e),Qp(n)):n.q_.set("Unknown")}async function aP(n,e,t){if(n.q_.set("Online"),e instanceof yE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kc(n,i)}else if(e instanceof kc?n.Q_.Ke(e):e instanceof gE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ce.min()))try{const i=await AE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.N_.get(y);v&&a.N_.set(y,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const v=a.N_.get(p);if(!v)return;a.N_.set(p,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),NE(a,p);const E=new ki(v.target,p,y,v.sequenceNumber);Gp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){me("RemoteStore","Failed to raise snapshot:",i),await Kc(n,i)}}async function Kc(n,e,t){if(!Fl(e))throw e;n.L_.add(1),await Bl(n),n.q_.set("Offline"),t||(t=()=>AE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yh(n)}))}function bE(n,e){return e().catch((t=>Kc(n,t,e)))}async function _h(n){const e=ke(n),t=Ui(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lP(e);)try{const o=await Wk(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,uP(e,o)}catch(o){await Kc(e,o)}OE(e)&&DE(e)}function lP(n){return bs(n)&&n.O_.length<10}function uP(n,e){n.O_.push(e);const t=Ui(n);t.r_()&&t.V_&&t.m_(e.mutations)}function OE(n){return bs(n)&&!Ui(n).n_()&&n.O_.length>0}function DE(n){Ui(n).start()}async function cP(n){Ui(n).p_()}async function hP(n){const e=Ui(n);for(const t of n.O_)e.m_(t.mutations)}async function dP(n,e,t){const i=n.O_.shift(),o=Bp.from(i,e,t);await bE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await _h(n)}async function fP(n,e){e&&Ui(n).V_&&await(async function(i,o){if((function(u){return tk(u)&&u!==J.ABORTED})(o.code)){const a=i.O_.shift();Ui(i).s_(),await bE(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await _h(i)}})(n,e),OE(n)&&DE(n)}async function $_(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const i=bs(t);t.L_.add(3),await Bl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yh(t)}async function pP(n,e){const t=ke(n);e?(t.L_.delete(2),await yh(t)):e||(t.L_.add(2),await Bl(t),t.q_.set("Unknown"))}function Jo(n){return n.K_||(n.K_=(function(t,i,o){const a=ke(t);return a.w_(),new Zk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:iP.bind(null,n),Ro:sP.bind(null,n),mo:oP.bind(null,n),d_:aP.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Jp(n)?Qp(n):n.q_.set("Unknown")):(await n.K_.stop(),xE(n))}))),n.K_}function Ui(n){return n.U_||(n.U_=(function(t,i,o){const a=ke(t);return a.w_(),new eP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cP.bind(null,n),mo:fP.bind(null,n),f_:hP.bind(null,n),g_:dP.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await _h(n)):(await n.U_.stop(),n.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Yp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(n,e){if(qr("AsyncQueue",`${e}: ${n}`),Fl(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=al(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.W_=new ot(ve.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zo{constructor(e,t,i,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new zo(e,t,Do.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class gP{constructor(){this.queries=W_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=ke(t),a=o.queries;o.queries=W_(),a.forEach(((u,d)=>{for(const p of d.j_)p.onError(i)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function W_(){return new Qo((n=>nE(n)),hh)}async function Zp(n,e){const t=ke(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new mP,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Xp(u,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&tm(t)}async function em(n,e){const t=ke(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yP(n,e){const t=ke(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&tm(t)}function _P(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(t);i.queries.delete(e)}function tm(n){n.Y_.forEach((e=>{e.next()}))}var rp,H_;(H_=rp||(rp={})).ea="default",H_.Cache="cache";class nm{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class VE{constructor(e){this.key=e}}class vP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=rE(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new q_,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),F=dh(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),U=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let R=!1;S&&F?S.data.isEqual(F.data)?P!==U&&(i.track({type:3,doc:F}),R=!0):this.ga(S,F)||(i.track({type:2,doc:F}),R=!0,(p&&this.Aa(F,p)>0||y&&this.Aa(F,y)<0)&&(d=!0)):!S&&F?(i.track({type:0,doc:F}),R=!0):S&&!F&&(i.track({type:1,doc:S}),R=!0,(p||y)&&(d=!0)),R&&(F?(u=u.add(F),a=U?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,E)=>(function(F,P){const U=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return U(F)-U(P)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,u.length!==0||y?{snapshot:new zo(this.query,e.Ra,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new q_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new VE(i))})),this.da.forEach((i=>{e.has(i)||t.push(new LE(i))})),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class EP{constructor(e){this.key=e,this.va=!1}}class TP{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Qo((d=>nE(d)),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ve.comparator),this.Na=new Map,this.La=new qp,this.Ba={},this.ka=new Map,this.qa=Bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IP(n,e,t=!0){const i=zE(n);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await ME(i,e,t,!0),o}async function SP(n,e){const t=zE(n);await ME(t,e,!0,!1)}async function ME(n,e,t,i){const o=await Hk(n.localStore,fr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await RP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&PE(n.remoteStore,o),d}async function RP(n,e,t,i,o){n.Ka=(E,S,F)=>(async function(U,R,Y,ee){let X=R.view.ma(Y);X.ns&&(X=await j_(U.localStore,R.query,!1).then((({documents:N})=>R.view.ma(N,X))));const re=ee&&ee.targetChanges.get(R.targetId),K=ee&&ee.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(X,U.isPrimaryClient,re,K);return G_(U,R.targetId,Z.wa),Z.snapshot})(n,E,S,F);const a=await j_(n.localStore,e,!0),u=new vP(e,a.Ts),d=u.ma(a.documents),p=jl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,p);G_(n,t,y.wa);const v=new wP(e,t,u);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function AP(n,e,t){const i=ke(n),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!hh(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await np(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Kp(i.remoteStore,o.targetId),ip(i,o.targetId)})).catch(Ml)):(ip(i,o.targetId),await np(i.localStore,o.targetId,!0))}async function CP(n,e){const t=ke(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kp(t.remoteStore,i.targetId))}async function kP(n,e,t){const i=LP(n);try{const o=await(function(u,d){const p=ke(u),y=It.now(),v=d.reduce(((F,P)=>F.add(P.key)),Le());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let P=Wr(),U=Le();return p.cs.getEntries(F,v).next((R=>{P=R,P.forEach(((Y,ee)=>{ee.isValidDocument()||(U=U.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(F,P))).next((R=>{E=R;const Y=[];for(const ee of d){const X=JC(ee,E.get(ee.key).overlayedDocument);X!=null&&Y.push(new zi(ee.key,X,Gw(X.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(F,y,Y,d)})).next((R=>{S=R;const Y=R.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(F,R.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:sE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Ba[u.currentUser.toKey()];y||(y=new ot(qe)),y=y.insert(d,p),u.Ba[u.currentUser.toKey()]=y})(i,o.batchId,t),await zl(i,o.changes),await _h(i.remoteStore)}catch(o){const a=Xp(o,"Failed to persist write");t.reject(a)}}async function FE(n,e){const t=ke(n);try{const i=await $k(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ke(u.va):o.removedDocuments.size>0&&(Ke(u.va),u.va=!1))})),await zl(t,i,e)}catch(i){await Ml(i)}}function K_(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=ke(u);p.onlineState=d;let y=!1;p.queries.forEach(((v,E)=>{for(const S of E.j_)S.Z_(d)&&(y=!0)})),y&&tm(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PP(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new ot(ve.comparator);u=u.insert(a,qt.newNoDocument(a,Ce.min()));const d=Le().add(a),p=new mh(Ce.min(),new Map,new ot(qe),u,d);await FE(i,p),i.Oa=i.Oa.remove(a),i.Na.delete(e),rm(i)}else await np(i.localStore,e,!1).then((()=>ip(i,e,t))).catch(Ml)}async function NP(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await zk(t.localStore,e);jE(t,i,null),UE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await zl(t,o)}catch(o){await Ml(o)}}async function xP(n,e,t){const i=ke(n);try{const o=await(function(u,d){const p=ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(Ke(E!==null),v=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);jE(i,e,t),UE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await zl(i,o)}catch(o){await Ml(o)}}function UE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function jE(n,e,t){const i=ke(n);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function ip(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||BE(n,i)}))}function BE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Kp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rm(n))}function G_(n,e,t){for(const i of t)i instanceof LE?(n.La.addReference(i.key,e),bP(n,i)):i instanceof VE?(me("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||BE(n,i.key)):Ae()}function bP(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(me("SyncEngine","New document in limbo: "+t),n.xa.add(i),rm(n))}function rm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ve(et.fromString(e)),i=n.qa.next();n.Na.set(i,new EP(t)),n.Oa=n.Oa.insert(t,i),PE(n.remoteStore,new ki(fr(ch(t.path)),i,"TargetPurposeLimboResolution",Op.oe))}}async function zl(n,e,t){const i=ke(n),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,p)=>{u.push(i.Ka(p,e,t).then((y=>{var v;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(v=t?.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Hp.Wi(p.targetId,y);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(p,y){const v=ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(y,(S=>ie.forEach(S.$i,(F=>v.persistence.referenceDelegate.addReference(E,S.targetId,F))).next((()=>ie.forEach(S.Ui,(F=>v.persistence.referenceDelegate.removeReference(E,S.targetId,F)))))))))}catch(E){if(!Fl(E))throw E;me("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const F=v.os.get(S),P=F.snapshotVersion,U=F.withLastLimboFreeSnapshotVersion(P);v.os=v.os.insert(S,U)}}})(i.localStore,a))}async function OP(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const i=await RE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((p=>{p.reject(new ce(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await zl(t,i.hs)}}function DP(n,e){const t=ke(n),i=t.Na.get(e);if(i&&i.va)return Le().add(i.key);{let o=Le();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const d=t.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function zE(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Ca.d_=yP.bind(null,e.eventManager),e.Ca.$a=_P.bind(null,e.eventManager),e}function LP(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Bk(this.persistence,new Uk,e.initialUser,this.serializer)}Ga(e){return new Vk(Wp.Zr,this.serializer)}Wa(e){return new Gk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OP.bind(null,this.syncEngine),await pP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gP})()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),i=(function(a){return new Xk(a)})(e.databaseInfo);return(function(a,u,d,p){return new tP(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new rP(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>K_(this.syncEngine,t,0)),(function(){return z_.D()?new z_:new Qk})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,v){const E=new TP(o,a,u,d,p,y);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=ke(o);me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Bl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=Ww.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Xp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await RE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Q_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await MP(n);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>$_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>$_(e.remoteStore,o))),n._onlineComponents=e}async function MP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await Sf(n,new Gc)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await Sf(n,new Gc);return n._offlineComponents}async function $E(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await Q_(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await Q_(n,new sp))),n._onlineComponents}function FP(n){return $E(n).then((e=>e.syncEngine))}async function Qc(n){const e=await $E(n),t=e.eventManager;return t.onListen=IP.bind(null,e.syncEngine),t.onUnlisten=AP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=SP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CP.bind(null,e.syncEngine),t}function UP(n,e,t={}){const i=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new im({next:S=>{v.Za(),u.enqueueAndForget((()=>em(a,E)));const F=S.docs.has(d);!F&&S.fromCache?y.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&p&&p.source==="server"?y.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new nm(ch(d.path),v,{includeMetadataChanges:!0,_a:!0});return Zp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}function jP(n,e,t={}){const i=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const v=new im({next:S=>{v.Za(),u.enqueueAndForget((()=>em(a,E))),S.fromCache&&p.source==="server"?y.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new nm(d,v,{includeMetadataChanges:!0,_a:!0});return Zp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BP(n,e,t,i){if(e===!0&&i===!0)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y_(n){if(!ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new sC;switch(i.type){case"firstParty":return new uC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=J_.get(t);i&&(me("ComponentProvider","Removing Datastore"),J_.delete(t),i.terminate())})(this),Promise.resolve()}}function zP(n,e,t,i={}){var o;const a=(n=un(n,wh))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=$t.MOCK_USER;else{d=Xv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new $t(y)}n._authCredentials=new oC(new qw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class bi extends Qr{constructor(e,t,i){super(e,t,ch(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new ve(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function ks(n,e,...t){if(n=yt(n),WE("collection","path",e),n instanceof wh){const i=et.fromString(e,...t);return X_(i),new bi(n,null,i)}{if(!(n instanceof Ht||n instanceof bi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return X_(i),new bi(n.firestore,null,i)}}function ln(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Ww.newId()),WE("doc","path",e),n instanceof wh){const i=et.fromString(e,...t);return Y_(i),new Ht(n,null,new ve(i))}{if(!(n instanceof Ht||n instanceof bi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return Y_(i),new Ht(n.firestore,n instanceof bi?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CE(this,"async_queue_retry"),this.Vu=()=>{const i=If();i&&me("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Br;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fl(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw qr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Yp.createAndSchedule(this,e,t,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function tv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Hr extends wh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new ev,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ev(e),this._firestoreClient=void 0,await e}}}function $P(n,e,t){t||(t="(default)");const i=bl(n,"firestore");if(i.isInitialized(t)){const o=i.getImmediate({identifier:t}),a=i.getOptions(t);if(Lo(a,e))return o;throw new ce(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:t})}function qP(n,e){const t=typeof n=="object"?n:sh(),i=typeof n=="string"?n:"(default)",o=bl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Qv("firestore");a&&zP(o,...a)}return o}function Eh(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WP(n),n._firestoreClient}function WP(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,y,v){return new TC(d,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,qE(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new VP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(Vt.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=/^__.*__$/;class KP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ul(e,this.data,t,this.fieldTransforms)}}class HE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Ih{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KE(this.Cu)&&HP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class GP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gh(e)}Qu(e,t,i,o=!1){return new Ih({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(n){const e=n._freezeSettings(),t=gh(n._databaseId);return new GP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GE(n,e,t,i,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);um("Data must be an object, but it was:",u,i);const d=QE(i,u);let p,y;if(a.merge)p=new vn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=op(e,E,t);if(!u.contains(S))throw new ce(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);YE(v,S)||v.push(S)}p=new vn(v),y=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=u.fieldTransforms;return new KP(new an(d),p,y)}class ql extends $l{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}function QP(n,e,t){return new Ih({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class am extends $l{_toFieldTransform(e){return new dE(e.path,new Rl)}isEqual(e){return e instanceof am}}class lm extends $l{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=QP(this,e,!0),i=this.Ku.map((a=>Yo(a,t))),o=new jo(i);return new dE(e.path,o)}isEqual(e){return e instanceof lm&&Lo(this.Ku,e.Ku)}}function JP(n,e,t,i){const o=n.Qu(1,e,t);um("Data must be an object, but it was:",o,i);const a=[],u=an.empty();xs(i,((p,y)=>{const v=cm(e,p,t);y=yt(y);const E=o.Nu(v);if(y instanceof ql)a.push(v);else{const S=Yo(y,E);S!=null&&(a.push(v),u.set(v,S))}}));const d=new vn(a);return new HE(u,d,o.fieldTransforms)}function YP(n,e,t,i,o,a){const u=n.Qu(1,e,t),d=[op(e,i,t)],p=[o];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(op(e,a[S])),p.push(a[S+1]);const y=[],v=an.empty();for(let S=d.length-1;S>=0;--S)if(!YE(y,d[S])){const F=d[S];let P=p[S];P=yt(P);const U=u.Nu(F);if(P instanceof ql)y.push(F);else{const R=Yo(P,U);R!=null&&(y.push(F),v.set(F,R))}}const E=new vn(y);return new HE(v,E,u.fieldTransforms)}function XP(n,e,t,i=!1){return Yo(t,n.Qu(i?4:3,e))}function Yo(n,e){if(JE(n=yt(n)))return um("Unsupported field value:",e,n),QE(n,e);if(n instanceof $l)return(function(i,o){if(!KE(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Yo(d,o.Lu(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=It.fromDate(i);return{timestampValue:Hc(o.serializer,a)}}if(i instanceof It){const a=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,a)}}if(i instanceof sm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $o)return{bytesValue:_E(o.serializer,i._byteString)};if(i instanceof Ht){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$p(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof om)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Up(d.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${vh(i)}`)})(n,e)}function QE(n,e){const t={};return Hw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(n,((i,o)=>{const a=Yo(o,e.Mu(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function JE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof sm||n instanceof $o||n instanceof Ht||n instanceof $l||n instanceof om)}function um(n,e,t){if(!JE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=vh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function op(n,e,t){if((e=yt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return cm(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZP=new RegExp("[~\\*/\\[\\]]");function cm(n,e,t){if(e.search(ZP)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Th(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,d+n+p)}function YE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eN extends XE{data(){return super.data()}}function Rh(n,e){return typeof e=="string"?cm(n,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class dm extends hm{}function Yc(n,e,...t){let i=[];e instanceof hm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof fm)).length,d=a.filter((p=>p instanceof Ah)).length;if(u>1||u>0&&d>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ah extends dm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ah(e,t,i)}_apply(e){const t=this._parse(e);return e0(e._query,t),new Qr(e.firestore,e.converter,Yf(e._query,t))}_parse(e){const t=Sh(e.firestore);return(function(a,u,d,p,y,v,E){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){iv(E,v);const F=[];for(const P of E)F.push(rv(p,a,P));S={arrayValue:{values:F}}}else S=rv(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||iv(E,v),S=XP(d,u,E,v==="in"||v==="not-in");return gt.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ap(n,e,t){const i=e,o=Rh("where",n);return Ah._create(o,i,t)}class fm extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)e0(u,p),u=Yf(u,p)})(e._query,t),new Qr(e.firestore,e.converter,Yf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pm extends dm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(a,u)})(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Go(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function tN(n,e="asc"){const t=e,i=Rh("orderBy",n);return pm._create(i,t)}class mm extends dm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new mm(e,t,i)}_apply(e){return new Qr(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}}function nv(n){return mm._create("limit",n,"F")}function rv(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(e)&&t.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ve.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return I_(n,new ve(i))}if(t instanceof Ht)return I_(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function iv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e0(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nN{convertValue(e,t="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xs(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>dt(u.doubleValue)));return new om(a)}convertGeoPoint(e){return new sm(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Fi(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);Ke(SE(i));const o=new Tl(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(t)||qr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class n0 extends XE{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Rh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Pc extends n0{data(e={}){return super.data(e)}}class r0{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ul(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pc(this._firestore,this._userDataWriter,i.key,i,new ul(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:rN(d.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){n=un(n,Ht);const e=un(n.firestore,Hr);return UP(Eh(e),n._key).then((t=>s0(e,n,t)))}class gm extends nN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function Cl(n){n=un(n,Qr);const e=un(n.firestore,Hr),t=Eh(e),i=new gm(e);return ZE(n._query),jP(t,n._query).then((o=>new r0(e,i,n,o)))}function iN(n,e,t){n=un(n,Ht);const i=un(n.firestore,Hr),o=t0(n.converter,e);return Ch(i,[GE(Sh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,xn.none())])}function ml(n,e,t,...i){n=un(n,Ht);const o=un(n.firestore,Hr),a=Sh(o);let u;return u=typeof(e=yt(e))=="string"||e instanceof Th?YP(a,"updateDoc",n._key,e,t,i):JP(a,"updateDoc",n._key,e),Ch(o,[u.toMutation(n._key,xn.exists(!0))])}function lp(n){return Ch(un(n.firestore,Hr),[new jp(n._key,xn.none())])}function i0(n,e){const t=un(n.firestore,Hr),i=ln(n),o=t0(n.converter,e);return Ch(t,[GE(Sh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,xn.exists(!1))]).then((()=>i))}function sN(n,...e){var t,i,o;n=yt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||tv(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(tv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,y,v;if(n instanceof Ht)y=un(n.firestore,Hr),v=ch(n._key.path),p={next:E=>{e[u]&&e[u](s0(y,n,E))},error:e[u+1],complete:e[u+2]};else{const E=un(n,Qr);y=un(E.firestore,Hr),v=E._query;const S=new gm(y);p={next:F=>{e[u]&&e[u](new r0(y,S,E,F))},error:e[u+1],complete:e[u+2]},ZE(n._query)}return(function(S,F,P,U){const R=new im(U),Y=new nm(F,R,P);return S.asyncQueue.enqueueAndForget((async()=>Zp(await Qc(S),Y))),()=>{R.Za(),S.asyncQueue.enqueueAndForget((async()=>em(await Qc(S),Y)))}})(Eh(y),v,d,p)}function Ch(n,e){return(function(i,o){const a=new Br;return i.asyncQueue.enqueueAndForget((async()=>kP(await FP(i),o,a))),a.promise})(Eh(n),e)}function s0(n,e,t){const i=t.docs.get(e._key),o=new gm(n);return new n0(n,o,e._key,i,new ul(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(){return new ql("deleteField")}function ym(){return new am("serverTimestamp")}function oN(...n){return new lm("arrayRemove",n)}(function(e,t=!0){(function(o){Ko=o})(Ns),Ts(new Vi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Hr(new aC(i.getProvider("auth-internal")),new hC(i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(y.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),cr(__,"4.7.3",e),cr(__,"4.7.3","esm2017")})();var aN="firebase",lN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(aN,lN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="firebasestorage.googleapis.com",uN="storageBucket",cN=120*1e3,hN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends yr{constructor(e,t,i=0){super(Rf(e),`Firebase Storage: ${t} (${Rf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gr||(gr={}));function Rf(n){return"storage/"+n}function dN(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(gr.UNKNOWN,n)}function fN(){return new _r(gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pN(){return new _r(gr.CANCELED,"User canceled the upload/download.")}function mN(n){return new _r(gr.INVALID_URL,"Invalid URL '"+n+"'.")}function gN(n){return new _r(gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ov(n){return new _r(gr.INVALID_ARGUMENT,n)}function a0(){return new _r(gr.APP_DELETED,"The Firebase app was deleted.")}function yN(n){return new _r(gr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(i.path==="")return i;throw gN(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",F=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),P={bucket:1,path:3},U=t===o0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",Y=new RegExp(`^https?://${U}/${o}/${R}`,"i"),X=[{regex:d,indices:p,postModify:a},{regex:F,indices:P,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<X.length;re++){const K=X[re],Z=K.regex.exec(e);if(Z){const N=Z[K.indices.bucket];let I=Z[K.indices.path];I||(I=""),i=new Kn(N,I),K.postModify(i);break}}if(i==null)throw mN(e);return i}}class _N{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let y=!1;function v(...R){y||(y=!0,e.apply(null,R))}function E(R){o=setTimeout(()=>{o=null,n(F,p())},R)}function S(){a&&clearTimeout(a)}function F(R,...Y){if(y){S();return}if(R){S(),v.call(null,R,...Y);return}if(p()||u){S(),v.call(null,R,...Y);return}i<64&&(i*=2);let X;d===1?(d=2,X=0):X=(i+Math.random())*1e3,E(X)}let P=!1;function U(R){P||(P=!0,S(),!y&&(o!==null?(R||(d=2),clearTimeout(o),E(0)):R||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,U(!0)},t),U}function wN(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){return n!==void 0}function av(n,e,t,i){if(i<e)throw ov(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ov(`Invalid value for '${n}'. Expected ${t} or less.`)}function TN(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Zc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t,i,o,a,u,d,p,y,v,E,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,P)=>{this.resolve_=F,this.reject_=P,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new yc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Zc.NO_ERROR,p=a.getStatus();if(!d||IN(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Zc.ABORT;i(!1,new yc(!1,null,v));return}const y=this.successCodes_.indexOf(p)!==-1;i(!0,new yc(y,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());EN(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=dN();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?a0():pN();u(p)}else{const p=fN();u(p)}};this.canceled_?t(!1,new yc(!1,null,!0)):this.backoffId_=vN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function RN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function AN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kN(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function PN(n,e,t,i,o,a,u=!0){const d=TN(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return CN(y,e),RN(y,t),AN(y,a),kN(y,i),new SN(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eh(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xN(this._location.path)}get storage(){return this._service}get parent(){const e=NN(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new eh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw yN(e)}}function lv(n,e){const t=e?.[uN];return t==null?null:Kn.makeFromBucketSpec(t,n)}function bN(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Xv(o,n.app.options.projectId))}class ON{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=o0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cN,this._maxUploadRetryTime=hN,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=lv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=lv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new _N(a0());{const u=PN(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const uv="@firebase/storage",cv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="storage";function DN(n=sh(),e){n=yt(n);const i=bl(n,l0).getImmediate({identifier:e}),o=Qv("storage");return o&&LN(i,...o),i}function LN(n,e,t,i={}){bN(n,e,t,i)}function VN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new ON(t,i,o,e,Ns)}function MN(){Ts(new Vi(l0,VN,"PUBLIC").setMultipleInstances(!0)),cr(uv,cv,""),cr(uv,cv,"esm2017")}MN();const u0={apiKey:"AIzaSyC1ciO4ZxGRNcx4Q87BxJa0y7lFpsvKurc",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.appspot.com",messagingSenderId:"301206293641",appId:"1:301206293641:web:c9635693f4519d3dbdca58"},FN=Object.values(u0).every(Boolean);let Za,wn=null,De=null,UN=null;if(FN)try{Za=OS().length?sh():tw(u0),wn=rC(Za);try{De=$P(Za,{...{experimentalForceLongPolling:!0,useFetchStreams:!1}})}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code||"").toLowerCase():"")!=="failed-precondition")throw n;De=qP(Za)}UN=DN(Za)}catch(n){console.error("No se pudo inicializar Firebase, se usara modo demostracion.",n)}try{window.__fb={auth:wn,db:De},console.log("🔥 Firebase projectId =>",wn?.app?.options?.projectId)}catch{}const Nc=()=>new Date().toISOString(),jN=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:["corte","lavado"],createdAt:Nc()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:["alisado","planchado"],createdAt:Nc()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:["otros"],createdAt:Nc()}];let ji=[...jN];const xc=(n,e,t)=>({id:`demo-photo-${Math.random().toString(36).slice(2,10)}`,url:n,deleteToken:e??null,barberId:t}),BN={"carlos-ruiz":[xc("https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",null,"demo-barber"),xc("https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80",null,"demo-barber")],"maria-garcia":[xc("https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80",null,"demo-barber")],"leo-suarez":[]};let Oi=Object.fromEntries(Object.entries(BN).map(([n,e])=>[n,e.map(t=>({...t}))]));const c0=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let Di=[...c0];const zN=c0[0]?.id??"demo-barber";function Af(){return[...ji]}function h0(n){return ji.find(e=>e.id===n)||null}function $N(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||zN,notes:n.notes??[],createdAt:Nc()};return ji=[e,...ji],e}function qN(n,e){return ji=ji.map(t=>t.id===n?{...t,...e}:t),h0(n)}function WN(n){ji=ji.filter(e=>e.id!==n),delete Oi[n]}function HN(n){return[...Oi[n]||[]]}function KN(n,e){const t=xc(e.url,e.deleteToken,e.barberId),i=Oi[n]||[];return Oi[n]=[t,...i],Oi[n]}function GN(n,e){const t=Oi[n]||[];return Oi[n]=t.filter(i=>i.id!==e),Oi[n]}function d0(){return[...Di]}function QN(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return Di=[e,...Di],e}function hv(n,e){return Di=Di.map(t=>t.id===n?{...t,...e}:t),Di.find(t=>t.id===n)||null}function JN(n){Di=Di.filter(e=>e.id!==n)}const YN="barberiawebpro@gmail.com",dv="users",fv="barberos",f0=Q.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!1,loginDemo:()=>{},logout:async()=>{}}),Xo=()=>Q.useContext(f0),p0=n=>n?.trim().toLowerCase()||null,Cf=n=>{if(!n)return;const e=String(n).trim().toLowerCase();if(["admin","administrador","administrator"].includes(e))return"admin";if(e.includes("barber"))return"barbero"},kf=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;return e&&t?`${e} ${t}`.trim():e||t||void 0},XN=async(n,e)=>{if(!De)return{};try{const t=await Xc(ln(De,fv,n));if(t.exists()){const a=t.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const i=await Xc(ln(De,dv,n));if(i.exists()){const a=i.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const o=p0(e);if(o){const a=Yc(ks(De,dv),ap("emailLower","==",o),nv(1)),u=Yc(ks(De,fv),ap("emailLower","==",o),nv(1)),[d,p]=await Promise.all([Cl(a),Cl(u)]),y=d.docs[0]||p.docs[0];if(y){const v=y.data();return{role:Cf(v.role)??"barbero",displayName:kf(v)}}}return{}}catch(t){return console.error("Error al obtener perfil del usuario:",t),{}}},ZN=n=>({uid:n.id,email:n.email,displayName:n.displayName});function e1({children:n}){const[e,t]=Q.useState(null),[i,o]=Q.useState(),[a,u]=Q.useState(),[d,p]=Q.useState(!0),[y,v]=Q.useState(!1);Q.useEffect(()=>{if(!wn){t(null),o(void 0),u(void 0),p(!1),v(!0);return}const F=WR(wn,async P=>{if(!P){t(null),o(void 0),u(void 0),p(!1),v(!1);return}const U=p0(P.email)===YN?"admin":void 0,R=await XN(P.uid,P.email),Y=R.role||U||"barbero",ee=R.displayName||P.displayName||P.email||void 0;t(P),o(Y),u(ee),p(!1),v(!1)});return()=>F()},[]);const E=F=>{const P=d0().find(U=>U.id===F);P&&(t(ZN(P)),o(P.role),u(P.displayName),v(!0),p(!1))},S=async()=>{wn&&await HR(wn),t(null),o(void 0),u(void 0),p(!1),v(!1)};return x.jsx(f0.Provider,{value:{user:e,role:i,profileName:a,loading:d,demoMode:y,loginDemo:E,logout:S},children:n})}qv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kl.apply(this,arguments)}var Pi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Pi||(Pi={}));const pv="popstate";function t1(n){n===void 0&&(n={});function e(o,a){let{pathname:u="/",search:d="",hash:p=""}=Os(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),up("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");d=y===-1?p:p.slice(0,y)}return d+"#"+(typeof a=="string"?a:th(a))}function i(o,a){_m(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return r1(e,t,i,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _m(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function n1(){return Math.random().toString(36).substr(2,8)}function mv(n,e){return{usr:n.state,key:n.key,idx:e}}function up(n,e,t,i){return t===void 0&&(t=null),kl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Os(e):e,{state:t,key:e&&e.key||i||n1()})}function th(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Os(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function r1(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=Pi.Pop,p=null,y=v();y==null&&(y=0,u.replaceState(kl({},u.state,{idx:y}),""));function v(){return(u.state||{idx:null}).idx}function E(){d=Pi.Pop;let R=v(),Y=R==null?null:R-y;y=R,p&&p({action:d,location:U.location,delta:Y})}function S(R,Y){d=Pi.Push;let ee=up(U.location,R,Y);t&&t(ee,R),y=v()+1;let X=mv(ee,y),re=U.createHref(ee);try{u.pushState(X,"",re)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(re)}a&&p&&p({action:d,location:U.location,delta:1})}function F(R,Y){d=Pi.Replace;let ee=up(U.location,R,Y);t&&t(ee,R),y=v();let X=mv(ee,y),re=U.createHref(ee);u.replaceState(X,"",re),a&&p&&p({action:d,location:U.location,delta:0})}function P(R){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof R=="string"?R:th(R);return ee=ee.replace(/ $/,"%20"),st(Y,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,Y)}let U={get action(){return d},get location(){return n(o,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(pv,E),p=R,()=>{o.removeEventListener(pv,E),p=null}},createHref(R){return e(o,R)},createURL:P,encodeLocation(R){let Y=P(R);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:F,go(R){return u.go(R)}};return U}var gv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gv||(gv={}));function i1(n,e,t){return t===void 0&&(t="/"),s1(n,e,t)}function s1(n,e,t,i){let o=typeof e=="string"?Os(e):e,a=qo(o.pathname||"/",t);if(a==null)return null;let u=m0(n);o1(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let y=y1(a);d=m1(u[p],y)}return d}function m0(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(st(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Li([i,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(st(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),m0(a.children,e,v,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:f1(y,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of g0(a.path))o(a,u,p)}),e}function g0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=g0(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function o1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:p1(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const a1=/^:[\w-]+$/,l1=3,u1=2,c1=1,h1=10,d1=-2,yv=n=>n==="*";function f1(n,e){let t=n.split("/"),i=t.length;return t.some(yv)&&(i+=d1),e&&(i+=u1),t.filter(o=>!yv(o)).reduce((o,a)=>o+(a1.test(a)?l1:a===""?c1:h1),i)}function p1(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function m1(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=cp({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),S=p.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Li([a,E.pathname]),pathnameBase:E1(Li([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Li([a,E.pathnameBase]))}return u}function cp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=g1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,v,E)=>{let{paramName:S,isOptional:F}=v;if(S==="*"){let U=d[E]||"";u=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const P=d[E];return F&&!P?y[S]=void 0:y[S]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function g1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),_m(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function y1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _m(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function _1(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Os(n):n;return{pathname:t?t.startsWith("/")?t:v1(t,e):e,search:T1(i),hash:I1(o)}}function v1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Pf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vm(n,e){let t=w1(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function wm(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Os(n):(o=kl({},n),st(!o.pathname||!o.pathname.includes("?"),Pf("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),Pf("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),Pf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=_1(o,d),y=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}const Li=n=>n.join("/").replace(/\/\/+/g,"/"),E1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),T1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,I1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function S1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const y0=["post","put","patch","delete"];new Set(y0);const R1=["get",...y0];new Set(R1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pl.apply(this,arguments)}const kh=Q.createContext(null),_0=Q.createContext(null),Jr=Q.createContext(null),Ph=Q.createContext(null),Yr=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),v0=Q.createContext(null);function A1(n,e){let{relative:t}=e===void 0?{}:e;Zo()||st(!1);let{basename:i,navigator:o}=Q.useContext(Jr),{hash:a,pathname:u,search:d}=Nh(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:Li([i,u])),o.createHref({pathname:p,search:d,hash:a})}function Zo(){return Q.useContext(Ph)!=null}function ea(){return Zo()||st(!1),Q.useContext(Ph).location}function w0(n){Q.useContext(Jr).static||Q.useLayoutEffect(n)}function Wl(){let{isDataRoute:n}=Q.useContext(Yr);return n?j1():C1()}function C1(){Zo()||st(!1);let n=Q.useContext(kh),{basename:e,future:t,navigator:i}=Q.useContext(Jr),{matches:o}=Q.useContext(Yr),{pathname:a}=ea(),u=JSON.stringify(vm(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return w0(()=>{d.current=!0}),Q.useCallback(function(y,v){if(v===void 0&&(v={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=wm(y,JSON.parse(u),a,v.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Li([e,E.pathname])),(v.replace?i.replace:i.push)(E,v.state,v)},[e,i,u,a,n])}function k1(){let{matches:n}=Q.useContext(Yr),e=n[n.length-1];return e?e.params:{}}function Nh(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(Jr),{matches:o}=Q.useContext(Yr),{pathname:a}=ea(),u=JSON.stringify(vm(o,i.v7_relativeSplatPath));return Q.useMemo(()=>wm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function P1(n,e){return N1(n,e)}function N1(n,e,t,i){Zo()||st(!1);let{navigator:o}=Q.useContext(Jr),{matches:a}=Q.useContext(Yr),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let y=ea(),v;if(e){var E;let R=typeof e=="string"?Os(e):e;p==="/"||(E=R.pathname)!=null&&E.startsWith(p)||st(!1),v=R}else v=y;let S=v.pathname||"/",F=S;if(p!=="/"){let R=p.replace(/^\//,"").split("/");F="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let P=i1(n,{pathname:F}),U=L1(P&&P.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Li([p,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Li([p,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,t,i);return e&&U?Q.createElement(Ph.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Pi.Pop}},U):U}function x1(){let n=U1(),e=S1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const b1=Q.createElement(x1,null);class O1 extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Yr.Provider,{value:this.props.routeContext},Q.createElement(v0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D1(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(kh);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Yr.Provider,{value:e},i)}function L1(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);v>=0||st(!1),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let v=0;v<u.length;v++){let E=u[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:S,errors:F}=t,P=E.route.loader&&S[E.route.id]===void 0&&(!F||F[E.route.id]===void 0);if(E.route.lazy||P){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((v,E,S)=>{let F,P=!1,U=null,R=null;t&&(F=d&&E.route.id?d[E.route.id]:void 0,U=E.route.errorElement||b1,p&&(y<0&&S===0?(B1("route-fallback"),P=!0,R=null):y===S&&(P=!0,R=E.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,S+1)),ee=()=>{let X;return F?X=U:P?X=R:E.route.Component?X=Q.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=v,Q.createElement(D1,{match:E,routeContext:{outlet:v,matches:Y,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?Q.createElement(O1,{location:t.location,revalidation:t.revalidation,component:U,error:F,children:ee(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):ee()},null)}var E0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(E0||{}),T0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(T0||{});function V1(n){let e=Q.useContext(kh);return e||st(!1),e}function M1(n){let e=Q.useContext(_0);return e||st(!1),e}function F1(n){let e=Q.useContext(Yr);return e||st(!1),e}function I0(n){let e=F1(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function U1(){var n;let e=Q.useContext(v0),t=M1(),i=I0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function j1(){let{router:n}=V1(E0.UseNavigateStable),e=I0(T0.UseNavigateStable),t=Q.useRef(!1);return w0(()=>{t.current=!0}),Q.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Pl({fromRouteId:e},a)))},[n,e])}const _v={};function B1(n,e,t){_v[n]||(_v[n]=!0)}function z1(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function hp(n){let{to:e,replace:t,state:i,relative:o}=n;Zo()||st(!1);let{future:a,static:u}=Q.useContext(Jr),{matches:d}=Q.useContext(Yr),{pathname:p}=ea(),y=Wl(),v=wm(e,vm(d,a.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(v);return Q.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function Po(n){st(!1)}function $1(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Pi.Pop,navigator:a,static:u=!1,future:d}=n;Zo()&&st(!1);let p=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:p,navigator:a,static:u,future:Pl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=Os(i));let{pathname:v="/",search:E="",hash:S="",state:F=null,key:P="default"}=i,U=Q.useMemo(()=>{let R=qo(v,p);return R==null?null:{location:{pathname:R,search:E,hash:S,state:F,key:P},navigationType:o}},[p,v,E,S,F,P,o]);return U==null?null:Q.createElement(Jr.Provider,{value:y},Q.createElement(Ph.Provider,{children:t,value:U}))}function q1(n){let{children:e,location:t}=n;return P1(dp(e),t)}new Promise(()=>{});function dp(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let a=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,dp(i.props.children,a));return}i.type!==Po&&st(!1),!i.props.index||!i.props.children||st(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=dp(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nh.apply(this,arguments)}function S0(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function W1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function H1(n,e){return n.button===0&&(!e||e==="_self")&&!W1(n)}const K1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Q1="6";try{window.__reactRouterVersion=Q1}catch{}const J1=Q.createContext({isTransitioning:!1}),Y1="startTransition",vv=iI[Y1];function X1(n){let{basename:e,children:t,future:i,window:o}=n,a=Q.useRef();a.current==null&&(a.current=t1({window:o,v5Compat:!0}));let u=a.current,[d,p]=Q.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},v=Q.useCallback(E=>{y&&vv?vv(()=>p(E)):p(E)},[p,y]);return Q.useLayoutEffect(()=>u.listen(v),[u,v]),Q.useEffect(()=>z1(i),[i]),Q.createElement($1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const Z1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Em=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:y,preventScrollReset:v,viewTransition:E}=e,S=S0(e,K1),{basename:F}=Q.useContext(Jr),P,U=!1;if(typeof y=="string"&&ex.test(y)&&(P=y,Z1))try{let X=new URL(window.location.href),re=y.startsWith("//")?new URL(X.protocol+y):new URL(y),K=qo(re.pathname,F);re.origin===X.origin&&K!=null?y=K+re.search+re.hash:U=!0}catch{}let R=A1(y,{relative:o}),Y=nx(y,{replace:u,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:E});function ee(X){i&&i(X),X.defaultPrevented||Y(X)}return Q.createElement("a",nh({},S,{href:P||R,onClick:U||a?i:ee,ref:t,target:p}))}),wv=Q.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:p,viewTransition:y,children:v}=e,E=S0(e,G1),S=Nh(p,{relative:E.relative}),F=ea(),P=Q.useContext(_0),{navigator:U,basename:R}=Q.useContext(Jr),Y=P!=null&&rx(S)&&y===!0,ee=U.encodeLocation?U.encodeLocation(S).pathname:S.pathname,X=F.pathname,re=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;o||(X=X.toLowerCase(),re=re?re.toLowerCase():null,ee=ee.toLowerCase()),re&&R&&(re=qo(re,R)||re);const K=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Z=X===ee||!u&&X.startsWith(ee)&&X.charAt(K)==="/",N=re!=null&&(re===ee||!u&&re.startsWith(ee)&&re.charAt(ee.length)==="/"),I={isActive:Z,isPending:N,isTransitioning:Y},C=Z?i:void 0,O;typeof a=="function"?O=a(I):O=[a,Z?"active":null,N?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let V=typeof d=="function"?d(I):d;return Q.createElement(Em,nh({},E,{"aria-current":C,className:O,ref:t,style:V,to:p,viewTransition:y}),typeof v=="function"?v(I):v)});var fp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fp||(fp={}));var Ev;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function tx(n){let e=Q.useContext(kh);return e||st(!1),e}function nx(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=Wl(),y=ea(),v=Nh(n,{relative:u});return Q.useCallback(E=>{if(H1(E,t)){E.preventDefault();let S=i!==void 0?i:th(y)===th(v);p(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,p,v,i,o,t,n,a,u,d])}function rx(n,e){e===void 0&&(e={});let t=Q.useContext(J1);t==null&&st(!1);let{basename:i}=tx(fp.useViewTransitionState),o=Nh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=qo(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=qo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return cp(o.pathname,u)!=null||cp(o.pathname,a)!=null}function Nf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=Xo();return i?x.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?x.jsx(hp,{to:"/clientes",replace:!0}):n:x.jsx(hp,{to:"/login",replace:!0})}const Tm=["corte","alisado","lavado","planchado","otros"],ix={corte:"Corte",alisado:"Alisado",lavado:"Lavado",planchado:"Planchado",otros:"Otros"},Tv=n=>{if(typeof n!="string")return null;const e=n.trim().toLowerCase();return Tm.includes(e)?e:null},pp=n=>{if(!n)return[];if(Array.isArray(n)){const e=n.map(t=>Tv(t)).filter(t=>t!==null);return Array.from(new Set(e))}if(typeof n=="string"){const e=n.split(/[,;\n]/).map(i=>Tv(i)).filter(i=>i!==null);if(e.length>0)return Array.from(new Set(e));const t=n.toLowerCase();return Tm.filter(i=>t.includes(i))}return[]},sx=n=>Array.isArray(n)?n.join(" "):"",Iv="clientes",ox=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",u=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:u,fullName_lower:e.fullName_lower||u.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:pp(e.notes??e.Informacion??e.info),createdAt:e.createdAt??null}},_c=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(a=>{if(t&&i&&a.mainBarberId&&a.mainBarberId!==i)return!1;if(!o)return!0;const u=(a.fullName||"").toLowerCase(),d=(a.phone||"").toLowerCase(),p=sx(a.notes).toLowerCase();return u.includes(o)||d.includes(o)||p.includes(o)})};function ax(){const{user:n,role:e}=Xo(),t=!De,i=e==="admin"||e==="barbero",[o,a]=Q.useState(!1),[u,d]=Q.useState(""),[p,y]=Q.useState(()=>t?Af():[]),[v,E]=Q.useState(()=>_c(p,u,o,n?.uid)),[S,F]=Q.useState(()=>!t),[P,U]=Q.useState(!1),[R,Y]=Q.useState({fullName:"",phone:""}),[ee,X]=Q.useState(!1),[re,K]=Q.useState(null),[Z,N]=Q.useState(null),I=Q.useCallback(()=>{const L=Af();y(L),E(_c(L,u,o,n?.uid)),F(!1),N(null)},[o,u,n?.uid]),C=Q.useCallback(async()=>{if(!De){I();return}F(!0),N(null);try{const L=De;if(!L){I();return}const Qe=(await Cl(ks(L,Iv))).docs.map(Ue=>ox(Ue.id,Ue.data(),n?.uid)).sort((Ue,Ve)=>Ue.fullName.localeCompare(Ve.fullName));y(Qe)}catch(L){console.error("No pudimos cargar clientes",L),y([]),N("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{F(!1)}},[I,n?.uid]);Q.useEffect(()=>{if(t){I();return}C()},[t,C,I]),Q.useEffect(()=>{if(t){const L=Af();E(_c(L,u,o,n?.uid));return}E(_c(p,u,o,n?.uid))},[u,o,p,n?.uid,t]);const O=async L=>{L.preventDefault();const A=R.fullName.trim(),Pe=R.phone.trim();if(!A){K("El nombre es obligatorio.");return}X(!0),K(null);try{De?(await i0(ks(De,Iv),{fullName:A,fullName_lower:A.toLowerCase(),phone:Pe||void 0,mainBarberId:n?.uid||"",notes:[],createdAt:ym()}),await C()):($N({fullName:A,phone:Pe,mainBarberId:n?.uid}),I()),Y({fullName:"",phone:""}),U(!1)}catch(Qe){console.error("No pudimos crear el cliente",Qe),K("No pudimos crear el cliente. Intenta de nuevo.")}finally{X(!1)}},V=v;return x.jsxs("div",{className:"panel space-y-8",children:[x.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),x.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&x.jsx("button",{className:"btn btn-primary",onClick:()=>U(L=>!L),children:P?"Cerrar formulario":"Nuevo cliente"})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[x.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:u,onChange:L=>d(L.target.value)}),x.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[x.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(L=>!L),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),P&&i&&x.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:O,children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:R.fullName,onChange:L=>Y(A=>({...A,fullName:L.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:R.phone,onChange:L=>Y(A=>({...A,phone:L.target.value}))})]})]}),re&&x.jsx("p",{className:"text-xs text-red-500",children:re}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary",type:"submit",disabled:ee,children:ee?"Guardando...":"Guardar"}),x.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>U(!1),children:"Cancelar"})]})]})]}),x.jsxs("section",{className:"space-y-3",children:[S&&x.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),Z&&!S&&x.jsx("div",{className:"text-sm text-red-600",children:Z}),!S&&!Z&&V.map(L=>x.jsxs(Em,{to:`/clientes/${L.id}`,className:"list-item",children:[x.jsx("div",{className:"avatar",children:L.fullName.split(" ").map(A=>A[0]).slice(0,2)}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"title",children:L.fullName}),L.phone&&x.jsx("div",{className:"sub",children:L.phone})]}),x.jsx("span",{className:"sub",children:"Ver"})]},L.id)),!S&&!Z&&V.length===0&&x.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&x.jsx("footer",{className:"flex items-center justify-end",children:x.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void C(),disabled:S,children:"Actualizar"})}),x.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",x.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function lx({photos:n,onDelete:e,canDelete:t}){if(!n?.length)return x.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."});const i=t&&typeof e=="function";return x.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:n.map((o,a)=>{const u=o.id||`${o.url}-${a}`;return x.jsxs("div",{className:"relative rounded-xl shadow-lg overflow-hidden",children:[x.jsx("img",{src:o.url,className:"aspect-square w-full object-cover"}),i&&x.jsx("button",{type:"button",className:"absolute right-2 top-2 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-black/90",onClick:()=>e(o),children:"Borrar"})]},u)})})}function R0(n,e){return function(){return n.apply(e,arguments)}}const{toString:ux}=Object.prototype,{getPrototypeOf:Im}=Object,{iterator:xh,toStringTag:A0}=Symbol,bh=(n=>e=>{const t=ux.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Jn=n=>(n=n.toLowerCase(),e=>bh(e)===n),Oh=n=>e=>typeof e===n,{isArray:ta}=Array,Wo=Oh("undefined");function Hl(n){return n!==null&&!Wo(n)&&n.constructor!==null&&!Wo(n.constructor)&&cn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const C0=Jn("ArrayBuffer");function cx(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&C0(n.buffer),e}const hx=Oh("string"),cn=Oh("function"),k0=Oh("number"),Kl=n=>n!==null&&typeof n=="object",dx=n=>n===!0||n===!1,bc=n=>{if(bh(n)!=="object")return!1;const e=Im(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(A0 in n)&&!(xh in n)},fx=n=>{if(!Kl(n)||Hl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},px=Jn("Date"),mx=Jn("File"),gx=Jn("Blob"),yx=Jn("FileList"),_x=n=>Kl(n)&&cn(n.pipe),vx=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||cn(n.append)&&((e=bh(n))==="formdata"||e==="object"&&cn(n.toString)&&n.toString()==="[object FormData]"))},wx=Jn("URLSearchParams"),[Ex,Tx,Ix,Sx]=["ReadableStream","Request","Response","Headers"].map(Jn),Rx=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ta(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Hl(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function P0(n,e){if(Hl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const vs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,N0=n=>!Wo(n)&&n!==vs;function mp(){const{caseless:n,skipUndefined:e}=N0(this)&&this||{},t={},i=(o,a)=>{const u=n&&P0(t,a)||a;bc(t[u])&&bc(o)?t[u]=mp(t[u],o):bc(o)?t[u]=mp({},o):ta(o)?t[u]=o.slice():(!e||!Wo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Gl(arguments[o],i);return t}const Ax=(n,e,t,{allOwnKeys:i}={})=>(Gl(e,(o,a)=>{t&&cn(o)?n[a]=R0(o,t):n[a]=o},{allOwnKeys:i}),n),Cx=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),kx=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Px=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Im(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Nx=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},xx=n=>{if(!n)return null;if(ta(n))return n;let e=n.length;if(!k0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},bx=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Im(Uint8Array)),Ox=(n,e)=>{const i=(n&&n[xh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},Dx=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Lx=Jn("HTMLFormElement"),Vx=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Sv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Mx=Jn("RegExp"),x0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Gl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},Fx=n=>{x0(n,(e,t)=>{if(cn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(cn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Ux=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return ta(n)?i(n):i(String(n).split(e)),t},jx=()=>{},Bx=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function zx(n){return!!(n&&cn(n.append)&&n[A0]==="FormData"&&n[xh])}const $x=n=>{const e=new Array(10),t=(i,o)=>{if(Kl(i)){if(e.indexOf(i)>=0)return;if(Hl(i))return i;if(!("toJSON"in i)){e[o]=i;const a=ta(i)?[]:{};return Gl(i,(u,d)=>{const p=t(u,o+1);!Wo(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},qx=Jn("AsyncFunction"),Wx=n=>n&&(Kl(n)||cn(n))&&cn(n.then)&&cn(n.catch),b0=((n,e)=>n?setImmediate:e?((t,i)=>(vs.addEventListener("message",({source:o,data:a})=>{o===vs&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),vs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",cn(vs.postMessage)),Hx=typeof queueMicrotask<"u"?queueMicrotask.bind(vs):typeof process<"u"&&process.nextTick||b0,Kx=n=>n!=null&&cn(n[xh]),W={isArray:ta,isArrayBuffer:C0,isBuffer:Hl,isFormData:vx,isArrayBufferView:cx,isString:hx,isNumber:k0,isBoolean:dx,isObject:Kl,isPlainObject:bc,isEmptyObject:fx,isReadableStream:Ex,isRequest:Tx,isResponse:Ix,isHeaders:Sx,isUndefined:Wo,isDate:px,isFile:mx,isBlob:gx,isRegExp:Mx,isFunction:cn,isStream:_x,isURLSearchParams:wx,isTypedArray:bx,isFileList:yx,forEach:Gl,merge:mp,extend:Ax,trim:Rx,stripBOM:Cx,inherits:kx,toFlatObject:Px,kindOf:bh,kindOfTest:Jn,endsWith:Nx,toArray:xx,forEachEntry:Ox,matchAll:Dx,isHTMLForm:Lx,hasOwnProperty:Sv,hasOwnProp:Sv,reduceDescriptors:x0,freezeMethods:Fx,toObjectSet:Ux,toCamelCase:Vx,noop:jx,toFiniteNumber:Bx,findKey:P0,global:vs,isContextDefined:N0,isSpecCompliantForm:zx,toJSONObject:$x,isAsyncFn:qx,isThenable:Wx,setImmediate:b0,asap:Hx,isIterable:Kx};function Ne(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}W.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const O0=Ne.prototype,D0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{D0[n]={value:n}});Object.defineProperties(Ne,D0);Object.defineProperty(O0,"isAxiosError",{value:!0});Ne.from=(n,e,t,i,o,a)=>{const u=Object.create(O0);W.toFlatObject(n,u,function(v){return v!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ne.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const Gx=null;function gp(n){return W.isPlainObject(n)||W.isArray(n)}function L0(n){return W.endsWith(n,"[]")?n.slice(0,-2):n}function Rv(n,e,t){return n?n.concat(e).map(function(o,a){return o=L0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function Qx(n){return W.isArray(n)&&!n.some(gp)}const Jx=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function Dh(n,e,t){if(!W.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=W.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,R){return!W.isUndefined(R[U])});const i=t.metaTokens,o=t.visitor||v,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(o))throw new TypeError("visitor must be a function");function y(P){if(P===null)return"";if(W.isDate(P))return P.toISOString();if(W.isBoolean(P))return P.toString();if(!p&&W.isBlob(P))throw new Ne("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(P)||W.isTypedArray(P)?p&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function v(P,U,R){let Y=P;if(P&&!R&&typeof P=="object"){if(W.endsWith(U,"{}"))U=i?U:U.slice(0,-2),P=JSON.stringify(P);else if(W.isArray(P)&&Qx(P)||(W.isFileList(P)||W.endsWith(U,"[]"))&&(Y=W.toArray(P)))return U=L0(U),Y.forEach(function(X,re){!(W.isUndefined(X)||X===null)&&e.append(u===!0?Rv([U],re,a):u===null?U:U+"[]",y(X))}),!1}return gp(P)?!0:(e.append(Rv(R,U,a),y(P)),!1)}const E=[],S=Object.assign(Jx,{defaultVisitor:v,convertValue:y,isVisitable:gp});function F(P,U){if(!W.isUndefined(P)){if(E.indexOf(P)!==-1)throw Error("Circular reference detected in "+U.join("."));E.push(P),W.forEach(P,function(Y,ee){(!(W.isUndefined(Y)||Y===null)&&o.call(e,Y,W.isString(ee)?ee.trim():ee,U,S))===!0&&F(Y,U?U.concat(ee):[ee])}),E.pop()}}if(!W.isObject(n))throw new TypeError("data must be an object");return F(n),e}function Av(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Sm(n,e){this._pairs=[],n&&Dh(n,this,e)}const V0=Sm.prototype;V0.append=function(e,t){this._pairs.push([e,t])};V0.toString=function(e){const t=e?function(i){return e.call(this,i,Av)}:Av;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Yx(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function M0(n,e,t){if(!e)return n;const i=t&&t.encode||Yx;W.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=W.isURLSearchParams(e)?e.toString():new Sm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Cv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(i){i!==null&&e(i)})}}const F0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xx=typeof URLSearchParams<"u"?URLSearchParams:Sm,Zx=typeof FormData<"u"?FormData:null,eb=typeof Blob<"u"?Blob:null,tb={isBrowser:!0,classes:{URLSearchParams:Xx,FormData:Zx,Blob:eb},protocols:["http","https","file","blob","url","data"]},Rm=typeof window<"u"&&typeof document<"u",yp=typeof navigator=="object"&&navigator||void 0,nb=Rm&&(!yp||["ReactNative","NativeScript","NS"].indexOf(yp.product)<0),rb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ib=Rm&&window.location.href||"http://localhost",sb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rm,hasStandardBrowserEnv:nb,hasStandardBrowserWebWorkerEnv:rb,navigator:yp,origin:ib},Symbol.toStringTag,{value:"Module"})),Wt={...sb,...tb};function ob(n,e){return Dh(n,new Wt.classes.URLSearchParams,{visitor:function(t,i,o,a){return Wt.isNode&&W.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function ab(n){return W.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lb(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function U0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&W.isArray(o)?o.length:u,p?(W.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!W.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&W.isArray(o[u])&&(o[u]=lb(o[u])),!d)}if(W.isFormData(n)&&W.isFunction(n.entries)){const t={};return W.forEachEntry(n,(i,o)=>{e(ab(i),o,t,0)}),t}return null}function ub(n,e,t){if(W.isString(n))try{return(e||JSON.parse)(n),W.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ql={transitional:F0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=W.isObject(e);if(a&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return o?JSON.stringify(U0(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ob(e,this.formSerializer).toString();if((d=W.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Dh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),ub(e)):e}],transformResponse:[function(e){const t=this.transitional||Ql.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ne.from(d,Ne.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],n=>{Ql.headers[n]={}});const cb=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hb=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&cb[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},kv=Symbol("internals");function el(n){return n&&String(n).trim().toLowerCase()}function Oc(n){return n===!1||n==null?n:W.isArray(n)?n.map(Oc):String(n)}function db(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const fb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xf(n,e,t,i,o){if(W.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!W.isString(e)){if(W.isString(i))return e.indexOf(i)!==-1;if(W.isRegExp(i))return i.test(e)}}function pb(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function mb(n,e){const t=W.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let hn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,y){const v=el(p);if(!v)throw new Error("header name must be a non-empty string");const E=W.findKey(o,v);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=Oc(d))}const u=(d,p)=>W.forEach(d,(y,v)=>a(y,v,p));if(W.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(W.isString(e)&&(e=e.trim())&&!fb(e))u(hb(e),t);else if(W.isObject(e)&&W.isIterable(e)){let d={},p,y;for(const v of e){if(!W.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[y=v[0]]=(p=d[y])?W.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=el(e),e){const i=W.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return db(o);if(W.isFunction(t))return t.call(this,o,i);if(W.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=el(e),e){const i=W.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||xf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=el(u),u){const d=W.findKey(i,u);d&&(!t||xf(i,i[d],d,t))&&(delete i[d],o=!0)}}return W.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||xf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return W.forEach(this,(o,a)=>{const u=W.findKey(i,a);if(u){t[u]=Oc(o),delete t[a];return}const d=e?pb(a):String(a).trim();d!==a&&delete t[a],t[d]=Oc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&W.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[kv]=this[kv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=el(u);i[d]||(mb(o,u),i[d]=!0)}return W.isArray(e)?e.forEach(a):a(e),this}};hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(hn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});W.freezeMethods(hn);function bf(n,e){const t=this||Ql,i=e||t,o=hn.from(i.headers);let a=i.data;return W.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function j0(n){return!!(n&&n.__CANCEL__)}function na(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}W.inherits(na,Ne,{__CANCEL__:!0});function B0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function gb(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function yb(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=i[a];u||(u=y),t[o]=p,i[o]=y;let E=a,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const F=v&&y-v;return F?Math.round(S*1e3/F):void 0}}function _b(n,e){let t=0,i=1e3/e,o,a;const u=(y,v=Date.now())=>{t=v,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?u(y,v):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const rh=(n,e,t=3)=>{let i=0;const o=yb(50,250);return _b(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,y=o(p),v=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&v?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},Pv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Nv=n=>(...e)=>W.asap(()=>n(...e)),vb=Wt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Wt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Wt.origin),Wt.navigator&&/(msie|trident)/i.test(Wt.navigator.userAgent)):()=>!0,wb=Wt.hasStandardBrowserEnv?{write(n,e,t,i,o,a){const u=[n+"="+encodeURIComponent(e)];W.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),W.isString(i)&&u.push("path="+i),W.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Eb(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Tb(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function z0(n,e,t){let i=!Eb(e);return n&&(i||t==!1)?Tb(n,e):e}const xv=n=>n instanceof hn?{...n}:n;function Ps(n,e){e=e||{};const t={};function i(y,v,E,S){return W.isPlainObject(y)&&W.isPlainObject(v)?W.merge.call({caseless:S},y,v):W.isPlainObject(v)?W.merge({},v):W.isArray(v)?v.slice():v}function o(y,v,E,S){if(W.isUndefined(v)){if(!W.isUndefined(y))return i(void 0,y,E,S)}else return i(y,v,E,S)}function a(y,v){if(!W.isUndefined(v))return i(void 0,v)}function u(y,v){if(W.isUndefined(v)){if(!W.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function d(y,v,E){if(E in e)return i(y,v);if(E in n)return i(void 0,y)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,v,E)=>o(xv(y),xv(v),E,!0)};return W.forEach(Object.keys({...n,...e}),function(v){const E=p[v]||o,S=E(n[v],e[v],v);W.isUndefined(S)&&E!==d||(t[v]=S)}),t}const $0=n=>{const e=Ps({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=hn.from(u),e.url=M0(z0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),W.isFormData(t)){if(Wt.hasStandardBrowserEnv||Wt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(W.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([v,E])=>{y.includes(v.toLowerCase())&&u.set(v,E)})}}if(Wt.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(e)),i||i!==!1&&vb(e.url))){const p=o&&a&&wb.read(a);p&&u.set(o,p)}return e},Ib=typeof XMLHttpRequest<"u",Sb=Ib&&function(n){return new Promise(function(t,i){const o=$0(n);let a=o.data;const u=hn.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,v,E,S,F,P;function U(){F&&F(),P&&P(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let R=new XMLHttpRequest;R.open(o.method.toUpperCase(),o.url,!0),R.timeout=o.timeout;function Y(){if(!R)return;const X=hn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),K={data:!d||d==="text"||d==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:X,config:n,request:R};B0(function(N){t(N),U()},function(N){i(N),U()},K),R=null}"onloadend"in R?R.onloadend=Y:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(Y)},R.onabort=function(){R&&(i(new Ne("Request aborted",Ne.ECONNABORTED,n,R)),R=null)},R.onerror=function(re){const K=re&&re.message?re.message:"Network Error",Z=new Ne(K,Ne.ERR_NETWORK,n,R);Z.event=re||null,i(Z),R=null},R.ontimeout=function(){let re=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const K=o.transitional||F0;o.timeoutErrorMessage&&(re=o.timeoutErrorMessage),i(new Ne(re,K.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,R)),R=null},a===void 0&&u.setContentType(null),"setRequestHeader"in R&&W.forEach(u.toJSON(),function(re,K){R.setRequestHeader(K,re)}),W.isUndefined(o.withCredentials)||(R.withCredentials=!!o.withCredentials),d&&d!=="json"&&(R.responseType=o.responseType),y&&([S,P]=rh(y,!0),R.addEventListener("progress",S)),p&&R.upload&&([E,F]=rh(p),R.upload.addEventListener("progress",E),R.upload.addEventListener("loadend",F)),(o.cancelToken||o.signal)&&(v=X=>{R&&(i(!X||X.type?new na(null,n,R):X),R.abort(),R=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const ee=gb(o.url);if(ee&&Wt.protocols.indexOf(ee)===-1){i(new Ne("Unsupported protocol "+ee+":",Ne.ERR_BAD_REQUEST,n));return}R.send(a||null)})},Rb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ne?v:new na(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>W.asap(d),p}},Ab=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},Cb=async function*(n,e){for await(const t of kb(n))yield*Ab(t,e)},kb=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},bv=(n,e,t,i)=>{const o=Cb(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await o.next();if(y){d(),p.close();return}let E=v.byteLength;if(t){let S=a+=E;t(S)}p.enqueue(new Uint8Array(v))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},Ov=64*1024,{isFunction:vc}=W,Pb=(({Request:n,Response:e})=>({Request:n,Response:e}))(W.global),{ReadableStream:Dv,TextEncoder:Lv}=W.global,Vv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Nb=n=>{n=W.merge.call({skipUndefined:!0},Pb,n);const{fetch:e,Request:t,Response:i}=n,o=e?vc(e):typeof fetch=="function",a=vc(t),u=vc(i);if(!o)return!1;const d=o&&vc(Dv),p=o&&(typeof Lv=="function"?(P=>U=>P.encode(U))(new Lv):async P=>new Uint8Array(await new t(P).arrayBuffer())),y=a&&d&&Vv(()=>{let P=!1;const U=new t(Wt.origin,{body:new Dv,method:"POST",get duplex(){return P=!0,"half"}}).headers.has("Content-Type");return P&&!U}),v=u&&d&&Vv(()=>W.isReadableStream(new i("").body)),E={stream:v&&(P=>P.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!E[P]&&(E[P]=(U,R)=>{let Y=U&&U[P];if(Y)return Y.call(U);throw new Ne(`Response type '${P}' is not supported`,Ne.ERR_NOT_SUPPORT,R)})});const S=async P=>{if(P==null)return 0;if(W.isBlob(P))return P.size;if(W.isSpecCompliantForm(P))return(await new t(Wt.origin,{method:"POST",body:P}).arrayBuffer()).byteLength;if(W.isArrayBufferView(P)||W.isArrayBuffer(P))return P.byteLength;if(W.isURLSearchParams(P)&&(P=P+""),W.isString(P))return(await p(P)).byteLength},F=async(P,U)=>{const R=W.toFiniteNumber(P.getContentLength());return R??S(U)};return async P=>{let{url:U,method:R,data:Y,signal:ee,cancelToken:X,timeout:re,onDownloadProgress:K,onUploadProgress:Z,responseType:N,headers:I,withCredentials:C="same-origin",fetchOptions:O}=$0(P),V=e||fetch;N=N?(N+"").toLowerCase():"text";let L=Rb([ee,X&&X.toAbortSignal()],re),A=null;const Pe=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let Qe;try{if(Z&&y&&R!=="get"&&R!=="head"&&(Qe=await F(I,Y))!==0){let b=new t(U,{method:"POST",body:Y,duplex:"half"}),j;if(W.isFormData(Y)&&(j=b.headers.get("content-type"))&&I.setContentType(j),b.body){const[ue,Te]=Pv(Qe,rh(Nv(Z)));Y=bv(b.body,Ov,ue,Te)}}W.isString(C)||(C=C?"include":"omit");const Ue=a&&"credentials"in t.prototype,Ve={...O,signal:L,method:R.toUpperCase(),headers:I.normalize().toJSON(),body:Y,duplex:"half",credentials:Ue?C:void 0};A=a&&new t(U,Ve);let oe=await(a?V(A,O):V(U,Ve));const ye=v&&(N==="stream"||N==="response");if(v&&(K||ye&&Pe)){const b={};["status","statusText","headers"].forEach(_e=>{b[_e]=oe[_e]});const j=W.toFiniteNumber(oe.headers.get("content-length")),[ue,Te]=K&&Pv(j,rh(Nv(K),!0))||[];oe=new i(bv(oe.body,Ov,ue,()=>{Te&&Te(),Pe&&Pe()}),b)}N=N||"text";let G=await E[W.findKey(E,N)||"text"](oe,P);return!ye&&Pe&&Pe(),await new Promise((b,j)=>{B0(b,j,{data:G,headers:hn.from(oe.headers),status:oe.status,statusText:oe.statusText,config:P,request:A})})}catch(Ue){throw Pe&&Pe(),Ue&&Ue.name==="TypeError"&&/Load failed|fetch/i.test(Ue.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,P,A),{cause:Ue.cause||Ue}):Ne.from(Ue,Ue&&Ue.code,P,A)}}},xb=new Map,q0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,y,v=xb;for(;d--;)p=a[d],y=v.get(p),y===void 0&&v.set(p,y=d?new Map:Nb(e)),v=y;return y};q0();const _p={http:Gx,xhr:Sb,fetch:{get:q0}};W.forEach(_p,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Mv=n=>`- ${n}`,bb=n=>W.isFunction(n)||n===null||n===!1,W0={getAdapter:(n,e)=>{n=W.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!bb(i)&&(o=_p[(d=String(i)).toLowerCase()],o===void 0))throw new Ne(`Unknown adapter '${d}'`);if(o&&(W.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(Mv).join(`
`):" "+Mv(u[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:_p};function Of(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new na(null,n)}function Fv(n){return Of(n),n.headers=hn.from(n.headers),n.data=bf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),W0.getAdapter(n.adapter||Ql.adapter,n)(n).then(function(i){return Of(n),i.data=bf.call(n,n.transformResponse,i),i.headers=hn.from(i.headers),i},function(i){return j0(i)||(Of(n),i&&i.response&&(i.response.data=bf.call(n,n.transformResponse,i.response),i.response.headers=hn.from(i.response.headers))),Promise.reject(i)})}const H0="1.12.2",Lh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Lh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Uv={};Lh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+H0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new Ne(o(u," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!Uv[u]&&(Uv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Lh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Ob(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new Ne("option "+a+" must be "+p,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+a,Ne.ERR_BAD_OPTION)}}const Dc={assertOptions:Ob,validators:Lh},lr=Dc.validators;let Es=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Cv,response:new Cv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ps(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&Dc.assertOptions(i,{silentJSONParsing:lr.transitional(lr.boolean),forcedJSONParsing:lr.transitional(lr.boolean),clarifyTimeoutError:lr.transitional(lr.boolean)},!1),o!=null&&(W.isFunction(o)?t.paramsSerializer={serialize:o}:Dc.assertOptions(o,{encode:lr.function,serialize:lr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Dc.assertOptions(t,{baseUrl:lr.spelling("baseURL"),withXsrfToken:lr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&W.merge(a.common,a[t.method]);a&&W.forEach(["delete","get","head","post","put","patch","common"],P=>{delete a[P]}),t.headers=hn.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(p=p&&U.synchronous,d.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let v,E=0,S;if(!p){const P=[Fv.bind(this),void 0];for(P.unshift(...d),P.push(...y),S=P.length,v=Promise.resolve(t);E<S;)v=v.then(P[E++],P[E++]);return v}S=d.length;let F=t;for(;E<S;){const P=d[E++],U=d[E++];try{F=P(F)}catch(R){U.call(this,R);break}}try{v=Fv.call(this,F)}catch(P){return Promise.reject(P)}for(E=0,S=y.length;E<S;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=Ps(this.defaults,e);const t=z0(e.baseURL,e.url,e.allowAbsoluteUrls);return M0(t,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){Es.prototype[e]=function(t,i){return this.request(Ps(i||{},{method:e,url:t,data:(i||{}).data}))}});W.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(Ps(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Es.prototype[e]=t(),Es.prototype[e+"Form"]=t(!0)});let Db=class K0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new na(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new K0(function(o){e=o}),cancel:e}}};function Lb(n){return function(t){return n.apply(null,t)}}function Vb(n){return W.isObject(n)&&n.isAxiosError===!0}const vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vp).forEach(([n,e])=>{vp[e]=n});function G0(n){const e=new Es(n),t=R0(Es.prototype.request,e);return W.extend(t,Es.prototype,e,{allOwnKeys:!0}),W.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return G0(Ps(n,o))},t}const at=G0(Ql);at.Axios=Es;at.CanceledError=na;at.CancelToken=Db;at.isCancel=j0;at.VERSION=H0;at.toFormData=Dh;at.AxiosError=Ne;at.Cancel=at.CanceledError;at.all=function(e){return Promise.all(e)};at.spread=Lb;at.isAxiosError=Vb;at.mergeConfig=Ps;at.AxiosHeaders=hn;at.formToJSON=n=>U0(W.isHTMLForm(n)?new FormData(n):n);at.getAdapter=W0.getAdapter;at.HttpStatusCode=vp;at.default=at;const{Axios:Xb,AxiosError:Zb,CanceledError:eO,isCancel:tO,CancelToken:nO,VERSION:rO,all:iO,Cancel:sO,isAxiosError:oO,spread:aO,toFormData:lO,AxiosHeaders:uO,HttpStatusCode:cO,formToJSON:hO,getAdapter:dO,mergeConfig:fO}=at,Q0="dm7y9ywjq",J0="barberia_unsigned",Am=!!J0,Mb=n=>n.total?Math.round(n.loaded/n.total*100):0;async function Fb(n,e={}){const{folder:t="barberia",onProgress:i}=e;if(!Am)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");const o=`https://api.cloudinary.com/v1_1/${Q0}/image/upload`,a=new FormData;a.append("file",n),a.append("upload_preset",J0),t&&a.append("folder",t);const u=!1,d=async p=>{const y=new FormData;a.forEach((S,F)=>{y.append(F,S)});const{data:v}=await at.post(o,y,{onUploadProgress:S=>{if(!i)return;const F=Mb(S);F>0&&i(F)}});i?.(100);const E=typeof v.delete_token=="string"&&v.delete_token.trim().length?v.delete_token:null;return{url:v.secure_url,deleteToken:E}};try{return await d(u)}catch(p){if(console.error("No pudimos subir la imagen a Cloudinary",p),at.isAxiosError(p)){const y=typeof p.response?.data?.error?.message=="string"?p.response.data.error.message:typeof p.response?.data?.message=="string"?p.response.data.message:null;throw new Error(y?`Cloudinary rechazo la imagen: ${y}`:"No pudimos subir la imagen. Intenta de nuevo.")}throw new Error("No pudimos subir la imagen. Intenta de nuevo.")}}async function Ub(n){if(!n)throw new Error("Token de eliminacion invalido.");if(!Am)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");try{const e=`https://api.cloudinary.com/v1_1/${Q0}/delete_by_token`,t=new FormData;t.append("token",n),await at.post(e,t)}catch(e){throw console.error("No pudimos eliminar la imagen en Cloudinary",e),new Error("No pudimos eliminar la imagen. Intenta de nuevo.")}}function jb({onUploaded:n,folder:e,disabled:t}){const[i,o]=Q.useState(!1),[a,u]=Q.useState(0),[d,p]=Q.useState(null),y=async S=>{const F=S.target,P=F.files?.[0];if(P){o(!0),u(0),p(null);try{const U=await Fb(P,{folder:e,onProgress:R=>u(R)});n(U)}catch(U){console.error(U),p(U instanceof Error?U.message:"No pudimos subir la imagen.")}finally{F.value="",o(!1),u(0)}}},v=t||i,E=i?`Subiendo...${a>0?` ${a}%`:""}`:"Subir imagen";return x.jsxs("div",{className:"space-y-1",children:[x.jsxs("label",{className:`uploader-trigger${v?" disabled":""}`,children:[x.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:v,onChange:y}),x.jsx("span",{children:E})]}),d&&x.jsx("p",{className:"text-xs text-red-500 text-right",children:d})]})}const Df="clientes",Lf="cuts";function Bb(){const{id:n}=k1(),e=Wl(),{user:t,role:i,demoMode:o}=Xo(),[a,u]=Q.useState([]),[d,p]=Q.useState({fullName:"",phone:"",notes:[]}),[y,v]=Q.useState(!0),[E,S]=Q.useState(!1),[F,P]=Q.useState(!1),[U,R]=Q.useState(null),[Y,ee]=Q.useState(null),[X,re]=Q.useState(null),K=!De,Z=i==="admin"||i==="barbero",N=Am,I=K?"demo":n?`clientes/${n}`:"clientes",C=G=>G.map(b=>({key:b.id,id:b.id,url:b.url,deleteToken:b.deleteToken??null,barberId:b.barberId,demoId:b.id})),O=(G,b)=>{if(typeof G=="string"){const j={url:G,deleteToken:null};return b&&(j.barberId=b),{url:G,deleteToken:null,barberId:b,rawValue:j,needsMigration:!0}}if(G&&typeof G=="object"){const j=G,ue=typeof j.url=="string"?j.url:typeof j.secure_url=="string"?j.secure_url:typeof j.path=="string"?j.path:"";if(!ue)return null;const _e=(typeof j.deleteToken=="string"?j.deleteToken:typeof j.delete_token=="string"?j.delete_token:null)??null,Ie=typeof j.barberId=="string"&&j.barberId.trim().length>0,xe=Ie?j.barberId.trim():b,Oe={url:ue,deleteToken:_e};xe&&(Oe.barberId=xe);const lt=!Ie&&!!b||typeof j.deleteToken>"u"||typeof j.delete_token=="string";return{url:ue,deleteToken:_e,barberId:xe,rawValue:Oe,needsMigration:lt}}return null},V=G=>{u(b=>b.filter(j=>j.key!==G))},L=async G=>{if(!(!n||X||!window.confirm("Seguro que deseas eliminar esta foto?"))){ee(null),re(G.key);try{if(K){G.demoId&&GN(n,G.demoId),V(G.key);return}if(!G.deleteToken)throw new Error("No podemos eliminar esta imagen porque se subio antes de activar los tokens de Cloudinary.");if(await Ub(G.deleteToken),G.cutId){const j=ln(De,Lf,G.cutId);G.docHasSinglePhoto?await lp(j):G.rawValue!==void 0&&await ml(j,{photos:oN(G.rawValue)})}V(G.key)}catch(j){console.error("No pudimos eliminar la foto",j),ee(j instanceof Error?j.message:"No pudimos eliminar la imagen. Intenta de nuevo.")}finally{re(null)}}};Q.useEffect(()=>{if(!n)return;if(ee(null),re(null),K){const b=h0(n);if(!b){v(!1);return}v(!0),p({fullName:b.fullName,phone:b.phone==null?"":String(b.phone),notes:pp(b.notes)}),u(C(HN(n)));return}const G=sN(ln(De,Df,n),b=>{if(!b.exists()){v(!1);return}const j=b.data();v(!0),p({fullName:j.fullName||"",phone:j.phone==null?"":String(j.phone),notes:pp(j.notes)})});return(async()=>{const b=Yc(ks(De,Lf),ap("clientId","==",n)),j=await Cl(b),ue=[];let Te=!1;j.forEach(_e=>{const Ie=_e.data(),xe=Array.isArray(Ie.photos)?Ie.photos:[],Oe=typeof Ie.barberId=="string"&&Ie.barberId.trim().length?Ie.barberId.trim():void 0;xe.forEach((We,lt)=>{const Mt=O(We,Oe);if(!Mt)return;const vr=`${_e.id}-${lt}`;ue.push({photo:{key:vr,id:vr,url:Mt.url,deleteToken:Mt.deleteToken,cutId:_e.id,rawValue:Mt.rawValue,docHasSinglePhoto:xe.length<=1,barberId:Mt.barberId},createdAt:Ie.createdAt}),Mt.needsMigration&&!Te&&(Te=!0,console.warn("Se detectaron fotos antiguas sin barberId. Actualiza manualmente esos documentos si tus reglas de seguridad lo permiten."))})}),ue.sort((_e,Ie)=>{const xe=_e.createdAt?.toMillis?_e.createdAt.toMillis():Number(_e.createdAt)||0;return(Ie.createdAt?.toMillis?Ie.createdAt.toMillis():Number(Ie.createdAt)||0)-xe}),u(ue.map(_e=>_e.photo).slice(0,12))})(),()=>G()},[n,K]);const A=Q.useMemo(()=>K?x.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[K]),Pe=async G=>{if(!n)return;if(ee(null),K){const j=KN(n,{url:G.url,deleteToken:G.deleteToken??null,barberId:t?.uid||"demo-barber"});u(C(j).slice(0,12));return}const b={url:G.url,deleteToken:G.deleteToken??null,barberId:t?.uid||""};try{const j=await i0(ks(De,Lf),{clientId:n,barberId:t?.uid||"",photos:[b],createdAt:ym()}),ue=`${j.id}-0`;u(Te=>[{key:ue,id:ue,url:G.url,deleteToken:G.deleteToken??null,cutId:j.id,rawValue:b,docHasSinglePhoto:!0,barberId:t?.uid||""},...Te].slice(0,12))}catch(j){console.error("No pudimos registrar la foto",j),ee("No pudimos guardar la foto en el cliente.")}},Qe=async()=>{if(!n)return;const G=(d.fullName??"").toString().trim(),b=(d.phone??"").toString().trim();if(!G){R("El nombre es obligatorio.");return}S(!0),R(null);try{const j=Array.isArray(d.notes)?[...d.notes]:[];if(K)qN(n,{fullName:G,phone:b||void 0,notes:j});else{const ue={fullName:G,fullName_lower:G.toLowerCase()};b?ue.phone=b:ue.phone=sv(),j.length>0?ue.notes=j:ue.notes=sv(),await ml(ln(De,Df,n),ue)}}catch(j){console.error("No pudimos actualizar el cliente",j),R("No pudimos actualizar el cliente.")}finally{S(!1)}},Ue=G=>{p(b=>{const j=b.notes.includes(G);return{...b,notes:j?b.notes.filter(ue=>ue!==G):[...b.notes,G]}})},Ve=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){P(!0),R(null);try{K?WN(n):await lp(ln(De,Df,n)),e("/clientes")}catch(b){console.error("No pudimos eliminar el cliente",b),R("No pudimos eliminar el cliente."),P(!1)}}};if(!y)return x.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const oe=(d.fullName??"").toString().trim()||"Cliente sin nombre",ye=(d.phone??"").toString().trim();return x.jsxs("div",{className:"panel space-y-8",children:[A,x.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),x.jsx("h1",{className:"detail-title",children:oe}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:ye?`Tel. ${ye}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),Z&&x.jsxs("div",{className:"flex flex-col items-end gap-2",children:[x.jsx(jb,{onUploaded:Pe,folder:I}),x.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"}),!N&&!K&&x.jsxs("span",{className:"text-xs text-red-500",children:["Configura Cloudinary en el archivo ",x.jsx("code",{children:".env"})," para subir las imagenes a la nube."]})]})]}),x.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[x.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),x.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),x.jsx("input",{className:"input mt-1",value:d.fullName,onChange:G=>p(b=>({...b,fullName:G.target.value})),disabled:!Z})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),x.jsx("input",{className:"input mt-1",value:d.phone,onChange:G=>p(b=>({...b,phone:G.target.value})),disabled:!Z})]})]}),U&&x.jsx("p",{className:"text-xs text-red-500",children:U}),Z&&x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary",onClick:()=>void Qe(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),x.jsx("button",{className:"btn btn-ghost",onClick:()=>void Ve(),disabled:F,children:F?"Eliminando...":"Eliminar"})]})]}),x.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h2",{className:"detail-sub",children:"Galeria"}),a.length>0&&x.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[a.length," fotos"]})]}),x.jsx(lx,{photos:a,canDelete:Z,onDelete:G=>void L(G)}),Y&&x.jsx("p",{className:"text-xs text-red-500",children:Y}),K&&!o||!N?x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:N?"Configura Cloudinary para guardar fotos reales.":"Las variables de Cloudinary no estan definidas. Usa tus credenciales para guardar las imagenes."}):null,!N&&x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Mientras tanto se utilizaran imagenes de muestra temporales."})]})]}),x.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsx("h2",{className:"detail-sub",children:"Notas"}),x.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:Tm.map(G=>{const b=d.notes.includes(G);return x.jsxs("label",{className:`flex items-center gap-3 rounded-xl border border-[var(--border-soft)] bg-white/60 px-3 py-2 text-sm text-[var(--ink)] ${Z?"cursor-pointer hover:border-[var(--accent-soft)]":"opacity-70"}`,children:[x.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-[var(--accent)]",checked:b,onChange:()=>Ue(G),disabled:!Z}),x.jsx("span",{children:ix[G]})]},G)})}),Z&&x.jsx("button",{onClick:()=>void Qe(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]})]})}const jv={"auth/invalid-email":"El correo no tiene un formato válido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contraseña incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales inválidas. Verifica tus datos.","auth/user-disabled":"La cuenta está deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},Bv=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in jv)return jv[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesión. Verifica tus datos."}return"No pudimos iniciar sesión. Verifica tu correo y contraseña."},wc=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al día con las imágenes de cada servicio"}];function zb(){const[n,e]=Q.useState(""),[t,i]=Q.useState(""),[o,a]=Q.useState(!1),[u,d]=Q.useState(null),[p,y]=Q.useState(null),v=Wl(),{user:E,loading:S}=Xo();Q.useEffect(()=>{!S&&E&&v("/clientes",{replace:!0})},[E,S,v]);const F=async R=>{if(R.preventDefault(),!wn||!De)return;const Y=n.trim(),ee=t.trim();if(!Y||!ee){d("Completa ambos campos para continuar.");return}a(!0),d(null),y(null);try{const re=(await zR(wn,Y,ee)).user.uid,K=ln(De,"barberos",re),Z=await Xc(K);let N=null;if(Z.exists())N=Z.data().role||null;else{const I=ln(De,"users",re),C=await Xc(I);C.exists()&&(N=C.data().role||null)}if(!N)throw new Error("No se encontró el rol del usuario.");if(N==="admin")v("/admin/usuarios",{replace:!0});else if(N==="barbero")v("/clientes",{replace:!0});else throw new Error("Rol desconocido o no autorizado.")}catch(X){console.error("Error al iniciar sesión:",X),d(Bv(X))}finally{a(!1)}},P=async()=>{if(!wn)return;const R=n.trim();if(!R){d("Ingresa tu correo para recuperar la contraseña.");return}try{await jR(wn,R),y("Te enviamos un correo para restablecer tu contraseña."),d(null)}catch(Y){console.error("Error al enviar correo de recuperación:",Y),d(Bv(Y)),y(null)}};return x.jsx("div",{className:"login-hero",children:x.jsxs("div",{className:"login-hero-inner",children:[x.jsx("div",{className:"space-y-4 text-center",children:x.jsxs("div",{className:"look-fusion-lockup",children:[x.jsx("img",{src:"/barberia/images/logo.png",alt:"Logotipo Look Fusion",className:"look-fusion-logo"}),x.jsx("h1",{className:"login-heading look-fusion-wordmark",children:"LOOK FUSION"})]})}),x.jsxs("div",{className:"login-card",children:[x.jsxs("div",{className:"login-gallery",children:[x.jsx("div",{className:"login-gallery-top",children:wc.slice(0,2).map(R=>x.jsxs("figure",{children:[x.jsx("img",{src:R.src,alt:R.caption}),x.jsx("figcaption",{children:R.caption})]},R.caption))}),x.jsxs("figure",{children:[x.jsx("img",{src:wc[2].src,alt:wc[2].caption}),x.jsx("figcaption",{children:wc[2].caption})]})]}),x.jsxs("div",{className:"login-panel",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("h2",{children:"Inicia sesión"}),x.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automáticamente al módulo correspondiente según tu rol."})]}),x.jsxs("form",{className:"login-form",onSubmit:F,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),x.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:R=>e(R.target.value),type:"email",autoComplete:"email",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contraseña"}),x.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:R=>i(R.target.value),autoComplete:"current-password",required:!0,minLength:6})]}),u&&x.jsx("p",{className:"text-xs text-red-600",children:u}),p&&x.jsx("p",{className:"text-xs text-green-600",children:p}),x.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Ingresando...":"Entrar"}),x.jsx("button",{className:"mt-2 text-sm font-semibold text-[#d67c21] underline hover:text-[#b86516]",type:"button",disabled:o,onClick:P,children:"Olvidé mi contraseña"})]}),x.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galería asignada."]}),x.jsxs("p",{children:["Soporte: ",x.jsx("span",{className:"font-semibold text-black/70",children:"barberiawebpro@gmail.com"})]})]})]})]})]})})}async function $b(n){if(!wn||!De)return{success:!1,message:"Firebase no está inicializado."};try{const t=(await BR(wn,n.email,n.password)).user.uid;return await iN(ln(De,"barberos",t),{email:n.email.toLowerCase(),displayName:n.displayName,role:"barbero",createdAt:ym()}),console.log("✅ Barbero registrado correctamente:",n.email),{success:!0,uid:t}}catch(e){return console.error("❌ Error al registrar barbero:",e),typeof e=="object"&&e&&"code"in e&&e.code==="auth/email-already-in-use"?{success:!1,message:"El correo ya está registrado."}:{success:!1,message:e instanceof Error?e.message:"Error desconocido"}}}const tl="barberos",qb=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,nl=(n,e)=>`${n??""} ${e??""}`.trim(),Vf={firstName:"",lastName:"",email:"",dni:"",role:"barbero",password:""},rl=()=>d0().map(n=>{const e=(n.displayName||"").trim().split(" "),t=e.shift()||n.displayName||"",i=e.join(" ");return{id:n.id,displayName:n.displayName,firstName:t,lastName:i,email:n.email,emailLower:n.email.toLowerCase(),dni:n.id.replace("demo-user-",""),role:n.role}});function Wb(){const{role:n,loading:e}=Xo(),t=!De,[i,o]=Q.useState(()=>t?rl():[]),[a,u]=Q.useState(""),[d,p]=Q.useState(!1),[y,v]=Q.useState(!1),[E,S]=Q.useState(Vf),[F,P]=Q.useState(null);Q.useEffect(()=>{if(!De){o(rl());return}(async()=>{const Z=await Cl(Yc(ks(De,tl),tN("displayName")));o(Z.docs.map(N=>{const I=N.data(),C=I.firstName||I.nombre||"",O=I.lastName||I.apellido||"",V=I.dni||"";return{id:N.id,displayName:I.displayName||nl(C,O),firstName:C,lastName:O,email:I.email,emailLower:I.emailLower,dni:V,role:I.role}}))})()},[De]);const U=a.trim().toLowerCase(),R=Q.useMemo(()=>i.filter(K=>{if(!U)return!0;const Z=(K.displayName||nl(K.firstName,K.lastName)).toLowerCase(),N=K.emailLower||K.email?.toLowerCase()||"",I=(K.dni||"").toLowerCase();return Z.includes(U)||N.includes(U)||I.includes(U)}),[i,U]),Y=K=>{if(K){const N=(K.displayName||nl(K.firstName,K.lastName)).split(" "),I=K.firstName||N.shift()||"",C=K.lastName||N.join(" ");S({id:K.id,firstName:I,lastName:C,email:K.email||"",dni:K.dni||"",role:K.role||"barbero",password:""})}else S(Vf);P(null),v(!0)},ee=async K=>{K.preventDefault();const Z=E.firstName.trim(),N=E.lastName.trim(),I=E.email.trim(),C=E.dni.trim(),O=E.password.trim();if(!Z||!N||!I||!C){P("Nombre, apellido, email y DNI son obligatorios.");return}if(!qb.test(I)){P("Ingresa un correo válido.");return}const V=nl(Z,N),L=I.toLowerCase();p(!0),P(null);try{if(!De)E.id?hv(E.id,{displayName:V,email:I,role:E.role}):QN({displayName:V,email:I,role:E.role}),o(rl());else if(E.id)await ml(ln(De,tl,E.id),{firstName:Z,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role}),o(A=>A.map(Pe=>Pe.id===E.id?{...Pe,firstName:Z,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role}:Pe));else{if(O.length<6){P("La contraseña debe tener al menos 6 caracteres."),p(!1);return}const A=await $b({displayName:V,email:I,password:O});if(!A.success||!A.uid)throw new Error(A.message||"No pudimos registrar el barbero.");await ml(ln(De,tl,A.uid),{firstName:Z,lastName:N,email:I,emailLower:L,dni:C,role:E.role}),o(Pe=>[{id:A.uid,firstName:Z,lastName:N,displayName:V,email:I,emailLower:L,dni:C,role:E.role},...Pe])}v(!1),S(Vf)}catch(A){console.error("No pudimos guardar el usuario",A);const Pe=A instanceof Error?A.message:"No pudimos guardar el usuario.";P(Pe)}finally{p(!1)}},X=async(K,Z)=>{if(!De){hv(K,{role:Z}),o(rl());return}await ml(ln(De,tl,K),{role:Z}),o(N=>N.map(I=>I.id===K?{...I,role:Z}:I))},re=async K=>{if(window.confirm("Seguro que deseas eliminar este barbero?"))try{De?(await lp(ln(De,tl,K)),o(Z=>Z.filter(N=>N.id!==K))):(JN(K),o(rl()))}catch(Z){console.error("No pudimos eliminar el usuario",Z),P("No pudimos eliminar el usuario.")}};return e?x.jsx("div",{className:"panel text-[var(--ink)]",children:"Cargando usuarios…"}):n!=="admin"?x.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta página."}):x.jsxs("div",{className:"panel space-y-6",children:[x.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),x.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Gestión de barberos"}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:"Crea cuentas nuevas, asigna roles y mantén la información de tu staff al día."})]}),x.jsx("button",{className:"btn btn-primary",onClick:()=>Y(),children:"Nuevo barbero"})]}),x.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:x.jsx("input",{className:"searchbar",placeholder:"Buscar por nombre, correo o DNI",value:a,onChange:K=>u(K.target.value)})}),y&&x.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:ee,children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-5",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Ana",value:E.firstName,onChange:K=>S(Z=>({...Z,firstName:K.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Apellido"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Gómez",value:E.lastName,onChange:K=>S(Z=>({...Z,lastName:K.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"DNI"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. 12345678",value:E.dni,onChange:K=>S(Z=>({...Z,dni:K.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),x.jsx("input",{className:"input mt-1",placeholder:"correo@dominio.com",value:E.email,onChange:K=>S(Z=>({...Z,email:K.target.value})),type:"email"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),x.jsxs("select",{className:"input mt-1",value:E.role,onChange:K=>S(Z=>({...Z,role:K.target.value})),children:[x.jsx("option",{value:"barbero",children:"barbero"}),x.jsx("option",{value:"admin",children:"admin"})]})]})]}),!E.id&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Contraseña temporal"}),x.jsx("input",{className:"input mt-1",placeholder:"Mínimo 6 caracteres",type:"password",value:E.password,onChange:K=>S(Z=>({...Z,password:K.target.value})),required:!0,minLength:6})]}),F&&x.jsx("p",{className:"text-xs text-red-500",children:F}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),x.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>v(!1),children:"Cancelar"})]})]}),x.jsxs("div",{className:"overflow-x-auto",children:[x.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre completo"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"DNI"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),x.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),x.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:R.map(K=>x.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[x.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre completo",children:K.displayName||nl(K.firstName,K.lastName)||"-"}),x.jsx("td",{className:"py-3 pr-3","data-label":"DNI",children:K.dni||"-"}),x.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:K.email||"-"}),x.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:K.role}),x.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:x.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[x.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:K.role,onChange:Z=>X(K.id,Z.target.value),children:[x.jsx("option",{value:"barbero",children:"barbero"}),x.jsx("option",{value:"admin",children:"admin"})]}),x.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Y(K),children:"Editar"}),x.jsx("button",{className:"w-full sm:w-auto rounded-full px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:()=>void re(K.id),disabled:K.role==="admin",children:"Eliminar"})]})})]},K.id))})]}),!R.length&&x.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Las cuentas creadas desde este panel generan usuario en Firebase Auth y perfil en Firestore automáticamente."})]})}function Mf({children:n}){const{role:e,logout:t,user:i,profileName:o}=Xo(),a=e?e.charAt(0).toUpperCase()+e.slice(1):null,u=o||i?.displayName||i?.email||a||"Perfil",d=Wl(),[p,y]=Q.useState(!1),v="/barberia/images/logo.png",E=({isActive:R})=>`nav-pill${R?" active":""}`,S=e==="admin"?"/admin/usuarios":"/clientes",F=async()=>{await t(),d("/login"),y(!1)},P=()=>y(!1),U=()=>y(R=>!R);return x.jsxs("div",{className:"app-shell",children:[x.jsx("nav",{className:"navbar",children:x.jsxs("div",{className:"inner",children:[x.jsxs("div",{className:"navbar-heading",children:[x.jsxs(Em,{to:S,className:"brand",onClick:P,children:[x.jsx("img",{src:v,alt:"Logotipo Look Fusion",className:"brand-logo"}),x.jsx("span",{className:"brand-wordmark",children:"LOOK FUSION"})]}),x.jsxs("button",{type:"button",className:"navbar-toggle",onClick:U,"aria-expanded":p,"aria-controls":"primary-nav",children:[x.jsx("span",{className:"sr-only",children:"Abrir menu"}),x.jsx("span",{className:"line"}),x.jsx("span",{className:"line"}),x.jsx("span",{className:"line"})]})]}),x.jsxs("div",{id:"primary-nav",className:`nav-links${p?" open":""}`,children:[x.jsx(wv,{to:"/clientes",className:E,onClick:P,children:"Clientes"}),e==="admin"&&x.jsx(wv,{to:"/admin/usuarios",className:E,onClick:P,children:"Dashboard"}),i&&x.jsx("span",{className:"nav-pill",children:u}),i&&x.jsx("button",{type:"button",className:"nav-pill",onClick:F,children:"Salir"})]})]})}),x.jsx("main",{className:"page-container",children:n})]})}function Hb(){return x.jsx(e1,{children:x.jsx(X1,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:x.jsxs(q1,{children:[x.jsx(Po,{path:"/",element:x.jsx(hp,{to:"/clientes",replace:!0})}),x.jsx(Po,{path:"/login",element:x.jsx(zb,{})}),x.jsx(Po,{path:"/clientes",element:x.jsx(Nf,{children:x.jsx(Mf,{children:x.jsx(ax,{})})})}),x.jsx(Po,{path:"/clientes/:id",element:x.jsx(Nf,{children:x.jsx(Mf,{children:x.jsx(Bb,{})})})}),x.jsx(Po,{path:"/admin/usuarios",element:x.jsx(Nf,{allowedRoles:["admin"],children:x.jsx(Mf,{children:x.jsx(Wb,{})})})})]})})})}cI.createRoot(document.getElementById("root")).render(x.jsx($v.StrictMode,{children:x.jsx(Hb,{})}));
