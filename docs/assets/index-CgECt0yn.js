function tI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function $v(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uf={exports:{}},Ya={},cf={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function nI(){if(Oy)return Oe;Oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,F={};function R(U,G,K){this.props=U,this.context=G,this.refs=F,this.updater=K||M}R.prototype.isReactComponent={},R.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},R.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function Y(){}Y.prototype=R.prototype;function Z(U,G,K){this.props=U,this.context=G,this.refs=F,this.updater=K||M}var X=Z.prototype=new Y;X.constructor=Z,N(X,R.prototype),X.isPureReactComponent=!0;var re=Array.isArray,Q=Object.prototype.hasOwnProperty,te={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(U,G,K){var se,ae={},we=null,De=null;if(G!=null)for(se in G.ref!==void 0&&(De=G.ref),G.key!==void 0&&(we=""+G.key),G)Q.call(G,se)&&!P.hasOwnProperty(se)&&(ae[se]=G[se]);var Ce=arguments.length-2;if(Ce===1)ae.children=K;else if(1<Ce){for(var be=Array(Ce),Ge=0;Ge<Ce;Ge++)be[Ge]=arguments[Ge+2];ae.children=be}if(U&&U.defaultProps)for(se in Ce=U.defaultProps,Ce)ae[se]===void 0&&(ae[se]=Ce[se]);return{$$typeof:n,type:U,key:we,ref:De,props:ae,_owner:te.current}}function C(U,G){return{$$typeof:n,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(K){return G[K]})}var D=/\/+/g;function A(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function Ne(U,G,K,se,ae){var we=typeof U;(we==="undefined"||we==="boolean")&&(U=null);var De=!1;if(U===null)De=!0;else switch(we){case"string":case"number":De=!0;break;case"object":switch(U.$$typeof){case n:case e:De=!0}}if(De)return De=U,ae=ae(De),U=se===""?"."+A(De,0):se,re(ae)?(K="",U!=null&&(K=U.replace(D,"$&/")+"/"),Ne(ae,G,K,"",function(Ge){return Ge})):ae!=null&&(b(ae)&&(ae=C(ae,K+(!ae.key||De&&De.key===ae.key?"":(""+ae.key).replace(D,"$&/")+"/")+U)),G.push(ae)),1;if(De=0,se=se===""?".":se+":",re(U))for(var Ce=0;Ce<U.length;Ce++){we=U[Ce];var be=se+A(we,Ce);De+=Ne(we,G,K,be,ae)}else if(be=S(U),typeof be=="function")for(U=be.call(U),Ce=0;!(we=U.next()).done;)we=we.value,be=se+A(we,Ce++),De+=Ne(we,G,K,be,ae);else if(we==="object")throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return De}function Xe(U,G,K){if(U==null)return U;var se=[],ae=0;return Ne(U,se,"","",function(we){return G.call(K,we,ae++)}),se}function je(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(K){(U._status===0||U._status===-1)&&(U._status=1,U._result=K)},function(K){(U._status===0||U._status===-1)&&(U._status=2,U._result=K)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var Me={current:null},le={transition:null},ve={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:le,ReactCurrentOwner:te};function he(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Xe,forEach:function(U,G,K){Xe(U,function(){G.apply(this,arguments)},K)},count:function(U){var G=0;return Xe(U,function(){G++}),G},toArray:function(U){return Xe(U,function(G){return G})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Oe.Component=R,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=Z,Oe.StrictMode=i,Oe.Suspense=p,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Oe.act=he,Oe.cloneElement=function(U,G,K){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var se=N({},U.props),ae=U.key,we=U.ref,De=U._owner;if(G!=null){if(G.ref!==void 0&&(we=G.ref,De=te.current),G.key!==void 0&&(ae=""+G.key),U.type&&U.type.defaultProps)var Ce=U.type.defaultProps;for(be in G)Q.call(G,be)&&!P.hasOwnProperty(be)&&(se[be]=G[be]===void 0&&Ce!==void 0?Ce[be]:G[be])}var be=arguments.length-2;if(be===1)se.children=K;else if(1<be){Ce=Array(be);for(var Ge=0;Ge<be;Ge++)Ce[Ge]=arguments[Ge+2];se.children=Ce}return{$$typeof:n,type:U.type,key:ae,ref:we,props:se,_owner:De}},Oe.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Oe.createElement=I,Oe.createFactory=function(U){var G=I.bind(null,U);return G.type=U,G},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(U){return{$$typeof:d,render:U}},Oe.isValidElement=b,Oe.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:je}},Oe.memo=function(U,G){return{$$typeof:y,type:U,compare:G===void 0?null:G}},Oe.startTransition=function(U){var G=le.transition;le.transition={};try{U()}finally{le.transition=G}},Oe.unstable_act=he,Oe.useCallback=function(U,G){return Me.current.useCallback(U,G)},Oe.useContext=function(U){return Me.current.useContext(U)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(U){return Me.current.useDeferredValue(U)},Oe.useEffect=function(U,G){return Me.current.useEffect(U,G)},Oe.useId=function(){return Me.current.useId()},Oe.useImperativeHandle=function(U,G,K){return Me.current.useImperativeHandle(U,G,K)},Oe.useInsertionEffect=function(U,G){return Me.current.useInsertionEffect(U,G)},Oe.useLayoutEffect=function(U,G){return Me.current.useLayoutEffect(U,G)},Oe.useMemo=function(U,G){return Me.current.useMemo(U,G)},Oe.useReducer=function(U,G,K){return Me.current.useReducer(U,G,K)},Oe.useRef=function(U){return Me.current.useRef(U)},Oe.useState=function(U){return Me.current.useState(U)},Oe.useSyncExternalStore=function(U,G,K){return Me.current.useSyncExternalStore(U,G,K)},Oe.useTransition=function(){return Me.current.useTransition()},Oe.version="18.3.1",Oe}var Dy;function wp(){return Dy||(Dy=1,cf.exports=nI()),cf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function rI(){if(Ly)return Ya;Ly=1;var n=wp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,y){var _,E={},S=null,M=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(M=p.ref);for(_ in p)i.call(p,_)&&!a.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:S,ref:M,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=u,Ya.jsxs=u,Ya}var Vy;function iI(){return Vy||(Vy=1,uf.exports=rI()),uf.exports}var x=iI(),H=wp();const qv=$v(H),sI=tI({__proto__:null,default:qv},[H]);var hc={},hf={exports:{}},an={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function oI(){return My||(My=1,(function(n){function e(le,ve){var he=le.length;le.push(ve);e:for(;0<he;){var U=he-1>>>1,G=le[U];if(0<o(G,ve))le[U]=ve,le[he]=G,he=U;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var ve=le[0],he=le.pop();if(he!==ve){le[0]=he;e:for(var U=0,G=le.length,K=G>>>1;U<K;){var se=2*(U+1)-1,ae=le[se],we=se+1,De=le[we];if(0>o(ae,he))we<G&&0>o(De,ae)?(le[U]=De,le[we]=he,U=we):(le[U]=ae,le[se]=he,U=se);else if(we<G&&0>o(De,he))le[U]=De,le[we]=he,U=we;else break e}}return ve}function o(le,ve){var he=le.sortIndex-ve.sortIndex;return he!==0?he:le.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],y=[],_=1,E=null,S=3,M=!1,N=!1,F=!1,R=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(le){for(var ve=t(y);ve!==null;){if(ve.callback===null)i(y);else if(ve.startTime<=le)i(y),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(y)}}function re(le){if(F=!1,X(le),!N)if(t(p)!==null)N=!0,je(Q);else{var ve=t(y);ve!==null&&Me(re,ve.startTime-le)}}function Q(le,ve){N=!1,F&&(F=!1,Y(I),I=-1),M=!0;var he=S;try{for(X(ve),E=t(p);E!==null&&(!(E.expirationTime>ve)||le&&!L());){var U=E.callback;if(typeof U=="function"){E.callback=null,S=E.priorityLevel;var G=U(E.expirationTime<=ve);ve=n.unstable_now(),typeof G=="function"?E.callback=G:E===t(p)&&i(p),X(ve)}else i(p);E=t(p)}if(E!==null)var K=!0;else{var se=t(y);se!==null&&Me(re,se.startTime-ve),K=!1}return K}finally{E=null,S=he,M=!1}}var te=!1,P=null,I=-1,C=5,b=-1;function L(){return!(n.unstable_now()-b<C)}function D(){if(P!==null){var le=n.unstable_now();b=le;var ve=!0;try{ve=P(!0,le)}finally{ve?A():(te=!1,P=null)}}else te=!1}var A;if(typeof Z=="function")A=function(){Z(D)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Xe=Ne.port2;Ne.port1.onmessage=D,A=function(){Xe.postMessage(null)}}else A=function(){R(D,0)};function je(le){P=le,te||(te=!0,A())}function Me(le,ve){I=R(function(){le(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){N||M||(N=!0,je(Q))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(le){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var he=S;S=ve;try{return le()}finally{S=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,ve){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var he=S;S=le;try{return ve()}finally{S=he}},n.unstable_scheduleCallback=function(le,ve,he){var U=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?U+he:U):he=U,le){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=he+G,le={id:_++,callback:ve,priorityLevel:le,startTime:he,expirationTime:G,sortIndex:-1},he>U?(le.sortIndex=he,e(y,le),t(p)===null&&le===t(y)&&(F?(Y(I),I=-1):F=!0,Me(re,he-U))):(le.sortIndex=G,e(p,le),N||M||(N=!0,je(Q))),le},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(le){var ve=S;return function(){var he=S;S=ve;try{return le.apply(this,arguments)}finally{S=he}}}})(ff)),ff}var Fy;function aI(){return Fy||(Fy=1,df.exports=oI()),df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function lI(){if(Uy)return an;Uy=1;var n=wp(),e=aI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function S(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function M(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,s,l,h){if(s===null||typeof s>"u"||M(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(r,s,l,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){R[r]=new F(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];R[s]=new F(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){R[r]=new F(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){R[r]=new F(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){R[r]=new F(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){R[r]=new F(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){R[r]=new F(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){R[r]=new F(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){R[r]=new F(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Y,Z);R[s]=new F(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Y,Z);R[s]=new F(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Y,Z);R[s]=new F(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){R[r]=new F(r,1,!1,r.toLowerCase(),null,!1,!1)}),R.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){R[r]=new F(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,l,h){var f=R.hasOwnProperty(s)?R[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),te=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),L=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),le=Symbol.iterator;function ve(r){return r===null||typeof r!="object"?null:(r=le&&r[le]||r["@@iterator"],typeof r=="function"?r:null)}var he=Object.assign,U;function G(r){if(U===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);U=s&&s[1]||""}return`
`+U+r}var K=!1;function se(r,s){if(!r||K)return"";K=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,k=g.length-1;1<=w&&0<=k&&f[w]!==g[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==g[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==g[k]){var O=`
`+f[w].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=w&&0<=k);break}}}finally{K=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?G(r):""}function ae(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=se(r.type,!1),r;case 11:return r=se(r.type.render,!1),r;case 1:return r=se(r.type,!0),r;default:return""}}function we(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case te:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Ne:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case D:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Xe:return s=r.displayName||null,s!==null?s:we(r.type)||"Memo";case je:s=r._payload,r=r._init;try{return we(r(s))}catch{}}return null}function De(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ce(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function be(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ge(r){var s=be(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Kt(r){r._valueTracker||(r._valueTracker=Ge(r))}function Er(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=be(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Tn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xt(r,s){var l=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Tr(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ce(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ra(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ia(r,s){ra(r,s);var l=Ce(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ls(r,s.type,l):s.hasOwnProperty("defaultValue")&&Ls(r,s.type,Ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Jl(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ls(r,s,l){(s!=="number"||Tn(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Ir=Array.isArray;function Sr(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Ce(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function sa(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Vs(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Ir(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Ce(l)}}function Ms(r,s){var l=Ce(s.value),h=Ce(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function oa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Rr,aa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ti(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hi=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(r){Hi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Wi[s]=Wi[r]})});function la(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Wi.hasOwnProperty(r)&&Wi[r]?(""+s).trim():s+"px"}function ua(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=la(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ca=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(r,s){if(s){if(ca[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Fs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Us=null,In=null,Zn=null;function js(r){if(r=Va(r)){if(typeof Us!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Au(s),Us(r.stateNode,r.type,s))}}function er(r){In?Zn?Zn.push(r):Zn=[r]:In=r}function fa(){if(In){var r=In,s=Zn;if(Zn=In=null,js(r),s)for(r=0;r<s.length;r++)js(s[r])}}function Gi(r,s){return r(s)}function pa(){}var Ar=!1;function ma(r,s,l){if(Ar)return r(s,l);Ar=!0;try{return Gi(r,s,l)}finally{Ar=!1,(In!==null||Zn!==null)&&(pa(),fa())}}function ct(r,s){var l=r.stateNode;if(l===null)return null;var h=Au(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Bs=!1;if(d)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{Bs=!1}function Qi(r,s,l,h,f,g,w,k,O){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(ne){this.onError(ne)}}var Ji=!1,zs=null,Ln=!1,ga=null,Vh={onError:function(r){Ji=!0,zs=r}};function $s(r,s,l,h,f,g,w,k,O){Ji=!1,zs=null,Qi.apply(Vh,arguments)}function Yl(r,s,l,h,f,g,w,k,O){if($s.apply(this,arguments),Ji){if(Ji){var $=zs;Ji=!1,zs=null}else throw Error(t(198));Ln||(Ln=!0,ga=$)}}function Vn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Yi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mn(r){if(Vn(r)!==r)throw Error(t(188))}function Xl(r){var s=r.alternate;if(!s){if(s=Vn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Mn(f),r;if(g===h)return Mn(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var w=!1,k=f.child;k;){if(k===l){w=!0,l=f,h=g;break}if(k===h){w=!0,h=f,l=g;break}k=k.sibling}if(!w){for(k=g.child;k;){if(k===l){w=!0,l=g,h=f;break}if(k===h){w=!0,h=g,l=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ya(r){return r=Xl(r),r!==null?qs(r):null}function qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=qs(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,_a=e.unstable_cancelCallback,Zl=e.unstable_shouldYield,Mh=e.unstable_requestPaint,Je=e.unstable_now,eu=e.unstable_getCurrentPriorityLevel,Xi=e.unstable_ImmediatePriority,ni=e.unstable_UserBlockingPriority,Sn=e.unstable_NormalPriority,va=e.unstable_LowPriority,tu=e.unstable_IdlePriority,Zi=null,fn=null;function nu(r){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Zi,r,void 0,(r.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:iu,wa=Math.log,ru=Math.LN2;function iu(r){return r>>>=0,r===0?32:31-(wa(r)/ru|0)|0}var Hs=64,Ks=4194304;function ri(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function es(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=l&268435455;if(w!==0){var k=w&~f;k!==0?h=ri(k):(g&=w,g!==0&&(h=ri(g)))}else w=l&~f,w!==0?h=ri(w):g!==0&&(h=ri(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Gt(s),f=1<<l,h|=r[l],s&=~f;return h}function Fh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cr(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Gt(g),k=1<<w,O=f[w];O===-1?((k&l)===0||(k&h)!==0)&&(f[w]=Fh(k,s)):O<=s&&(r.expiredLanes|=k),g&=~k}}function pn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ts(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function ii(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function si(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Gt(s),r[s]=l}function Qe(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Gt(l),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~g}}function oi(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Gt(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Fe=0;function ai(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var su,Gs,ou,au,lu,Ea=!1,tr=[],Pt=null,Fn=null,Un=null,li=new Map,Rn=new Map,nr=[],Uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(r,s){switch(r){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":li.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(s.pointerId)}}function Zt(r,s,l,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Va(s),s!==null&&Gs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function jh(r,s,l,h,f){switch(s){case"focusin":return Pt=Zt(Pt,r,s,l,h,f),!0;case"dragenter":return Fn=Zt(Fn,r,s,l,h,f),!0;case"mouseover":return Un=Zt(Un,r,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return li.set(g,Zt(li.get(g)||null,r,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Rn.set(g,Zt(Rn.get(g)||null,r,s,l,h,f)),!0}return!1}function cu(r){var s=os(r.target);if(s!==null){var l=Vn(s);if(l!==null){if(s=l.tag,s===13){if(s=Yi(l),s!==null){r.blockedOn=s,lu(r.priority,function(){ou(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function kr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Ki=h,l.target.dispatchEvent(h),Ki=null}else return s=Va(l),s!==null&&Gs(s),r.blockedOn=l,!1;s.shift()}return!0}function ns(r,s,l){kr(r)&&l.delete(s)}function hu(){Ea=!1,Pt!==null&&kr(Pt)&&(Pt=null),Fn!==null&&kr(Fn)&&(Fn=null),Un!==null&&kr(Un)&&(Un=null),li.forEach(ns),Rn.forEach(ns)}function jn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hu)))}function Bn(r){function s(f){return jn(f,r)}if(0<tr.length){jn(tr[0],r);for(var l=1;l<tr.length;l++){var h=tr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Pt!==null&&jn(Pt,r),Fn!==null&&jn(Fn,r),Un!==null&&jn(Un,r),li.forEach(s),Rn.forEach(s),l=0;l<nr.length;l++)h=nr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<nr.length&&(l=nr[0],l.blockedOn===null);)cu(l),l.blockedOn===null&&nr.shift()}var Pr=re.ReactCurrentBatchConfig,ui=!0;function nt(r,s,l,h){var f=Fe,g=Pr.transition;Pr.transition=null;try{Fe=1,Ta(r,s,l,h)}finally{Fe=f,Pr.transition=g}}function Bh(r,s,l,h){var f=Fe,g=Pr.transition;Pr.transition=null;try{Fe=4,Ta(r,s,l,h)}finally{Fe=f,Pr.transition=g}}function Ta(r,s,l,h){if(ui){var f=Qs(r,s,l,h);if(f===null)Xh(r,s,h,rs,l),uu(r,h);else if(jh(f,r,s,l,h))h.stopPropagation();else if(uu(r,h),s&4&&-1<Uh.indexOf(r)){for(;f!==null;){var g=Va(f);if(g!==null&&su(g),g=Qs(r,s,l,h),g===null&&Xh(r,s,h,rs,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else Xh(r,s,h,null,l)}}var rs=null;function Qs(r,s,l,h){if(rs=null,r=Fs(h),r=os(r),r!==null)if(s=Vn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Yi(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return rs=r,null}function Ia(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eu()){case Xi:return 1;case ni:return 4;case Sn:case va:return 16;case tu:return 536870912;default:return 16}default:return 16}}var mn=null,Js=null,en=null;function Sa(){if(en)return en;var r,s=Js,l=s.length,h,f="value"in mn?mn.value:mn.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(h=1;h<=w&&s[l-h]===f[g-h];h++);return en=f.slice(r,1<h?1-h:void 0)}function Ys(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function rr(){return!0}function Ra(){return!1}function Nt(r){function s(l,h,f,g,w){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?rr:Ra,this.isPropagationStopped=Ra,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Nt(zn),ir=he({},zn,{view:0,detail:0}),zh=Nt(ir),Zs,Nr,ci,is=he({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ci&&(ci&&r.type==="mousemove"?(Zs=r.screenX-ci.screenX,Nr=r.screenY-ci.screenY):Nr=Zs=0,ci=r),Zs)},movementY:function(r){return"movementY"in r?r.movementY:Nr}}),eo=Nt(is),Aa=he({},is,{dataTransfer:0}),du=Nt(Aa),to=he({},ir,{relatedTarget:0}),no=Nt(to),fu=he({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),xr=Nt(fu),pu=he({},zn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mu=Nt(pu),gu=he({},zn,{data:0}),Ca=Nt(gu),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=yu[r])?!!s[r]:!1}function sr(){return _u}var c=he({},ir,{key:function(r){if(r.key){var s=ro[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(r){return r.type==="keypress"?Ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Nt(c),v=he({},is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(v),j=he({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),W=Nt(j),ce=he({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Nt(ce),wt=he({},is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Nt(wt),St=[9,13,27,32],ft=d&&"CompositionEvent"in window,An=null;d&&"documentMode"in document&&(An=document.documentMode);var gn=d&&"TextEvent"in window&&!An,ss=d&&(!ft||An&&8<An&&11>=An),io=" ",Cm=!1;function km(r,s){switch(r){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function X0(r,s){switch(r){case"compositionend":return Pm(s);case"keypress":return s.which!==32?null:(Cm=!0,io);case"textInput":return r=s.data,r===io&&Cm?null:r;default:return null}}function Z0(r,s){if(so)return r==="compositionend"||!ft&&km(r,s)?(r=Sa(),en=Js=mn=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ss&&s.locale!=="ko"?null:s.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!eT[r.type]:s==="textarea"}function xm(r,s,l,h){er(h),s=Iu(s,"onChange"),0<s.length&&(l=new Xs("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ka=null,Pa=null;function tT(r){Qm(r,0)}function vu(r){var s=co(r);if(Er(s))return r}function nT(r,s){if(r==="change")return s}var bm=!1;if(d){var $h;if(d){var qh="oninput"in document;if(!qh){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),qh=typeof Om.oninput=="function"}$h=qh}else $h=!1;bm=$h&&(!document.documentMode||9<document.documentMode)}function Dm(){ka&&(ka.detachEvent("onpropertychange",Lm),Pa=ka=null)}function Lm(r){if(r.propertyName==="value"&&vu(Pa)){var s=[];xm(s,Pa,r,Fs(r)),ma(tT,s)}}function rT(r,s,l){r==="focusin"?(Dm(),ka=s,Pa=l,ka.attachEvent("onpropertychange",Lm)):r==="focusout"&&Dm()}function iT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Pa)}function sT(r,s){if(r==="click")return vu(s)}function oT(r,s){if(r==="input"||r==="change")return vu(s)}function aT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var $n=typeof Object.is=="function"?Object.is:aT;function Na(r,s){if($n(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!$n(r[f],s[f]))return!1}return!0}function Vm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mm(r,s){var l=Vm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vm(l)}}function Fm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Um(){for(var r=window,s=Tn();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Tn(r.document)}return s}function Wh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function lT(r){var s=Um(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Fm(l.ownerDocument.documentElement,l)){if(h!==null&&Wh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Mm(l,g);var w=Mm(l,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var uT=d&&"documentMode"in document&&11>=document.documentMode,oo=null,Hh=null,xa=null,Kh=!1;function jm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kh||oo==null||oo!==Tn(h)||(h=oo,"selectionStart"in h&&Wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xa&&Na(xa,h)||(xa=h,h=Iu(Hh,"onSelect"),0<h.length&&(s=new Xs("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=oo)))}function wu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ao={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Gh={},Bm={};d&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Eu(r){if(Gh[r])return Gh[r];if(!ao[r])return r;var s=ao[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bm)return Gh[r]=s[l];return r}var zm=Eu("animationend"),$m=Eu("animationiteration"),qm=Eu("animationstart"),Wm=Eu("transitionend"),Hm=new Map,Km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(r,s){Hm.set(r,s),a(s,[r])}for(var Qh=0;Qh<Km.length;Qh++){var Jh=Km[Qh],cT=Jh.toLowerCase(),hT=Jh[0].toUpperCase()+Jh.slice(1);hi(cT,"on"+hT)}hi(zm,"onAnimationEnd"),hi($m,"onAnimationIteration"),hi(qm,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Wm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Gm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Yl(h,s,void 0,r),r.currentTarget=null}function Qm(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var k=h[w],O=k.instance,$=k.currentTarget;if(k=k.listener,O!==g&&f.isPropagationStopped())break e;Gm(f,k,$),g=O}else for(w=0;w<h.length;w++){if(k=h[w],O=k.instance,$=k.currentTarget,k=k.listener,O!==g&&f.isPropagationStopped())break e;Gm(f,k,$),g=O}}}if(Ln)throw r=ga,Ln=!1,ga=null,r}function Ze(r,s){var l=s[id];l===void 0&&(l=s[id]=new Set);var h=r+"__bubble";l.has(h)||(Jm(s,r,2,!1),l.add(h))}function Yh(r,s,l){var h=0;s&&(h|=4),Jm(l,r,h,s)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Oa(r){if(!r[Tu]){r[Tu]=!0,i.forEach(function(l){l!=="selectionchange"&&(dT.has(l)||Yh(l,!1,r),Yh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Tu]||(s[Tu]=!0,Yh("selectionchange",!1,s))}}function Jm(r,s,l,h){switch(Ia(s)){case 1:var f=nt;break;case 4:f=Bh;break;default:f=Ta}l=f.bind(null,s,l,r),f=void 0,!Bs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Xh(r,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var O=w.tag;if((O===3||O===4)&&(O=w.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;w=w.return}for(;k!==null;){if(w=os(k),w===null)return;if(O=w.tag,O===5||O===6){h=g=w;continue e}k=k.parentNode}}h=h.return}ma(function(){var $=g,ne=Fs(l),oe=[];e:{var ee=Hm.get(r);if(ee!==void 0){var fe=Xs,me=r;switch(r){case"keypress":if(Ys(l)===0)break e;case"keydown":case"keyup":fe=m;break;case"focusin":me="focus",fe=no;break;case"focusout":me="blur",fe=no;break;case"beforeblur":case"afterblur":fe=no;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=W;break;case zm:case $m:case qm:fe=xr;break;case Wm:fe=He;break;case"scroll":fe=zh;break;case"wheel":fe=Be;break;case"copy":case"cut":case"paste":fe=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var ge=(s&4)!==0,ht=!ge&&r==="scroll",B=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var V=$,z;V!==null;){z=V;var ue=z.stateNode;if(z.tag===5&&ue!==null&&(z=ue,B!==null&&(ue=ct(V,B),ue!=null&&ge.push(Da(V,ue,z)))),ht)break;V=V.return}0<ge.length&&(ee=new fe(ee,me,null,l,ne),oe.push({event:ee,listeners:ge}))}}if((s&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",fe=r==="mouseout"||r==="pointerout",ee&&l!==Ki&&(me=l.relatedTarget||l.fromElement)&&(os(me)||me[br]))break e;if((fe||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,fe?(me=l.relatedTarget||l.toElement,fe=$,me=me?os(me):null,me!==null&&(ht=Vn(me),me!==ht||me.tag!==5&&me.tag!==6)&&(me=null)):(fe=null,me=$),fe!==me)){if(ge=eo,ue="onMouseLeave",B="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(ge=T,ue="onPointerLeave",B="onPointerEnter",V="pointer"),ht=fe==null?ee:co(fe),z=me==null?ee:co(me),ee=new ge(ue,V+"leave",fe,l,ne),ee.target=ht,ee.relatedTarget=z,ue=null,os(ne)===$&&(ge=new ge(B,V+"enter",me,l,ne),ge.target=z,ge.relatedTarget=ht,ue=ge),ht=ue,fe&&me)t:{for(ge=fe,B=me,V=0,z=ge;z;z=lo(z))V++;for(z=0,ue=B;ue;ue=lo(ue))z++;for(;0<V-z;)ge=lo(ge),V--;for(;0<z-V;)B=lo(B),z--;for(;V--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=lo(ge),B=lo(B)}ge=null}else ge=null;fe!==null&&Ym(oe,ee,fe,ge,!1),me!==null&&ht!==null&&Ym(oe,ht,me,ge,!0)}}e:{if(ee=$?co($):window,fe=ee.nodeName&&ee.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ee.type==="file")var _e=nT;else if(Nm(ee))if(bm)_e=oT;else{_e=iT;var Te=rT}else(fe=ee.nodeName)&&fe.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(_e=sT);if(_e&&(_e=_e(r,$))){xm(oe,_e,l,ne);break e}Te&&Te(r,ee,$),r==="focusout"&&(Te=ee._wrapperState)&&Te.controlled&&ee.type==="number"&&Ls(ee,"number",ee.value)}switch(Te=$?co($):window,r){case"focusin":(Nm(Te)||Te.contentEditable==="true")&&(oo=Te,Hh=$,xa=null);break;case"focusout":xa=Hh=oo=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,jm(oe,l,ne);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":jm(oe,l,ne)}var Ie;if(ft)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else so?km(r,l)&&(Re="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(ss&&l.locale!=="ko"&&(so||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&so&&(Ie=Sa()):(mn=ne,Js="value"in mn?mn.value:mn.textContent,so=!0)),Te=Iu($,Re),0<Te.length&&(Re=new Ca(Re,r,null,l,ne),oe.push({event:Re,listeners:Te}),Ie?Re.data=Ie:(Ie=Pm(l),Ie!==null&&(Re.data=Ie)))),(Ie=gn?X0(r,l):Z0(r,l))&&($=Iu($,"onBeforeInput"),0<$.length&&(ne=new Ca("onBeforeInput","beforeinput",null,l,ne),oe.push({event:ne,listeners:$}),ne.data=Ie))}Qm(oe,s)})}function Da(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Iu(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ct(r,l),g!=null&&h.unshift(Da(r,g,f)),g=ct(r,s),g!=null&&h.push(Da(r,g,f))),r=r.return}return h}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ym(r,s,l,h,f){for(var g=s._reactName,w=[];l!==null&&l!==h;){var k=l,O=k.alternate,$=k.stateNode;if(O!==null&&O===h)break;k.tag===5&&$!==null&&(k=$,f?(O=ct(l,g),O!=null&&w.unshift(Da(l,O,k))):f||(O=ct(l,g),O!=null&&w.push(Da(l,O,k)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var fT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function Xm(r){return(typeof r=="string"?r:""+r).replace(fT,`
`).replace(pT,"")}function Su(r,s,l){if(s=Xm(s),Xm(r)!==s&&l)throw Error(t(425))}function Ru(){}var Zh=null,ed=null;function td(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(r){return Zm.resolve(null).then(r).catch(yT)}:nd;function yT(r){setTimeout(function(){throw r})}function rd(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Bn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Bn(s)}function di(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function eg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var uo=Math.random().toString(36).slice(2),or="__reactFiber$"+uo,La="__reactProps$"+uo,br="__reactContainer$"+uo,id="__reactEvents$"+uo,_T="__reactListeners$"+uo,vT="__reactHandles$"+uo;function os(r){var s=r[or];if(s)return s;for(var l=r.parentNode;l;){if(s=l[br]||l[or]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=eg(r);r!==null;){if(l=r[or])return l;r=eg(r)}return s}r=l,l=r.parentNode}return null}function Va(r){return r=r[or]||r[br],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Au(r){return r[La]||null}var sd=[],ho=-1;function fi(r){return{current:r}}function et(r){0>ho||(r.current=sd[ho],sd[ho]=null,ho--)}function Ye(r,s){ho++,sd[ho]=r.current,r.current=s}var pi={},Mt=fi(pi),tn=fi(!1),as=pi;function fo(r,s){var l=r.type.contextTypes;if(!l)return pi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function nn(r){return r=r.childContextTypes,r!=null}function Cu(){et(tn),et(Mt)}function tg(r,s,l){if(Mt.current!==pi)throw Error(t(168));Ye(Mt,s),Ye(tn,l)}function ng(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,De(r)||"Unknown",f));return he({},l,h)}function ku(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pi,as=Mt.current,Ye(Mt,r),Ye(tn,tn.current),!0}function rg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=ng(r,s,as),h.__reactInternalMemoizedMergedChildContext=r,et(tn),et(Mt),Ye(Mt,r)):et(tn),Ye(tn,l)}var Or=null,Pu=!1,od=!1;function ig(r){Or===null?Or=[r]:Or.push(r)}function wT(r){Pu=!0,ig(r)}function mi(){if(!od&&Or!==null){od=!0;var r=0,s=Fe;try{var l=Or;for(Fe=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Or=null,Pu=!1}catch(f){throw Or!==null&&(Or=Or.slice(r+1)),Ws(Xi,mi),f}finally{Fe=s,od=!1}}return null}var po=[],mo=0,Nu=null,xu=0,Cn=[],kn=0,ls=null,Dr=1,Lr="";function us(r,s){po[mo++]=xu,po[mo++]=Nu,Nu=r,xu=s}function sg(r,s,l){Cn[kn++]=Dr,Cn[kn++]=Lr,Cn[kn++]=ls,ls=r;var h=Dr;r=Lr;var f=32-Gt(h)-1;h&=~(1<<f),l+=1;var g=32-Gt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Dr=1<<32-Gt(s)+f|l<<f|h,Lr=g+r}else Dr=1<<g|l<<f|h,Lr=r}function ad(r){r.return!==null&&(us(r,1),sg(r,1,0))}function ld(r){for(;r===Nu;)Nu=po[--mo],po[mo]=null,xu=po[--mo],po[mo]=null;for(;r===ls;)ls=Cn[--kn],Cn[kn]=null,Lr=Cn[--kn],Cn[kn]=null,Dr=Cn[--kn],Cn[kn]=null}var yn=null,_n=null,rt=!1,qn=null;function og(r,s){var l=bn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function ag(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,yn=r,_n=di(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,yn=r,_n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ls!==null?{id:Dr,overflow:Lr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=bn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,yn=r,_n=null,!0):!1;default:return!1}}function ud(r){return(r.mode&1)!==0&&(r.flags&128)===0}function cd(r){if(rt){var s=_n;if(s){var l=s;if(!ag(r,s)){if(ud(r))throw Error(t(418));s=di(l.nextSibling);var h=yn;s&&ag(r,s)?og(h,l):(r.flags=r.flags&-4097|2,rt=!1,yn=r)}}else{if(ud(r))throw Error(t(418));r.flags=r.flags&-4097|2,rt=!1,yn=r}}}function lg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function bu(r){if(r!==yn)return!1;if(!rt)return lg(r),rt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!td(r.type,r.memoizedProps)),s&&(s=_n)){if(ud(r))throw ug(),Error(t(418));for(;s;)og(r,s),s=di(s.nextSibling)}if(lg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){_n=di(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}_n=null}}else _n=yn?di(r.stateNode.nextSibling):null;return!0}function ug(){for(var r=_n;r;)r=di(r.nextSibling)}function go(){_n=yn=null,rt=!1}function hd(r){qn===null?qn=[r]:qn.push(r)}var ET=re.ReactCurrentBatchConfig;function Ma(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var k=f.refs;w===null?delete k[g]:k[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Ou(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function cg(r){var s=r._init;return s(r._payload)}function hg(r){function s(B,V){if(r){var z=B.deletions;z===null?(B.deletions=[V],B.flags|=16):z.push(V)}}function l(B,V){if(!r)return null;for(;V!==null;)s(B,V),V=V.sibling;return null}function h(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function f(B,V){return B=Ii(B,V),B.index=0,B.sibling=null,B}function g(B,V,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<V?(B.flags|=2,V):z):(B.flags|=2,V)):(B.flags|=1048576,V)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function k(B,V,z,ue){return V===null||V.tag!==6?(V=nf(z,B.mode,ue),V.return=B,V):(V=f(V,z),V.return=B,V)}function O(B,V,z,ue){var _e=z.type;return _e===P?ne(B,V,z.props.children,ue,z.key):V!==null&&(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===je&&cg(_e)===V.type)?(ue=f(V,z.props),ue.ref=Ma(B,V,z),ue.return=B,ue):(ue=rc(z.type,z.key,z.props,null,B.mode,ue),ue.ref=Ma(B,V,z),ue.return=B,ue)}function $(B,V,z,ue){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=rf(z,B.mode,ue),V.return=B,V):(V=f(V,z.children||[]),V.return=B,V)}function ne(B,V,z,ue,_e){return V===null||V.tag!==7?(V=ys(z,B.mode,ue,_e),V.return=B,V):(V=f(V,z),V.return=B,V)}function oe(B,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=nf(""+V,B.mode,z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Q:return z=rc(V.type,V.key,V.props,null,B.mode,z),z.ref=Ma(B,null,V),z.return=B,z;case te:return V=rf(V,B.mode,z),V.return=B,V;case je:var ue=V._init;return oe(B,ue(V._payload),z)}if(Ir(V)||ve(V))return V=ys(V,B.mode,z,null),V.return=B,V;Ou(B,V)}return null}function ee(B,V,z,ue){var _e=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return _e!==null?null:k(B,V,""+z,ue);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Q:return z.key===_e?O(B,V,z,ue):null;case te:return z.key===_e?$(B,V,z,ue):null;case je:return _e=z._init,ee(B,V,_e(z._payload),ue)}if(Ir(z)||ve(z))return _e!==null?null:ne(B,V,z,ue,null);Ou(B,z)}return null}function fe(B,V,z,ue,_e){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return B=B.get(z)||null,k(V,B,""+ue,_e);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case Q:return B=B.get(ue.key===null?z:ue.key)||null,O(V,B,ue,_e);case te:return B=B.get(ue.key===null?z:ue.key)||null,$(V,B,ue,_e);case je:var Te=ue._init;return fe(B,V,z,Te(ue._payload),_e)}if(Ir(ue)||ve(ue))return B=B.get(z)||null,ne(V,B,ue,_e,null);Ou(V,ue)}return null}function me(B,V,z,ue){for(var _e=null,Te=null,Ie=V,Re=V=0,Ct=null;Ie!==null&&Re<z.length;Re++){Ie.index>Re?(Ct=Ie,Ie=null):Ct=Ie.sibling;var qe=ee(B,Ie,z[Re],ue);if(qe===null){Ie===null&&(Ie=Ct);break}r&&Ie&&qe.alternate===null&&s(B,Ie),V=g(qe,V,Re),Te===null?_e=qe:Te.sibling=qe,Te=qe,Ie=Ct}if(Re===z.length)return l(B,Ie),rt&&us(B,Re),_e;if(Ie===null){for(;Re<z.length;Re++)Ie=oe(B,z[Re],ue),Ie!==null&&(V=g(Ie,V,Re),Te===null?_e=Ie:Te.sibling=Ie,Te=Ie);return rt&&us(B,Re),_e}for(Ie=h(B,Ie);Re<z.length;Re++)Ct=fe(Ie,B,Re,z[Re],ue),Ct!==null&&(r&&Ct.alternate!==null&&Ie.delete(Ct.key===null?Re:Ct.key),V=g(Ct,V,Re),Te===null?_e=Ct:Te.sibling=Ct,Te=Ct);return r&&Ie.forEach(function(Si){return s(B,Si)}),rt&&us(B,Re),_e}function ge(B,V,z,ue){var _e=ve(z);if(typeof _e!="function")throw Error(t(150));if(z=_e.call(z),z==null)throw Error(t(151));for(var Te=_e=null,Ie=V,Re=V=0,Ct=null,qe=z.next();Ie!==null&&!qe.done;Re++,qe=z.next()){Ie.index>Re?(Ct=Ie,Ie=null):Ct=Ie.sibling;var Si=ee(B,Ie,qe.value,ue);if(Si===null){Ie===null&&(Ie=Ct);break}r&&Ie&&Si.alternate===null&&s(B,Ie),V=g(Si,V,Re),Te===null?_e=Si:Te.sibling=Si,Te=Si,Ie=Ct}if(qe.done)return l(B,Ie),rt&&us(B,Re),_e;if(Ie===null){for(;!qe.done;Re++,qe=z.next())qe=oe(B,qe.value,ue),qe!==null&&(V=g(qe,V,Re),Te===null?_e=qe:Te.sibling=qe,Te=qe);return rt&&us(B,Re),_e}for(Ie=h(B,Ie);!qe.done;Re++,qe=z.next())qe=fe(Ie,B,Re,qe.value,ue),qe!==null&&(r&&qe.alternate!==null&&Ie.delete(qe.key===null?Re:qe.key),V=g(qe,V,Re),Te===null?_e=qe:Te.sibling=qe,Te=qe);return r&&Ie.forEach(function(eI){return s(B,eI)}),rt&&us(B,Re),_e}function ht(B,V,z,ue){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Q:e:{for(var _e=z.key,Te=V;Te!==null;){if(Te.key===_e){if(_e=z.type,_e===P){if(Te.tag===7){l(B,Te.sibling),V=f(Te,z.props.children),V.return=B,B=V;break e}}else if(Te.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===je&&cg(_e)===Te.type){l(B,Te.sibling),V=f(Te,z.props),V.ref=Ma(B,Te,z),V.return=B,B=V;break e}l(B,Te);break}else s(B,Te);Te=Te.sibling}z.type===P?(V=ys(z.props.children,B.mode,ue,z.key),V.return=B,B=V):(ue=rc(z.type,z.key,z.props,null,B.mode,ue),ue.ref=Ma(B,V,z),ue.return=B,B=ue)}return w(B);case te:e:{for(Te=z.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){l(B,V.sibling),V=f(V,z.children||[]),V.return=B,B=V;break e}else{l(B,V);break}else s(B,V);V=V.sibling}V=rf(z,B.mode,ue),V.return=B,B=V}return w(B);case je:return Te=z._init,ht(B,V,Te(z._payload),ue)}if(Ir(z))return me(B,V,z,ue);if(ve(z))return ge(B,V,z,ue);Ou(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(l(B,V.sibling),V=f(V,z),V.return=B,B=V):(l(B,V),V=nf(z,B.mode,ue),V.return=B,B=V),w(B)):l(B,V)}return ht}var yo=hg(!0),dg=hg(!1),Du=fi(null),Lu=null,_o=null,dd=null;function fd(){dd=_o=Lu=null}function pd(r){var s=Du.current;et(Du),r._currentValue=s}function md(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function vo(r,s){Lu=r,dd=_o=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(rn=!0),r.firstContext=null)}function Pn(r){var s=r._currentValue;if(dd!==r)if(r={context:r,memoizedValue:s,next:null},_o===null){if(Lu===null)throw Error(t(308));_o=r,Lu.dependencies={lanes:0,firstContext:r}}else _o=_o.next=r;return s}var cs=null;function gd(r){cs===null?cs=[r]:cs.push(r)}function fg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,gd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Vr(r,h)}function Vr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var gi=!1;function yd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Mr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function yi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,($e&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Vr(r,l)}return f=h.interleaved,f===null?(s.next=s,gd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Vr(r,l)}function Vu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,oi(r,l)}}function mg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Mu(r,s,l,h){var f=r.updateQueue;gi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var O=k,$=O.next;O.next=null,w===null?g=$:w.next=$,w=O;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==w&&(k===null?ne.firstBaseUpdate=$:k.next=$,ne.lastBaseUpdate=O))}if(g!==null){var oe=f.baseState;w=0,ne=$=O=null,k=g;do{var ee=k.lane,fe=k.eventTime;if((h&ee)===ee){ne!==null&&(ne=ne.next={eventTime:fe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var me=r,ge=k;switch(ee=s,fe=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){oe=me.call(fe,oe,ee);break e}oe=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,ee=typeof me=="function"?me.call(fe,oe,ee):me,ee==null)break e;oe=he({},oe,ee);break e;case 2:gi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,ee=f.effects,ee===null?f.effects=[k]:ee.push(k))}else fe={eventTime:fe,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?($=ne=fe,O=oe):ne=ne.next=fe,w|=ee;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(ne===null&&(O=oe),f.baseState=O,f.firstBaseUpdate=$,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);fs|=w,r.lanes=w,r.memoizedState=oe}}function gg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Fa={},ar=fi(Fa),Ua=fi(Fa),ja=fi(Fa);function hs(r){if(r===Fa)throw Error(t(174));return r}function _d(r,s){switch(Ye(ja,s),Ye(Ua,r),Ye(ar,Fa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}et(ar),Ye(ar,s)}function wo(){et(ar),et(Ua),et(ja)}function yg(r){hs(ja.current);var s=hs(ar.current),l=vt(s,r.type);s!==l&&(Ye(Ua,r),Ye(ar,l))}function vd(r){Ua.current===r&&(et(ar),et(Ua))}var it=fi(0);function Fu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wd=[];function Ed(){for(var r=0;r<wd.length;r++)wd[r]._workInProgressVersionPrimary=null;wd.length=0}var Uu=re.ReactCurrentDispatcher,Td=re.ReactCurrentBatchConfig,ds=0,st=null,Et=null,Rt=null,ju=!1,Ba=!1,za=0,TT=0;function Ft(){throw Error(t(321))}function Id(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!$n(r[l],s[l]))return!1;return!0}function Sd(r,s,l,h,f,g){if(ds=g,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uu.current=r===null||r.memoizedState===null?AT:CT,r=l(h,f),Ba){g=0;do{if(Ba=!1,za=0,25<=g)throw Error(t(301));g+=1,Rt=Et=null,s.updateQueue=null,Uu.current=kT,r=l(h,f)}while(Ba)}if(Uu.current=$u,s=Et!==null&&Et.next!==null,ds=0,Rt=Et=st=null,ju=!1,s)throw Error(t(300));return r}function Rd(){var r=za!==0;return za=0,r}function lr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?st.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function Nn(){if(Et===null){var r=st.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var s=Rt===null?st.memoizedState:Rt.next;if(s!==null)Rt=s,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?st.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function $a(r,s){return typeof s=="function"?s(r):s}function Ad(r){var s=Nn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Et,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var k=w=null,O=null,$=g;do{var ne=$.lane;if((ds&ne)===ne)O!==null&&(O=O.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var oe={lane:ne,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};O===null?(k=O=oe,w=h):O=O.next=oe,st.lanes|=ne,fs|=ne}$=$.next}while($!==null&&$!==g);O===null?w=h:O.next=k,$n(h,s.memoizedState)||(rn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=O,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do g=f.lane,st.lanes|=g,fs|=g,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Cd(r){var s=Nn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);$n(g,s.memoizedState)||(rn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function _g(){}function vg(r,s){var l=st,h=Nn(),f=s(),g=!$n(h.memoizedState,f);if(g&&(h.memoizedState=f,rn=!0),h=h.queue,kd(Tg.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,qa(9,Eg.bind(null,l,h,f,s),void 0,null),At===null)throw Error(t(349));(ds&30)!==0||wg(l,s,f)}return f}function wg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Eg(r,s,l,h){s.value=l,s.getSnapshot=h,Ig(s)&&Sg(r)}function Tg(r,s,l){return l(function(){Ig(s)&&Sg(r)})}function Ig(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!$n(r,l)}catch{return!0}}function Sg(r){var s=Vr(r,1);s!==null&&Gn(s,r,1,-1)}function Rg(r){var s=lr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},s.queue=r,r=r.dispatch=RT.bind(null,st,r),[s.memoizedState,r]}function qa(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Ag(){return Nn().memoizedState}function Bu(r,s,l,h){var f=lr();st.flags|=r,f.memoizedState=qa(1|s,l,void 0,h===void 0?null:h)}function zu(r,s,l,h){var f=Nn();h=h===void 0?null:h;var g=void 0;if(Et!==null){var w=Et.memoizedState;if(g=w.destroy,h!==null&&Id(h,w.deps)){f.memoizedState=qa(s,l,g,h);return}}st.flags|=r,f.memoizedState=qa(1|s,l,g,h)}function Cg(r,s){return Bu(8390656,8,r,s)}function kd(r,s){return zu(2048,8,r,s)}function kg(r,s){return zu(4,2,r,s)}function Pg(r,s){return zu(4,4,r,s)}function Ng(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function xg(r,s,l){return l=l!=null?l.concat([r]):null,zu(4,4,Ng.bind(null,s,r),l)}function Pd(){}function bg(r,s){var l=Nn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Og(r,s){var l=Nn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Id(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Dg(r,s,l){return(ds&21)===0?(r.baseState&&(r.baseState=!1,rn=!0),r.memoizedState=l):($n(l,s)||(l=ts(),st.lanes|=l,fs|=l,r.baseState=!0),s)}function IT(r,s){var l=Fe;Fe=l!==0&&4>l?l:4,r(!0);var h=Td.transition;Td.transition={};try{r(!1),s()}finally{Fe=l,Td.transition=h}}function Lg(){return Nn().memoizedState}function ST(r,s,l){var h=Ei(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Vg(r))Mg(s,l);else if(l=fg(r,s,l,h),l!==null){var f=Yt();Gn(l,r,h,f),Fg(l,s,h)}}function RT(r,s,l){var h=Ei(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vg(r))Mg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,k=g(w,l);if(f.hasEagerState=!0,f.eagerState=k,$n(k,w)){var O=s.interleaved;O===null?(f.next=f,gd(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}l=fg(r,s,f,h),l!==null&&(f=Yt(),Gn(l,r,h,f),Fg(l,s,h))}}function Vg(r){var s=r.alternate;return r===st||s!==null&&s===st}function Mg(r,s){Ba=ju=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Fg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,oi(r,l)}}var $u={readContext:Pn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},AT={readContext:Pn,useCallback:function(r,s){return lr().memoizedState=[r,s===void 0?null:s],r},useContext:Pn,useEffect:Cg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Bu(4194308,4,Ng.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Bu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Bu(4,2,r,s)},useMemo:function(r,s){var l=lr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=lr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=ST.bind(null,st,r),[h.memoizedState,r]},useRef:function(r){var s=lr();return r={current:r},s.memoizedState=r},useState:Rg,useDebugValue:Pd,useDeferredValue:function(r){return lr().memoizedState=r},useTransition:function(){var r=Rg(!1),s=r[0];return r=IT.bind(null,r[1]),lr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=st,f=lr();if(rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),At===null)throw Error(t(349));(ds&30)!==0||wg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,Cg(Tg.bind(null,h,g,r),[r]),h.flags|=2048,qa(9,Eg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=lr(),s=At.identifierPrefix;if(rt){var l=Lr,h=Dr;l=(h&~(1<<32-Gt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=za++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=TT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},CT={readContext:Pn,useCallback:bg,useContext:Pn,useEffect:kd,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Og,useReducer:Ad,useRef:Ag,useState:function(){return Ad($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=Nn();return Dg(s,Et.memoizedState,r)},useTransition:function(){var r=Ad($a)[0],s=Nn().memoizedState;return[r,s]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1},kT={readContext:Pn,useCallback:bg,useContext:Pn,useEffect:kd,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Og,useReducer:Cd,useRef:Ag,useState:function(){return Cd($a)},useDebugValue:Pd,useDeferredValue:function(r){var s=Nn();return Et===null?s.memoizedState=r:Dg(s,Et.memoizedState,r)},useTransition:function(){var r=Cd($a)[0],s=Nn().memoizedState;return[r,s]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1};function Wn(r,s){if(r&&r.defaultProps){s=he({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Nd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:he({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var qu={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=Ei(r),g=Mr(h,f);g.payload=s,l!=null&&(g.callback=l),s=yi(r,g,f),s!==null&&(Gn(s,r,f,h),Vu(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=Ei(r),g=Mr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=yi(r,g,f),s!==null&&(Gn(s,r,f,h),Vu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Yt(),h=Ei(r),f=Mr(l,h);f.tag=2,s!=null&&(f.callback=s),s=yi(r,f,h),s!==null&&(Gn(s,r,h,l),Vu(s,r,h))}};function Ug(r,s,l,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Na(l,h)||!Na(f,g):!0}function jg(r,s,l){var h=!1,f=pi,g=s.contextType;return typeof g=="object"&&g!==null?g=Pn(g):(f=nn(s)?as:Mt.current,h=s.contextTypes,g=(h=h!=null)?fo(r,f):pi),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=qu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Bg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&qu.enqueueReplaceState(s,s.state,null)}function xd(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},yd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Pn(g):(g=nn(s)?as:Mt.current,f.context=fo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Nd(r,s,g,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&qu.enqueueReplaceState(f,f.state,null),Mu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Eo(r,s){try{var l="",h=s;do l+=ae(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function bd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Od(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var PT=typeof WeakMap=="function"?WeakMap:Map;function zg(r,s,l){l=Mr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Yu||(Yu=!0,Gd=h),Od(r,s)},l}function $g(r,s,l){l=Mr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Od(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Od(r,s),typeof h!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function qg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new PT;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=$T.bind(null,r,s,l),s.then(r,r))}function Wg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Hg(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Mr(-1,1),s.tag=2,yi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var NT=re.ReactCurrentOwner,rn=!1;function Jt(r,s,l,h){s.child=r===null?dg(s,null,l,h):yo(s,r.child,l,h)}function Kg(r,s,l,h,f){l=l.render;var g=s.ref;return vo(s,f),h=Sd(r,s,l,h,g,f),l=Rd(),r!==null&&!rn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Fr(r,s,f)):(rt&&l&&ad(s),s.flags|=1,Jt(r,s,h,f),s.child)}function Gg(r,s,l,h,f){if(r===null){var g=l.type;return typeof g=="function"&&!tf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Qg(r,s,g,h,f)):(r=rc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Na,l(w,h)&&r.ref===s.ref)return Fr(r,s,f)}return s.flags|=1,r=Ii(g,h),r.ref=s.ref,r.return=s,s.child=r}function Qg(r,s,l,h,f){if(r!==null){var g=r.memoizedProps;if(Na(g,h)&&r.ref===s.ref)if(rn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,Fr(r,s,f)}return Dd(r,s,l,h,f)}function Jg(r,s,l){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Io,vn),vn|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(Io,vn),vn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Ye(Io,vn),vn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Ye(Io,vn),vn|=h;return Jt(r,s,f,l),s.child}function Yg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Dd(r,s,l,h,f){var g=nn(l)?as:Mt.current;return g=fo(s,g),vo(s,f),l=Sd(r,s,l,h,g,f),h=Rd(),r!==null&&!rn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Fr(r,s,f)):(rt&&h&&ad(s),s.flags|=1,Jt(r,s,l,f),s.child)}function Xg(r,s,l,h,f){if(nn(l)){var g=!0;ku(s)}else g=!1;if(vo(s,f),s.stateNode===null)Hu(r,s),jg(s,l,h),xd(s,l,h,f),h=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var O=w.context,$=l.contextType;typeof $=="object"&&$!==null?$=Pn($):($=nn(l)?as:Mt.current,$=fo(s,$));var ne=l.getDerivedStateFromProps,oe=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||O!==$)&&Bg(s,w,h,$),gi=!1;var ee=s.memoizedState;w.state=ee,Mu(s,h,w,f),O=s.memoizedState,k!==h||ee!==O||tn.current||gi?(typeof ne=="function"&&(Nd(s,l,ne,h),O=s.memoizedState),(k=gi||Ug(s,l,k,h,ee,O,$))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=O),w.props=h,w.state=O,w.context=$,h=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,pg(r,s),k=s.memoizedProps,$=s.type===s.elementType?k:Wn(s.type,k),w.props=$,oe=s.pendingProps,ee=w.context,O=l.contextType,typeof O=="object"&&O!==null?O=Pn(O):(O=nn(l)?as:Mt.current,O=fo(s,O));var fe=l.getDerivedStateFromProps;(ne=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==oe||ee!==O)&&Bg(s,w,h,O),gi=!1,ee=s.memoizedState,w.state=ee,Mu(s,h,w,f);var me=s.memoizedState;k!==oe||ee!==me||tn.current||gi?(typeof fe=="function"&&(Nd(s,l,fe,h),me=s.memoizedState),($=gi||Ug(s,l,$,h,ee,me,O)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,me,O),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,me,O)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=me),w.props=h,w.state=me,w.context=O,h=$):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),h=!1)}return Ld(r,s,l,h,g,f)}function Ld(r,s,l,h,f,g){Yg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&rg(s,l,!1),Fr(r,s,g);h=s.stateNode,NT.current=s;var k=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=yo(s,r.child,null,g),s.child=yo(s,null,k,g)):Jt(r,s,k,g),s.memoizedState=h.state,f&&rg(s,l,!0),s.child}function Zg(r){var s=r.stateNode;s.pendingContext?tg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&tg(r,s.context,!1),_d(r,s.containerInfo)}function ey(r,s,l,h,f){return go(),hd(f),s.flags|=256,Jt(r,s,l,h),s.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Md(r){return{baseLanes:r,cachePool:null,transitions:null}}function ty(r,s,l){var h=s.pendingProps,f=it.current,g=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(it,f&1),r===null)return cd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ic(w,h,0,null),r=ys(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Md(l),s.memoizedState=Vd,r):Fd(s,w));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return xT(r,s,w,h,k,f,l);if(g){g=h.fallback,w=s.mode,f=r.child,k=f.sibling;var O={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=O,s.deletions=null):(h=Ii(f,O),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=Ii(k,g):(g=ys(g,w,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Md(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~l,s.memoizedState=Vd,h}return g=r.child,r=g.sibling,h=Ii(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Fd(r,s){return s=ic({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Wu(r,s,l,h){return h!==null&&hd(h),yo(s,r.child,null,l),r=Fd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function xT(r,s,l,h,f,g,w){if(l)return s.flags&256?(s.flags&=-257,h=bd(Error(t(422))),Wu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=ic({mode:"visible",children:h.children},f,0,null),g=ys(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&yo(s,r.child,null,w),s.child.memoizedState=Md(w),s.memoizedState=Vd,g);if((s.mode&1)===0)return Wu(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=bd(g,h,void 0),Wu(r,s,w,h)}if(k=(w&r.childLanes)!==0,rn||k){if(h=At,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Vr(r,f),Gn(h,r,f,-1))}return ef(),h=bd(Error(t(421))),Wu(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=qT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,_n=di(f.nextSibling),yn=s,rt=!0,qn=null,r!==null&&(Cn[kn++]=Dr,Cn[kn++]=Lr,Cn[kn++]=ls,Dr=r.id,Lr=r.overflow,ls=s),s=Fd(s,h.children),s.flags|=4096,s)}function ny(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),md(r.return,s,l)}function Ud(r,s,l,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function ry(r,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Jt(r,s,h.children,l),h=it.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ny(r,l,s);else if(r.tag===19)ny(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(it,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Fu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Ud(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Fu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Ud(s,!0,l,null,g);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Fr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),fs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ii(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ii(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function bT(r,s,l){switch(s.tag){case 3:Zg(s),go();break;case 5:yg(s);break;case 1:nn(s.type)&&ku(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(Du,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(it,it.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?ty(r,s,l):(Ye(it,it.current&1),r=Fr(r,s,l),r!==null?r.sibling:null);Ye(it,it.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return ry(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(it,it.current),h)break;return null;case 22:case 23:return s.lanes=0,Jg(r,s,l)}return Fr(r,s,l)}var iy,jd,sy,oy;iy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jd=function(){},sy=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,hs(ar.current);var g=null;switch(l){case"input":f=Xt(r,f),h=Xt(r,h),g=[];break;case"select":f=he({},f,{value:void 0}),h=he({},h,{value:void 0}),g=[];break;case"textarea":f=sa(r,f),h=sa(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Ru)}ha(l,h);var w;l=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var k=f[$];for(w in k)k.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var O=h[$];if(k=f?.[$],h.hasOwnProperty($)&&O!==k&&(O!=null||k!=null))if($==="style")if(k){for(w in k)!k.hasOwnProperty(w)||O&&O.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in O)O.hasOwnProperty(w)&&k[w]!==O[w]&&(l||(l={}),l[w]=O[w])}else l||(g||(g=[]),g.push($,l)),l=O;else $==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(g=g||[]).push($,O)):$==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push($,""+O):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(O!=null&&$==="onScroll"&&Ze("scroll",r),g||k===O||(g=[])):(g=g||[]).push($,O))}l&&(g=g||[]).push("style",l);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},oy=function(r,s,l,h){l!==h&&(s.flags|=4)};function Wa(r,s){if(!rt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function OT(r,s,l){var h=s.pendingProps;switch(ld(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return nn(s.type)&&Cu(),Ut(s),null;case 3:return h=s.stateNode,wo(),et(tn),et(Mt),Ed(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(bu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qn!==null&&(Yd(qn),qn=null))),jd(r,s),Ut(s),null;case 5:vd(s);var f=hs(ja.current);if(l=s.type,r!==null&&s.stateNode!=null)sy(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=hs(ar.current),bu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[or]=s,h[La]=g,r=(s.mode&1)!==0,l){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(f=0;f<ba.length;f++)Ze(ba[f],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":Tr(h,g),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ze("invalid",h);break;case"textarea":Vs(h,g),Ze("invalid",h)}ha(l,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var k=g[w];w==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&Su(h.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&Ze("scroll",h)}switch(l){case"input":Kt(h),Jl(h,g,!0);break;case"textarea":Kt(h),oa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ru)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(l,{is:h.is}):(r=w.createElement(l),l==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,l),r[or]=s,r[La]=h,iy(r,s,!1,!1),s.stateNode=r;e:{switch(w=da(l,h),l){case"dialog":Ze("cancel",r),Ze("close",r),f=h;break;case"iframe":case"object":case"embed":Ze("load",r),f=h;break;case"video":case"audio":for(f=0;f<ba.length;f++)Ze(ba[f],r);f=h;break;case"source":Ze("error",r),f=h;break;case"img":case"image":case"link":Ze("error",r),Ze("load",r),f=h;break;case"details":Ze("toggle",r),f=h;break;case"input":Tr(r,h),f=Xt(r,h),Ze("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=he({},h,{value:void 0}),Ze("invalid",r);break;case"textarea":Vs(r,h),f=sa(r,h),Ze("invalid",r);break;default:f=h}ha(l,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var O=k[g];g==="style"?ua(r,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&aa(r,O)):g==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&ti(r,O):typeof O=="number"&&ti(r,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&Ze("scroll",r):O!=null&&X(r,g,O,w))}switch(l){case"input":Kt(r),Jl(r,h,!1);break;case"textarea":Kt(r),oa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ce(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Sr(r,!!h.multiple,g,!1):h.defaultValue!=null&&Sr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Ru)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)oy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=hs(ja.current),hs(ar.current),bu(s)){if(h=s.stateNode,l=s.memoizedProps,h[or]=s,(g=h.nodeValue!==l)&&(r=yn,r!==null))switch(r.tag){case 3:Su(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[or]=s,s.stateNode=h}return Ut(s),null;case 13:if(et(it),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rt&&_n!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ug(),go(),s.flags|=98560,g=!1;else if(g=bu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[or]=s}else go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else qn!==null&&(Yd(qn),qn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(it.current&1)!==0?Tt===0&&(Tt=3):ef())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return wo(),jd(r,s),r===null&&Oa(s.stateNode.containerInfo),Ut(s),null;case 10:return pd(s.type._context),Ut(s),null;case 17:return nn(s.type)&&Cu(),Ut(s),null;case 19:if(et(it),g=s.memoizedState,g===null)return Ut(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Wa(g,!1);else{if(Tt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Fu(r),w!==null){for(s.flags|=128,Wa(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(it,it.current&1|2),s.child}r=r.sibling}g.tail!==null&&Je()>So&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304)}else{if(!h)if(r=Fu(w),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!rt)return Ut(s),null}else 2*Je()-g.renderingStartTime>So&&l!==1073741824&&(s.flags|=128,h=!0,Wa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(l=g.last,l!==null?l.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,l=it.current,Ye(it,h?l&1|2:l&1),s):(Ut(s),null);case 22:case 23:return Zd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(vn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function DT(r,s){switch(ld(s),s.tag){case 1:return nn(s.type)&&Cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return wo(),et(tn),et(Mt),Ed(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return vd(s),null;case 13:if(et(it),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return et(it),null;case 4:return wo(),null;case 10:return pd(s.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var Ku=!1,jt=!1,LT=typeof WeakSet=="function"?WeakSet:Set,pe=null;function To(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ut(r,s,h)}else l.current=null}function Bd(r,s,l){try{l()}catch(h){ut(r,s,h)}}var ay=!1;function VT(r,s){if(Zh=ui,r=Um(),Wh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,k=-1,O=-1,$=0,ne=0,oe=r,ee=null;t:for(;;){for(var fe;oe!==l||f!==0&&oe.nodeType!==3||(k=w+f),oe!==g||h!==0&&oe.nodeType!==3||(O=w+h),oe.nodeType===3&&(w+=oe.nodeValue.length),(fe=oe.firstChild)!==null;)ee=oe,oe=fe;for(;;){if(oe===r)break t;if(ee===l&&++$===f&&(k=w),ee===g&&++ne===h&&(O=w),(fe=oe.nextSibling)!==null)break;oe=ee,ee=oe.parentNode}oe=fe}l=k===-1||O===-1?null:{start:k,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(ed={focusedElem:r,selectionRange:l},ui=!1,pe=s;pe!==null;)if(s=pe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,pe=r;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,ht=me.memoizedState,B=s.stateNode,V=B.getSnapshotBeforeUpdate(s.elementType===s.type?ge:Wn(s.type,ge),ht);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){ut(s,s.return,ue)}if(r=s.sibling,r!==null){r.return=s.return,pe=r;break}pe=s.return}return me=ay,ay=!1,me}function Ha(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Bd(s,l,g)}f=f.next}while(f!==h)}}function Gu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function zd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function ly(r){var s=r.alternate;s!==null&&(r.alternate=null,ly(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[or],delete s[La],delete s[id],delete s[_T],delete s[vT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function uy(r){return r.tag===5||r.tag===3||r.tag===4}function cy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||uy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $d(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ru));else if(h!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}function qd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(qd(r,s,l),r=r.sibling;r!==null;)qd(r,s,l),r=r.sibling}var xt=null,Hn=!1;function _i(r,s,l){for(l=l.child;l!==null;)hy(r,s,l),l=l.sibling}function hy(r,s,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Zi,l)}catch{}switch(l.tag){case 5:jt||To(l,s);case 6:var h=xt,f=Hn;xt=null,_i(r,s,l),xt=h,Hn=f,xt!==null&&(Hn?(r=xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):xt.removeChild(l.stateNode));break;case 18:xt!==null&&(Hn?(r=xt,l=l.stateNode,r.nodeType===8?rd(r.parentNode,l):r.nodeType===1&&rd(r,l),Bn(r)):rd(xt,l.stateNode));break;case 4:h=xt,f=Hn,xt=l.stateNode.containerInfo,Hn=!0,_i(r,s,l),xt=h,Hn=f;break;case 0:case 11:case 14:case 15:if(!jt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Bd(l,s,w),f=f.next}while(f!==h)}_i(r,s,l);break;case 1:if(!jt&&(To(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){ut(l,s,k)}_i(r,s,l);break;case 21:_i(r,s,l);break;case 22:l.mode&1?(jt=(h=jt)||l.memoizedState!==null,_i(r,s,l),jt=h):_i(r,s,l);break;default:_i(r,s,l)}}function dy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new LT),s.forEach(function(h){var f=WT.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Kn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:xt=k.stateNode,Hn=!1;break e;case 3:xt=k.stateNode.containerInfo,Hn=!0;break e;case 4:xt=k.stateNode.containerInfo,Hn=!0;break e}k=k.return}if(xt===null)throw Error(t(160));hy(g,w,f),xt=null,Hn=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch($){ut(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fy(s,r),s=s.sibling}function fy(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Kn(s,r),ur(r),h&4){try{Ha(3,r,r.return),Gu(3,r)}catch(ge){ut(r,r.return,ge)}try{Ha(5,r,r.return)}catch(ge){ut(r,r.return,ge)}}break;case 1:Kn(s,r),ur(r),h&512&&l!==null&&To(l,l.return);break;case 5:if(Kn(s,r),ur(r),h&512&&l!==null&&To(l,l.return),r.flags&32){var f=r.stateNode;try{ti(f,"")}catch(ge){ut(r,r.return,ge)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=l!==null?l.memoizedProps:g,k=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&ra(f,g),da(k,w);var $=da(k,g);for(w=0;w<O.length;w+=2){var ne=O[w],oe=O[w+1];ne==="style"?ua(f,oe):ne==="dangerouslySetInnerHTML"?aa(f,oe):ne==="children"?ti(f,oe):X(f,ne,oe,$)}switch(k){case"input":ia(f,g);break;case"textarea":Ms(f,g);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?Sr(f,!!g.multiple,fe,!1):ee!==!!g.multiple&&(g.defaultValue!=null?Sr(f,!!g.multiple,g.defaultValue,!0):Sr(f,!!g.multiple,g.multiple?[]:"",!1))}f[La]=g}catch(ge){ut(r,r.return,ge)}}break;case 6:if(Kn(s,r),ur(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(ge){ut(r,r.return,ge)}}break;case 3:if(Kn(s,r),ur(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Bn(s.containerInfo)}catch(ge){ut(r,r.return,ge)}break;case 4:Kn(s,r),ur(r);break;case 13:Kn(s,r),ur(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Kd=Je())),h&4&&dy(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(jt=($=jt)||ne,Kn(s,r),jt=$):Kn(s,r),ur(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!ne&&(r.mode&1)!==0)for(pe=r,ne=r.child;ne!==null;){for(oe=pe=ne;pe!==null;){switch(ee=pe,fe=ee.child,ee.tag){case 0:case 11:case 14:case 15:Ha(4,ee,ee.return);break;case 1:To(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){h=ee,l=ee.return;try{s=h,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){ut(h,l,ge)}}break;case 5:To(ee,ee.return);break;case 22:if(ee.memoizedState!==null){gy(oe);continue}}fe!==null?(fe.return=ee,pe=fe):gy(oe)}ne=ne.sibling}e:for(ne=null,oe=r;;){if(oe.tag===5){if(ne===null){ne=oe;try{f=oe.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=oe.stateNode,O=oe.memoizedProps.style,w=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=la("display",w))}catch(ge){ut(r,r.return,ge)}}}else if(oe.tag===6){if(ne===null)try{oe.stateNode.nodeValue=$?"":oe.memoizedProps}catch(ge){ut(r,r.return,ge)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===r)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===r)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===r)break e;ne===oe&&(ne=null),oe=oe.return}ne===oe&&(ne=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:Kn(s,r),ur(r),h&4&&dy(r);break;case 21:break;default:Kn(s,r),ur(r)}}function ur(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(uy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ti(f,""),h.flags&=-33);var g=cy(r);qd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,k=cy(r);$d(r,k,w);break;default:throw Error(t(161))}}catch(O){ut(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function MT(r,s,l){pe=r,py(r)}function py(r,s,l){for(var h=(r.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Ku;if(!w){var k=f.alternate,O=k!==null&&k.memoizedState!==null||jt;k=Ku;var $=jt;if(Ku=w,(jt=O)&&!$)for(pe=f;pe!==null;)w=pe,O=w.child,w.tag===22&&w.memoizedState!==null?yy(f):O!==null?(O.return=w,pe=O):yy(f);for(;g!==null;)pe=g,py(g),g=g.sibling;pe=f,Ku=k,jt=$}my(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,pe=g):my(r)}}function my(r){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||Gu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Wn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&gg(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}gg(s,w,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ne=$.memoizedState;if(ne!==null){var oe=ne.dehydrated;oe!==null&&Bn(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&zd(s)}catch(ee){ut(s,s.return,ee)}}if(s===r){pe=null;break}if(l=s.sibling,l!==null){l.return=s.return,pe=l;break}pe=s.return}}function gy(r){for(;pe!==null;){var s=pe;if(s===r){pe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,pe=l;break}pe=s.return}}function yy(r){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Gu(4,s)}catch(O){ut(s,l,O)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(O){ut(s,f,O)}}var g=s.return;try{zd(s)}catch(O){ut(s,g,O)}break;case 5:var w=s.return;try{zd(s)}catch(O){ut(s,w,O)}}}catch(O){ut(s,s.return,O)}if(s===r){pe=null;break}var k=s.sibling;if(k!==null){k.return=s.return,pe=k;break}pe=s.return}}var FT=Math.ceil,Qu=re.ReactCurrentDispatcher,Wd=re.ReactCurrentOwner,xn=re.ReactCurrentBatchConfig,$e=0,At=null,pt=null,bt=0,vn=0,Io=fi(0),Tt=0,Ka=null,fs=0,Ju=0,Hd=0,Ga=null,sn=null,Kd=0,So=1/0,Ur=null,Yu=!1,Gd=null,vi=null,Xu=!1,wi=null,Zu=0,Qa=0,Qd=null,ec=-1,tc=0;function Yt(){return($e&6)!==0?Je():ec!==-1?ec:ec=Je()}function Ei(r){return(r.mode&1)===0?1:($e&2)!==0&&bt!==0?bt&-bt:ET.transition!==null?(tc===0&&(tc=ts()),tc):(r=Fe,r!==0||(r=window.event,r=r===void 0?16:Ia(r.type)),r)}function Gn(r,s,l,h){if(50<Qa)throw Qa=0,Qd=null,Error(t(185));si(r,l,h),(($e&2)===0||r!==At)&&(r===At&&(($e&2)===0&&(Ju|=l),Tt===4&&Ti(r,bt)),on(r,h),l===1&&$e===0&&(s.mode&1)===0&&(So=Je()+500,Pu&&mi()))}function on(r,s){var l=r.callbackNode;Cr(r,s);var h=es(r,r===At?bt:0);if(h===0)l!==null&&_a(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&_a(l),s===1)r.tag===0?wT(vy.bind(null,r)):ig(vy.bind(null,r)),gT(function(){($e&6)===0&&mi()}),l=null;else{switch(ai(h)){case 1:l=Xi;break;case 4:l=ni;break;case 16:l=Sn;break;case 536870912:l=tu;break;default:l=Sn}l=Cy(l,_y.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function _y(r,s){if(ec=-1,tc=0,($e&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Ro()&&r.callbackNode!==l)return null;var h=es(r,r===At?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=nc(r,h);else{s=h;var f=$e;$e|=2;var g=Ey();(At!==r||bt!==s)&&(Ur=null,So=Je()+500,ms(r,s));do try{BT();break}catch(k){wy(r,k)}while(!0);fd(),Qu.current=g,$e=f,pt!==null?s=0:(At=null,bt=0,s=Tt)}if(s!==0){if(s===2&&(f=pn(r),f!==0&&(h=f,s=Jd(r,f))),s===1)throw l=Ka,ms(r,0),Ti(r,h),on(r,Je()),l;if(s===6)Ti(r,h);else{if(f=r.current.alternate,(h&30)===0&&!UT(f)&&(s=nc(r,h),s===2&&(g=pn(r),g!==0&&(h=g,s=Jd(r,g))),s===1))throw l=Ka,ms(r,0),Ti(r,h),on(r,Je()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:gs(r,sn,Ur);break;case 3:if(Ti(r,h),(h&130023424)===h&&(s=Kd+500-Je(),10<s)){if(es(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Yt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=nd(gs.bind(null,r,sn,Ur),s);break}gs(r,sn,Ur);break;case 4:if(Ti(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Gt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*FT(h/1960))-h,10<h){r.timeoutHandle=nd(gs.bind(null,r,sn,Ur),h);break}gs(r,sn,Ur);break;case 5:gs(r,sn,Ur);break;default:throw Error(t(329))}}}return on(r,Je()),r.callbackNode===l?_y.bind(null,r):null}function Jd(r,s){var l=Ga;return r.current.memoizedState.isDehydrated&&(ms(r,s).flags|=256),r=nc(r,s),r!==2&&(s=sn,sn=l,s!==null&&Yd(s)),r}function Yd(r){sn===null?sn=r:sn.push.apply(sn,r)}function UT(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!$n(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ti(r,s){for(s&=~Hd,s&=~Ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Gt(s),h=1<<l;r[l]=-1,s&=~h}}function vy(r){if(($e&6)!==0)throw Error(t(327));Ro();var s=es(r,0);if((s&1)===0)return on(r,Je()),null;var l=nc(r,s);if(r.tag!==0&&l===2){var h=pn(r);h!==0&&(s=h,l=Jd(r,h))}if(l===1)throw l=Ka,ms(r,0),Ti(r,s),on(r,Je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,gs(r,sn,Ur),on(r,Je()),null}function Xd(r,s){var l=$e;$e|=1;try{return r(s)}finally{$e=l,$e===0&&(So=Je()+500,Pu&&mi())}}function ps(r){wi!==null&&wi.tag===0&&($e&6)===0&&Ro();var s=$e;$e|=1;var l=xn.transition,h=Fe;try{if(xn.transition=null,Fe=1,r)return r()}finally{Fe=h,xn.transition=l,$e=s,($e&6)===0&&mi()}}function Zd(){vn=Io.current,et(Io)}function ms(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,mT(l)),pt!==null)for(l=pt.return;l!==null;){var h=l;switch(ld(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cu();break;case 3:wo(),et(tn),et(Mt),Ed();break;case 5:vd(h);break;case 4:wo();break;case 13:et(it);break;case 19:et(it);break;case 10:pd(h.type._context);break;case 22:case 23:Zd()}l=l.return}if(At=r,pt=r=Ii(r.current,null),bt=vn=s,Tt=0,Ka=null,Hd=Ju=fs=0,sn=Ga=null,cs!==null){for(s=0;s<cs.length;s++)if(l=cs[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}l.pending=h}cs=null}return r}function wy(r,s){do{var l=pt;try{if(fd(),Uu.current=$u,ju){for(var h=st.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}ju=!1}if(ds=0,Rt=Et=st=null,Ba=!1,za=0,Wd.current=null,l===null||l.return===null){Tt=1,Ka=s,pt=null;break}e:{var g=r,w=l.return,k=l,O=s;if(s=bt,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var $=O,ne=k,oe=ne.tag;if((ne.mode&1)===0&&(oe===0||oe===11||oe===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var fe=Wg(w);if(fe!==null){fe.flags&=-257,Hg(fe,w,k,g,s),fe.mode&1&&qg(g,$,s),s=fe,O=$;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(O),s.updateQueue=ge}else me.add(O);break e}else{if((s&1)===0){qg(g,$,s),ef();break e}O=Error(t(426))}}else if(rt&&k.mode&1){var ht=Wg(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Hg(ht,w,k,g,s),hd(Eo(O,k));break e}}g=O=Eo(O,k),Tt!==4&&(Tt=2),Ga===null?Ga=[g]:Ga.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=zg(g,O,s);mg(g,B);break e;case 1:k=O;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(vi===null||!vi.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var ue=$g(g,k,s);mg(g,ue);break e}}g=g.return}while(g!==null)}Iy(l)}catch(_e){s=_e,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function Ey(){var r=Qu.current;return Qu.current=$u,r===null?$u:r}function ef(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||(fs&268435455)===0&&(Ju&268435455)===0||Ti(At,bt)}function nc(r,s){var l=$e;$e|=2;var h=Ey();(At!==r||bt!==s)&&(Ur=null,ms(r,s));do try{jT();break}catch(f){wy(r,f)}while(!0);if(fd(),$e=l,Qu.current=h,pt!==null)throw Error(t(261));return At=null,bt=0,Tt}function jT(){for(;pt!==null;)Ty(pt)}function BT(){for(;pt!==null&&!Zl();)Ty(pt)}function Ty(r){var s=Ay(r.alternate,r,vn);r.memoizedProps=r.pendingProps,s===null?Iy(r):pt=s,Wd.current=null}function Iy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=OT(l,s,vn),l!==null){pt=l;return}}else{if(l=DT(l,s),l!==null){l.flags&=32767,pt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Tt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=r}while(s!==null);Tt===0&&(Tt=5)}function gs(r,s,l){var h=Fe,f=xn.transition;try{xn.transition=null,Fe=1,zT(r,s,l,h)}finally{xn.transition=f,Fe=h}return null}function zT(r,s,l,h){do Ro();while(wi!==null);if(($e&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Qe(r,g),r===At&&(pt=At=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,Cy(Sn,function(){return Ro(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=xn.transition,xn.transition=null;var w=Fe;Fe=1;var k=$e;$e|=4,Wd.current=null,VT(r,l),fy(l,r),lT(ed),ui=!!Zh,ed=Zh=null,r.current=l,MT(l),Mh(),$e=k,Fe=w,xn.transition=g}else r.current=l;if(Xu&&(Xu=!1,wi=r,Zu=f),g=r.pendingLanes,g===0&&(vi=null),nu(l.stateNode),on(r,Je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Yu)throw Yu=!1,r=Gd,Gd=null,r;return(Zu&1)!==0&&r.tag!==0&&Ro(),g=r.pendingLanes,(g&1)!==0?r===Qd?Qa++:(Qa=0,Qd=r):Qa=0,mi(),null}function Ro(){if(wi!==null){var r=ai(Zu),s=xn.transition,l=Fe;try{if(xn.transition=null,Fe=16>r?16:r,wi===null)var h=!1;else{if(r=wi,wi=null,Zu=0,($e&6)!==0)throw Error(t(331));var f=$e;for($e|=4,pe=r.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var k=g.deletions;if(k!==null){for(var O=0;O<k.length;O++){var $=k[O];for(pe=$;pe!==null;){var ne=pe;switch(ne.tag){case 0:case 11:case 15:Ha(8,ne,g)}var oe=ne.child;if(oe!==null)oe.return=ne,pe=oe;else for(;pe!==null;){ne=pe;var ee=ne.sibling,fe=ne.return;if(ly(ne),ne===$){pe=null;break}if(ee!==null){ee.return=fe,pe=ee;break}pe=fe}}}var me=g.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var ht=ge.sibling;ge.sibling=null,ge=ht}while(ge!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ha(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,pe=B;break e}pe=g.return}}var V=r.current;for(pe=V;pe!==null;){w=pe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,pe=z;else e:for(w=V;pe!==null;){if(k=pe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Gu(9,k)}}catch(_e){ut(k,k.return,_e)}if(k===w){pe=null;break e}var ue=k.sibling;if(ue!==null){ue.return=k.return,pe=ue;break e}pe=k.return}}if($e=f,mi(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Zi,r)}catch{}h=!0}return h}finally{Fe=l,xn.transition=s}}return!1}function Sy(r,s,l){s=Eo(l,s),s=zg(r,s,1),r=yi(r,s,1),s=Yt(),r!==null&&(si(r,1,s),on(r,s))}function ut(r,s,l){if(r.tag===3)Sy(r,r,l);else for(;s!==null;){if(s.tag===3){Sy(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vi===null||!vi.has(h))){r=Eo(l,r),r=$g(s,r,1),s=yi(s,r,1),r=Yt(),s!==null&&(si(s,1,r),on(s,r));break}}s=s.return}}function $T(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Yt(),r.pingedLanes|=r.suspendedLanes&l,At===r&&(bt&l)===l&&(Tt===4||Tt===3&&(bt&130023424)===bt&&500>Je()-Kd?ms(r,0):Hd|=l),on(r,s)}function Ry(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ks,Ks<<=1,(Ks&130023424)===0&&(Ks=4194304)));var l=Yt();r=Vr(r,s),r!==null&&(si(r,s,l),on(r,l))}function qT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Ry(r,l)}function WT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ry(r,l)}var Ay;Ay=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||tn.current)rn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return rn=!1,bT(r,s,l);rn=(r.flags&131072)!==0}else rn=!1,rt&&(s.flags&1048576)!==0&&sg(s,xu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Hu(r,s),r=s.pendingProps;var f=fo(s,Mt.current);vo(s,l),f=Sd(null,s,h,r,f,l);var g=Rd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,nn(h)?(g=!0,ku(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,yd(s),f.updater=qu,s.stateNode=f,f._reactInternals=s,xd(s,h,r,l),s=Ld(null,s,h,!0,g,l)):(s.tag=0,rt&&g&&ad(s),Jt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Hu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=KT(h),r=Wn(h,r),f){case 0:s=Dd(null,s,h,r,l);break e;case 1:s=Xg(null,s,h,r,l);break e;case 11:s=Kg(null,s,h,r,l);break e;case 14:s=Gg(null,s,h,Wn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Wn(h,f),Dd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Wn(h,f),Xg(r,s,h,f,l);case 3:e:{if(Zg(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,pg(r,s),Mu(s,h,null,l);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Eo(Error(t(423)),s),s=ey(r,s,h,l,f);break e}else if(h!==f){f=Eo(Error(t(424)),s),s=ey(r,s,h,l,f);break e}else for(_n=di(s.stateNode.containerInfo.firstChild),yn=s,rt=!0,qn=null,l=dg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(go(),h===f){s=Fr(r,s,l);break e}Jt(r,s,h,l)}s=s.child}return s;case 5:return yg(s),r===null&&cd(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,td(h,f)?w=null:g!==null&&td(h,g)&&(s.flags|=32),Yg(r,s),Jt(r,s,w,l),s.child;case 6:return r===null&&cd(s),null;case 13:return ty(r,s,l);case 4:return _d(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=yo(s,null,h,l):Jt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Wn(h,f),Kg(r,s,h,f,l);case 7:return Jt(r,s,s.pendingProps,l),s.child;case 8:return Jt(r,s,s.pendingProps.children,l),s.child;case 12:return Jt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ye(Du,h._currentValue),h._currentValue=w,g!==null)if($n(g.value,w)){if(g.children===f.children&&!tn.current){s=Fr(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){w=g.child;for(var O=k.firstContext;O!==null;){if(O.context===h){if(g.tag===1){O=Mr(-1,l&-l),O.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var ne=$.pending;ne===null?O.next=O:(O.next=ne.next,ne.next=O),$.pending=O}}g.lanes|=l,O=g.alternate,O!==null&&(O.lanes|=l),md(g.return,l,s),k.lanes|=l;break}O=O.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),md(w,l,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Jt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,vo(s,l),f=Pn(f),h=h(f),s.flags|=1,Jt(r,s,h,l),s.child;case 14:return h=s.type,f=Wn(h,s.pendingProps),f=Wn(h.type,f),Gg(r,s,h,f,l);case 15:return Qg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Wn(h,f),Hu(r,s),s.tag=1,nn(h)?(r=!0,ku(s)):r=!1,vo(s,l),jg(s,h,f),xd(s,h,f,l),Ld(null,s,h,!0,r,l);case 19:return ry(r,s,l);case 22:return Jg(r,s,l)}throw Error(t(156,s.tag))};function Cy(r,s){return Ws(r,s)}function HT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(r,s,l,h){return new HT(r,s,l,h)}function tf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function KT(r){if(typeof r=="function")return tf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===Xe)return 14}return 2}function Ii(r,s){var l=r.alternate;return l===null?(l=bn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rc(r,s,l,h,f,g){var w=2;if(h=r,typeof r=="function")tf(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case P:return ys(l.children,f,g,s);case I:w=8,f|=8;break;case C:return r=bn(12,l,s,f|2),r.elementType=C,r.lanes=g,r;case A:return r=bn(13,l,s,f),r.elementType=A,r.lanes=g,r;case Ne:return r=bn(19,l,s,f),r.elementType=Ne,r.lanes=g,r;case Me:return ic(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:w=10;break e;case L:w=9;break e;case D:w=11;break e;case Xe:w=14;break e;case je:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=bn(w,l,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function ys(r,s,l,h){return r=bn(7,r,h,s),r.lanes=l,r}function ic(r,s,l,h){return r=bn(22,r,h,s),r.elementType=Me,r.lanes=l,r.stateNode={isHidden:!1},r}function nf(r,s,l){return r=bn(6,r,null,s),r.lanes=l,r}function rf(r,s,l){return s=bn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function GT(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ii(0),this.expirationTimes=ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function sf(r,s,l,h,f,g,w,k,O){return r=new GT(r,s,l,k,O),s===1?(s=1,g===!0&&(s|=8)):s=0,g=bn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(g),r}function QT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function ky(r){if(!r)return pi;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(nn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(nn(l))return ng(r,l,s)}return s}function Py(r,s,l,h,f,g,w,k,O){return r=sf(l,h,!0,r,f,g,w,k,O),r.context=ky(null),l=r.current,h=Yt(),f=Ei(l),g=Mr(h,f),g.callback=s??null,yi(l,g,f),r.current.lanes=f,si(r,f,h),on(r,h),r}function sc(r,s,l,h){var f=s.current,g=Yt(),w=Ei(f);return l=ky(l),s.context===null?s.context=l:s.pendingContext=l,s=Mr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=yi(f,s,w),r!==null&&(Gn(r,f,w,g),Vu(r,f,w)),w}function oc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ny(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function of(r,s){Ny(r,s),(r=r.alternate)&&Ny(r,s)}function JT(){return null}var xy=typeof reportError=="function"?reportError:function(r){console.error(r)};function af(r){this._internalRoot=r}ac.prototype.render=af.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));sc(r,s,null,null)},ac.prototype.unmount=af.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ps(function(){sc(null,r,null,null)}),s[br]=null}};function ac(r){this._internalRoot=r}ac.prototype.unstable_scheduleHydration=function(r){if(r){var s=au();r={blockedOn:null,target:r,priority:s};for(var l=0;l<nr.length&&s!==0&&s<nr[l].priority;l++);nr.splice(l,0,r),l===0&&cu(r)}};function lf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function by(){}function YT(r,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=oc(w);g.call($)}}var w=Py(s,h,r,0,null,!1,!1,"",by);return r._reactRootContainer=w,r[br]=w.current,Oa(r.nodeType===8?r.parentNode:r),ps(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var $=oc(O);k.call($)}}var O=sf(r,0,!1,null,null,!1,!1,"",by);return r._reactRootContainer=O,r[br]=O.current,Oa(r.nodeType===8?r.parentNode:r),ps(function(){sc(s,O,l,h)}),O}function uc(r,s,l,h,f){var g=l._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var k=f;f=function(){var O=oc(w);k.call(O)}}sc(s,w,r,f)}else w=YT(l,s,r,f,h);return oc(w)}su=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=ri(s.pendingLanes);l!==0&&(oi(s,l|1),on(s,Je()),($e&6)===0&&(So=Je()+500,mi()))}break;case 13:ps(function(){var h=Vr(r,1);if(h!==null){var f=Yt();Gn(h,r,1,f)}}),of(r,1)}},Gs=function(r){if(r.tag===13){var s=Vr(r,134217728);if(s!==null){var l=Yt();Gn(s,r,134217728,l)}of(r,134217728)}},ou=function(r){if(r.tag===13){var s=Ei(r),l=Vr(r,s);if(l!==null){var h=Yt();Gn(l,r,s,h)}of(r,s)}},au=function(){return Fe},lu=function(r,s){var l=Fe;try{return Fe=r,s()}finally{Fe=l}},Us=function(r,s,l){switch(s){case"input":if(ia(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Au(h);if(!f)throw Error(t(90));Er(h),ia(h,f)}}}break;case"textarea":Ms(r,l);break;case"select":s=l.value,s!=null&&Sr(r,!!l.multiple,s,!1)}},Gi=Xd,pa=ps;var XT={usingClientEntryPoint:!1,Events:[Va,co,Au,er,fa,Xd]},Ja={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZT={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ya(r),r===null?null:r.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Zi=cc.inject(ZT),fn=cc}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XT,an.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(s))throw Error(t(200));return QT(r,s,null,l)},an.createRoot=function(r,s){if(!lf(r))throw Error(t(299));var l=!1,h="",f=xy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=sf(r,1,!1,null,null,l,!1,h,f),r[br]=s.current,Oa(r.nodeType===8?r.parentNode:r),new af(s)},an.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ya(s),r=r===null?null:r.stateNode,r},an.flushSync=function(r){return ps(r)},an.hydrate=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!0,l)},an.hydrateRoot=function(r,s,l){if(!lf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",w=xy;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=Py(s,null,r,1,l??null,f,!1,g,w),r[br]=s.current,Oa(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new ac(s)},an.render=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!1,l)},an.unmountComponentAtNode=function(r){if(!lc(r))throw Error(t(40));return r._reactRootContainer?(ps(function(){uc(null,null,r,!1,function(){r._reactRootContainer=null,r[br]=null})}),!0):!1},an.unstable_batchedUpdates=Xd,an.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!lc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return uc(r,s,l,!1,h)},an.version="18.3.1-next-f1338f8080-20240426",an}var jy;function Wv(){if(jy)return hf.exports;jy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hf.exports=lI(),hf.exports}var By;function uI(){if(By)return hc;By=1;var n=Wv();return hc.createRoot=n.createRoot,hc.hydrateRoot=n.hydrateRoot,hc}var cI=uI();const hI=$v(cI);var zy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Kv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,M=y&63;p||(M=64,u||(S=64)),i.push(t[_],t[E],t[S],t[M])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||E==null)throw new fI;const S=a<<2|d>>4;if(i.push(S),y!==64){const M=d<<4&240|y>>2;if(i.push(M),E!==64){const N=y<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pI=function(n){const e=Hv(n);return Kv.encodeByteArray(e,!0)},Lc=function(n){return pI(n).replace(/\./g,"")},Gv=function(n){try{return Kv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=()=>mI().__FIREBASE_DEFAULTS__,yI=()=>{if(typeof process>"u"||typeof zy>"u")return;const n=zy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_I=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gv(n[1]);return e&&JSON.parse(e)},ih=()=>{try{return gI()||yI()||_I()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=n=>{var e,t;return(t=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Jv=n=>{const e=Qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Yv=()=>{var n;return(n=ih())===null||n===void 0?void 0:n.config},Xv=n=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lc(JSON.stringify(t)),Lc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function EI(){var n;const e=(n=ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function II(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function SI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RI(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function AI(){return!EI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="FirebaseError";class vr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=PI,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?NI(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new vr(o,d,i)}}function NI(n,e){return n.replace(xI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const xI=/\{\$([^}]+)}/g;function bI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if($y(a)&&$y(u)){if(!Lo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function $y(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function sl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function OI(n,e){const t=new DI(n,e);return t.subscribe.bind(t)}class DI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");LI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pf),o.error===void 0&&(o.error=pf),o.complete===void 0&&(o.complete=pf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class Fi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new vI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FI(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:MI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MI(n){return n===_s?void 0:n}function FI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const jI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},BI=Ue.INFO,zI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},$I=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=zI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=BI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const qI=(n,e)=>e.some(t=>n instanceof t);let qy,Wy;function WI(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HI(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ew=new WeakMap,Ff=new WeakMap,tw=new WeakMap,mf=new WeakMap,Tp=new WeakMap;function KI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(bi(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&ew.set(t,n)}).catch(()=>{}),Tp.set(e,n),e}function GI(n){if(Ff.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ff.set(n,e)}let Uf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ff.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QI(n){Uf=n(Uf)}function JI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(gf(this),e,...t);return tw.set(i,e.sort?e.sort():[e]),bi(i)}:HI().includes(n)?function(...e){return n.apply(gf(this),e),bi(ew.get(this))}:function(...e){return bi(n.apply(gf(this),e))}}function YI(n){return typeof n=="function"?JI(n):(n instanceof IDBTransaction&&GI(n),qI(n,WI())?new Proxy(n,Uf):n)}function bi(n){if(n instanceof IDBRequest)return KI(n);if(mf.has(n))return mf.get(n);const e=YI(n);return e!==n&&(mf.set(n,e),Tp.set(e,n)),e}const gf=n=>Tp.get(n);function XI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=bi(u);return i&&u.addEventListener("upgradeneeded",p=>{i(bi(u.result),p.oldVersion,p.newVersion,bi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const ZI=["get","getKey","getAll","getAllKeys","count"],eS=["put","add","delete","clear"],yf=new Map;function Hy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=eS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ZI.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return yf.set(e,a),a}QI(n=>({...n,get:(e,t,i)=>Hy(e,t)||n.get(e,t,i),has:(e,t)=>!!Hy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function nS(n){const e=n.getComponent();return e?.type==="VERSION"}const jf="@firebase/app",Ky="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Ep("@firebase/app"),rS="@firebase/app-compat",iS="@firebase/analytics-compat",sS="@firebase/analytics",oS="@firebase/app-check-compat",aS="@firebase/app-check",lS="@firebase/auth",uS="@firebase/auth-compat",cS="@firebase/database",hS="@firebase/data-connect",dS="@firebase/database-compat",fS="@firebase/functions",pS="@firebase/functions-compat",mS="@firebase/installations",gS="@firebase/installations-compat",yS="@firebase/messaging",_S="@firebase/messaging-compat",vS="@firebase/performance",wS="@firebase/performance-compat",ES="@firebase/remote-config",TS="@firebase/remote-config-compat",IS="@firebase/storage",SS="@firebase/storage-compat",RS="@firebase/firestore",AS="@firebase/vertexai-preview",CS="@firebase/firestore-compat",kS="firebase",PS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",NS={[jf]:"fire-core",[rS]:"fire-core-compat",[sS]:"fire-analytics",[iS]:"fire-analytics-compat",[aS]:"fire-app-check",[oS]:"fire-app-check-compat",[lS]:"fire-auth",[uS]:"fire-auth-compat",[cS]:"fire-rtdb",[hS]:"fire-data-connect",[dS]:"fire-rtdb-compat",[fS]:"fire-fn",[pS]:"fire-fn-compat",[mS]:"fire-iid",[gS]:"fire-iid-compat",[yS]:"fire-fcm",[_S]:"fire-fcm-compat",[vS]:"fire-perf",[wS]:"fire-perf-compat",[ES]:"fire-rc",[TS]:"fire-rc-compat",[IS]:"fire-gcs",[SS]:"fire-gcs-compat",[RS]:"fire-fst",[CS]:"fire-fst-compat",[AS]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,xS=new Map,zf=new Map;function Gy(n,e){try{n.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Is(n){const e=n.name;if(zf.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(const t of gl.values())Gy(t,n);for(const t of xS.values())Gy(t,n);return!0}function bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Nl("app","Firebase",bS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=PS;function nw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Oi.create("bad-app-name",{appName:String(o)});if(t||(t=Yv()),!t)throw Oi.create("no-options");const a=gl.get(o);if(a){if(Lo(t,a.options)&&Lo(i,a.config))return a;throw Oi.create("duplicate-app",{appName:o})}const u=new UI(o);for(const p of zf.values())u.addComponent(p);const d=new OS(t,i,u);return gl.set(o,d),d}function sh(n=Bf){const e=gl.get(n);if(!e&&n===Bf&&Yv())return nw();if(!e)throw Oi.create("no-app",{appName:n});return e}function DS(){return Array.from(gl.values())}function dr(n,e,t){var i;let o=(i=NS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(d.join(" "));return}Is(new Fi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebase-heartbeat-database",VS=1,yl="firebase-heartbeat-store";let _f=null;function rw(){return _f||(_f=XI(LS,VS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oi.create("idb-open",{originalErrorMessage:n.message})})),_f}async function MS(n){try{const t=(await rw()).transaction(yl),i=await t.objectStore(yl).get(iw(n));return await t.done,i}catch(e){if(e instanceof vr)Wr.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(t.message)}}}async function Qy(n,e){try{const i=(await rw()).transaction(yl,"readwrite");await i.objectStore(yl).put(e,iw(n)),await i.done}catch(t){if(t instanceof vr)Wr.warn(t.message);else{const i=Oi.create("idb-set",{originalErrorMessage:t?.message});Wr.warn(i.message)}}}function iw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,US=720*60*60*1e3;class jS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=US}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jy(),{heartbeatsToSend:i,unsentEntries:o}=BS(this._heartbeatsCache.heartbeats),a=Lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Wr.warn(t),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function BS(n,e=FS){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Yy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Yy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class zS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await MS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Yy(n){return Lc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){Is(new Fi("platform-logger",e=>new tS(e),"PRIVATE")),Is(new Fi("heartbeat",e=>new jS(e),"PRIVATE")),dr(jf,Ky,n),dr(jf,Ky,"esm2017"),dr("fire-js","")}$S("");function Ip(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function sw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qS=sw,ow=new Nl("auth","Firebase",sw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Ep("@firebase/auth");function WS(n,...e){Vc.logLevel<=Ue.WARN&&Vc.warn(`Auth (${xs}): ${n}`,...e)}function Ec(n,...e){Vc.logLevel<=Ue.ERROR&&Vc.error(`Auth (${xs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(n,...e){throw Sp(n,...e)}function fr(n,...e){return Sp(n,...e)}function aw(n,e,t){const i=Object.assign(Object.assign({},qS()),{[e]:t});return new Nl("auth","Firebase",i).create(e,{appName:n.name})}function $r(n){return aw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ow.create(n,...e)}function Se(n,e,...t){if(!n)throw Sp(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function Hr(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function HS(){return Xy()==="http:"||Xy()==="https:"}function Xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HS()||II()||"connection"in navigator)?navigator.onLine:!0}function GS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=wI()||SI()}get(){return KS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e){Hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new Ol(3e4,6e4);function Jr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yr(n,e,t,i,o={}){return uw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=xl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return TI()||(y.referrerPolicy="no-referrer"),lw.fetch()(cw(n,n.config.apiHost,t,d),y)})}async function uw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},QS),e);try{const o=new XS(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw dc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw dc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw dc(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw aw(n,_,y);Jn(n,_)}}catch(o){if(o instanceof vr)throw o;Jn(n,"network-request-failed",{message:String(o)})}}async function Dl(n,e,t,i,o={}){const a=await Yr(n,e,t,i,o);return"mfaPendingCredential"in a&&Jn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function cw(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Rp(n.config,o):`${n.config.apiScheme}://${o}`}function YS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fr(this.auth,"network-request-failed")),JS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=fr(n,e,i);return o.customData._tokenResponse=t,o}function Zy(n){return n!==void 0&&n.enterprise!==void 0}class ZS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eR(n,e){return Yr(n,"GET","/v2/recaptchaConfig",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e){return Yr(n,"POST","/v1/accounts:delete",e)}async function hw(n,e){return Yr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nR(n,e=!1){const t=yt(n),i=await t.getIdToken(e),o=Ap(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:cl(vf(o.auth_time)),issuedAtTime:cl(vf(o.iat)),expirationTime:cl(vf(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function vf(n){return Number(n)*1e3}function Ap(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=Gv(t);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o?.toString()),null}}function e_(n){const e=Ap(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof vr&&rR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function rR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await _l(n,hw(t,{idToken:i}));Se(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?dw(a.providerUserInfo):[],d=oR(n.providerData,u),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!d?.length,_=p?y:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new qf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function sR(n){const e=yt(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function dw(n){return n.map(e=>{var{providerId:t}=e,i=Ip(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n,e){const t=await uw(n,{},async()=>{const i=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=cw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",lw.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lR(n,e){return Yr(n,"POST","/v2/accounts:revokeToken",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=e_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await aR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new xo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nR(this,e)}reload(){return sR(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await _l(this,tR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,M=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,R=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Z=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:re,isAnonymous:Q,providerData:te,stsTokenManager:P}=t;Se(X&&P,e,"internal-error");const I=xo.fromJSON(this.name,P);Se(typeof X=="string",e,"internal-error"),Ri(E,e.name),Ri(S,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof Q=="boolean",e,"internal-error"),Ri(M,e.name),Ri(N,e.name),Ri(F,e.name),Ri(R,e.name),Ri(Y,e.name),Ri(Z,e.name);const C=new Br({uid:X,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:Q,photoURL:N,phoneNumber:M,tenantId:F,stsTokenManager:I,createdAt:Y,lastLoginAt:Z});return te&&Array.isArray(te)&&(C.providerData=te.map(b=>Object.assign({},b))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new xo;o.updateFromServerResponse(t);const a=new Br({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?dw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new xo;d.updateFromIdToken(i);const p=new Br({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function zr(n){Hr(n instanceof Function,"Expected a class definition");let e=t_.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fw.type="NONE";const n_=fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n,e,t){return`firebase:${n}:${e}:${t}`}class bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Tc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new bo(zr(n_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||zr(n_);const u=Tc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(u);if(_){const E=Br._fromJSON(e,_);y!==a&&(d=E),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new bo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new bo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vw(e))return"Blackberry";if(ww(e))return"Webos";if(mw(e))return"Safari";if((e.includes("chrome/")||gw(e))&&!e.includes("edge/"))return"Chrome";if(_w(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function pw(n=Ht()){return/firefox\//i.test(n)}function mw(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gw(n=Ht()){return/crios\//i.test(n)}function yw(n=Ht()){return/iemobile/i.test(n)}function _w(n=Ht()){return/android/i.test(n)}function vw(n=Ht()){return/blackberry/i.test(n)}function ww(n=Ht()){return/webos/i.test(n)}function Cp(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uR(n=Ht()){var e;return Cp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cR(){return RI()&&document.documentMode===10}function Ew(n=Ht()){return Cp(n)||_w(n)||ww(n)||vw(n)||/windows phone/i.test(n)||yw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(n,e=[]){let t;switch(n){case"Browser":t=r_(Ht());break;case"Worker":t=`${r_(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n,e={}){return Yr(n,"GET","/v2/passwordPolicy",Jr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=6;class pR{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:fR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new hR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hw(this,{idToken:e}),i=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject($r(this));const t=e?yt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dR(this),t=new pR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await lR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&WS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $i(n){return yt(n)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=OI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gR(n){oh=n}function Iw(n){return oh.loadJS(n)}function yR(){return oh.recaptchaEnterpriseScript}function _R(){return oh.gapiScript}function vR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const wR="recaptcha-enterprise",ER="NO_RECAPTCHA";class TR{constructor(e){this.type=wR,this.auth=$i(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{eR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new ZS(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;Zy(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(ER)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&Zy(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=yR();p.length!==0&&(p+=d),Iw(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function s_(n,e,t,i=!1){const o=new TR(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fc(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await s_(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await s_(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n,e){const t=bl(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Lo(a,e??{}))return o;Jn(o,"already-initialized")}return t.initialize({options:e})}function SR(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(zr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function RR(n,e,t){const i=$i(n);Se(i._canInitEmulator,i,"emulator-config-failed"),Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Sw(e),{host:u,port:d}=AR(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),CR()}function Sw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AR(n){const e=Sw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:o_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:o_(u)}}}function o_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function kR(n,e){return Yr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n,e){return Dl(n,"POST","/v1/accounts:signInWithPassword",Jr(n,e))}async function NR(n,e){return Yr(n,"POST","/v1/accounts:sendOobCode",Jr(n,e))}async function xR(n,e){return NR(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Jr(n,e))}async function OR(n,e){return Dl(n,"POST","/v1/accounts:signInWithEmailLink",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends kp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,t,"signInWithPassword",PR);case"emailLink":return bR(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,i,"signUpPassword",kR);case"emailLink":return OR(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return Dl(n,"POST","/v1/accounts:signInWithIdp",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="http://localhost";class Ss extends kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Ip(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Ss(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:DR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VR(n){const e=il(sl(n)).link,t=e?il(sl(e)).deep_link_id:null,i=il(sl(n)).deep_link_id;return(i?il(sl(i)).link:null)||i||t||e||n}class Pp{constructor(e){var t,i,o,a,u,d;const p=il(sl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=LR((o=p.mode)!==null&&o!==void 0?o:null);Se(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=VR(e);try{return new Pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,t){return vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Pp.parseLink(t);return Se(i,"argument-error"),vl._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Ll{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ss._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ci.credential(t,i)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Ll{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Ll{constructor(){super("twitter.com")}static credential(e,t){return Ss._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Pi.credential(t,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return Dl(n,"POST","/v1/accounts:signUp",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Br._fromIdTokenResponse(e,i,o),u=a_(i);return new Rs({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=a_(i);return new Rs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function a_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends vr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Uc(e,t,i,o)}}function Aw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(n,a,e,i):a})}async function FR(n,e,t=!1){const i=await _l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rs._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n,e,t=!1){const{auth:i}=n;if(hr(i.app))return Promise.reject($r(i));const o="reauthenticate";try{const a=await _l(n,Aw(i,o,e,n),t);Se(a.idToken,i,"internal-error");const u=Ap(a.idToken);Se(u,i,"internal-error");const{sub:d}=u;return Se(n.uid===d,i,"user-mismatch"),Rs._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Jn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(n,e,t=!1){if(hr(n.app))return Promise.reject($r(n));const i="signIn",o=await Aw(n,i,e),a=await Rs._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function jR(n,e){return Cw($i(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(n){const e=$i(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BR(n,e,t){const i=$i(n);await Fc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xR)}async function zR(n,e,t){if(hr(n.app))return Promise.reject($r(n));const i=$i(n),u=await Fc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&kw(n),p}),d=await Rs._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function $R(n,e,t){return hr(n.app)?Promise.reject($r(n)):jR(yt(n),Ho.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kw(n),i})}function qR(n,e,t,i){return yt(n).onIdTokenChanged(e,t,i)}function WR(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function HR(n,e,t,i){return yt(n).onAuthStateChanged(e,t,i)}function KR(n){return yt(n).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1e3,QR=10;class Nw extends Pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);cR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nw.type="LOCAL";const JR=Nw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xw.type="SESSION";const bw=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ah(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await YR(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Np("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function ZR(n){pr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function eA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function nA(){return Ow()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebaseLocalStorageDb",rA=1,Bc="firebaseLocalStorage",Lw="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lh(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function iA(){const n=indexedDB.deleteDatabase(Dw);return new Vl(n).toPromise()}function Wf(){const n=indexedDB.open(Dw,rA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Bc,{keyPath:Lw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),await iA(),e(await Wf()))})})}async function l_(n,e,t){const i=lh(n,!0).put({[Lw]:e,value:t});return new Vl(i).toPromise()}async function sA(n,e){const t=lh(n,!1).get(e),i=await new Vl(t).toPromise();return i===void 0?null:i.value}function u_(n,e){const t=lh(n,!0).delete(e);return new Vl(t).toPromise()}const oA=800,aA=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>aA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(nA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await eA(),!this.activeServiceWorker)return;this.sender=new XR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await l_(e,jc,"1"),await u_(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>l_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>sA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=lh(o,!1).getAll();return new Vl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const lA=Vw;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n,e){return e?zr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cA(n){return Cw(n.auth,new xp(n),n.bypassAuthState)}function hA(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),UR(t,new xp(n),n.bypassAuthState)}async function dA(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),FR(t,new xp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cA;case"linkViaPopup":case"linkViaRedirect":return dA;case"reauthViaPopup":case"reauthViaRedirect":return hA;default:Jn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new Ol(2e3,1e4);class No extends Mw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fA.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="pendingRedirect",Ic=new Map;class mA extends Mw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const i=await gA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gA(n,e){const t=vA(e),i=_A(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function yA(n,e){Ic.set(n._key(),e)}function _A(n){return zr(n._redirectPersistence)}function vA(n){return Tc(pA,n.config.apiKey,n.name)}async function wA(n,e,t=!1){if(hr(n.app))return Promise.reject($r(n));const i=$i(n),o=uA(i,e),u=await new mA(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=600*1e3;class TA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Fw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EA&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(e))}saveEventToCache(e){this.cachedEventUids.add(c_(e)),this.lastProcessedEventTime=Date.now()}}function c_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Fw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function IA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(n,e={}){return Yr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AA=/^https?/;async function CA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SA(n);for(const t of e)try{if(kA(t))return}catch{}Jn(n,"unauthorized-domain")}function kA(n){const e=$f(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!AA.test(t))return!1;if(RA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new Ol(3e4,6e4);function h_(){const n=pr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NA(n){return new Promise((e,t)=>{var i,o,a;function u(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),t(fr(n,"network-request-failed"))},timeout:PA.get()})}if(!((o=(i=pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=pr().gapi)===null||a===void 0)&&a.load)u();else{const d=vR("iframefcb");return pr()[d]=()=>{gapi.load?u():t(fr(n,"network-request-failed"))},Iw(`${_R()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function xA(n){return Sc=Sc||NA(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Ol(5e3,15e3),OA="__/auth/iframe",DA="emulator/auth/iframe",LA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MA(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rp(e,DA):`https://${n.config.authDomain}/${OA}`,i={apiKey:e.apiKey,appName:n.name,v:xs},o=VA.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${xl(i).slice(1)}`}async function FA(n){const e=await xA(n),t=pr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:MA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=fr(n,"network-request-failed"),d=pr().setTimeout(()=>{a(u)},bA.get());function p(){pr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jA=500,BA=600,zA="_blank",$A="http://localhost";class d_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qA(n,e,t,i=jA,o=BA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},UA),{width:i.toString(),height:o.toString(),top:a,left:u}),y=Ht().toLowerCase();t&&(d=gw(y)?zA:t),pw(y)&&(e=e||$A,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[M,N])=>`${S}${M}=${N},`,"");if(uR(y)&&d!=="_self")return WA(e||"",d),new d_(null);const E=window.open(e||"",d,_);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new d_(E)}function WA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="__/auth/handler",KA="emulator/auth/handler",GA=encodeURIComponent("fac");async function f_(n,e,t,i,o,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:xs,eventId:o};if(e instanceof Rw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",bI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Ll){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${GA}=${encodeURIComponent(p)}`:"";return`${QA(n)}?${xl(d).slice(1)}${y}`}function QA({config:n}){return n.emulator?Rp(n,KA):`https://${n.authDomain}/${HA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class JA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bw,this._completeRedirectFn=wA,this._overrideRedirectResult=yA}async _openPopup(e,t,i,o){var a;Hr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await f_(e,t,i,$f(),o);return qA(e,u,Np())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await f_(e,t,i,$f(),o);return ZR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Hr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await FA(e),i=new TA(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wf,{type:wf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[wf];u!==void 0&&t(!!u),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ew()||mw()||Cp()}}const YA=JA;var p_="@firebase/auth",m_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eC(n){Is(new Fi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tw(n)},y=new mR(i,o,a,p);return SR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Is(new Fi("auth-internal",e=>{const t=$i(e.getProvider("auth").getImmediate());return(i=>new XA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(p_,m_,ZA(n)),dr(p_,m_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=300,nC=Xv("authIdTokenMaxAge")||tC;let g_=null;const rC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nC)return;const o=t?.token;g_!==o&&(g_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iC(n=sh()){const e=bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=IR(n,{popupRedirectResolver:YA,persistence:[lA,JR,bw]}),i=Xv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=rC(a.toString());WR(t,u,()=>u(t.currentUser)),qR(t,d=>u(d))}}const o=Qv("auth");return o&&RR(t,`http://${o}`),t}function sC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=fr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",sC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eC("Browser");var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Uw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function C(){}C.prototype=I.prototype,P.D=I.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(b,L,D){for(var A=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)A[Ne-2]=arguments[Ne];return I.prototype[L].apply(b,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,C){C||(C=0);var b=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)b[L]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(L=0;16>L;++L)b[L]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=P.g[0],C=P.g[1],L=P.g[2];var D=P.g[3],A=I+(D^C&(L^D))+b[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=D+(L^I&(C^L))+b[1]+3905402710&4294967295,D=I+(A<<12&4294967295|A>>>20),A=L+(C^D&(I^C))+b[2]+606105819&4294967295,L=D+(A<<17&4294967295|A>>>15),A=C+(I^L&(D^I))+b[3]+3250441966&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(D^C&(L^D))+b[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=D+(L^I&(C^L))+b[5]+1200080426&4294967295,D=I+(A<<12&4294967295|A>>>20),A=L+(C^D&(I^C))+b[6]+2821735955&4294967295,L=D+(A<<17&4294967295|A>>>15),A=C+(I^L&(D^I))+b[7]+4249261313&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(D^C&(L^D))+b[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=D+(L^I&(C^L))+b[9]+2336552879&4294967295,D=I+(A<<12&4294967295|A>>>20),A=L+(C^D&(I^C))+b[10]+4294925233&4294967295,L=D+(A<<17&4294967295|A>>>15),A=C+(I^L&(D^I))+b[11]+2304563134&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(D^C&(L^D))+b[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=D+(L^I&(C^L))+b[13]+4254626195&4294967295,D=I+(A<<12&4294967295|A>>>20),A=L+(C^D&(I^C))+b[14]+2792965006&4294967295,L=D+(A<<17&4294967295|A>>>15),A=C+(I^L&(D^I))+b[15]+1236535329&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(L^D&(C^L))+b[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=D+(C^L&(I^C))+b[6]+3225465664&4294967295,D=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(D^I))+b[11]+643717713&4294967295,L=D+(A<<14&4294967295|A>>>18),A=C+(D^I&(L^D))+b[0]+3921069994&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^D&(C^L))+b[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=D+(C^L&(I^C))+b[10]+38016083&4294967295,D=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(D^I))+b[15]+3634488961&4294967295,L=D+(A<<14&4294967295|A>>>18),A=C+(D^I&(L^D))+b[4]+3889429448&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^D&(C^L))+b[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=D+(C^L&(I^C))+b[14]+3275163606&4294967295,D=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(D^I))+b[3]+4107603335&4294967295,L=D+(A<<14&4294967295|A>>>18),A=C+(D^I&(L^D))+b[8]+1163531501&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^D&(C^L))+b[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=D+(C^L&(I^C))+b[2]+4243563512&4294967295,D=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(D^I))+b[7]+1735328473&4294967295,L=D+(A<<14&4294967295|A>>>18),A=C+(D^I&(L^D))+b[12]+2368359562&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(C^L^D)+b[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=D+(I^C^L)+b[8]+2272392833&4294967295,D=I+(A<<11&4294967295|A>>>21),A=L+(D^I^C)+b[11]+1839030562&4294967295,L=D+(A<<16&4294967295|A>>>16),A=C+(L^D^I)+b[14]+4259657740&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^D)+b[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=D+(I^C^L)+b[4]+1272893353&4294967295,D=I+(A<<11&4294967295|A>>>21),A=L+(D^I^C)+b[7]+4139469664&4294967295,L=D+(A<<16&4294967295|A>>>16),A=C+(L^D^I)+b[10]+3200236656&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^D)+b[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=D+(I^C^L)+b[0]+3936430074&4294967295,D=I+(A<<11&4294967295|A>>>21),A=L+(D^I^C)+b[3]+3572445317&4294967295,L=D+(A<<16&4294967295|A>>>16),A=C+(L^D^I)+b[6]+76029189&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^D)+b[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=D+(I^C^L)+b[12]+3873151461&4294967295,D=I+(A<<11&4294967295|A>>>21),A=L+(D^I^C)+b[15]+530742520&4294967295,L=D+(A<<16&4294967295|A>>>16),A=C+(L^D^I)+b[2]+3299628645&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(L^(C|~D))+b[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=D+(C^(I|~L))+b[7]+1126891415&4294967295,D=I+(A<<10&4294967295|A>>>22),A=L+(I^(D|~C))+b[14]+2878612391&4294967295,L=D+(A<<15&4294967295|A>>>17),A=C+(D^(L|~I))+b[5]+4237533241&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~D))+b[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=D+(C^(I|~L))+b[3]+2399980690&4294967295,D=I+(A<<10&4294967295|A>>>22),A=L+(I^(D|~C))+b[10]+4293915773&4294967295,L=D+(A<<15&4294967295|A>>>17),A=C+(D^(L|~I))+b[1]+2240044497&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~D))+b[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=D+(C^(I|~L))+b[15]+4264355552&4294967295,D=I+(A<<10&4294967295|A>>>22),A=L+(I^(D|~C))+b[6]+2734768916&4294967295,L=D+(A<<15&4294967295|A>>>17),A=C+(D^(L|~I))+b[13]+1309151649&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~D))+b[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=D+(C^(I|~L))+b[11]+3174756917&4294967295,D=I+(A<<10&4294967295|A>>>22),A=L+(I^(D|~C))+b[2]+718787259&4294967295,L=D+(A<<15&4294967295|A>>>17),A=C+(D^(L|~I))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(L+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+D&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var C=I-this.blockSize,b=this.B,L=this.h,D=0;D<I;){if(L==0)for(;D<=C;)o(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<I;)if(b[L++]=P.charCodeAt(D++),L==this.blockSize){o(this,b),L=0;break}}else for(;D<I;)if(b[L++]=P[D++],L==this.blockSize){o(this,b),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var C=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=C&255,C/=256;for(this.u(P),P=Array(16),I=C=0;4>I;++I)for(var b=0;32>b;b+=8)P[C++]=this.g[I]>>>b&255;return P};function a(P,I){var C=d;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=I(P)}function u(P,I){this.h=I;for(var C=[],b=!0,L=P.length-1;0<=L;L--){var D=P[L]|0;b&&D==I||(C[L]=D,b=!1)}this.g=C}var d={};function p(P){return-128<=P&&128>P?a(P,function(I){return new u([I|0],0>I?-1:0)}):new u([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return R(y(-P));for(var I=[],C=1,b=0;P>=C;b++)I[b]=P/C|0,C*=4294967296;return new u(I,0)}function _(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return R(_(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(I,8)),b=E,L=0;L<P.length;L+=8){var D=Math.min(8,P.length-L),A=parseInt(P.substring(L,L+D),I);8>D?(D=y(Math.pow(I,D)),b=b.j(D).add(y(A))):(b=b.j(C),b=b.add(y(A)))}return b}var E=p(0),S=p(1),M=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-R(this).m();for(var P=0,I=1,C=0;C<this.g.length;C++){var b=this.i(C);P+=(0<=b?b:4294967296+b)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N(this))return"0";if(F(this))return"-"+R(this).toString(P);for(var I=y(Math.pow(P,6)),C=this,b="";;){var L=re(C,I).g;C=Y(C,L.j(I));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=L,N(C))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function N(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function F(P){return P.h==-1}n.l=function(P){return P=Y(this,P),F(P)?-1:N(P)?0:1};function R(P){for(var I=P.g.length,C=[],b=0;b<I;b++)C[b]=~P.g[b];return new u(C,~P.h).add(S)}n.abs=function(){return F(this)?R(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],b=0,L=0;L<=I;L++){var D=b+(this.i(L)&65535)+(P.i(L)&65535),A=(D>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);b=A>>>16,D&=65535,A&=65535,C[L]=A<<16|D}return new u(C,C[C.length-1]&-2147483648?-1:0)};function Y(P,I){return P.add(R(I))}n.j=function(P){if(N(this)||N(P))return E;if(F(this))return F(P)?R(this).j(R(P)):R(R(this).j(P));if(F(P))return R(this.j(R(P)));if(0>this.l(M)&&0>P.l(M))return y(this.m()*P.m());for(var I=this.g.length+P.g.length,C=[],b=0;b<2*I;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(var L=0;L<P.g.length;L++){var D=this.i(b)>>>16,A=this.i(b)&65535,Ne=P.i(L)>>>16,Xe=P.i(L)&65535;C[2*b+2*L]+=A*Xe,Z(C,2*b+2*L),C[2*b+2*L+1]+=D*Xe,Z(C,2*b+2*L+1),C[2*b+2*L+1]+=A*Ne,Z(C,2*b+2*L+1),C[2*b+2*L+2]+=D*Ne,Z(C,2*b+2*L+2)}for(b=0;b<I;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=I;b<2*I;b++)C[b]=0;return new u(C,0)};function Z(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function X(P,I){this.g=P,this.h=I}function re(P,I){if(N(I))throw Error("division by zero");if(N(P))return new X(E,E);if(F(P))return I=re(R(P),I),new X(R(I.g),R(I.h));if(F(I))return I=re(P,R(I)),new X(R(I.g),I.h);if(30<P.g.length){if(F(P)||F(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,b=I;0>=b.l(P);)C=Q(C),b=Q(b);var L=te(C,1),D=te(b,1);for(b=te(b,2),C=te(C,2);!N(b);){var A=D.add(b);0>=A.l(P)&&(L=L.add(C),D=A),b=te(b,1),C=te(C,1)}return I=Y(P,L.j(I)),new X(L,I)}for(L=E;0<=P.l(I);){for(C=Math.max(1,Math.floor(P.m()/I.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=y(C),A=D.j(I);F(A)||0<A.l(P);)C-=b,D=y(C),A=D.j(I);N(D)&&(D=S),L=L.add(D),P=Y(P,A)}return new X(L,P)}n.A=function(P){return re(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],b=0;b<I;b++)C[b]=this.i(b)&P.i(b);return new u(C,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],b=0;b<I;b++)C[b]=this.i(b)|P.i(b);return new u(C,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),C=[],b=0;b<I;b++)C[b]=this.i(b)^P.i(b);return new u(C,this.h^P.h)};function Q(P){for(var I=P.g.length+1,C=[],b=0;b<I;b++)C[b]=P.i(b)<<1|P.i(b-1)>>>31;return new u(C,P.h)}function te(P,I){var C=I>>5;I%=32;for(var b=P.g.length-C,L=[],D=0;D<b;D++)L[D]=0<I?P.i(D+C)>>>I|P.i(D+C+1)<<32-I:P.i(D+C);return new u(L,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Uw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=_,Es=u}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jw,ol,Bw,Rc,Hf,zw,$w,qw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var v=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var j=c[T];if(!(j in v))break e;v=v[j]}c=c[c.length-1],T=v[c],m=m(T),m!=T&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var v=0,T=!1,j={next:function(){if(!T&&v<c.length){var W=v++;return{value:m(W,c[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function E(c,m,v){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function S(c,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function M(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function N(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(T,j,W){for(var ce=Array(arguments.length-2),He=2;He<arguments.length;He++)ce[He-2]=arguments[He];return m.prototype[j].apply(T,ce)}}function F(c){const m=c.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=c[T];return v}return[]}function R(c,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const j=c.length||0,W=T.length||0;c.length=j+W;for(let ce=0;ce<W;ce++)c[j+ce]=T[ce]}else c.push(T)}}class Y{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var Q=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function te(c,m,v){for(const T in c)m.call(v,c[T],T,c)}function P(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function I(c){const m={};for(const v in c)m[v]=c[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,m){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)c[v]=T[v];for(let W=0;W<C.length;W++)v=C[W],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function L(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function D(c){d.setTimeout(()=>{throw c},0)}function A(){var c=ve;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Ne{constructor(){this.h=this.g=null}add(m,v){const T=Xe.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Xe=new Y(()=>new je,c=>c.reset());class je{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,le=!1,ve=new Ne,he=()=>{const c=d.Promise.resolve(void 0);Me=()=>{c.then(U)}};var U=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(v){D(v)}var m=Xe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}le=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return c})();function ae(c,m){if(K.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(Q){e:{try{re(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ae.aa.h.call(this)}}N(ae,K);var we={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function be(c,m,v,T,j){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=j,this.key=++Ce,this.da=this.fa=!1}function Ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Kt(c){this.src=c,this.g={},this.h=0}Kt.prototype.add=function(c,m,v,T,j){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ce=Tn(c,m,T,j);return-1<ce?(m=c[ce],v||(m.fa=!1)):(m=new be(m,this.src,W,!!T,j),m.fa=v,c.push(m)),m};function Er(c,m){var v=m.type;if(v in c.g){var T=c.g[v],j=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(T,j,1),W&&(Ge(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Tn(c,m,v,T){for(var j=0;j<c.length;++j){var W=c[j];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==T)return j}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),Tr={};function ra(c,m,v,T,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)ra(c,m[W],v,T,j);return null}return v=oa(v),c&&c[De]?c.K(m,v,y(T)?!!T.capture:!1,j):ia(c,m,v,!1,T,j)}function ia(c,m,v,T,j,W){if(!m)throw Error("Invalid event type");var ce=y(j)?!!j.capture:!!j,He=Vs(c);if(He||(c[Xt]=He=new Kt(c)),v=He.add(m,v,T,ce,W),v.proxy)return v;if(T=Jl(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)se||(j=ce),j===void 0&&(j=!1),c.addEventListener(m.toString(),T,j);else if(c.attachEvent)c.attachEvent(Sr(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Jl(){function c(v){return m.call(c.src,c.listener,v)}const m=sa;return c}function Ls(c,m,v,T,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)Ls(c,m[W],v,T,j);else T=y(T)?!!T.capture:!!T,v=oa(v),c&&c[De]?(c=c.i,m=String(m).toString(),m in c.g&&(W=c.g[m],v=Tn(W,v,T,j),-1<v&&(Ge(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[m],c.h--)))):c&&(c=Vs(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Tn(m,v,T,j)),(v=-1<c?m[c]:null)&&Ir(v))}function Ir(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[De])Er(m.i,c);else{var v=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(v,T,c.capture):m.detachEvent?m.detachEvent(Sr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=Vs(m))?(Er(v,c),v.h==0&&(v.src=null,m[Xt]=null)):Ge(c)}}}function Sr(c){return c in Tr?Tr[c]:Tr[c]="on"+c}function sa(c,m){if(c.da)c=!0;else{m=new ae(m,this);var v=c.listener,T=c.ha||c.src;c.fa&&Ir(c),c=v.call(T,m)}return c}function Vs(c){return c=c[Xt],c instanceof Kt?c:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(m){return c.handleEvent(m)}),c[Ms])}function _t(){G.call(this),this.i=new Kt(this),this.M=this,this.F=null}N(_t,G),_t.prototype[De]=!0,_t.prototype.removeEventListener=function(c,m,v,T){Ls(this,c,m,v,T)};function vt(c,m){var v,T=c.F;if(T)for(v=[];T;T=T.F)v.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new K(m,c);else if(m instanceof K)m.target=m.target||c;else{var j=m;m=new K(T,c),b(m,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var ce=m.g=v[W];j=Rr(ce,T,!0,m)&&j}if(ce=m.g=c,j=Rr(ce,T,!0,m)&&j,j=Rr(ce,T,!1,m)&&j,v)for(W=0;W<v.length;W++)ce=m.g=v[W],j=Rr(ce,T,!1,m)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],T=0;T<v.length;T++)Ge(v[T]);delete c.g[m],c.h--}}this.F=null},_t.prototype.K=function(c,m,v,T){return this.i.add(String(c),m,!1,v,T)},_t.prototype.L=function(c,m,v,T){return this.i.add(String(c),m,!0,v,T)};function Rr(c,m,v,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var ce=m[W];if(ce&&!ce.da&&ce.capture==v){var He=ce.listener,wt=ce.ha||ce.src;ce.fa&&Er(c.i,ce),j=He.call(wt,T)!==!1&&j}}return j&&!T.defaultPrevented}function aa(c,m,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function ti(c){c.g=aa(()=>{c.g=null,c.i&&(c.i=!1,ti(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Wi extends G{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ti(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(c){G.call(this),this.h=c,this.g={}}N(Hi,G);var la=[];function ua(c){te(c.g,function(m,v){this.g.hasOwnProperty(v)&&Ir(m)},c),c.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),ua(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ki(){}Ki.prototype.h=null;function Fs(c){return c.h||(c.h=c.i())}function Us(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){K.call(this,"d")}N(Zn,K);function js(){K.call(this,"c")}N(js,K);var er={},fa=null;function Gi(){return fa=fa||new _t}er.La="serverreachability";function pa(c){K.call(this,er.La,c)}N(pa,K);function Ar(c){const m=Gi();vt(m,new pa(m))}er.STAT_EVENT="statevent";function ma(c,m){K.call(this,er.STAT_EVENT,c),this.stat=m}N(ma,K);function ct(c){const m=Gi();vt(m,new ma(m,c))}er.Ma="timingevent";function Bs(c,m){K.call(this,er.Ma,c),this.size=m}N(Bs,K);function Dn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Qi(){this.g=!0}Qi.prototype.xa=function(){this.g=!1};function Ji(c,m,v,T,j,W){c.info(function(){if(c.g)if(W)for(var ce="",He=W.split("&"),wt=0;wt<He.length;wt++){var Be=He[wt].split("=");if(1<Be.length){var St=Be[0];Be=Be[1];var ft=St.split("_");ce=2<=ft.length&&ft[1]=="type"?ce+(St+"="+Be+"&"):ce+(St+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+v+`
`+ce})}function zs(c,m,v,T,j,W,ce){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+v+`
`+W+" "+ce})}function Ln(c,m,v,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vh(c,v)+(T?" "+T:"")})}function ga(c,m){c.info(function(){return"TIMEOUT: "+m})}Qi.prototype.info=function(){};function Vh(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var T=v[c];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<j.length;ce++)j[ce]=""}}}}return ca(v)}catch{return m}}var $s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function Yi(){}N(Yi,Ki),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Vn=new Yi;function Mn(c,m,v,T){this.j=c,this.i=m,this.l=v,this.R=T||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}var ya={},qs={};function Ws(c,m,v){c.L=1,c.v=oi(pn(m)),c.m=v,c.P=!0,_a(c,null)}function _a(c,m){c.F=Date.now(),Je(c),c.A=pn(c.v);var v=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),li(v.i,"t",T),c.C=0,v=c.j.J,c.h=new Xl,c.g=gu(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Wi(S(c.Y,c,c.g),c.O)),m=c.U,v=c.g,T=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(la[0]=j.toString()),j=la);for(var W=0;W<j.length;W++){var ce=ra(v,j[W],T||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Ar(),Ji(c.i,c.u,c.A,c.l,c.R,c.m)}Mn.prototype.ca=function(c){c=c.target;const m=this.M;m&&en(c)==3?m.j():this.Y(c)},Mn.prototype.Y=function(c){try{if(c==this.g)e:{const ft=en(this.g);var m=this.g.Ba();const An=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||ft!=4||m==7||(m==8||0>=An?Ar(3):Ar(2)),Xi(this);var v=this.g.Z();this.X=v;t:if(Zl(this)){var T=Sa(this.g);c="";var j=T.length,W=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),ni(this);var ce="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(W&&m==j-1)});T.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,zs(this.i,this.u,this.A,this.l,this.R,ft,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,wt=this.g;if((He=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(He)){var Be=He;break t}}Be=null}if(v=Be)Ln(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,v);else{this.o=!1,this.s=3,ct(12),Sn(this),ni(this);break e}}if(this.P){v=!0;let gn;for(;!this.J&&this.C<ce.length;)if(gn=Mh(this,ce),gn==qs){ft==4&&(this.s=4,ct(14),v=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==ya){this.s=4,ct(15),Ln(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else Ln(this.i,this.l,gn,null),va(this,gn);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||ce.length!=0||this.h.h||(this.s=1,ct(16),v=!1),this.o=this.o&&v,!v)Ln(this.i,this.l,ce,"[Invalid Chunked Response]"),Sn(this),ni(this);else if(0<ce.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Aa(St),St.M=!0,ct(11))}}else Ln(this.i,this.l,ce,null),va(this,ce);ft==4&&Sn(this),this.o&&!this.J&&(ft==4?no(this.j,this):(this.o=!1,Je(this)))}else Ys(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Sn(this),ni(this)}}}catch{}finally{}};function Zl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Mh(c,m){var v=c.C,T=m.indexOf(`
`,v);return T==-1?qs:(v=Number(m.substring(v,T)),isNaN(v)?ya:(T+=1,T+v>m.length?qs:(m=m.slice(T,T+v),c.C=T+v,m)))}Mn.prototype.cancel=function(){this.J=!0,Sn(this)};function Je(c){c.S=Date.now()+c.I,eu(c,c.I)}function eu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dn(S(c.ba,c),m)}function Xi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ga(this.i,this.A),this.L!=2&&(Ar(),ct(17)),Sn(this),this.s=2,ni(this)):eu(this,this.S-c)};function ni(c){c.j.G==0||c.J||no(c.j,c)}function Sn(c){Xi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ua(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function va(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||Gt(v.h,c))){if(!c.K&&Gt(v.h,c)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)to(v),zn(v);else break e;eo(v),ct(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Dn(S(v.Za,v),6e3));if(1>=nu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xr(v,11)}else if((c.K||v.g==c)&&to(v),!Z(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Be=j[m];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const St=Be[3];St!=null&&(v.la=St,v.j.info("VER="+v.la));const ft=Be[4];ft!=null&&(v.Aa=ft,v.j.info("SVER="+v.Aa));const An=Be[5];An!=null&&typeof An=="number"&&0<An&&(T=1.5*An,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const gn=c.g;if(gn){const ss=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ss){var W=T.h;W.g||ss.indexOf("spdy")==-1&&ss.indexOf("quic")==-1&&ss.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wa(W,W.h),W.h=null))}if(T.D){const io=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(T.ya=io,Qe(T.I,T.D,io))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ce=c;if(T.qa=mu(T,T.J?T.ia:null,T.W),ce.K){ru(T.h,ce);var He=ce,wt=T.L;wt&&(He.I=wt),He.B&&(Xi(He),Je(He)),T.g=ce}else is(T);0<v.i.length&&ir(v)}else Be[0]!="stop"&&Be[0]!="close"||xr(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?xr(v,7):Nt(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Ar(4)}catch{}}var tu=class{constructor(c,m){this.g=c,this.map=m}};function Zi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nu(c){return c.h?1:c.g?c.g.size:0}function Gt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function wa(c,m){c.g?c.g.add(m):c.h=m}function ru(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Zi.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function iu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return F(c.i)}function Hs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],v=c.length,T=0;T<v;T++)m.push(c[T]);return m}m=[],v=0;for(T in c)m[v++]=c[T];return m}function Ks(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const T in c)m[v++]=T;return m}}}function ri(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=Ks(c),T=Hs(c),j=T.length,W=0;W<j;W++)m.call(void 0,T[W],v&&v[W],c)}var es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fh(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var T=c[v].indexOf("="),j=null;if(0<=T){var W=c[v].substring(0,T);j=c[v].substring(T+1)}else W=c[v];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Cr){this.h=c.h,ts(this,c.j),this.o=c.o,this.g=c.g,ii(this,c.s),this.l=c.l;var m=c.i,v=new tr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),si(this,v),this.m=c.m}else c&&(m=String(c).match(es))?(this.h=!1,ts(this,m[1]||"",!0),this.o=Fe(m[2]||""),this.g=Fe(m[3]||"",!0),ii(this,m[4]),this.l=Fe(m[5]||"",!0),si(this,m[6]||"",!0),this.m=Fe(m[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}Cr.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ai(m,Gs,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ai(m,Gs,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ai(v,v.charAt(0)=="/"?au:ou,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ai(v,Ea)),c.join("")};function pn(c){return new Cr(c)}function ts(c,m,v){c.j=v?Fe(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ii(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function si(c,m,v){m instanceof tr?(c.i=m,nr(c.i,c.h)):(v||(m=ai(m,lu)),c.i=new tr(m,c.h))}function Qe(c,m,v){c.i.set(m,v)}function oi(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fe(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ai(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,su),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function su(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Gs=/[#\/\?@]/g,ou=/[#\?:]/g,au=/[#\?]/g,lu=/[#\?@]/g,Ea=/#/g;function tr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Pt(c){c.g||(c.g=new Map,c.h=0,c.i&&Fh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=tr.prototype,n.add=function(c,m){Pt(this),this.i=null,c=Rn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function Fn(c,m){Pt(c),m=Rn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Un(c,m){return Pt(c),m=Rn(c,m),c.g.has(m)}n.forEach=function(c,m){Pt(this),this.g.forEach(function(v,T){v.forEach(function(j){c.call(m,j,T,this)},this)},this)},n.na=function(){Pt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const j=c[T];for(let W=0;W<j.length;W++)v.push(m[T])}return v},n.V=function(c){Pt(this);let m=[];if(typeof c=="string")Un(this,c)&&(m=m.concat(this.g.get(Rn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},n.set=function(c,m){return Pt(this),this.i=null,c=Rn(this,c),Un(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function li(c,m,v){Fn(c,m),0<v.length&&(c.i=null,c.g.set(Rn(c,m),F(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const W=encodeURIComponent(String(T)),ce=this.V(T);for(T=0;T<ce.length;T++){var j=W;ce[T]!==""&&(j+="="+encodeURIComponent(String(ce[T]))),c.push(j)}}return this.i=c.join("&")};function Rn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function nr(c,m){m&&!c.j&&(Pt(c),c.i=null,c.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(Fn(this,T),li(this,j,v))},c)),c.j=m}function Uh(c,m){const v=new Qi;if(d.Image){const T=new Image;T.onload=M(Zt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=M(Zt,v,"TestLoadImage: error",!1,m,T),T.onabort=M(Zt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=M(Zt,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function uu(c,m){const v=new Qi,T=new AbortController,j=setTimeout(()=>{T.abort(),Zt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(W=>{clearTimeout(j),W.ok?Zt(v,"TestPingServer: ok",!0,m):Zt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Zt(v,"TestPingServer: error",!1,m)})}function Zt(c,m,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function jh(){this.g=new da}function cu(c,m,v){const T=v||"";try{ri(c,function(j,W){let ce=j;y(j)&&(ce=ca(j)),m.push(T+W+"="+encodeURIComponent(ce))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function kr(c){this.l=c.Ub||null,this.j=c.eb||!1}N(kr,Ki),kr.prototype.g=function(){return new ns(this.l,this.j)},kr.prototype.i=(function(c){return function(){return c}})({});function ns(c,m){_t.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ns,_t),n=ns.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Bn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?jn(this):Bn(this),this.readyState==3&&hu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,jn(this))},n.Qa=function(c){this.g&&(this.response=c,jn(this))},n.ga=function(){this.g&&jn(this)};function jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bn(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Bn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pr(c){let m="";return te(c,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function ui(c,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Pr(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Qe(c,m,v))}function nt(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(nt,_t);var Bh=/^https?$/i,Ta=["POST","PUT"];n=nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?Fs(this.o):Fs(Vn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(W){rs(this,W);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())v.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ta,m,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of v)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){rs(this,W)}};function rs(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Qs(c),mn(c)}function Qs(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mn(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(c){if(c.h&&typeof u<"u"&&(!c.v[1]||en(c)!=4||c.Z()!=2)){if(c.u&&en(c)==4)aa(c.Ea,0,c);else if(vt(c,"readystatechange"),en(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ce===0){var j=String(c.D).match(es)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Bh.test(j?j.toLowerCase():"")}v=T}if(v)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var W=2<en(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Qs(c)}}finally{mn(c)}}}}function mn(c,m){if(c.g){Js(c);const v=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||vt(c,"ready");try{v.onreadystatechange=T}catch{}}}function Js(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function en(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ha(m)}};function Sa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(c){const m={};c=(c.g&&2<=en(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(Z(c[T]))continue;var v=L(c[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[j]||[];m[j]=W,W.push(v)}P(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Ra(c){this.Aa=0,this.i=[],this.j=new Qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,c),this.cb=rr("retryDelaySeedMs",1e4,c),this.Wa=rr("forwardChannelMaxRetries",2,c),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(c&&c.concurrentRequestLimit),this.Da=new jh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ra.prototype,n.la=8,n.G=1,n.connect=function(c,m,v,T){ct(0),this.W=c,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=mu(this,null,this.W),ir(this)};function Nt(c){if(Xs(c),c.G==3){var m=c.U++,v=pn(c.I);if(Qe(v,"SID",c.K),Qe(v,"RID",m),Qe(v,"TYPE","terminate"),Nr(c,v),m=new Mn(c,c.j,m),m.L=2,m.v=oi(pn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}pu(c)}function zn(c){c.g&&(Aa(c),c.g.cancel(),c.g=null)}function Xs(c){zn(c),c.u&&(d.clearTimeout(c.u),c.u=null),to(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function ir(c){if(!fn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Me||he(),le||(Me(),le=!0),ve.add(m,c),c.B=0}}function zh(c,m){return nu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dn(S(c.Ga,c,m),fu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Mn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=I(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ci(this,j,m),v=pn(this.I),Qe(v,"RID",c),Qe(v,"CVER",22),this.D&&Qe(v,"X-HTTP-Session-Id",this.D),Nr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Pr(W)))+"&"+m:this.m&&ui(v,this.m,W)),wa(this.h,j),this.Ua&&Qe(v,"TYPE","init"),this.P?(Qe(v,"$req",m),Qe(v,"SID","null"),j.T=!0,Ws(j,v,null)):Ws(j,v,m),this.G=2}}else this.G==3&&(c?Zs(this,c):this.i.length==0||fn(this.h)||Zs(this))};function Zs(c,m){var v;m?v=m.l:v=c.U++;const T=pn(c.I);Qe(T,"SID",c.K),Qe(T,"RID",v),Qe(T,"AID",c.T),Nr(c,T),c.m&&c.o&&ui(T,c.m,c.o),v=new Mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ci(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wa(c.h,v),Ws(v,T,m)}function Nr(c,m){c.H&&te(c.H,function(v,T){Qe(m,T,v)}),c.l&&ri({},function(v,T){Qe(m,T,v)})}function ci(c,m,v){v=Math.min(c.i.length,v);var T=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let W=-1;for(;;){const ce=["count="+v];W==-1?0<v?(W=j[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let He=!0;for(let wt=0;wt<v;wt++){let Be=j[wt].g;const St=j[wt].map;if(Be-=W,0>Be)W=Math.max(0,j[wt].g-100),He=!1;else try{cu(St,ce,"req"+Be+"_")}catch{T&&T(St)}}if(He){T=ce.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,T}function is(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Me||he(),le||(Me(),le=!0),ve.add(m,c),c.v=0}}function eo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dn(S(c.Fa,c),fu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dn(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),zn(this),du(this))};function Aa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function du(c){c.g=new Mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=pn(c.qa);Qe(m,"RID","rpc"),Qe(m,"SID",c.K),Qe(m,"AID",c.T),Qe(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(m,"TO",c.ja),Qe(m,"TYPE","xmlhttp"),Nr(c,m),c.m&&c.o&&ui(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=oi(pn(m)),v.m=null,v.P=!0,_a(v,c)}n.Za=function(){this.C!=null&&(this.C=null,zn(this),eo(this),ct(19))};function to(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function no(c,m){var v=null;if(c.g==m){to(c),Aa(c),c.g=null;var T=2}else if(Gt(c.h,m))v=m.D,ru(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;T=Gi(),vt(T,new Bs(T,v)),ir(c)}else is(c);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&zh(c,m)||T==2&&eo(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),j){case 1:xr(c,5);break;case 4:xr(c,10);break;case 3:xr(c,6);break;default:xr(c,2)}}}function fu(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function xr(c,m){if(c.j.info("Error code "+m),m==2){var v=S(c.fb,c),T=c.Xa;const j=!T;T=new Cr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ts(T,"https"),oi(T),j?Uh(T.toString(),v):uu(T.toString(),v)}else ct(2);c.G=0,c.l&&c.l.sa(m),pu(c),Xs(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const m=iu(c.h);(m.length!=0||c.i.length!=0)&&(R(c.ka,m),R(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function mu(c,m,v){var T=v instanceof Cr?pn(v):new Cr(v);if(T.g!="")m&&(T.g=m+"."+T.g),ii(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new Cr(null);T&&ts(W,T),m&&(W.g=m),j&&ii(W,j),v&&(W.l=v),T=W}return v=c.D,m=c.ya,v&&m&&Qe(T,v,m),Qe(T,"VER",c.la),Nr(c,T),T}function gu(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new nt(new kr({eb:v})):new nt(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}n=Ca.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ro(){}ro.prototype.g=function(c,m){return new Qt(c,m)};function Qt(c,m){_t.call(this),this.g=new Ra(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!Z(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new sr(this)}N(Qt,_t),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Nt(this.g)},Qt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ca(c),c=v);m.i.push(new tu(m.Ya++,c)),m.G==3&&ir(m)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Qt.aa.N.call(this)};function yu(c){Zn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}N(yu,Zn);function _u(){js.call(this),this.status=1}N(_u,js);function sr(c){this.g=c}N(sr,Ca),sr.prototype.ua=function(){vt(this.g,"a")},sr.prototype.ta=function(c){vt(this.g,new yu(c))},sr.prototype.sa=function(c){vt(this.g,new _u)},sr.prototype.ra=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,qw=function(){return new ro},$w=function(){return Gi()},zw=er,Hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,Rc=$s,Yl.COMPLETE="complete",Bw=Yl,Us.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ol=Us,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,jw=nt}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Ep("@firebase/firestore");function Xa(){return As.logLevel}function ye(n,...e){if(As.logLevel<=Ue.DEBUG){const t=e.map(bp);As.debug(`Firestore (${Ko}): ${n}`,...t)}}function Kr(n,...e){if(As.logLevel<=Ue.ERROR){const t=e.map(bp);As.error(`Firestore (${Ko}): ${n}`,...t)}}function Vo(n,...e){if(As.logLevel<=Ue.WARN){const t=e.map(bp);As.warn(`Firestore (${Ko}): ${n}`,...t)}}function bp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+n;throw Kr(e),new Error(e)}function Ke(n,e){n||Ae()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class aC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lC{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new Ww(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new zt(e)}}class uC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new uC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new hC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=fC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function We(n,e){return n<e?-1:n>e?1:0}function Mo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new It(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new It(0,0))}static max(){return new ke(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(),i===void 0?i=e.length-t:i>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tt extends wl{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const pC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends wl{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return pC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(tt.fromString(e))}static fromName(e){return new Ee(tt.fromString(e).popFirst(5))}static empty(){return new Ee(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new tt(e.slice()))}}function mC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new Ui(o,Ee.empty(),e)}function gC(n){return new Ui(n.readTime,n.key,-1)}class Ui{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ui(ke.min(),Ee.empty(),-1)}static max(){return new Ui(ke.max(),Ee.empty(),-1)}}function yC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==_C)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((o=>o?ie.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((_=>{u[y]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new ie(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function wC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Op.oe=-1;function uh(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function EC(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new wn([])}unionWith(e){let t=new Lt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Gw("Invalid base64 string: "+a):a}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const TC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=TC.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lp(n){const e=n.mapValue.fields.__previous_value__;return Dp(e)?Lp(e):e}function El(n){const e=ji(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t,i,o,a,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc={mapValue:{}};function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dp(n)?4:RC(n)?9007199254740991:SC(n)?10:11:Ae()}function yr(n,e){if(n===e)return!0;const t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=ji(o.timestampValue),d=ji(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Cs(o.bytesValue).isEqual(Cs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return dt(o.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return dt(o.integerValue)===dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=dt(o.doubleValue),d=dt(a.doubleValue);return u===d?zc(u)===zc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Mo(n.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(v_(u)!==v_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!yr(u[p],d[p])))return!1;return!0})(n,e);default:return Ae()}}function Il(n,e){return(n.values||[]).find((t=>yr(t,e)))!==void 0}function Fo(n,e){if(n===e)return 0;const t=ks(n),i=ks(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=dt(a.integerValue||a.doubleValue),p=dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return E_(n.timestampValue,e.timestampValue);case 4:return E_(El(n),El(e));case 5:return We(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Cs(a),p=Cs(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=We(d[y],p[y]);if(_!==0)return _}return We(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=We(dt(a.latitude),dt(u.latitude));return d!==0?d:We(dt(a.longitude),dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return T_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,y,_;const E=a.fields||{},S=u.fields||{},M=(d=E.value)===null||d===void 0?void 0:d.arrayValue,N=(p=S.value)===null||p===void 0?void 0:p.arrayValue,F=We(((y=M?.values)===null||y===void 0?void 0:y.length)||0,((_=N?.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:T_(M,N)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===mc.mapValue&&u===mc.mapValue)return 0;if(a===mc.mapValue)return 1;if(u===mc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const S=We(p[E],_[E]);if(S!==0)return S;const M=Fo(d[p[E]],y[_[E]]);if(M!==0)return M}return We(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ae()}}function E_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ji(n),i=ji(e),o=We(t.seconds,i.seconds);return o!==0?o:We(t.nanos,i.nanos)}function T_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Fo(t[o],i[o]);if(a)return a}return We(t.length,i.length)}function Uo(n){return Kf(n)}function Kf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ji(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Kf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Kf(t.fields[u])}`;return o+"}"})(n.mapValue):Ae()}function I_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gf(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function S_(n){return!!n&&"nullValue"in n}function R_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ac(n){return!!n&&"mapValue"in n}function SC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=hl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){bs(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new ln(hl(this.value))}}function Qw(n){const e=[];return bs(n.fields,((t,i)=>{const o=new Dt([t]);if(Ac(i)){const a=Qw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new $t(e,0,ke.min(),ke.min(),ke.min(),ln.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,ke.min(),ke.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,ke.min(),ke.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.position=e,this.inclusive=t}}function A_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Fo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function C_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function AC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{}class gt extends Jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kC(e,t,i):t==="array-contains"?new xC(e,i):t==="in"?new bC(e,i):t==="not-in"?new OC(e,i):t==="array-contains-any"?new DC(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new PC(e,i):new NC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fo(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends Jw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yn(e,t)}matches(e){return Yw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yw(n){return n.op==="and"}function Xw(n){return CC(n)&&Yw(n)}function CC(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function Qf(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(Xw(n))return n.filters.map((e=>Qf(e))).join(",");{const e=n.filters.map((t=>Qf(t))).join(",");return`${n.op}(${e})`}}function Zw(n,e){return n instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&yr(i.value,o.value)})(n,e):n instanceof Yn?(function(i,o){return o instanceof Yn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Zw(u,o.filters[d])),!0):!1})(n,e):void Ae()}function eE(n){return n instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof Yn?(function(t){return t.op.toString()+" {"+t.getFilters().map(eE).join(" ,")+"}"})(n):"Filter"}class kC extends gt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class PC extends gt{constructor(e,t){super(e,"in",t),this.keys=tE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class NC extends gt{constructor(e,t){super(e,"not-in",t),this.keys=tE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class xC extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Il(t.arrayValue,this.value)}}class bC extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Il(this.value.arrayValue,t)}}class OC extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Il(this.value.arrayValue,t)}}class DC extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Il(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function k_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new LC(n,e,t,i,o,a,u)}function Mp(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Uo(i))).join(",")),e.ue=t}return e.ue}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Zw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!C_(n.startAt,e.startAt)&&C_(n.endAt,e.endAt)}function Jf(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VC(n,e,t,i,o,a,u,d){return new Go(n,e,t,i,o,a,u,d)}function ch(n){return new Go(n)}function P_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nE(n){return n.collectionGroup!==null}function dl(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Lt(Dt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Sl(a,i))})),t.has(Dt.keyField().canonicalString())||e.ce.push(new Sl(Dt.keyField(),i))}return e.ce}function mr(n){const e=Pe(n);return e.le||(e.le=MC(e,dl(n))),e.le}function MC(n,e){if(n.limitType==="F")return k_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Sl(o.field,a)}));const t=n.endAt?new $c(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $c(n.startAt.position,n.startAt.inclusive):null;return k_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yf(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qc(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return Fp(mr(n),mr(e))&&n.limitType===e.limitType}function rE(n){return`${Mp(mr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>eE(o))).join(", ")}]`),uh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(mr(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of dl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const y=A_(u,d,p);return u.inclusive?y<=0:y<0})(i.startAt,dl(i),o)||i.endAt&&!(function(u,d,p){const y=A_(u,d,p);return u.inclusive?y>=0:y>0})(i.endAt,dl(i),o))})(n,e)}function FC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iE(n){return(e,t)=>{let i=!1;for(const o of dl(n)){const a=UC(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function UC(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?Fo(p,y):Ae()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new at(Ee.comparator);function Gr(){return jC}const sE=new at(Ee.comparator);function al(...n){let e=sE;for(const t of n)e=e.insert(t.key,t);return e}function oE(n){let e=sE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function vs(){return fl()}function aE(){return fl()}function fl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const BC=new at(Ee.comparator),zC=new Lt(Ee.comparator);function Ve(...n){let e=zC;for(const t of n)e=e.add(t);return e}const $C=new Lt(We);function qC(){return $C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function lE(n){return{integerValue:""+n}}function WC(n,e){return EC(e)?lE(e):Up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function HC(n,e,t){return n instanceof Rl?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Dp(a)&&(a=Lp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Al?cE(n,e):n instanceof jo?hE(n,e):(function(o,a){const u=uE(o,a),d=N_(u)+N_(o.Pe);return Gf(u)&&Gf(o.Pe)?lE(d):Up(o.serializer,d)})(n,e)}function KC(n,e,t){return n instanceof Al?cE(n,e):n instanceof jo?hE(n,e):t}function uE(n,e){return n instanceof Wc?(function(i){return Gf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Rl extends fh{}class Al extends fh{constructor(e){super(),this.elements=e}}function cE(n,e){const t=dE(e);for(const i of n.elements)t.some((o=>yr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class jo extends fh{constructor(e){super(),this.elements=e}}function hE(n,e){let t=dE(e);for(const i of n.elements)t=t.filter((o=>!yr(o,i)));return{arrayValue:{values:t}}}class Wc extends fh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function N_(n){return dt(n.integerValue||n.doubleValue)}function dE(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t){this.field=e,this.transform=t}}function GC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Al&&o instanceof Al||i instanceof jo&&o instanceof jo?Mo(i.elements,o.elements,yr):i instanceof Wc&&o instanceof Wc?yr(i.Pe,o.Pe):i instanceof Rl&&o instanceof Rl})(n.transform,e.transform)}class QC{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ph{}function pE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jp(n.key,On.none()):new Ul(n.key,n.data,On.none());{const t=n.data,i=ln.empty();let o=new Lt(Dt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new qi(n.key,i,new wn(o.toArray()),On.none())}}function JC(n,e,t){n instanceof Ul?(function(o,a,u){const d=o.value.clone(),p=b_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof qi?(function(o,a,u){if(!Cc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=b_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(mE(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pl(n,e,t,i){return n instanceof Ul?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=a.value.clone(),_=O_(a.fieldTransforms,p,u);return y.setAll(_),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof qi?(function(a,u,d,p){if(!Cc(a.precondition,u))return d;const y=O_(a.fieldTransforms,p,u),_=u.data;return _.setAll(mE(a)),_.setAll(y),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Cc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function YC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=uE(i.transform,o||null);a!=null&&(t===null&&(t=ln.empty()),t.set(i.field,a))}return t||null}function x_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((a,u)=>GC(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ul extends ph{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qi extends ph{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function mE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function b_(n,e,t){const i=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,KC(u,d,t[o]))}return i}function O_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,HC(a,u,e))}return i}class jp extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XC extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&JC(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=pl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=aE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=pE(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>x_(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>x_(t,i)))}}class Bp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=(function(){return BC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Bp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,ze;function nk(n){switch(n){default:return Ae();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function gE(n){if(n===void 0)return Kr("GRPC error has no .code"),J.UNKNOWN;switch(n){case mt.OK:return J.OK;case mt.CANCELLED:return J.CANCELLED;case mt.UNKNOWN:return J.UNKNOWN;case mt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case mt.INTERNAL:return J.INTERNAL;case mt.UNAVAILABLE:return J.UNAVAILABLE;case mt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case mt.NOT_FOUND:return J.NOT_FOUND;case mt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case mt.ABORTED:return J.ABORTED;case mt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case mt.DATA_LOSS:return J.DATA_LOSS;default:return Ae()}}(ze=mt||(mt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Es([4294967295,4294967295],0);function D_(n){const e=rk().encode(n),t=new Uw;return t.update(e),new Uint8Array(t.digest())}function L_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Es([t,i],0),new Es([o,a],0)]}class zp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ll(`Invalid padding: ${t}`);if(i<0)throw new ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ll(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Es.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(Es.fromNumber(i)));return o.compare(ik)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=D_(e),[i,o]=L_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new zp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=D_(e),[i,o]=L_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new mh(ke.min(),o,new at(We),Gr(),Ve())}}class jl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new jl(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class yE{constructor(e,t){this.targetId=e,this.me=t}}class _E{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class V_{constructor(){this.fe=0,this.ge=F_(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),i=Ve();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ae()}})),new jl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=F_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gr(),this.qe=M_(),this.Qe=new at(We)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ae()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Jf(a))if(i===0){const u=new Ee(a.path);this.Ue(t,u,$t.newNoDocument(u,ke.min()))}else Ke(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),p=d?this.Xe(d,e,u):1;if(p!==0){this.je(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Cs(i).toUint8Array()}catch(p){if(p instanceof Gw)return Vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new zp(u,o,a)}catch(p){return Vo(p instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&Jf(d.target)){const p=new Ee(d.target.path);this.ke.get(p)!==null||this.it(u,p)||this.Ue(u,p,$t.newNoDocument(p,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let i=Ve();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new mh(e,t,this.Qe,this.ke,i);return this.ke=Gr(),this.qe=M_(),this.Qe=new at(We),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new V_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(We),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function M_(){return new at(Ee.comparator)}function F_(){return new at(Ee.comparator)}const ok={asc:"ASCENDING",desc:"DESCENDING"},ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lk={and:"AND",or:"OR"};class uk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xf(n,e){return n.useProto3Json||uh(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ck(n,e){return Hc(n,e.toTimestamp())}function gr(n){return Ke(!!n),ke.fromTimestamp((function(t){const i=ji(t);return new It(i.seconds,i.nanos)})(n))}function $p(n,e){return Zf(n,e).canonicalString()}function Zf(n,e){const t=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wE(n){const e=tt.fromString(n);return Ke(RE(e)),e}function ep(n,e){return $p(n.databaseId,e.path)}function Ef(n,e){const t=wE(e);if(t.get(1)!==n.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(TE(t))}function EE(n,e){return $p(n.databaseId,e)}function hk(n){const e=wE(n);return e.length===4?tt.emptyPath():TE(e)}function tp(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function U_(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function dk(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,_){return y.useProto3Json?(Ke(_===void 0||typeof _=="string"),Vt.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Vt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const _=y.code===void 0?J.UNKNOWN:gE(y.code);return new de(_,y.message||"")})(u);t=new _E(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ef(n,i.document.name),a=gr(i.document.updateTime),u=i.document.createTime?gr(i.document.createTime):ke.min(),d=new ln({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,a,u,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new kc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ef(n,i.document),a=i.readTime?gr(i.readTime):ke.min(),u=$t.newNoDocument(o,a),d=i.removedTargetIds||[];t=new kc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ef(n,i.document),a=i.removedTargetIds||[];t=new kc([],a,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new tk(o,a),d=i.targetId;t=new yE(d,u)}}return t}function fk(n,e){let t;if(e instanceof Ul)t={update:U_(n,e.key,e.value)};else if(e instanceof jp)t={delete:ep(n,e.key)};else if(e instanceof qi)t={update:U_(n,e.key,e.data),updateMask:Tk(e.fieldMask)};else{if(!(e instanceof XC))return Ae();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Rl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof jo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Ae()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:ck(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()})(n,e.precondition)),t}function pk(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?gr(o.updateTime):gr(a);return u.isEqual(ke.min())&&(u=gr(a)),new QC(u,o.transformResults||[])})(t,e)))):[]}function mk(n,e){return{documents:[EE(n,e.path)]}}function gk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=EE(n,o);const a=(function(y){if(y.length!==0)return SE(Yn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((_=>(function(S){return{field:Co(S.field),direction:vk(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Xf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function yk(n){let e=hk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const S=IE(E);return S instanceof Yn&&Xw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(N){return new Sl(ko(N.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,uh(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,M=E.values||[];return new $c(M,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,M=E.values||[];return new $c(M,S)})(t.endAt)),VC(e,o,u,a,d,"F",p,y)}function _k(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ko(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ko(t.unaryFilter.field);return gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ko(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}})(n):n.fieldFilter!==void 0?(function(t){return gt.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yn.create(t.compositeFilter.filters.map((i=>IE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}})(t.compositeFilter.op))})(n):Ae()}function vk(n){return ok[n]}function wk(n){return ak[n]}function Ek(n){return lk[n]}function Co(n){return{fieldPath:n.canonicalString()}}function ko(n){return Dt.fromServerFormat(n.fieldPath)}function SE(n){return n instanceof gt?(function(t){if(t.op==="=="){if(R_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(S_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(S_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:wk(t.op),value:t.value}}})(n):n instanceof Yn?(function(t){const i=t.getFilters().map((o=>SE(o)));return i.length===1?i[0]:{compositeFilter:{op:Ek(t.op),filters:i}}})(n):Ae()}function Tk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,i,o,a=ke.min(),u=ke.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.ct=e}}function Sk(n){const e=yk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.un=new Ak}addToCollectionParentIndex(e,t){return this.un.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ui.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Ak{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(tt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bo(0)}static kn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&pl(i.mutation,o,wn.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=vs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=al();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=vs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Gr();const u=fl(),d=(function(){return fl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof qi)?a=a.insert(y.key,y):_!==void 0?(u.set(y.key,_.mutation.getFieldMask()),pl(_.mutation,y,_.mutation.getFieldMask(),It.now())):u.set(y.key,wn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,_)=>u.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new kk(_,(E=u.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=fl();let o=new at(((u,d)=>u-d)),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||wn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||Ve()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=aE();_.forEach((S=>{if(!a.has(S)){const M=pE(t.get(S),i.get(S));M!==null&&E.set(S,M),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ie.resolve(vs());let d=-1,p=a;return u.next((y=>ie.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,Ve()))).next((_=>({batchId:d,changes:oE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=al();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=al();return this.indexManager.getCollectionParents(e,a).next((d=>ie.forEach(d,(p=>{const y=(function(E,S){return new Go(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,y)=>{const _=y.getKey();u.get(_)===null&&(u=u.insert(_,$t.newInvalidDocument(_)))}));let d=al();return u.forEach(((p,y)=>{const _=a.get(p);_!==void 0&&pl(_.mutation,y,wn.empty(),It.now()),dh(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ie.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:Sk(o.bundledQuery),readTime:gr(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.overlays=new at(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vs();return ie.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.ht(e,t,a)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const o=vs(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new at(((y,_)=>y-_));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=a.get(y.largestBatchId);_===null&&(_=vs(),a=a.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=vs(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return ie.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new ek(t,i));let a=this.Ir.get(t);a===void 0&&(a=Ve(),this.Ir.set(t,a)),this.Ir.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Tr=new Lt(kt.Er),this.dr=new Lt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new kt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new Ee(new tt([])),i=new kt(t,e),o=new kt(t,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new tt([])),i=new kt(t,e),o=new kt(t,e+1);let a=Ve();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new kt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||We(e.wr,t.wr)}static Ar(e,t){return We(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(kt.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new ZC(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new kt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),a=o<0?0:o;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(We);return t.forEach((o=>{const a=new kt(o,0),u=new kt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new kt(new Ee(a),0);let d=new Lt(We);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.wr)),!0)}),u),ie.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(t.mutations,(o=>{const a=new kt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new kt(t,0),o=this.br.firstAfterOrEqual(i);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.Mr=e,this.docs=(function(){return new at(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Gr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():$t.newInvalidDocument(o))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Gr();const u=t.path,d=new Ee(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||yC(gC(_),i)<=0||(o.has(_.key)||dh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ae()}Or(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Lk(this)}getSize(e){return ie.resolve(this.size)}}class Lk extends Ck{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.persistence=e,this.Nr=new Qo((t=>Mp(t)),Fp),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qp,this.targetCount=0,this.kr=Bo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Kn(t),ie.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(a).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Op(0),this.Kr=!1,this.Kr=!0,this.$r=new bk,this.referenceDelegate=e(this),this.Ur=new Vk(this),this.indexManager=new Rk,this.remoteDocumentCache=(function(o){return new Dk(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new Ik(t),this.Gr=new Nk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Ok(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new Fk(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return ie.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class Fk extends vC{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Jr=new qp,this.Yr=null}static Zr(e){return new Wp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,(i=>{const o=Ee.fromPath(i);return this.ei(e,o).next((a=>{a||t.removeEntry(o,ke.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ie.or([()=>ie.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Ve(),o=Ve();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Hp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return AI()?8:wC(Ht())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Uk;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Xa()<=Ue.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(Xa()<=Ue.DEBUG&&ye("QueryEngine","Query:",Ao(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Xa()<=Ue.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(t))):ie.resolve())}Yi(e,t){if(P_(t))return ie.resolve(null);let i=mr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qc(t,null,"F"),i=mr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ve(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(t,d);return this.ns(t,y,u,p.readTime)?this.Yi(e,qc(t,null,"F")):this.rs(e,y,t,p)}))))})))))}Zi(e,t,i,o){return P_(t)||o.isEqual(ke.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(t,a);return this.ns(t,u,i,o)?ie.resolve(null):(Xa()<=Ue.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.rs(e,u,t,mC(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Lt(iE(e));return t.forEach(((o,a)=>{dh(e,a)&&(i=i.add(a))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,i){return Xa()<=Ue.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ui.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new at(We),this._s=new Qo((a=>Mp(a)),Fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function zk(n,e,t,i){return new Bk(n,e,t,i)}async function AE(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Ve();for(const y of o){u.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of a){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function $k(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,_){const E=y.batch,S=E.keys();let M=ie.resolve();return S.forEach((N=>{M=M.next((()=>_.getEntry(p,N))).next((F=>{const R=y.docVersions.get(N);Ke(R!==null),F.version.compareTo(R)<0&&(E.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),_.addEntry(F)))}))})),M.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ve();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function CE(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function qk(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=o.get(E);if(!S)return;d.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,E))));let M=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Vt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,i)),o=o.insert(E,M),(function(F,R,Y){return F.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,M,_)&&d.push(t.Ur.updateTargetData(a,M))}));let p=Gr(),y=Ve();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Wk(a,u,e.documentUpdates).next((_=>{p=_.Ps,y=_.Is}))),!i.isEqual(ke.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ie.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.os=o,a)))}function Wk(n,e,t){let i=Ve(),o=Ve();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Gr();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ye("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ps:u,Is:o}}))}function Hk(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Kk(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((a=>a?(o=a,ie.resolve(o)):t.Ur.allocateTargetId(i).next((u=>(o=new Ni(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function np(n,e,t){const i=Pe(n),o=i.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Fl(u))throw u;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function j_(n,e,t){const i=Pe(n);let o=ke.min(),a=Ve();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,_){const E=Pe(p),S=E._s.get(_);return S!==void 0?ie.resolve(E.os.get(S)):E.Ur.getTargetData(y,_)})(i,u,mr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?o:ke.min(),t?a:Ve()))).next((d=>(Gk(i,FC(e),d),{documents:d,Ts:a})))))}function Gk(n,e,t){let i=n.us.get(e)||ke.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.us.set(e,i)}class B_{constructor(){this.activeTargetIds=qC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qk{constructor(){this.so=new B_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new B_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Tf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Zk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,i,o,a,u){const d=Tf(),p=this.xo(t,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,a,u),this.No(t,p,y,o).then((_=>(ye("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw Vo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(t,i,o,a,u,d){return this.Mo(t,i,o,a,u)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,i){const o=Yk[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const a=Tf();return new Promise(((u,d)=>{const p=new jw;p.setWithCredentials(!0),p.listenOnce(Bw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rc.NO_ERROR:const _=p.getResponseJson();ye(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Rc.TIMEOUT:ye(Bt,`RPC '${e}' ${a} timed out`),d(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const E=p.getStatus();if(ye(Bt,`RPC '${e}' ${a} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S?.error;if(M&&M.status&&M.message){const N=(function(R){const Y=R.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN})(M.status);d(new de(N,M.message))}else d(new de(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new de(J.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ye(Bt,`RPC '${e}' ${a} completed.`)}}));const y=JSON.stringify(o);ye(Bt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=Tf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=qw(),d=$w(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");ye(Bt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);let S=!1,M=!1;const N=new Xk({Io:R=>{M?ye(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,R):(S||(ye(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ye(Bt,`RPC '${e}' stream ${o} sending:`,R),E.send(R))},To:()=>E.close()}),F=(R,Y,Z)=>{R.listen(Y,(X=>{try{Z(X)}catch(re){setTimeout((()=>{throw re}),0)}}))};return F(E,ol.EventType.OPEN,(()=>{M||(ye(Bt,`RPC '${e}' stream ${o} transport opened.`),N.yo())})),F(E,ol.EventType.CLOSE,(()=>{M||(M=!0,ye(Bt,`RPC '${e}' stream ${o} transport closed`),N.So())})),F(E,ol.EventType.ERROR,(R=>{M||(M=!0,Vo(Bt,`RPC '${e}' stream ${o} transport errored:`,R),N.So(new de(J.UNAVAILABLE,"The operation could not be completed")))})),F(E,ol.EventType.MESSAGE,(R=>{var Y;if(!M){const Z=R.data[0];Ke(!!Z);const X=Z,re=X.error||((Y=X[0])===null||Y===void 0?void 0:Y.error);if(re){ye(Bt,`RPC '${e}' stream ${o} received error:`,re);const Q=re.status;let te=(function(C){const b=mt[C];if(b!==void 0)return gE(b)})(Q),P=re.message;te===void 0&&(te=J.INTERNAL,P="Unknown error status: "+Q+" with message "+re.message),M=!0,N.So(new de(te,P)),E.close()}else ye(Bt,`RPC '${e}' stream ${o} received:`,Z),N.bo(Z)}})),F(d,zw.STAT_EVENT,(R=>{R.stat===Hf.PROXY?ye(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):R.stat===Hf.NOPROXY&&ye(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){return new uk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,i,o,a,u,d,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eP extends PE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=dk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return ke.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?gr(u.readTime):ke.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Jf(p)?{documents:mk(a,p)}:{query:gk(a,p)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=vE(a,u.resumeToken);const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(ke.min())>0){d.readTime=Hc(a,u.snapshotVersion.toTimestamp());const y=Xf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=_k(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.a_(t)}}class tP extends PE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=pk(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=tp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>fk(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Zf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(J.UNKNOWN,a.toString())}))}Lo(e,t,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,Zf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class rP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kr(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{Os(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Pe(p);y.L_.add(4),await Bl(y),y.q_.set("Unknown"),y.L_.delete(4),await yh(y)})(this))}))})),this.q_=new rP(i,o)}}async function yh(n){if(Os(n))for(const e of n.B_)await e(!0)}async function Bl(n){for(const e of n.B_)await e(!1)}function NE(n,e){const t=Pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Jp(t)?Qp(t):Jo(t).r_()&&Gp(t,e))}function Kp(n,e){const t=Pe(n),i=Jo(t);t.N_.delete(e),i.r_()&&xE(t,e),t.N_.size===0&&(i.r_()?i.o_():Os(t)&&t.q_.set("Unknown"))}function Gp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).A_(e)}function xE(n,e){n.Q_.xe(e),Jo(n).R_(e)}function Qp(n){n.Q_=new sk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.q_.v_()}function Jp(n){return Os(n)&&!Jo(n).n_()&&n.N_.size>0}function Os(n){return Pe(n).L_.size===0}function bE(n){n.Q_=void 0}async function sP(n){n.q_.set("Online")}async function oP(n){n.N_.forEach(((e,t)=>{Gp(n,e)}))}async function aP(n,e){bE(n),Jp(n)?(n.q_.M_(e),Qp(n)):n.q_.set("Unknown")}async function lP(n,e,t){if(n.q_.set("Online"),e instanceof _E&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kc(n,i)}else if(e instanceof kc?n.Q_.Ke(e):e instanceof yE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ke.min()))try{const i=await CE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.N_.get(y);_&&a.N_.set(y,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const _=a.N_.get(p);if(!_)return;a.N_.set(p,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),xE(a,p);const E=new Ni(_.target,p,y,_.sequenceNumber);Gp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),await Kc(n,i)}}async function Kc(n,e,t){if(!Fl(e))throw e;n.L_.add(1),await Bl(n),n.q_.set("Offline"),t||(t=()=>CE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yh(n)}))}function OE(n,e){return e().catch((t=>Kc(n,t,e)))}async function _h(n){const e=Pe(n),t=Bi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uP(e);)try{const o=await Hk(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,cP(e,o)}catch(o){await Kc(e,o)}DE(e)&&LE(e)}function uP(n){return Os(n)&&n.O_.length<10}function cP(n,e){n.O_.push(e);const t=Bi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function DE(n){return Os(n)&&!Bi(n).n_()&&n.O_.length>0}function LE(n){Bi(n).start()}async function hP(n){Bi(n).p_()}async function dP(n){const e=Bi(n);for(const t of n.O_)e.m_(t.mutations)}async function fP(n,e,t){const i=n.O_.shift(),o=Bp.from(i,e,t);await OE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await _h(n)}async function pP(n,e){e&&Bi(n).V_&&await(async function(i,o){if((function(u){return nk(u)&&u!==J.ABORTED})(o.code)){const a=i.O_.shift();Bi(i).s_(),await OE(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await _h(i)}})(n,e),DE(n)&&LE(n)}async function $_(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=Os(t);t.L_.add(3),await Bl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yh(t)}async function mP(n,e){const t=Pe(n);e?(t.L_.delete(2),await yh(t)):e||(t.L_.add(2),await Bl(t),t.q_.set("Unknown"))}function Jo(n){return n.K_||(n.K_=(function(t,i,o){const a=Pe(t);return a.w_(),new eP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:sP.bind(null,n),Ro:oP.bind(null,n),mo:aP.bind(null,n),d_:lP.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Jp(n)?Qp(n):n.q_.set("Unknown")):(await n.K_.stop(),bE(n))}))),n.K_}function Bi(n){return n.U_||(n.U_=(function(t,i,o){const a=Pe(t);return a.w_(),new tP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hP.bind(null,n),mo:pP.bind(null,n),f_:dP.bind(null,n),g_:fP.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await _h(n)):(await n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Yp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),Fl(n))return new de(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=al(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.W_=new at(Ee.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zo{constructor(e,t,i,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new zo(e,t,Do.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class yP{constructor(){this.queries=W_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Pe(t),a=o.queries;o.queries=W_(),a.forEach(((u,d)=>{for(const p of d.j_)p.onError(i)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function W_(){return new Qo((n=>rE(n)),hh)}async function Zp(n,e){const t=Pe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new gP,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Xp(u,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&tm(t)}async function em(n,e){const t=Pe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _P(n,e){const t=Pe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&tm(t)}function vP(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(t);i.queries.delete(e)}function tm(n){n.Y_.forEach((e=>{e.next()}))}var rp,H_;(H_=rp||(rp={})).ea="default",H_.Cache="cache";class nm{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class wP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=iE(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new q_,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const S=o.get(_),M=dh(this.query,E)?E:null,N=!!S&&this.mutatedKeys.has(S.key),F=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let R=!1;S&&M?S.data.isEqual(M.data)?N!==F&&(i.track({type:3,doc:M}),R=!0):this.ga(S,M)||(i.track({type:2,doc:M}),R=!0,(p&&this.Aa(M,p)>0||y&&this.Aa(M,y)<0)&&(d=!0)):!S&&M?(i.track({type:0,doc:M}),R=!0):S&&!M&&(i.track({type:1,doc:S}),R=!0,(p||y)&&(d=!0)),R&&(M?(u=u.add(M),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(M,N){const F=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return F(M)-F(N)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,u.length!==0||y?{snapshot:new zo(this.query,e.Ra,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new q_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new ME(i))})),this.da.forEach((i=>{e.has(i)||t.push(new VE(i))})),t}ba(e){this.Ta=e.Ts,this.da=Ve();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class TP{constructor(e){this.key=e,this.va=!1}}class IP{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Qo((d=>rE(d)),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new at(Ee.comparator),this.Na=new Map,this.La=new qp,this.Ba={},this.ka=new Map,this.qa=Bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SP(n,e,t=!0){const i=$E(n);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await FE(i,e,t,!0),o}async function RP(n,e){const t=$E(n);await FE(t,e,!0,!1)}async function FE(n,e,t,i){const o=await Kk(n.localStore,mr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await AP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&NE(n.remoteStore,o),d}async function AP(n,e,t,i,o){n.Ka=(E,S,M)=>(async function(F,R,Y,Z){let X=R.view.ma(Y);X.ns&&(X=await j_(F.localStore,R.query,!1).then((({documents:P})=>R.view.ma(P,X))));const re=Z&&Z.targetChanges.get(R.targetId),Q=Z&&Z.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges(X,F.isPrimaryClient,re,Q);return G_(F,R.targetId,te.wa),te.snapshot})(n,E,S,M);const a=await j_(n.localStore,e,!0),u=new wP(e,a.Ts),d=u.ma(a.documents),p=jl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,p);G_(n,t,y.wa);const _=new EP(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function CP(n,e,t){const i=Pe(n),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!hh(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await np(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Kp(i.remoteStore,o.targetId),ip(i,o.targetId)})).catch(Ml)):(ip(i,o.targetId),await np(i.localStore,o.targetId,!0))}async function kP(n,e){const t=Pe(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kp(t.remoteStore,i.targetId))}async function PP(n,e,t){const i=VP(n);try{const o=await(function(u,d){const p=Pe(u),y=It.now(),_=d.reduce(((M,N)=>M.add(N.key)),Ve());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let N=Gr(),F=Ve();return p.cs.getEntries(M,_).next((R=>{N=R,N.forEach(((Y,Z)=>{Z.isValidDocument()||(F=F.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,N))).next((R=>{E=R;const Y=[];for(const Z of d){const X=YC(Z,E.get(Z.key).overlayedDocument);X!=null&&Y.push(new qi(Z.key,X,Qw(X.value.mapValue),On.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,Y,d)})).next((R=>{S=R;const Y=R.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(M,R.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:oE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Ba[u.currentUser.toKey()];y||(y=new at(We)),y=y.insert(d,p),u.Ba[u.currentUser.toKey()]=y})(i,o.batchId,t),await zl(i,o.changes),await _h(i.remoteStore)}catch(o){const a=Xp(o,"Failed to persist write");t.reject(a)}}async function UE(n,e){const t=Pe(n);try{const i=await qk(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ke(u.va):o.removedDocuments.size>0&&(Ke(u.va),u.va=!1))})),await zl(t,i,e)}catch(i){await Ml(i)}}function K_(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Pe(u);p.onlineState=d;let y=!1;p.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(y=!0)})),y&&tm(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NP(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new at(Ee.comparator);u=u.insert(a,$t.newNoDocument(a,ke.min()));const d=Ve().add(a),p=new mh(ke.min(),new Map,new at(We),u,d);await UE(i,p),i.Oa=i.Oa.remove(a),i.Na.delete(e),rm(i)}else await np(i.localStore,e,!1).then((()=>ip(i,e,t))).catch(Ml)}async function xP(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await $k(t.localStore,e);BE(t,i,null),jE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await zl(t,o)}catch(o){await Ml(o)}}async function bP(n,e,t){const i=Pe(n);try{const o=await(function(u,d){const p=Pe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(Ke(E!==null),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);BE(i,e,t),jE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await zl(i,o)}catch(o){await Ml(o)}}function jE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function BE(n,e,t){const i=Pe(n);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function ip(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||zE(n,i)}))}function zE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Kp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rm(n))}function G_(n,e,t){for(const i of t)i instanceof VE?(n.La.addReference(i.key,e),OP(n,i)):i instanceof ME?(ye("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||zE(n,i.key)):Ae()}function OP(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(i),rm(n))}function rm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ee(tt.fromString(e)),i=n.qa.next();n.Na.set(i,new TP(t)),n.Oa=n.Oa.insert(t,i),NE(n.remoteStore,new Ni(mr(ch(t.path)),i,"TargetPurposeLimboResolution",Op.oe))}}async function zl(n,e,t){const i=Pe(n),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,p)=>{u.push(i.Ka(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Hp.Wi(p.targetId,y);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(p,y){const _=Pe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(y,(S=>ie.forEach(S.$i,(M=>_.persistence.referenceDelegate.addReference(E,S.targetId,M))).next((()=>ie.forEach(S.Ui,(M=>_.persistence.referenceDelegate.removeReference(E,S.targetId,M)))))))))}catch(E){if(!Fl(E))throw E;ye("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const M=_.os.get(S),N=M.snapshotVersion,F=M.withLastLimboFreeSnapshotVersion(N);_.os=_.os.insert(S,F)}}})(i.localStore,a))}async function DP(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=await AE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((p=>{p.reject(new de(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await zl(t,i.hs)}}function LP(n,e){const t=Pe(n),i=t.Na.get(e);if(i&&i.va)return Ve().add(i.key);{let o=Ve();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const d=t.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function $E(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NP.bind(null,e),e.Ca.d_=_P.bind(null,e.eventManager),e.Ca.$a=vP.bind(null,e.eventManager),e}function VP(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bP.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return zk(this.persistence,new jk,e.initialUser,this.serializer)}Ga(e){return new Mk(Wp.Zr,this.serializer)}Wa(e){return new Qk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DP.bind(null,this.syncEngine),await mP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yP})()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),i=(function(a){return new Zk(a)})(e.databaseInfo);return(function(a,u,d,p){return new nP(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new iP(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>K_(this.syncEngine,t,0)),(function(){return z_.D()?new z_:new Jk})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,_){const E=new IP(o,a,u,d,p,y);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Pe(o);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Bl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Xp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await AE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Q_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FP(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>$_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>$_(e.remoteStore,o))),n._onlineComponents=e}async function FP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await Sf(n,new Gc)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Sf(n,new Gc);return n._offlineComponents}async function qE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await Q_(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await Q_(n,new sp))),n._onlineComponents}function UP(n){return qE(n).then((e=>e.syncEngine))}async function Qc(n){const e=await qE(n),t=e.eventManager;return t.onListen=SP.bind(null,e.syncEngine),t.onUnlisten=CP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kP.bind(null,e.syncEngine),t}function jP(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const _=new im({next:S=>{_.Za(),u.enqueueAndForget((()=>em(a,E)));const M=S.docs.has(d);!M&&S.fromCache?y.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&p&&p.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new nm(ch(d.path),_,{includeMetadataChanges:!0,_a:!0});return Zp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}function BP(n,e,t={}){const i=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const _=new im({next:S=>{_.Za(),u.enqueueAndForget((()=>em(a,E))),S.fromCache&&p.source==="server"?y.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new nm(d,_,{includeMetadataChanges:!0,_a:!0});return Zp(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zP(n,e,t,i){if(e===!0&&i===!0)throw new de(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y_(n){if(!Ee.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(Ee.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(n);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new oC;switch(i.type){case"firstParty":return new cC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=J_.get(t);i&&(ye("ComponentProvider","Removing Datastore"),J_.delete(t),i.terminate())})(this),Promise.resolve()}}function $P(n,e,t,i={}){var o;const a=(n=cn(n,wh))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=zt.MOCK_USER;else{d=Zv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(y)}n._authCredentials=new aC(new Ww(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class Wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class Di extends Xr{constructor(e,t,i){super(e,t,ch(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new Ee(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function Ps(n,e,...t){if(n=yt(n),HE("collection","path",e),n instanceof wh){const i=tt.fromString(e,...t);return X_(i),new Di(n,null,i)}{if(!(n instanceof Wt||n instanceof Di))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return X_(i),new Di(n.firestore,null,i)}}function un(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Hw.newId()),HE("doc","path",e),n instanceof wh){const i=tt.fromString(e,...t);return Y_(i),new Wt(n,null,new Ee(i))}{if(!(n instanceof Wt||n instanceof Di))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return Y_(i),new Wt(n.firestore,n instanceof Di?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kE(this,"async_queue_retry"),this.Vu=()=>{const i=If();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new qr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fl(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw Kr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Yp.createAndSchedule(this,e,t,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function tv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Qr extends wh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new ev,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ev(e),this._firestoreClient=void 0,await e}}}function qP(n,e,t){t||(t="(default)");const i=bl(n,"firestore");if(i.isInitialized(t)){const o=i.getImmediate({identifier:t}),a=i.getOptions(t);if(Lo(a,e))return o;throw new de(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:t})}function WP(n,e){const t=typeof n=="object"?n:sh(),i=typeof n=="string"?n:"(default)",o=bl(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Jv("firestore");a&&$P(o,...a)}return o}function Eh(n){if(n._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HP(n),n._firestoreClient}function HP(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,y,_){return new IC(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,WE(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new MP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(Vt.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^__.*__$/;class GP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ul(e,this.data,t,this.fieldTransforms)}}class KE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new qi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Ih{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GE(this.Cu)&&KP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gh(e)}Qu(e,t,i,o=!1){return new Ih({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(n){const e=n._freezeSettings(),t=gh(n._databaseId);return new QP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QE(n,e,t,i,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);um("Data must be an object, but it was:",u,i);const d=JE(i,u);let p,y;if(a.merge)p=new wn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const S=op(e,E,t);if(!u.contains(S))throw new de(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);XE(_,S)||_.push(S)}p=new wn(_),y=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=u.fieldTransforms;return new GP(new ln(d),p,y)}class ql extends $l{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}function JP(n,e,t){return new Ih({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class am extends $l{_toFieldTransform(e){return new fE(e.path,new Rl)}isEqual(e){return e instanceof am}}class lm extends $l{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=JP(this,e,!0),i=this.Ku.map((a=>Yo(a,t))),o=new jo(i);return new fE(e.path,o)}isEqual(e){return e instanceof lm&&Lo(this.Ku,e.Ku)}}function YP(n,e,t,i){const o=n.Qu(1,e,t);um("Data must be an object, but it was:",o,i);const a=[],u=ln.empty();bs(i,((p,y)=>{const _=cm(e,p,t);y=yt(y);const E=o.Nu(_);if(y instanceof ql)a.push(_);else{const S=Yo(y,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new wn(a);return new KE(u,d,o.fieldTransforms)}function XP(n,e,t,i,o,a){const u=n.Qu(1,e,t),d=[op(e,i,t)],p=[o];if(a.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(op(e,a[S])),p.push(a[S+1]);const y=[],_=ln.empty();for(let S=d.length-1;S>=0;--S)if(!XE(y,d[S])){const M=d[S];let N=p[S];N=yt(N);const F=u.Nu(M);if(N instanceof ql)y.push(M);else{const R=Yo(N,F);R!=null&&(y.push(M),_.set(M,R))}}const E=new wn(y);return new KE(_,E,u.fieldTransforms)}function ZP(n,e,t,i=!1){return Yo(t,n.Qu(i?4:3,e))}function Yo(n,e){if(YE(n=yt(n)))return um("Unsupported field value:",e,n),JE(n,e);if(n instanceof $l)return(function(i,o){if(!GE(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Yo(d,o.Lu(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=It.fromDate(i);return{timestampValue:Hc(o.serializer,a)}}if(i instanceof It){const a=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,a)}}if(i instanceof sm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $o)return{bytesValue:vE(o.serializer,i._byteString)};if(i instanceof Wt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$p(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof om)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Up(d.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${vh(i)}`)})(n,e)}function JE(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(n,((i,o)=>{const a=Yo(o,e.Mu(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function YE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof sm||n instanceof $o||n instanceof Wt||n instanceof $l||n instanceof om)}function um(n,e,t){if(!YE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=vh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function op(n,e,t){if((e=yt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return cm(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const eN=new RegExp("[~\\*/\\[\\]]");function cm(n,e,t){if(e.search(eN)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Th(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new de(J.INVALID_ARGUMENT,d+n+p)}function XE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tN extends ZE{data(){return super.data()}}function Rh(n,e){return typeof e=="string"?cm(n,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class dm extends hm{}function Yc(n,e,...t){let i=[];e instanceof hm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof fm)).length,d=a.filter((p=>p instanceof Ah)).length;if(u>1||u>0&&d>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ah extends dm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ah(e,t,i)}_apply(e){const t=this._parse(e);return t0(e._query,t),new Xr(e.firestore,e.converter,Yf(e._query,t))}_parse(e){const t=Sh(e.firestore);return(function(a,u,d,p,y,_,E){let S;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){iv(E,_);const M=[];for(const N of E)M.push(rv(p,a,N));S={arrayValue:{values:M}}}else S=rv(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||iv(E,_),S=ZP(d,u,E,_==="in"||_==="not-in");return gt.create(y,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ap(n,e,t){const i=e,o=Rh("where",n);return Ah._create(o,i,t)}class fm extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)t0(u,p),u=Yf(u,p)})(e._query,t),new Xr(e.firestore,e.converter,Yf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pm extends dm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(a,u)})(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Go(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function nN(n,e="asc"){const t=e,i=Rh("orderBy",n);return pm._create(i,t)}class mm extends dm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new mm(e,t,i)}_apply(e){return new Xr(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}}function nv(n){return mm._create("limit",n,"F")}function rv(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nE(e)&&t.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!Ee.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return I_(n,new Ee(i))}if(t instanceof Wt)return I_(n,t._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function iv(n,e){if(!Array.isArray(n)||n.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t0(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rN{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return bs(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>dt(u.doubleValue)));return new om(a)}convertGeoPoint(e){return new sm(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=ji(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Ke(RE(i));const o=new Tl(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||Kr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class r0 extends ZE{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Rh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Pc extends r0{data(e={}){return super.data(e)}}class i0{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ul(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pc(this._firestore,this._userDataWriter,i.key,i,new ul(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:iN(d.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){n=cn(n,Wt);const e=cn(n.firestore,Qr);return jP(Eh(e),n._key).then((t=>o0(e,n,t)))}class gm extends rN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Cl(n){n=cn(n,Xr);const e=cn(n.firestore,Qr),t=Eh(e),i=new gm(e);return e0(n._query),BP(t,n._query).then((o=>new i0(e,i,n,o)))}function sN(n,e,t){n=cn(n,Wt);const i=cn(n.firestore,Qr),o=n0(n.converter,e);return Ch(i,[QE(Sh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,On.none())])}function ml(n,e,t,...i){n=cn(n,Wt);const o=cn(n.firestore,Qr),a=Sh(o);let u;return u=typeof(e=yt(e))=="string"||e instanceof Th?XP(a,"updateDoc",n._key,e,t,i):YP(a,"updateDoc",n._key,e),Ch(o,[u.toMutation(n._key,On.exists(!0))])}function lp(n){return Ch(cn(n.firestore,Qr),[new jp(n._key,On.none())])}function s0(n,e){const t=cn(n.firestore,Qr),i=un(n),o=n0(n.converter,e);return Ch(t,[QE(Sh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,On.exists(!1))]).then((()=>i))}function oN(n,...e){var t,i,o;n=yt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||tv(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(tv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,y,_;if(n instanceof Wt)y=cn(n.firestore,Qr),_=ch(n._key.path),p={next:E=>{e[u]&&e[u](o0(y,n,E))},error:e[u+1],complete:e[u+2]};else{const E=cn(n,Xr);y=cn(E.firestore,Qr),_=E._query;const S=new gm(y);p={next:M=>{e[u]&&e[u](new i0(y,S,E,M))},error:e[u+1],complete:e[u+2]},e0(n._query)}return(function(S,M,N,F){const R=new im(F),Y=new nm(M,R,N);return S.asyncQueue.enqueueAndForget((async()=>Zp(await Qc(S),Y))),()=>{R.Za(),S.asyncQueue.enqueueAndForget((async()=>em(await Qc(S),Y)))}})(Eh(y),_,d,p)}function Ch(n,e){return(function(i,o){const a=new qr;return i.asyncQueue.enqueueAndForget((async()=>PP(await UP(i),o,a))),a.promise})(Eh(n),e)}function o0(n,e,t){const i=t.docs.get(e._key),o=new gm(n);return new r0(n,o,e._key,i,new ul(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(){return new ql("deleteField")}function ym(){return new am("serverTimestamp")}function aN(...n){return new lm("arrayRemove",n)}(function(e,t=!0){(function(o){Ko=o})(xs),Is(new Fi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Qr(new lC(i.getProvider("auth-internal")),new dC(i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(y.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),dr(__,"4.7.3",e),dr(__,"4.7.3","esm2017")})();var lN="firebase",uN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(lN,uN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="firebasestorage.googleapis.com",cN="storageBucket",hN=120*1e3,dN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends vr{constructor(e,t,i=0){super(Rf(e),`Firebase Storage: ${t} (${Rf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _r;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_r||(_r={}));function Rf(n){return"storage/"+n}function fN(){const n="An unknown error occurred, please check the error payload for server response.";return new wr(_r.UNKNOWN,n)}function pN(){return new wr(_r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mN(){return new wr(_r.CANCELED,"User canceled the upload/download.")}function gN(n){return new wr(_r.INVALID_URL,"Invalid URL '"+n+"'.")}function yN(n){return new wr(_r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ov(n){return new wr(_r.INVALID_ARGUMENT,n)}function l0(){return new wr(_r.APP_DELETED,"The Firebase app was deleted.")}function _N(n){return new wr(_r.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Qn.makeFromUrl(e,t)}catch{return new Qn(e,"")}if(i.path==="")return i;throw yN(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",M=new RegExp(`^https?://${E}/${_}/b/${o}/o${S}`,"i"),N={bucket:1,path:3},F=t===a0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",Y=new RegExp(`^https?://${F}/${o}/${R}`,"i"),X=[{regex:d,indices:p,postModify:a},{regex:M,indices:N,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<X.length;re++){const Q=X[re],te=Q.regex.exec(e);if(te){const P=te[Q.indices.bucket];let I=te[Q.indices.path];I||(I=""),i=new Qn(P,I),Q.postModify(i);break}}if(i==null)throw gN(e);return i}}class vN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let y=!1;function _(...R){y||(y=!0,e.apply(null,R))}function E(R){o=setTimeout(()=>{o=null,n(M,p())},R)}function S(){a&&clearTimeout(a)}function M(R,...Y){if(y){S();return}if(R){S(),_.call(null,R,...Y);return}if(p()||u){S(),_.call(null,R,...Y);return}i<64&&(i*=2);let X;d===1?(d=2,X=0):X=(i+Math.random())*1e3,E(X)}let N=!1;function F(R){N||(N=!0,S(),!y&&(o!==null?(R||(d=2),clearTimeout(o),E(0)):R||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function EN(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n){return n!==void 0}function av(n,e,t,i){if(i<e)throw ov(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ov(`Invalid value for '${n}'. Expected ${t} or less.`)}function IN(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Zc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t,i,o,a,u,d,p,y,_,E,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,N)=>{this.resolve_=M,this.reject_=N,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new yc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Zc.NO_ERROR,p=a.getStatus();if(!d||SN(p,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Zc.ABORT;i(!1,new yc(!1,null,_));return}const y=this.successCodes_.indexOf(p)!==-1;i(!0,new yc(y,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());TN(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=fN();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?l0():mN();u(p)}else{const p=pN();u(p)}};this.canceled_?t(!1,new yc(!1,null,!0)):this.backoffId_=wN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function AN(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function CN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kN(n,e){e&&(n["X-Firebase-GMPID"]=e)}function PN(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function NN(n,e,t,i,o,a,u=!0){const d=IN(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return kN(y,e),AN(y,t),CN(y,a),PN(y,i),new RN(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function bN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this._service=e,t instanceof Qn?this._location=t:this._location=Qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eh(e,t)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bN(this._location.path)}get storage(){return this._service}get parent(){const e=xN(this._location.path);if(e===null)return null;const t=new Qn(this._location.bucket,e);return new eh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _N(e)}}function lv(n,e){const t=e?.[cN];return t==null?null:Qn.makeFromBucketSpec(t,n)}function ON(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Zv(o,n.app.options.projectId))}class DN{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=a0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hN,this._maxUploadRetryTime=dN,this._requests=new Set,o!=null?this._bucket=Qn.makeFromBucketSpec(o,this._host):this._bucket=lv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=lv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new vN(l0());{const u=NN(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const uv="@firebase/storage",cv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="storage";function LN(n=sh(),e){n=yt(n);const i=bl(n,u0).getImmediate({identifier:e}),o=Jv("storage");return o&&VN(i,...o),i}function VN(n,e,t,i={}){ON(n,e,t,i)}function MN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new DN(t,i,o,e,xs)}function FN(){Is(new Fi(u0,MN,"PUBLIC").setMultipleInstances(!0)),dr(uv,cv,""),dr(uv,cv,"esm2017")}FN();const c0={apiKey:"AIzaSyC1ciO4ZxGRNcx4Q87BxJa0y7lFpsvKurc",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.appspot.com",messagingSenderId:"301206293641",appId:"1:301206293641:web:c9635693f4519d3dbdca58"},UN=Object.values(c0).every(Boolean);let Za,En=null,Le=null,jN=null;if(UN)try{Za=DS().length?sh():nw(c0),En=iC(Za);try{Le=qP(Za,{...{experimentalForceLongPolling:!0,useFetchStreams:!1}})}catch(n){if((typeof n=="object"&&n&&"code"in n?String(n.code||"").toLowerCase():"")!=="failed-precondition")throw n;Le=WP(Za)}jN=LN(Za)}catch(n){console.error("No se pudo inicializar Firebase, se usara modo demostracion.",n)}try{window.__fb={auth:En,db:Le},console.log("🔥 Firebase projectId =>",En?.app?.options?.projectId)}catch{}const Nc=()=>new Date().toISOString(),BN=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:["corte","lavado"],createdAt:Nc()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:["alisado","planchado"],createdAt:Nc()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:["otros"],createdAt:Nc()}];let zi=[...BN];const xc=(n,e,t)=>({id:`demo-photo-${Math.random().toString(36).slice(2,10)}`,url:n,deleteToken:e??null,barberId:t}),zN={"carlos-ruiz":[xc("https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",null,"demo-barber"),xc("https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80",null,"demo-barber")],"maria-garcia":[xc("https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80",null,"demo-barber")],"leo-suarez":[]};let Li=Object.fromEntries(Object.entries(zN).map(([n,e])=>[n,e.map(t=>({...t}))]));const h0=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let Vi=[...h0];const $N=h0[0]?.id??"demo-barber";function Af(){return[...zi]}function d0(n){return zi.find(e=>e.id===n)||null}function qN(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||$N,notes:n.notes??[],createdAt:Nc()};return zi=[e,...zi],e}function WN(n,e){return zi=zi.map(t=>t.id===n?{...t,...e}:t),d0(n)}function HN(n){zi=zi.filter(e=>e.id!==n),delete Li[n]}function KN(n){return[...Li[n]||[]]}function GN(n,e){const t=xc(e.url,e.deleteToken,e.barberId),i=Li[n]||[];return Li[n]=[t,...i],Li[n]}function QN(n,e){const t=Li[n]||[];return Li[n]=t.filter(i=>i.id!==e),Li[n]}function f0(){return[...Vi]}function JN(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return Vi=[e,...Vi],e}function hv(n,e){return Vi=Vi.map(t=>t.id===n?{...t,...e}:t),Vi.find(t=>t.id===n)||null}function YN(n){Vi=Vi.filter(e=>e.id!==n)}const XN="barberiawebpro@gmail.com",dv="users",fv="barberos",p0=H.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!1,loginDemo:()=>{},logout:async()=>{}}),Xo=()=>H.useContext(p0),m0=n=>n?.trim().toLowerCase()||null,Cf=n=>{if(!n)return;const e=String(n).trim().toLowerCase();if(["admin","administrador","administrator"].includes(e))return"admin";if(e.includes("barber"))return"barbero"},kf=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;return e&&t?`${e} ${t}`.trim():e||t||void 0},ZN=async(n,e)=>{if(!Le)return{};try{const t=await Xc(un(Le,fv,n));if(t.exists()){const a=t.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const i=await Xc(un(Le,dv,n));if(i.exists()){const a=i.data();return{role:Cf(a.role)??"barbero",displayName:kf(a)}}const o=m0(e);if(o){const a=Yc(Ps(Le,dv),ap("emailLower","==",o),nv(1)),u=Yc(Ps(Le,fv),ap("emailLower","==",o),nv(1)),[d,p]=await Promise.all([Cl(a),Cl(u)]),y=d.docs[0]||p.docs[0];if(y){const _=y.data();return{role:Cf(_.role)??"barbero",displayName:kf(_)}}}return{}}catch(t){return console.error("Error al obtener perfil del usuario:",t),{}}},ex=n=>({uid:n.id,email:n.email,displayName:n.displayName});function tx({children:n}){const[e,t]=H.useState(null),[i,o]=H.useState(),[a,u]=H.useState(),[d,p]=H.useState(!0),[y,_]=H.useState(!1);H.useEffect(()=>{if(!En){t(null),o(void 0),u(void 0),p(!1),_(!0);return}const M=HR(En,async N=>{if(!N){t(null),o(void 0),u(void 0),p(!1),_(!1);return}const F=m0(N.email)===XN?"admin":void 0,R=await ZN(N.uid,N.email),Y=R.role||F||"barbero",Z=R.displayName||N.displayName||N.email||void 0;t(N),o(Y),u(Z),p(!1),_(!1)});return()=>M()},[]);const E=M=>{const N=f0().find(F=>F.id===M);N&&(t(ex(N)),o(N.role),u(N.displayName),_(!0),p(!1))},S=async()=>{En&&await KR(En),t(null),o(void 0),u(void 0),p(!1),_(!1)};return x.jsx(p0.Provider,{value:{user:e,role:i,profileName:a,loading:d,demoMode:y,loginDemo:E,logout:S},children:n})}Wv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kl.apply(this,arguments)}var xi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(xi||(xi={}));const pv="popstate";function nx(n){n===void 0&&(n={});function e(o,a){let{pathname:u="/",search:d="",hash:p=""}=Ds(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),up("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");d=y===-1?p:p.slice(0,y)}return d+"#"+(typeof a=="string"?a:th(a))}function i(o,a){_m(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return ix(e,t,i,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _m(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rx(){return Math.random().toString(36).substr(2,8)}function mv(n,e){return{usr:n.state,key:n.key,idx:e}}function up(n,e,t,i){return t===void 0&&(t=null),kl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ds(e):e,{state:t,key:e&&e.key||i||rx()})}function th(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ds(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function ix(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=xi.Pop,p=null,y=_();y==null&&(y=0,u.replaceState(kl({},u.state,{idx:y}),""));function _(){return(u.state||{idx:null}).idx}function E(){d=xi.Pop;let R=_(),Y=R==null?null:R-y;y=R,p&&p({action:d,location:F.location,delta:Y})}function S(R,Y){d=xi.Push;let Z=up(F.location,R,Y);t&&t(Z,R),y=_()+1;let X=mv(Z,y),re=F.createHref(Z);try{u.pushState(X,"",re)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(re)}a&&p&&p({action:d,location:F.location,delta:1})}function M(R,Y){d=xi.Replace;let Z=up(F.location,R,Y);t&&t(Z,R),y=_();let X=mv(Z,y),re=F.createHref(Z);u.replaceState(X,"",re),a&&p&&p({action:d,location:F.location,delta:0})}function N(R){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof R=="string"?R:th(R);return Z=Z.replace(/ $/,"%20"),ot(Y,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,Y)}let F={get action(){return d},get location(){return n(o,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(pv,E),p=R,()=>{o.removeEventListener(pv,E),p=null}},createHref(R){return e(o,R)},createURL:N,encodeLocation(R){let Y=N(R);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:M,go(R){return u.go(R)}};return F}var gv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gv||(gv={}));function sx(n,e,t){return t===void 0&&(t="/"),ox(n,e,t)}function ox(n,e,t,i){let o=typeof e=="string"?Ds(e):e,a=qo(o.pathname||"/",t);if(a==null)return null;let u=g0(n);ax(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let y=_x(a);d=gx(u[p],y)}return d}function g0(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(ot(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Mi([i,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(ot(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),g0(a.children,e,_,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:px(y,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of y0(a.path))o(a,u,p)}),e}function y0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=y0(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function ax(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const lx=/^:[\w-]+$/,ux=3,cx=2,hx=1,dx=10,fx=-2,yv=n=>n==="*";function px(n,e){let t=n.split("/"),i=t.length;return t.some(yv)&&(i+=fx),e&&(i+=cx),t.filter(o=>!yv(o)).reduce((o,a)=>o+(lx.test(a)?ux:a===""?hx:dx),i)}function mx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function gx(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=cp({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),S=p.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Mi([a,E.pathname]),pathnameBase:Tx(Mi([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Mi([a,E.pathnameBase]))}return u}function cp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=yx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:S,isOptional:M}=_;if(S==="*"){let F=d[E]||"";u=a.slice(0,a.length-F.length).replace(/(.)\/+$/,"$1")}const N=d[E];return M&&!N?y[S]=void 0:y[S]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function yx(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),_m(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function _x(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _m(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function vx(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ds(n):n;return{pathname:t?t.startsWith("/")?t:wx(t,e):e,search:Ix(i),hash:Sx(o)}}function wx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Pf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ex(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vm(n,e){let t=Ex(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function wm(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ds(n):(o=kl({},n),ot(!o.pathname||!o.pathname.includes("?"),Pf("?","pathname","search",o)),ot(!o.pathname||!o.pathname.includes("#"),Pf("#","pathname","hash",o)),ot(!o.search||!o.search.includes("#"),Pf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=vx(o,d),y=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Mi=n=>n.join("/").replace(/\/\/+/g,"/"),Tx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ix=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Sx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Rx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const _0=["post","put","patch","delete"];new Set(_0);const Ax=["get",..._0];new Set(Ax);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pl.apply(this,arguments)}const kh=H.createContext(null),v0=H.createContext(null),Zr=H.createContext(null),Ph=H.createContext(null),ei=H.createContext({outlet:null,matches:[],isDataRoute:!1}),w0=H.createContext(null);function Cx(n,e){let{relative:t}=e===void 0?{}:e;Zo()||ot(!1);let{basename:i,navigator:o}=H.useContext(Zr),{hash:a,pathname:u,search:d}=Nh(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:Mi([i,u])),o.createHref({pathname:p,search:d,hash:a})}function Zo(){return H.useContext(Ph)!=null}function ea(){return Zo()||ot(!1),H.useContext(Ph).location}function E0(n){H.useContext(Zr).static||H.useLayoutEffect(n)}function Wl(){let{isDataRoute:n}=H.useContext(ei);return n?Bx():kx()}function kx(){Zo()||ot(!1);let n=H.useContext(kh),{basename:e,future:t,navigator:i}=H.useContext(Zr),{matches:o}=H.useContext(ei),{pathname:a}=ea(),u=JSON.stringify(vm(o,t.v7_relativeSplatPath)),d=H.useRef(!1);return E0(()=>{d.current=!0}),H.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=wm(y,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Mi([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,u,a,n])}function Px(){let{matches:n}=H.useContext(ei),e=n[n.length-1];return e?e.params:{}}function Nh(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=H.useContext(Zr),{matches:o}=H.useContext(ei),{pathname:a}=ea(),u=JSON.stringify(vm(o,i.v7_relativeSplatPath));return H.useMemo(()=>wm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function Nx(n,e){return xx(n,e)}function xx(n,e,t,i){Zo()||ot(!1);let{navigator:o}=H.useContext(Zr),{matches:a}=H.useContext(ei),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let y=ea(),_;if(e){var E;let R=typeof e=="string"?Ds(e):e;p==="/"||(E=R.pathname)!=null&&E.startsWith(p)||ot(!1),_=R}else _=y;let S=_.pathname||"/",M=S;if(p!=="/"){let R=p.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let N=sx(n,{pathname:M}),F=Vx(N&&N.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Mi([p,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Mi([p,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,t,i);return e&&F?H.createElement(Ph.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:xi.Pop}},F):F}function bx(){let n=jx(),e=Rx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,null)}const Ox=H.createElement(bx,null);class Dx extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(ei.Provider,{value:this.props.routeContext},H.createElement(w0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lx(n){let{routeContext:e,match:t,children:i}=n,o=H.useContext(kh);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(ei.Provider,{value:e},i)}function Vx(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||ot(!1),u=u.slice(0,Math.min(u.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:S,errors:M}=t,N=E.route.loader&&S[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||N){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((_,E,S)=>{let M,N=!1,F=null,R=null;t&&(M=d&&E.route.id?d[E.route.id]:void 0,F=E.route.errorElement||Ox,p&&(y<0&&S===0?(zx("route-fallback"),N=!0,R=null):y===S&&(N=!0,R=E.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,S+1)),Z=()=>{let X;return M?X=F:N?X=R:E.route.Component?X=H.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=_,H.createElement(Lx,{match:E,routeContext:{outlet:_,matches:Y,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?H.createElement(Dx,{location:t.location,revalidation:t.revalidation,component:F,error:M,children:Z(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):Z()},null)}var T0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(T0||{}),I0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(I0||{});function Mx(n){let e=H.useContext(kh);return e||ot(!1),e}function Fx(n){let e=H.useContext(v0);return e||ot(!1),e}function Ux(n){let e=H.useContext(ei);return e||ot(!1),e}function S0(n){let e=Ux(),t=e.matches[e.matches.length-1];return t.route.id||ot(!1),t.route.id}function jx(){var n;let e=H.useContext(w0),t=Fx(),i=S0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function Bx(){let{router:n}=Mx(T0.UseNavigateStable),e=S0(I0.UseNavigateStable),t=H.useRef(!1);return E0(()=>{t.current=!0}),H.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Pl({fromRouteId:e},a)))},[n,e])}const _v={};function zx(n,e,t){_v[n]||(_v[n]=!0)}function $x(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function hp(n){let{to:e,replace:t,state:i,relative:o}=n;Zo()||ot(!1);let{future:a,static:u}=H.useContext(Zr),{matches:d}=H.useContext(ei),{pathname:p}=ea(),y=Wl(),_=wm(e,vm(d,a.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return H.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function Po(n){ot(!1)}function qx(n){let{basename:e="/",children:t=null,location:i,navigationType:o=xi.Pop,navigator:a,static:u=!1,future:d}=n;Zo()&&ot(!1);let p=e.replace(/^\/*/,"/"),y=H.useMemo(()=>({basename:p,navigator:a,static:u,future:Pl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=Ds(i));let{pathname:_="/",search:E="",hash:S="",state:M=null,key:N="default"}=i,F=H.useMemo(()=>{let R=qo(_,p);return R==null?null:{location:{pathname:R,search:E,hash:S,state:M,key:N},navigationType:o}},[p,_,E,S,M,N,o]);return F==null?null:H.createElement(Zr.Provider,{value:y},H.createElement(Ph.Provider,{children:t,value:F}))}function Wx(n){let{children:e,location:t}=n;return Nx(dp(e),t)}new Promise(()=>{});function dp(n,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(n,(i,o)=>{if(!H.isValidElement(i))return;let a=[...e,o];if(i.type===H.Fragment){t.push.apply(t,dp(i.props.children,a));return}i.type!==Po&&ot(!1),!i.props.index||!i.props.children||ot(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=dp(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nh.apply(this,arguments)}function R0(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function Hx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Kx(n,e){return n.button===0&&(!e||e==="_self")&&!Hx(n)}const Gx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Jx="6";try{window.__reactRouterVersion=Jx}catch{}const Yx=H.createContext({isTransitioning:!1}),Xx="startTransition",vv=sI[Xx];function Zx(n){let{basename:e,children:t,future:i,window:o}=n,a=H.useRef();a.current==null&&(a.current=nx({window:o,v5Compat:!0}));let u=a.current,[d,p]=H.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},_=H.useCallback(E=>{y&&vv?vv(()=>p(E)):p(E)},[p,y]);return H.useLayoutEffect(()=>u.listen(_),[u,_]),H.useEffect(()=>$x(i),[i]),H.createElement(qx,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const e1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",t1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Em=H.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,S=R0(e,Gx),{basename:M}=H.useContext(Zr),N,F=!1;if(typeof y=="string"&&t1.test(y)&&(N=y,e1))try{let X=new URL(window.location.href),re=y.startsWith("//")?new URL(X.protocol+y):new URL(y),Q=qo(re.pathname,M);re.origin===X.origin&&Q!=null?y=Q+re.search+re.hash:F=!0}catch{}let R=Cx(y,{relative:o}),Y=r1(y,{replace:u,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function Z(X){i&&i(X),X.defaultPrevented||Y(X)}return H.createElement("a",nh({},S,{href:N||R,onClick:F||a?i:Z,ref:t,target:p}))}),wv=H.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:p,viewTransition:y,children:_}=e,E=R0(e,Qx),S=Nh(p,{relative:E.relative}),M=ea(),N=H.useContext(v0),{navigator:F,basename:R}=H.useContext(Zr),Y=N!=null&&i1(S)&&y===!0,Z=F.encodeLocation?F.encodeLocation(S).pathname:S.pathname,X=M.pathname,re=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;o||(X=X.toLowerCase(),re=re?re.toLowerCase():null,Z=Z.toLowerCase()),re&&R&&(re=qo(re,R)||re);const Q=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let te=X===Z||!u&&X.startsWith(Z)&&X.charAt(Q)==="/",P=re!=null&&(re===Z||!u&&re.startsWith(Z)&&re.charAt(Z.length)==="/"),I={isActive:te,isPending:P,isTransitioning:Y},C=te?i:void 0,b;typeof a=="function"?b=a(I):b=[a,te?"active":null,P?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let L=typeof d=="function"?d(I):d;return H.createElement(Em,nh({},E,{"aria-current":C,className:b,ref:t,style:L,to:p,viewTransition:y}),typeof _=="function"?_(I):_)});var fp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fp||(fp={}));var Ev;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function n1(n){let e=H.useContext(kh);return e||ot(!1),e}function r1(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=Wl(),y=ea(),_=Nh(n,{relative:u});return H.useCallback(E=>{if(Kx(E,t)){E.preventDefault();let S=i!==void 0?i:th(y)===th(_);p(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,p,_,i,o,t,n,a,u,d])}function i1(n,e){e===void 0&&(e={});let t=H.useContext(Yx);t==null&&ot(!1);let{basename:i}=n1(fp.useViewTransitionState),o=Nh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=qo(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=qo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return cp(o.pathname,u)!=null||cp(o.pathname,a)!=null}function Nf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=Xo();return i?x.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?x.jsx(hp,{to:"/clientes",replace:!0}):n:x.jsx(hp,{to:"/login",replace:!0})}const Tm=["corte","alisado","lavado","planchado","otros"],s1={corte:"Corte",alisado:"Alisado",lavado:"Lavado",planchado:"Planchado",otros:"Otros"},Tv=n=>{if(typeof n!="string")return null;const e=n.trim().toLowerCase();return Tm.includes(e)?e:null},pp=n=>{if(!n)return[];if(Array.isArray(n)){const e=n.map(t=>Tv(t)).filter(t=>t!==null);return Array.from(new Set(e))}if(typeof n=="string"){const e=n.split(/[,;\n]/).map(i=>Tv(i)).filter(i=>i!==null);if(e.length>0)return Array.from(new Set(e));const t=n.toLowerCase();return Tm.filter(i=>t.includes(i))}return[]},o1=n=>Array.isArray(n)?n.join(" "):"",Iv="clientes",a1=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",u=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:u,fullName_lower:e.fullName_lower||u.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:pp(e.notes??e.Informacion??e.info),createdAt:e.createdAt??null}},_c=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(a=>{if(t&&i&&a.mainBarberId&&a.mainBarberId!==i)return!1;if(!o)return!0;const u=(a.fullName||"").toLowerCase(),d=(a.phone||"").toLowerCase(),p=o1(a.notes).toLowerCase();return u.includes(o)||d.includes(o)||p.includes(o)})};function l1(){const{user:n,role:e}=Xo(),t=!Le,i=e==="admin"||e==="barbero",[o,a]=H.useState(!1),[u,d]=H.useState(""),[p,y]=H.useState(()=>t?Af():[]),[_,E]=H.useState(()=>_c(p,u,o,n?.uid)),[S,M]=H.useState(()=>!t),[N,F]=H.useState(!1),[R,Y]=H.useState({fullName:"",phone:""}),[Z,X]=H.useState(!1),[re,Q]=H.useState(null),[te,P]=H.useState(null),I=H.useCallback(()=>{const D=Af();y(D),E(_c(D,u,o,n?.uid)),M(!1),P(null)},[o,u,n?.uid]),C=H.useCallback(async()=>{if(!Le){I();return}M(!0),P(null);try{const D=Le;if(!D){I();return}const Xe=(await Cl(Ps(D,Iv))).docs.map(je=>a1(je.id,je.data(),n?.uid)).sort((je,Me)=>je.fullName.localeCompare(Me.fullName));y(Xe)}catch(D){console.error("No pudimos cargar clientes",D),y([]),P("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{M(!1)}},[I,n?.uid]);H.useEffect(()=>{if(t){I();return}C()},[t,C,I]),H.useEffect(()=>{if(t){const D=Af();E(_c(D,u,o,n?.uid));return}E(_c(p,u,o,n?.uid))},[u,o,p,n?.uid,t]);const b=async D=>{D.preventDefault();const A=R.fullName.trim(),Ne=R.phone.trim();if(!A){Q("El nombre es obligatorio.");return}X(!0),Q(null);try{Le?(await s0(Ps(Le,Iv),{fullName:A,fullName_lower:A.toLowerCase(),phone:Ne||void 0,mainBarberId:n?.uid||"",notes:[],createdAt:ym()}),await C()):(qN({fullName:A,phone:Ne,mainBarberId:n?.uid}),I()),Y({fullName:"",phone:""}),F(!1)}catch(Xe){console.error("No pudimos crear el cliente",Xe),Q("No pudimos crear el cliente. Intenta de nuevo.")}finally{X(!1)}},L=_;return x.jsxs("div",{className:"panel space-y-8",children:[x.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),x.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&x.jsx("button",{className:"btn btn-primary",onClick:()=>F(D=>!D),children:N?"Cerrar formulario":"Nuevo cliente"})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[x.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:u,onChange:D=>d(D.target.value)}),x.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[x.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(D=>!D),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),N&&i&&x.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:b,children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:R.fullName,onChange:D=>Y(A=>({...A,fullName:D.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:R.phone,onChange:D=>Y(A=>({...A,phone:D.target.value}))})]})]}),re&&x.jsx("p",{className:"text-xs text-red-500",children:re}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary",type:"submit",disabled:Z,children:Z?"Guardando...":"Guardar"}),x.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>F(!1),children:"Cancelar"})]})]})]}),x.jsxs("section",{className:"space-y-3",children:[S&&x.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),te&&!S&&x.jsx("div",{className:"text-sm text-red-600",children:te}),!S&&!te&&L.map(D=>x.jsxs(Em,{to:`/clientes/${D.id}`,className:"list-item",children:[x.jsx("div",{className:"avatar",children:D.fullName.split(" ").map(A=>A[0]).slice(0,2)}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"title",children:D.fullName}),D.phone&&x.jsx("div",{className:"sub",children:D.phone})]}),x.jsx("span",{className:"sub",children:"Ver"})]},D.id)),!S&&!te&&L.length===0&&x.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&x.jsx("footer",{className:"flex items-center justify-end",children:x.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void C(),disabled:S,children:"Actualizar"})}),x.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",x.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function u1({photos:n,onDelete:e,canDelete:t,onSelect:i}){if(!n?.length)return x.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."});const o=t&&typeof e=="function";return x.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:n.map((a,u)=>{const d=a.id||`${a.url}-${u}`;return x.jsxs("div",{className:`relative overflow-hidden rounded-xl shadow-lg ${i?"cursor-zoom-in":""}`,role:i?"button":void 0,tabIndex:i?0:void 0,onClick:()=>i?.(a,u),onKeyDown:p=>{i&&(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),i(a,u))},children:[x.jsx("img",{src:a.url,className:"aspect-square w-full object-cover"}),o&&x.jsx("button",{type:"button",className:"absolute right-2 top-2 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-black/90",onClick:p=>{p.stopPropagation(),e?.(a)},children:"Borrar"})]},d)})})}const Sv=(n,e)=>{if(!Number.isFinite(n)||e<=0)return 0;const t=e-1;return n<0?0:n>t?t:n};function c1({photos:n,initialIndex:e,onClose:t}){const i=n.length,[o,a]=H.useState(()=>Sv(e,i));H.useEffect(()=>{a(Sv(e,i))},[e,i]),H.useEffect(()=>{i||t()},[i,t]);const u=H.useCallback(()=>{i<=1||a(y=>(y+1)%i)},[i]),d=H.useCallback(()=>{i<=1||a(y=>(y-1+i)%i)},[i]);H.useEffect(()=>{const y=_=>{_.key==="Escape"?(_.preventDefault(),t()):_.key==="ArrowRight"?(_.preventDefault(),u()):_.key==="ArrowLeft"&&(_.preventDefault(),d())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[u,d,t]),H.useEffect(()=>{const{overflow:y,paddingRight:_}=document.body.style,E=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",E>0&&(document.body.style.paddingRight=`${E}px`),()=>{document.body.style.overflow=y,document.body.style.paddingRight=_}},[]);const p=H.useMemo(()=>n[o],[n,o]);return!i||!p?null:x.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex bg-black/90 p-4 sm:p-8",onClick:t,children:x.jsxs("div",{className:"relative mx-auto flex max-w-4xl grow items-center justify-center",onClick:y=>y.stopPropagation(),children:[x.jsx("img",{src:p.url,alt:"Foto del cliente",className:"max-h-[80vh] w-auto max-w-full rounded-2xl shadow-2xl"}),i>1?x.jsxs(x.Fragment,{children:[x.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 px-3 py-2 text-lg text-white transition hover:bg-white/40",onClick:d,"aria-label":"Foto anterior",children:"<"}),x.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/20 px-3 py-2 text-lg text-white transition hover:bg-white/40",onClick:u,"aria-label":"Foto siguiente",children:">"})]}):null,x.jsx("button",{type:"button",className:"absolute right-4 top-4 rounded-full bg-white/20 px-2 py-1 text-sm text-white transition hover:bg-white/40",onClick:t,"aria-label":"Cerrar galeria",children:"X"}),x.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full bg-black/60 px-3 py-1 text-xs uppercase tracking-[0.3em] text-white",children:[o+1," / ",i]})]})})}function A0(n,e){return function(){return n.apply(e,arguments)}}const{toString:h1}=Object.prototype,{getPrototypeOf:Im}=Object,{iterator:xh,toStringTag:C0}=Symbol,bh=(n=>e=>{const t=h1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Xn=n=>(n=n.toLowerCase(),e=>bh(e)===n),Oh=n=>e=>typeof e===n,{isArray:ta}=Array,Wo=Oh("undefined");function Hl(n){return n!==null&&!Wo(n)&&n.constructor!==null&&!Wo(n.constructor)&&hn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const k0=Xn("ArrayBuffer");function d1(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&k0(n.buffer),e}const f1=Oh("string"),hn=Oh("function"),P0=Oh("number"),Kl=n=>n!==null&&typeof n=="object",p1=n=>n===!0||n===!1,bc=n=>{if(bh(n)!=="object")return!1;const e=Im(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(C0 in n)&&!(xh in n)},m1=n=>{if(!Kl(n)||Hl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},g1=Xn("Date"),y1=Xn("File"),_1=Xn("Blob"),v1=Xn("FileList"),w1=n=>Kl(n)&&hn(n.pipe),E1=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||hn(n.append)&&((e=bh(n))==="formdata"||e==="object"&&hn(n.toString)&&n.toString()==="[object FormData]"))},T1=Xn("URLSearchParams"),[I1,S1,R1,A1]=["ReadableStream","Request","Response","Headers"].map(Xn),C1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ta(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Hl(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function N0(n,e){if(Hl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,x0=n=>!Wo(n)&&n!==ws;function mp(){const{caseless:n,skipUndefined:e}=x0(this)&&this||{},t={},i=(o,a)=>{const u=n&&N0(t,a)||a;bc(t[u])&&bc(o)?t[u]=mp(t[u],o):bc(o)?t[u]=mp({},o):ta(o)?t[u]=o.slice():(!e||!Wo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Gl(arguments[o],i);return t}const k1=(n,e,t,{allOwnKeys:i}={})=>(Gl(e,(o,a)=>{t&&hn(o)?n[a]=A0(o,t):n[a]=o},{allOwnKeys:i}),n),P1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),N1=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},x1=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Im(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},b1=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},O1=n=>{if(!n)return null;if(ta(n))return n;let e=n.length;if(!P0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},D1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Im(Uint8Array)),L1=(n,e)=>{const i=(n&&n[xh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},V1=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},M1=Xn("HTMLFormElement"),F1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Rv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),U1=Xn("RegExp"),b0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Gl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},j1=n=>{b0(n,(e,t)=>{if(hn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(hn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},B1=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return ta(n)?i(n):i(String(n).split(e)),t},z1=()=>{},$1=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function q1(n){return!!(n&&hn(n.append)&&n[C0]==="FormData"&&n[xh])}const W1=n=>{const e=new Array(10),t=(i,o)=>{if(Kl(i)){if(e.indexOf(i)>=0)return;if(Hl(i))return i;if(!("toJSON"in i)){e[o]=i;const a=ta(i)?[]:{};return Gl(i,(u,d)=>{const p=t(u,o+1);!Wo(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},H1=Xn("AsyncFunction"),K1=n=>n&&(Kl(n)||hn(n))&&hn(n.then)&&hn(n.catch),O0=((n,e)=>n?setImmediate:e?((t,i)=>(ws.addEventListener("message",({source:o,data:a})=>{o===ws&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),ws.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",hn(ws.postMessage)),G1=typeof queueMicrotask<"u"?queueMicrotask.bind(ws):typeof process<"u"&&process.nextTick||O0,Q1=n=>n!=null&&hn(n[xh]),q={isArray:ta,isArrayBuffer:k0,isBuffer:Hl,isFormData:E1,isArrayBufferView:d1,isString:f1,isNumber:P0,isBoolean:p1,isObject:Kl,isPlainObject:bc,isEmptyObject:m1,isReadableStream:I1,isRequest:S1,isResponse:R1,isHeaders:A1,isUndefined:Wo,isDate:g1,isFile:y1,isBlob:_1,isRegExp:U1,isFunction:hn,isStream:w1,isURLSearchParams:T1,isTypedArray:D1,isFileList:v1,forEach:Gl,merge:mp,extend:k1,trim:C1,stripBOM:P1,inherits:N1,toFlatObject:x1,kindOf:bh,kindOfTest:Xn,endsWith:b1,toArray:O1,forEachEntry:L1,matchAll:V1,isHTMLForm:M1,hasOwnProperty:Rv,hasOwnProp:Rv,reduceDescriptors:b0,freezeMethods:j1,toObjectSet:B1,toCamelCase:F1,noop:z1,toFiniteNumber:$1,findKey:N0,global:ws,isContextDefined:x0,isSpecCompliantForm:q1,toJSONObject:W1,isAsyncFn:H1,isThenable:K1,setImmediate:O0,asap:G1,isIterable:Q1};function xe(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const D0=xe.prototype,L0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{L0[n]={value:n}});Object.defineProperties(xe,L0);Object.defineProperty(D0,"isAxiosError",{value:!0});xe.from=(n,e,t,i,o,a)=>{const u=Object.create(D0);q.toFlatObject(n,u,function(_){return _!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return xe.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const J1=null;function gp(n){return q.isPlainObject(n)||q.isArray(n)}function V0(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function Av(n,e,t){return n?n.concat(e).map(function(o,a){return o=V0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function Y1(n){return q.isArray(n)&&!n.some(gp)}const X1=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Dh(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,R){return!q.isUndefined(R[F])});const i=t.metaTokens,o=t.visitor||_,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(N){if(N===null)return"";if(q.isDate(N))return N.toISOString();if(q.isBoolean(N))return N.toString();if(!p&&q.isBlob(N))throw new xe("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(N)||q.isTypedArray(N)?p&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function _(N,F,R){let Y=N;if(N&&!R&&typeof N=="object"){if(q.endsWith(F,"{}"))F=i?F:F.slice(0,-2),N=JSON.stringify(N);else if(q.isArray(N)&&Y1(N)||(q.isFileList(N)||q.endsWith(F,"[]"))&&(Y=q.toArray(N)))return F=V0(F),Y.forEach(function(X,re){!(q.isUndefined(X)||X===null)&&e.append(u===!0?Av([F],re,a):u===null?F:F+"[]",y(X))}),!1}return gp(N)?!0:(e.append(Av(R,F,a),y(N)),!1)}const E=[],S=Object.assign(X1,{defaultVisitor:_,convertValue:y,isVisitable:gp});function M(N,F){if(!q.isUndefined(N)){if(E.indexOf(N)!==-1)throw Error("Circular reference detected in "+F.join("."));E.push(N),q.forEach(N,function(Y,Z){(!(q.isUndefined(Y)||Y===null)&&o.call(e,Y,q.isString(Z)?Z.trim():Z,F,S))===!0&&M(Y,F?F.concat(Z):[Z])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return M(n),e}function Cv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Sm(n,e){this._pairs=[],n&&Dh(n,this,e)}const M0=Sm.prototype;M0.append=function(e,t){this._pairs.push([e,t])};M0.toString=function(e){const t=e?function(i){return e.call(this,i,Cv)}:Cv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Z1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function F0(n,e,t){if(!e)return n;const i=t&&t.encode||Z1;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=q.isURLSearchParams(e)?e.toString():new Sm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class kv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const U0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eb=typeof URLSearchParams<"u"?URLSearchParams:Sm,tb=typeof FormData<"u"?FormData:null,nb=typeof Blob<"u"?Blob:null,rb={isBrowser:!0,classes:{URLSearchParams:eb,FormData:tb,Blob:nb},protocols:["http","https","file","blob","url","data"]},Rm=typeof window<"u"&&typeof document<"u",yp=typeof navigator=="object"&&navigator||void 0,ib=Rm&&(!yp||["ReactNative","NativeScript","NS"].indexOf(yp.product)<0),sb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ob=Rm&&window.location.href||"http://localhost",ab=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rm,hasStandardBrowserEnv:ib,hasStandardBrowserWebWorkerEnv:sb,navigator:yp,origin:ob},Symbol.toStringTag,{value:"Module"})),qt={...ab,...rb};function lb(n,e){return Dh(n,new qt.classes.URLSearchParams,{visitor:function(t,i,o,a){return qt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function ub(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function cb(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function j0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&q.isArray(o)?o.length:u,p?(q.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!q.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&q.isArray(o[u])&&(o[u]=cb(o[u])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(ub(i),o,t,0)}),t}return null}function hb(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ql={transitional:U0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=q.isObject(e);if(a&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(j0(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return lb(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Dh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),hb(e)):e}],transformResponse:[function(e){const t=this.transitional||Ql.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?xe.from(d,xe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Ql.headers[n]={}});const db=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fb=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&db[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Pv=Symbol("internals");function el(n){return n&&String(n).trim().toLowerCase()}function Oc(n){return n===!1||n==null?n:q.isArray(n)?n.map(Oc):String(n)}function pb(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const mb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xf(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function gb(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function yb(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let dn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,y){const _=el(p);if(!_)throw new Error("header name must be a non-empty string");const E=q.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=Oc(d))}const u=(d,p)=>q.forEach(d,(y,_)=>a(y,_,p));if(q.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(q.isString(e)&&(e=e.trim())&&!mb(e))u(fb(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},p,y;for(const _ of e){if(!q.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[y=_[0]]=(p=d[y])?q.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=el(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return pb(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=el(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||xf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=el(u),u){const d=q.findKey(i,u);d&&(!t||xf(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||xf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,a)=>{const u=q.findKey(i,a);if(u){t[u]=Oc(o),delete t[a];return}const d=e?gb(a):String(a).trim();d!==a&&delete t[a],t[d]=Oc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Pv]=this[Pv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=el(u);i[d]||(yb(o,u),i[d]=!0)}return q.isArray(e)?e.forEach(a):a(e),this}};dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(dn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(dn);function bf(n,e){const t=this||Ql,i=e||t,o=dn.from(i.headers);let a=i.data;return q.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function B0(n){return!!(n&&n.__CANCEL__)}function na(n,e,t){xe.call(this,n??"canceled",xe.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(na,xe,{__CANCEL__:!0});function z0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new xe("Request failed with status code "+t.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function _b(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function vb(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),_=i[a];u||(u=y),t[o]=p,i[o]=y;let E=a,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const M=_&&y-_;return M?Math.round(S*1e3/M):void 0}}function wb(n,e){let t=0,i=1e3/e,o,a;const u=(y,_=Date.now())=>{t=_,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?u(y,_):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const rh=(n,e,t=3)=>{let i=0;const o=vb(50,250);return wb(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,y=o(p),_=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&_?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},Nv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},xv=n=>(...e)=>q.asap(()=>n(...e)),Eb=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,Tb=qt.hasStandardBrowserEnv?{write(n,e,t,i,o,a){const u=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),q.isString(i)&&u.push("path="+i),q.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ib(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Sb(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function $0(n,e,t){let i=!Ib(e);return n&&(i||t==!1)?Sb(n,e):e}const bv=n=>n instanceof dn?{...n}:n;function Ns(n,e){e=e||{};const t={};function i(y,_,E,S){return q.isPlainObject(y)&&q.isPlainObject(_)?q.merge.call({caseless:S},y,_):q.isPlainObject(_)?q.merge({},_):q.isArray(_)?_.slice():_}function o(y,_,E,S){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y,E,S)}else return i(y,_,E,S)}function a(y,_){if(!q.isUndefined(_))return i(void 0,_)}function u(y,_){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,_,E)=>o(bv(y),bv(_),E,!0)};return q.forEach(Object.keys({...n,...e}),function(_){const E=p[_]||o,S=E(n[_],e[_],_);q.isUndefined(S)&&E!==d||(t[_]=S)}),t}const q0=n=>{const e=Ns({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=dn.from(u),e.url=F0($0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(q.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([_,E])=>{y.includes(_.toLowerCase())&&u.set(_,E)})}}if(qt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&Eb(e.url))){const p=o&&a&&Tb.read(a);p&&u.set(o,p)}return e},Rb=typeof XMLHttpRequest<"u",Ab=Rb&&function(n){return new Promise(function(t,i){const o=q0(n);let a=o.data;const u=dn.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,_,E,S,M,N;function F(){M&&M(),N&&N(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let R=new XMLHttpRequest;R.open(o.method.toUpperCase(),o.url,!0),R.timeout=o.timeout;function Y(){if(!R)return;const X=dn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),Q={data:!d||d==="text"||d==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:X,config:n,request:R};z0(function(P){t(P),F()},function(P){i(P),F()},Q),R=null}"onloadend"in R?R.onloadend=Y:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(Y)},R.onabort=function(){R&&(i(new xe("Request aborted",xe.ECONNABORTED,n,R)),R=null)},R.onerror=function(re){const Q=re&&re.message?re.message:"Network Error",te=new xe(Q,xe.ERR_NETWORK,n,R);te.event=re||null,i(te),R=null},R.ontimeout=function(){let re=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Q=o.transitional||U0;o.timeoutErrorMessage&&(re=o.timeoutErrorMessage),i(new xe(re,Q.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,n,R)),R=null},a===void 0&&u.setContentType(null),"setRequestHeader"in R&&q.forEach(u.toJSON(),function(re,Q){R.setRequestHeader(Q,re)}),q.isUndefined(o.withCredentials)||(R.withCredentials=!!o.withCredentials),d&&d!=="json"&&(R.responseType=o.responseType),y&&([S,N]=rh(y,!0),R.addEventListener("progress",S)),p&&R.upload&&([E,M]=rh(p),R.upload.addEventListener("progress",E),R.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(_=X=>{R&&(i(!X||X.type?new na(null,n,R):X),R.abort(),R=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const Z=_b(o.url);if(Z&&qt.protocols.indexOf(Z)===-1){i(new xe("Unsupported protocol "+Z+":",xe.ERR_BAD_REQUEST,n));return}R.send(a||null)})},Cb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof xe?_:new na(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,a(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>q.asap(d),p}},kb=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},Pb=async function*(n,e){for await(const t of Nb(n))yield*kb(t,e)},Nb=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Ov=(n,e,t,i)=>{const o=Pb(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:_}=await o.next();if(y){d(),p.close();return}let E=_.byteLength;if(t){let S=a+=E;t(S)}p.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},Dv=64*1024,{isFunction:vc}=q,xb=(({Request:n,Response:e})=>({Request:n,Response:e}))(q.global),{ReadableStream:Lv,TextEncoder:Vv}=q.global,Mv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},bb=n=>{n=q.merge.call({skipUndefined:!0},xb,n);const{fetch:e,Request:t,Response:i}=n,o=e?vc(e):typeof fetch=="function",a=vc(t),u=vc(i);if(!o)return!1;const d=o&&vc(Lv),p=o&&(typeof Vv=="function"?(N=>F=>N.encode(F))(new Vv):async N=>new Uint8Array(await new t(N).arrayBuffer())),y=a&&d&&Mv(()=>{let N=!1;const F=new t(qt.origin,{body:new Lv,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!F}),_=u&&d&&Mv(()=>q.isReadableStream(new i("").body)),E={stream:_&&(N=>N.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!E[N]&&(E[N]=(F,R)=>{let Y=F&&F[N];if(Y)return Y.call(F);throw new xe(`Response type '${N}' is not supported`,xe.ERR_NOT_SUPPORT,R)})});const S=async N=>{if(N==null)return 0;if(q.isBlob(N))return N.size;if(q.isSpecCompliantForm(N))return(await new t(qt.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(q.isArrayBufferView(N)||q.isArrayBuffer(N))return N.byteLength;if(q.isURLSearchParams(N)&&(N=N+""),q.isString(N))return(await p(N)).byteLength},M=async(N,F)=>{const R=q.toFiniteNumber(N.getContentLength());return R??S(F)};return async N=>{let{url:F,method:R,data:Y,signal:Z,cancelToken:X,timeout:re,onDownloadProgress:Q,onUploadProgress:te,responseType:P,headers:I,withCredentials:C="same-origin",fetchOptions:b}=q0(N),L=e||fetch;P=P?(P+"").toLowerCase():"text";let D=Cb([Z,X&&X.toAbortSignal()],re),A=null;const Ne=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let Xe;try{if(te&&y&&R!=="get"&&R!=="head"&&(Xe=await M(I,Y))!==0){let U=new t(F,{method:"POST",body:Y,duplex:"half"}),G;if(q.isFormData(Y)&&(G=U.headers.get("content-type"))&&I.setContentType(G),U.body){const[K,se]=Nv(Xe,rh(xv(te)));Y=Ov(U.body,Dv,K,se)}}q.isString(C)||(C=C?"include":"omit");const je=a&&"credentials"in t.prototype,Me={...b,signal:D,method:R.toUpperCase(),headers:I.normalize().toJSON(),body:Y,duplex:"half",credentials:je?C:void 0};A=a&&new t(F,Me);let le=await(a?L(A,b):L(F,Me));const ve=_&&(P==="stream"||P==="response");if(_&&(Q||ve&&Ne)){const U={};["status","statusText","headers"].forEach(ae=>{U[ae]=le[ae]});const G=q.toFiniteNumber(le.headers.get("content-length")),[K,se]=Q&&Nv(G,rh(xv(Q),!0))||[];le=new i(Ov(le.body,Dv,K,()=>{se&&se(),Ne&&Ne()}),U)}P=P||"text";let he=await E[q.findKey(E,P)||"text"](le,N);return!ve&&Ne&&Ne(),await new Promise((U,G)=>{z0(U,G,{data:he,headers:dn.from(le.headers),status:le.status,statusText:le.statusText,config:N,request:A})})}catch(je){throw Ne&&Ne(),je&&je.name==="TypeError"&&/Load failed|fetch/i.test(je.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,N,A),{cause:je.cause||je}):xe.from(je,je&&je.code,N,A)}}},Ob=new Map,W0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,y,_=Ob;for(;d--;)p=a[d],y=_.get(p),y===void 0&&_.set(p,y=d?new Map:bb(e)),_=y;return y};W0();const _p={http:J1,xhr:Ab,fetch:{get:W0}};q.forEach(_p,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Fv=n=>`- ${n}`,Db=n=>q.isFunction(n)||n===null||n===!1,H0={getAdapter:(n,e)=>{n=q.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!Db(i)&&(o=_p[(d=String(i)).toLowerCase()],o===void 0))throw new xe(`Unknown adapter '${d}'`);if(o&&(q.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(Fv).join(`
`):" "+Fv(u[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:_p};function Of(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new na(null,n)}function Uv(n){return Of(n),n.headers=dn.from(n.headers),n.data=bf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),H0.getAdapter(n.adapter||Ql.adapter,n)(n).then(function(i){return Of(n),i.data=bf.call(n,n.transformResponse,i),i.headers=dn.from(i.headers),i},function(i){return B0(i)||(Of(n),i&&i.response&&(i.response.data=bf.call(n,n.transformResponse,i.response),i.response.headers=dn.from(i.response.headers))),Promise.reject(i)})}const K0="1.12.2",Lh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Lh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const jv={};Lh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+K0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new xe(o(u," has been removed"+(t?" in "+t:"")),xe.ERR_DEPRECATED);return t&&!jv[u]&&(jv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Lh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Lb(n,e,t){if(typeof n!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new xe("option "+a+" must be "+p,xe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xe("Unknown option "+a,xe.ERR_BAD_OPTION)}}const Dc={assertOptions:Lb,validators:Lh},cr=Dc.validators;let Ts=class{constructor(e){this.defaults=e||{},this.interceptors={request:new kv,response:new kv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ns(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&Dc.assertOptions(i,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:Dc.assertOptions(o,{encode:cr.function,serialize:cr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Dc.assertOptions(t,{baseUrl:cr.spelling("baseURL"),withXsrfToken:cr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&q.merge(a.common,a[t.method]);a&&q.forEach(["delete","get","head","post","put","patch","common"],N=>{delete a[N]}),t.headers=dn.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(t)===!1||(p=p&&F.synchronous,d.unshift(F.fulfilled,F.rejected))});const y=[];this.interceptors.response.forEach(function(F){y.push(F.fulfilled,F.rejected)});let _,E=0,S;if(!p){const N=[Uv.bind(this),void 0];for(N.unshift(...d),N.push(...y),S=N.length,_=Promise.resolve(t);E<S;)_=_.then(N[E++],N[E++]);return _}S=d.length;let M=t;for(;E<S;){const N=d[E++],F=d[E++];try{M=N(M)}catch(R){F.call(this,R);break}}try{_=Uv.call(this,M)}catch(N){return Promise.reject(N)}for(E=0,S=y.length;E<S;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=Ns(this.defaults,e);const t=$0(e.baseURL,e.url,e.allowAbsoluteUrls);return F0(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){Ts.prototype[e]=function(t,i){return this.request(Ns(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(Ns(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Ts.prototype[e]=t(),Ts.prototype[e+"Form"]=t(!0)});let Vb=class G0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new na(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new G0(function(o){e=o}),cancel:e}}};function Mb(n){return function(t){return n.apply(null,t)}}function Fb(n){return q.isObject(n)&&n.isAxiosError===!0}const vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vp).forEach(([n,e])=>{vp[e]=n});function Q0(n){const e=new Ts(n),t=A0(Ts.prototype.request,e);return q.extend(t,Ts.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Q0(Ns(n,o))},t}const lt=Q0(Ql);lt.Axios=Ts;lt.CanceledError=na;lt.CancelToken=Vb;lt.isCancel=B0;lt.VERSION=K0;lt.toFormData=Dh;lt.AxiosError=xe;lt.Cancel=lt.CanceledError;lt.all=function(e){return Promise.all(e)};lt.spread=Mb;lt.isAxiosError=Fb;lt.mergeConfig=Ns;lt.AxiosHeaders=dn;lt.formToJSON=n=>j0(q.isHTMLForm(n)?new FormData(n):n);lt.getAdapter=H0.getAdapter;lt.HttpStatusCode=vp;lt.default=lt;const{Axios:eO,AxiosError:tO,CanceledError:nO,isCancel:rO,CancelToken:iO,VERSION:sO,all:oO,Cancel:aO,isAxiosError:lO,spread:uO,toFormData:cO,AxiosHeaders:hO,HttpStatusCode:dO,formToJSON:fO,getAdapter:pO,mergeConfig:mO}=lt,J0="dm7y9ywjq",Y0="barberia_unsigned",Am=!!Y0,Ub=n=>n.total?Math.round(n.loaded/n.total*100):0;async function jb(n,e={}){const{folder:t="barberia",onProgress:i}=e;if(!Am)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");const o=`https://api.cloudinary.com/v1_1/${J0}/image/upload`,a=new FormData;a.append("file",n),a.append("upload_preset",Y0),t&&a.append("folder",t);const u=!1,d=async p=>{const y=new FormData;a.forEach((S,M)=>{y.append(M,S)});const{data:_}=await lt.post(o,y,{onUploadProgress:S=>{if(!i)return;const M=Ub(S);M>0&&i(M)}});i?.(100);const E=typeof _.delete_token=="string"&&_.delete_token.trim().length?_.delete_token:null;return{url:_.secure_url,deleteToken:E}};try{return await d(u)}catch(p){if(console.error("No pudimos subir la imagen a Cloudinary",p),lt.isAxiosError(p)){const y=typeof p.response?.data?.error?.message=="string"?p.response.data.error.message:typeof p.response?.data?.message=="string"?p.response.data.message:null;throw new Error(y?`Cloudinary rechazo la imagen: ${y}`:"No pudimos subir la imagen. Intenta de nuevo.")}throw new Error("No pudimos subir la imagen. Intenta de nuevo.")}}async function Bb(n){if(!n)throw new Error("Token de eliminacion invalido.");if(!Am)throw new Error("Cloudinary no configurado: faltan VITE_CLOUDINARY_*");try{const e=`https://api.cloudinary.com/v1_1/${J0}/delete_by_token`,t=new FormData;t.append("token",n),await lt.post(e,t)}catch(e){throw console.error("No pudimos eliminar la imagen en Cloudinary",e),new Error("No pudimos eliminar la imagen. Intenta de nuevo.")}}function zb({onUploaded:n,folder:e,disabled:t}){const[i,o]=H.useState(!1),[a,u]=H.useState(0),[d,p]=H.useState(null),y=async S=>{const M=S.target,N=M.files?.[0];if(N){o(!0),u(0),p(null);try{const F=await jb(N,{folder:e,onProgress:R=>u(R)});n(F)}catch(F){console.error(F),p(F instanceof Error?F.message:"No pudimos subir la imagen.")}finally{M.value="",o(!1),u(0)}}},_=t||i,E=i?`Subiendo...${a>0?` ${a}%`:""}`:"Subir imagen";return x.jsxs("div",{className:"space-y-1",children:[x.jsxs("label",{className:`uploader-trigger${_?" disabled":""}`,children:[x.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:_,onChange:y}),x.jsx("span",{children:E})]}),d&&x.jsx("p",{className:"text-xs text-red-500 text-right",children:d})]})}const Df="clientes",Lf="cuts";function $b(){const{id:n}=Px(),e=Wl(),{user:t,role:i,demoMode:o}=Xo(),[a,u]=H.useState([]),[d,p]=H.useState({fullName:"",phone:"",notes:[]}),[y,_]=H.useState(!0),[E,S]=H.useState(!1),[M,N]=H.useState(!1),[F,R]=H.useState(null),[Y,Z]=H.useState(null),[X,re]=H.useState(null),[Q,te]=H.useState(null),P=!Le,I=i==="admin"||i==="barbero",C=Am,b=P?"demo":n?`clientes/${n}`:"clientes",L=K=>K.map(se=>({key:se.id,id:se.id,url:se.url,deleteToken:se.deleteToken??null,barberId:se.barberId,demoId:se.id})),D=(K,se)=>{if(typeof K=="string"){const ae={url:K,deleteToken:null};return se&&(ae.barberId=se),{url:K,deleteToken:null,barberId:se,rawValue:ae,needsMigration:!0}}if(K&&typeof K=="object"){const ae=K,we=typeof ae.url=="string"?ae.url:typeof ae.secure_url=="string"?ae.secure_url:typeof ae.path=="string"?ae.path:"";if(!we)return null;const Ce=(typeof ae.deleteToken=="string"?ae.deleteToken:typeof ae.delete_token=="string"?ae.delete_token:null)??null,be=typeof ae.barberId=="string"&&ae.barberId.trim().length>0,Ge=be?ae.barberId.trim():se,Kt={url:we,deleteToken:Ce};Ge&&(Kt.barberId=Ge);const Tn=!be&&!!se||typeof ae.deleteToken>"u"||typeof ae.delete_token=="string";return{url:we,deleteToken:Ce,barberId:Ge,rawValue:Kt,needsMigration:Tn}}return null},A=K=>{u(se=>se.filter(ae=>ae.key!==K))},Ne=async K=>{if(!(!n||X||!window.confirm("Seguro que deseas eliminar esta foto?"))){Z(null),re(K.key);try{if(P){K.demoId&&QN(n,K.demoId),A(K.key);return}if(!K.deleteToken)throw new Error("No podemos eliminar esta imagen porque se subio antes de activar los tokens de Cloudinary.");if(await Bb(K.deleteToken),K.cutId){const ae=un(Le,Lf,K.cutId);K.docHasSinglePhoto?await lp(ae):K.rawValue!==void 0&&await ml(ae,{photos:aN(K.rawValue)})}A(K.key)}catch(ae){console.error("No pudimos eliminar la foto",ae),Z(ae instanceof Error?ae.message:"No pudimos eliminar la imagen. Intenta de nuevo.")}finally{re(null)}}},Xe=(K,se)=>{if(!a.length)return;if(se>=0&&se<a.length){te(se);return}const ae=a.findIndex(we=>we.key===K.key);te(ae>=0?ae:0)};H.useEffect(()=>{if(Q===null)return;if(!a.length){te(null);return}const K=a.length-1;Q>K&&te(K)},[a,Q]),H.useEffect(()=>{if(!n)return;if(Z(null),re(null),P){const se=d0(n);if(!se){_(!1);return}_(!0),p({fullName:se.fullName,phone:se.phone==null?"":String(se.phone),notes:pp(se.notes)}),u(L(KN(n)));return}const K=oN(un(Le,Df,n),se=>{if(!se.exists()){_(!1);return}const ae=se.data();_(!0),p({fullName:ae.fullName||"",phone:ae.phone==null?"":String(ae.phone),notes:pp(ae.notes)})});return(async()=>{const se=Yc(Ps(Le,Lf),ap("clientId","==",n)),ae=await Cl(se),we=[];let De=!1;ae.forEach(Ce=>{const be=Ce.data(),Ge=Array.isArray(be.photos)?be.photos:[],Kt=typeof be.barberId=="string"&&be.barberId.trim().length?be.barberId.trim():void 0;Ge.forEach((Er,Tn)=>{const Xt=D(Er,Kt);if(!Xt)return;const Tr=`${Ce.id}-${Tn}`;we.push({photo:{key:Tr,id:Tr,url:Xt.url,deleteToken:Xt.deleteToken,cutId:Ce.id,rawValue:Xt.rawValue,docHasSinglePhoto:Ge.length<=1,barberId:Xt.barberId},createdAt:be.createdAt}),Xt.needsMigration&&!De&&(De=!0,console.warn("Se detectaron fotos antiguas sin barberId. Actualiza manualmente esos documentos si tus reglas de seguridad lo permiten."))})}),we.sort((Ce,be)=>{const Ge=Ce.createdAt?.toMillis?Ce.createdAt.toMillis():Number(Ce.createdAt)||0;return(be.createdAt?.toMillis?be.createdAt.toMillis():Number(be.createdAt)||0)-Ge}),u(we.map(Ce=>Ce.photo).slice(0,12))})(),()=>K()},[n,P]);const je=H.useMemo(()=>P?x.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[P]),Me=async K=>{if(!n)return;if(Z(null),P){const ae=GN(n,{url:K.url,deleteToken:K.deleteToken??null,barberId:t?.uid||"demo-barber"});u(L(ae).slice(0,12));return}const se={url:K.url,deleteToken:K.deleteToken??null,barberId:t?.uid||""};try{const ae=await s0(Ps(Le,Lf),{clientId:n,barberId:t?.uid||"",photos:[se],createdAt:ym()}),we=`${ae.id}-0`;u(De=>[{key:we,id:we,url:K.url,deleteToken:K.deleteToken??null,cutId:ae.id,rawValue:se,docHasSinglePhoto:!0,barberId:t?.uid||""},...De].slice(0,12))}catch(ae){console.error("No pudimos registrar la foto",ae),Z("No pudimos guardar la foto en el cliente.")}},le=async()=>{if(!n)return;const K=(d.fullName??"").toString().trim(),se=(d.phone??"").toString().trim();if(!K){R("El nombre es obligatorio.");return}S(!0),R(null);try{const ae=Array.isArray(d.notes)?[...d.notes]:[];if(P)WN(n,{fullName:K,phone:se||void 0,notes:ae});else{const we={fullName:K,fullName_lower:K.toLowerCase()};se?we.phone=se:we.phone=sv(),ae.length>0?we.notes=ae:we.notes=sv(),await ml(un(Le,Df,n),we)}}catch(ae){console.error("No pudimos actualizar el cliente",ae),R("No pudimos actualizar el cliente.")}finally{S(!1)}},ve=K=>{p(se=>{const ae=se.notes.includes(K);return{...se,notes:ae?se.notes.filter(we=>we!==K):[...se.notes,K]}})},he=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){N(!0),R(null);try{P?HN(n):await lp(un(Le,Df,n)),e("/clientes")}catch(se){console.error("No pudimos eliminar el cliente",se),R("No pudimos eliminar el cliente."),N(!1)}}};if(!y)return x.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const U=(d.fullName??"").toString().trim()||"Cliente sin nombre",G=(d.phone??"").toString().trim();return x.jsxs("div",{className:"panel space-y-8",children:[je,x.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),x.jsx("h1",{className:"detail-title",children:U}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:G?`Tel. ${G}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),I&&x.jsxs("div",{className:"flex flex-col items-end gap-2",children:[x.jsx(zb,{onUploaded:Me,folder:b}),x.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"}),!C&&!P&&x.jsxs("span",{className:"text-xs text-red-500",children:["Configura Cloudinary en el archivo ",x.jsx("code",{children:".env"})," para subir las imagenes a la nube."]})]})]}),x.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[x.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),x.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),x.jsx("input",{className:"input mt-1",value:d.fullName,onChange:K=>p(se=>({...se,fullName:K.target.value})),disabled:!I})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),x.jsx("input",{className:"input mt-1",value:d.phone,onChange:K=>p(se=>({...se,phone:K.target.value})),disabled:!I})]})]}),F&&x.jsx("p",{className:"text-xs text-red-500",children:F}),I&&x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary",onClick:()=>void le(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),x.jsx("button",{className:"btn btn-ghost",onClick:()=>void he(),disabled:M,children:M?"Eliminando...":"Eliminar"})]})]}),x.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h2",{className:"detail-sub",children:"Galeria"}),a.length>0&&x.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[a.length," fotos"]})]}),x.jsx(u1,{photos:a,canDelete:I,onDelete:K=>void Ne(K),onSelect:(K,se)=>Xe(K,se)}),Y&&x.jsx("p",{className:"text-xs text-red-500",children:Y}),P&&!o||!C?x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:C?"Configura Cloudinary para guardar fotos reales.":"Las variables de Cloudinary no estan definidas. Usa tus credenciales para guardar las imagenes."}):null,!C&&x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Mientras tanto se utilizaran imagenes de muestra temporales."})]})]}),x.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[x.jsx("h2",{className:"detail-sub",children:"Notas"}),x.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:Tm.map(K=>{const se=d.notes.includes(K);return x.jsxs("label",{className:`flex items-center gap-3 rounded-xl border border-[var(--border-soft)] bg-white/60 px-3 py-2 text-sm text-[var(--ink)] ${I?"cursor-pointer hover:border-[var(--accent-soft)]":"opacity-70"}`,children:[x.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-[var(--accent)]",checked:se,onChange:()=>ve(K),disabled:!I}),x.jsx("span",{children:s1[K]})]},K)})}),I&&x.jsx("button",{onClick:()=>void le(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]}),Q!==null&&a.length>0?x.jsx(c1,{photos:a,initialIndex:Q,onClose:()=>te(null)}):null]})}const Bv={"auth/invalid-email":"El correo no tiene un formato válido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contraseña incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales inválidas. Verifica tus datos.","auth/user-disabled":"La cuenta está deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},zv=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in Bv)return Bv[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesión. Verifica tus datos."}return"No pudimos iniciar sesión. Verifica tu correo y contraseña."},wc=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al día con las imágenes de cada servicio"}];function qb(){const[n,e]=H.useState(""),[t,i]=H.useState(""),[o,a]=H.useState(!1),[u,d]=H.useState(null),[p,y]=H.useState(null),_=Wl(),{user:E,loading:S}=Xo();H.useEffect(()=>{!S&&E&&_("/clientes",{replace:!0})},[E,S,_]);const M=async R=>{if(R.preventDefault(),!En||!Le)return;const Y=n.trim(),Z=t.trim();if(!Y||!Z){d("Completa ambos campos para continuar.");return}a(!0),d(null),y(null);try{const re=(await $R(En,Y,Z)).user.uid,Q=un(Le,"barberos",re),te=await Xc(Q);let P=null;if(te.exists())P=te.data().role||null;else{const I=un(Le,"users",re),C=await Xc(I);C.exists()&&(P=C.data().role||null)}if(!P)throw new Error("No se encontró el rol del usuario.");if(P==="admin")_("/admin/usuarios",{replace:!0});else if(P==="barbero")_("/clientes",{replace:!0});else throw new Error("Rol desconocido o no autorizado.")}catch(X){console.error("Error al iniciar sesión:",X),d(zv(X))}finally{a(!1)}},N=async()=>{if(!En)return;const R=n.trim();if(!R){d("Ingresa tu correo para recuperar la contraseña.");return}try{await BR(En,R),y("Te enviamos un correo para restablecer tu contraseña."),d(null)}catch(Y){console.error("Error al enviar correo de recuperación:",Y),d(zv(Y)),y(null)}};return x.jsx("div",{className:"login-hero",children:x.jsxs("div",{className:"login-hero-inner",children:[x.jsx("div",{className:"space-y-4 text-center",children:x.jsxs("div",{className:"look-fusion-lockup",children:[x.jsx("img",{src:"/barberia/images/logo.png",alt:"Logotipo Look Fusion",className:"look-fusion-logo"}),x.jsx("h1",{className:"login-heading look-fusion-wordmark",children:"LOOK FUSION"})]})}),x.jsxs("div",{className:"login-card",children:[x.jsxs("div",{className:"login-gallery",children:[x.jsx("div",{className:"login-gallery-top",children:wc.slice(0,2).map(R=>x.jsxs("figure",{children:[x.jsx("img",{src:R.src,alt:R.caption}),x.jsx("figcaption",{children:R.caption})]},R.caption))}),x.jsxs("figure",{children:[x.jsx("img",{src:wc[2].src,alt:wc[2].caption}),x.jsx("figcaption",{children:wc[2].caption})]})]}),x.jsxs("div",{className:"login-panel",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("h2",{children:"Inicia sesión"}),x.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automáticamente al módulo correspondiente según tu rol."})]}),x.jsxs("form",{className:"login-form",onSubmit:M,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),x.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:R=>e(R.target.value),type:"email",autoComplete:"email",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contraseña"}),x.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:R=>i(R.target.value),autoComplete:"current-password",required:!0,minLength:6})]}),u&&x.jsx("p",{className:"text-xs text-red-600",children:u}),p&&x.jsx("p",{className:"text-xs text-green-600",children:p}),x.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Ingresando...":"Entrar"}),x.jsx("button",{className:"mt-2 text-sm font-semibold text-[#d67c21] underline hover:text-[#b86516]",type:"button",disabled:o,onClick:N,children:"Olvidé mi contraseña"})]}),x.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galería asignada."]}),x.jsxs("p",{children:["Soporte: ",x.jsx("span",{className:"font-semibold text-black/70",children:"barberiawebpro@gmail.com"})]})]})]})]})]})})}async function Wb(n){if(!En||!Le)return{success:!1,message:"Firebase no está inicializado."};try{const t=(await zR(En,n.email,n.password)).user.uid;return await sN(un(Le,"barberos",t),{email:n.email.toLowerCase(),displayName:n.displayName,role:"barbero",createdAt:ym()}),console.log("✅ Barbero registrado correctamente:",n.email),{success:!0,uid:t}}catch(e){return console.error("❌ Error al registrar barbero:",e),typeof e=="object"&&e&&"code"in e&&e.code==="auth/email-already-in-use"?{success:!1,message:"El correo ya está registrado."}:{success:!1,message:e instanceof Error?e.message:"Error desconocido"}}}const tl="barberos",Hb=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,nl=(n,e)=>`${n??""} ${e??""}`.trim(),Vf={firstName:"",lastName:"",email:"",dni:"",role:"barbero",password:""},rl=()=>f0().map(n=>{const e=(n.displayName||"").trim().split(" "),t=e.shift()||n.displayName||"",i=e.join(" ");return{id:n.id,displayName:n.displayName,firstName:t,lastName:i,email:n.email,emailLower:n.email.toLowerCase(),dni:n.id.replace("demo-user-",""),role:n.role}});function Kb(){const{role:n,loading:e}=Xo(),t=!Le,[i,o]=H.useState(()=>t?rl():[]),[a,u]=H.useState(""),[d,p]=H.useState(!1),[y,_]=H.useState(!1),[E,S]=H.useState(Vf),[M,N]=H.useState(null);H.useEffect(()=>{if(!Le){o(rl());return}(async()=>{const te=await Cl(Yc(Ps(Le,tl),nN("displayName")));o(te.docs.map(P=>{const I=P.data(),C=I.firstName||I.nombre||"",b=I.lastName||I.apellido||"",L=I.dni||"";return{id:P.id,displayName:I.displayName||nl(C,b),firstName:C,lastName:b,email:I.email,emailLower:I.emailLower,dni:L,role:I.role}}))})()},[Le]);const F=a.trim().toLowerCase(),R=H.useMemo(()=>i.filter(Q=>{if(!F)return!0;const te=(Q.displayName||nl(Q.firstName,Q.lastName)).toLowerCase(),P=Q.emailLower||Q.email?.toLowerCase()||"",I=(Q.dni||"").toLowerCase();return te.includes(F)||P.includes(F)||I.includes(F)}),[i,F]),Y=Q=>{if(Q){const P=(Q.displayName||nl(Q.firstName,Q.lastName)).split(" "),I=Q.firstName||P.shift()||"",C=Q.lastName||P.join(" ");S({id:Q.id,firstName:I,lastName:C,email:Q.email||"",dni:Q.dni||"",role:Q.role||"barbero",password:""})}else S(Vf);N(null),_(!0)},Z=async Q=>{Q.preventDefault();const te=E.firstName.trim(),P=E.lastName.trim(),I=E.email.trim(),C=E.dni.trim(),b=E.password.trim();if(!te||!P||!I||!C){N("Nombre, apellido, email y DNI son obligatorios.");return}if(!Hb.test(I)){N("Ingresa un correo válido.");return}const L=nl(te,P),D=I.toLowerCase();p(!0),N(null);try{if(!Le)E.id?hv(E.id,{displayName:L,email:I,role:E.role}):JN({displayName:L,email:I,role:E.role}),o(rl());else if(E.id)await ml(un(Le,tl,E.id),{firstName:te,lastName:P,displayName:L,email:I,emailLower:D,dni:C,role:E.role}),o(A=>A.map(Ne=>Ne.id===E.id?{...Ne,firstName:te,lastName:P,displayName:L,email:I,emailLower:D,dni:C,role:E.role}:Ne));else{if(b.length<6){N("La contraseña debe tener al menos 6 caracteres."),p(!1);return}const A=await Wb({displayName:L,email:I,password:b});if(!A.success||!A.uid)throw new Error(A.message||"No pudimos registrar el barbero.");await ml(un(Le,tl,A.uid),{firstName:te,lastName:P,email:I,emailLower:D,dni:C,role:E.role}),o(Ne=>[{id:A.uid,firstName:te,lastName:P,displayName:L,email:I,emailLower:D,dni:C,role:E.role},...Ne])}_(!1),S(Vf)}catch(A){console.error("No pudimos guardar el usuario",A);const Ne=A instanceof Error?A.message:"No pudimos guardar el usuario.";N(Ne)}finally{p(!1)}},X=async(Q,te)=>{if(!Le){hv(Q,{role:te}),o(rl());return}await ml(un(Le,tl,Q),{role:te}),o(P=>P.map(I=>I.id===Q?{...I,role:te}:I))},re=async Q=>{if(window.confirm("Seguro que deseas eliminar este barbero?"))try{Le?(await lp(un(Le,tl,Q)),o(te=>te.filter(P=>P.id!==Q))):(YN(Q),o(rl()))}catch(te){console.error("No pudimos eliminar el usuario",te),N("No pudimos eliminar el usuario.")}};return e?x.jsx("div",{className:"panel text-[var(--ink)]",children:"Cargando usuarios…"}):n!=="admin"?x.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta página."}):x.jsxs("div",{className:"panel space-y-6",children:[x.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),x.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Gestión de barberos"}),x.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:"Crea cuentas nuevas, asigna roles y mantén la información de tu staff al día."})]}),x.jsx("button",{className:"btn btn-primary",onClick:()=>Y(),children:"Nuevo barbero"})]}),x.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:x.jsx("input",{className:"searchbar",placeholder:"Buscar por nombre, correo o DNI",value:a,onChange:Q=>u(Q.target.value)})}),y&&x.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:Z,children:[x.jsxs("div",{className:"grid gap-3 md:grid-cols-5",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Ana",value:E.firstName,onChange:Q=>S(te=>({...te,firstName:Q.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Apellido"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. Gómez",value:E.lastName,onChange:Q=>S(te=>({...te,lastName:Q.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"DNI"}),x.jsx("input",{className:"input mt-1",placeholder:"Ej. 12345678",value:E.dni,onChange:Q=>S(te=>({...te,dni:Q.target.value}))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),x.jsx("input",{className:"input mt-1",placeholder:"correo@dominio.com",value:E.email,onChange:Q=>S(te=>({...te,email:Q.target.value})),type:"email"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),x.jsxs("select",{className:"input mt-1",value:E.role,onChange:Q=>S(te=>({...te,role:Q.target.value})),children:[x.jsx("option",{value:"barbero",children:"barbero"}),x.jsx("option",{value:"admin",children:"admin"})]})]})]}),!E.id&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Contraseña temporal"}),x.jsx("input",{className:"input mt-1",placeholder:"Mínimo 6 caracteres",type:"password",value:E.password,onChange:Q=>S(te=>({...te,password:Q.target.value})),required:!0,minLength:6})]}),M&&x.jsx("p",{className:"text-xs text-red-500",children:M}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),x.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>_(!1),children:"Cancelar"})]})]}),x.jsxs("div",{className:"overflow-x-auto",children:[x.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre completo"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"DNI"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),x.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),x.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),x.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:R.map(Q=>x.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[x.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre completo",children:Q.displayName||nl(Q.firstName,Q.lastName)||"-"}),x.jsx("td",{className:"py-3 pr-3","data-label":"DNI",children:Q.dni||"-"}),x.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:Q.email||"-"}),x.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:Q.role}),x.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:x.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[x.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:Q.role,onChange:te=>X(Q.id,te.target.value),children:[x.jsx("option",{value:"barbero",children:"barbero"}),x.jsx("option",{value:"admin",children:"admin"})]}),x.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Y(Q),children:"Editar"}),x.jsx("button",{className:"w-full sm:w-auto rounded-full px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:()=>void re(Q.id),disabled:Q.role==="admin",children:"Eliminar"})]})})]},Q.id))})]}),!R.length&&x.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),x.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Las cuentas creadas desde este panel generan usuario en Firebase Auth y perfil en Firestore automáticamente."})]})}function Mf({children:n}){const{role:e,logout:t,user:i,profileName:o}=Xo(),a=e?e.charAt(0).toUpperCase()+e.slice(1):null,u=o||i?.displayName||i?.email||a||"Perfil",d=Wl(),[p,y]=H.useState(!1),_="/barberia/images/logo.png",E=({isActive:R})=>`nav-pill${R?" active":""}`,S=e==="admin"?"/admin/usuarios":"/clientes",M=async()=>{await t(),d("/login"),y(!1)},N=()=>y(!1),F=()=>y(R=>!R);return x.jsxs("div",{className:"app-shell",children:[x.jsx("nav",{className:"navbar",children:x.jsxs("div",{className:"inner",children:[x.jsxs("div",{className:"navbar-heading",children:[x.jsxs(Em,{to:S,className:"brand",onClick:N,children:[x.jsx("img",{src:_,alt:"Logotipo Look Fusion",className:"brand-logo"}),x.jsx("span",{className:"brand-wordmark",children:"LOOK FUSION"})]}),x.jsxs("button",{type:"button",className:"navbar-toggle",onClick:F,"aria-expanded":p,"aria-controls":"primary-nav",children:[x.jsx("span",{className:"sr-only",children:"Abrir menu"}),x.jsx("span",{className:"line"}),x.jsx("span",{className:"line"}),x.jsx("span",{className:"line"})]})]}),x.jsxs("div",{id:"primary-nav",className:`nav-links${p?" open":""}`,children:[x.jsx(wv,{to:"/clientes",className:E,onClick:N,children:"Clientes"}),e==="admin"&&x.jsx(wv,{to:"/admin/usuarios",className:E,onClick:N,children:"Dashboard"}),i&&x.jsx("span",{className:"nav-pill",children:u}),i&&x.jsx("button",{type:"button",className:"nav-pill",onClick:M,children:"Salir"})]})]})}),x.jsx("main",{className:"page-container",children:n})]})}function Gb(){return x.jsx(tx,{children:x.jsx(Zx,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:x.jsxs(Wx,{children:[x.jsx(Po,{path:"/",element:x.jsx(hp,{to:"/clientes",replace:!0})}),x.jsx(Po,{path:"/login",element:x.jsx(qb,{})}),x.jsx(Po,{path:"/clientes",element:x.jsx(Nf,{children:x.jsx(Mf,{children:x.jsx(l1,{})})})}),x.jsx(Po,{path:"/clientes/:id",element:x.jsx(Nf,{children:x.jsx(Mf,{children:x.jsx($b,{})})})}),x.jsx(Po,{path:"/admin/usuarios",element:x.jsx(Nf,{allowedRoles:["admin"],children:x.jsx(Mf,{children:x.jsx(Kb,{})})})})]})})})}hI.createRoot(document.getElementById("root")).render(x.jsx(qv.StrictMode,{children:x.jsx(Gb,{})}));
