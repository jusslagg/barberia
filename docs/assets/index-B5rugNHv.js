function MT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function k_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nf={exports:{}},Ja={},rf={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function FT(){if(Iy)return Ne;Iy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function A(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,F={};function N(U,K,me){this.props=U,this.context=K,this.refs=F,this.updater=me||M}N.prototype.isReactComponent={},N.prototype.setState=function(U,K){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,K,"setState")},N.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function Y(){}Y.prototype=N.prototype;function H(U,K,me){this.props=U,this.context=K,this.refs=F,this.updater=me||M}var X=H.prototype=new Y;X.constructor=H,x(X,N.prototype),X.isPureReactComponent=!0;var ie=Array.isArray,G=Object.prototype.hasOwnProperty,ne={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(U,K,me){var Se,Pe={},Ve=null,$e=null;if(K!=null)for(Se in K.ref!==void 0&&($e=K.ref),K.key!==void 0&&(Ve=""+K.key),K)G.call(K,Se)&&!P.hasOwnProperty(Se)&&(Pe[Se]=K[Se]);var qe=arguments.length-2;if(qe===1)Pe.children=me;else if(1<qe){for(var Qe=Array(qe),It=0;It<qe;It++)Qe[It]=arguments[It+2];Pe.children=Qe}if(U&&U.defaultProps)for(Se in qe=U.defaultProps,qe)Pe[Se]===void 0&&(Pe[Se]=qe[Se]);return{$$typeof:n,type:U,key:Ve,ref:$e,props:Pe,_owner:ne.current}}function S(U,K){return{$$typeof:n,type:U.type,key:K,ref:U.ref,props:U.props,_owner:U._owner}}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function D(U){var K={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(me){return K[me]})}var O=/\/+/g;function R(U,K){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):K.toString(36)}function ke(U,K,me,Se,Pe){var Ve=typeof U;(Ve==="undefined"||Ve==="boolean")&&(U=null);var $e=!1;if(U===null)$e=!0;else switch(Ve){case"string":case"number":$e=!0;break;case"object":switch(U.$$typeof){case n:case e:$e=!0}}if($e)return $e=U,Pe=Pe($e),U=Se===""?"."+R($e,0):Se,ie(Pe)?(me="",U!=null&&(me=U.replace(O,"$&/")+"/"),ke(Pe,K,me,"",function(It){return It})):Pe!=null&&(k(Pe)&&(Pe=S(Pe,me+(!Pe.key||$e&&$e.key===Pe.key?"":(""+Pe.key).replace(O,"$&/")+"/")+U)),K.push(Pe)),1;if($e=0,Se=Se===""?".":Se+":",ie(U))for(var qe=0;qe<U.length;qe++){Ve=U[qe];var Qe=Se+R(Ve,qe);$e+=ke(Ve,K,me,Qe,Pe)}else if(Qe=A(U),typeof Qe=="function")for(U=Qe.call(U),qe=0;!(Ve=U.next()).done;)Ve=Ve.value,Qe=Se+R(Ve,qe++),$e+=ke(Ve,K,me,Qe,Pe);else if(Ve==="object")throw K=String(U),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return $e}function Ge(U,K,me){if(U==null)return U;var Se=[],Pe=0;return ke(U,Se,"","",function(Ve){return K.call(me,Ve,Pe++)}),Se}function Oe(U){if(U._status===-1){var K=U._result;K=K(),K.then(function(me){(U._status===0||U._status===-1)&&(U._status=1,U._result=me)},function(me){(U._status===0||U._status===-1)&&(U._status=2,U._result=me)}),U._status===-1&&(U._status=0,U._result=K)}if(U._status===1)return U._result.default;throw U._result}var Ue={current:null},oe={transition:null},ye={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ne};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Ge,forEach:function(U,K,me){Ge(U,function(){K.apply(this,arguments)},me)},count:function(U){var K=0;return Ge(U,function(){K++}),K},toArray:function(U){return Ge(U,function(K){return K})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ne.Component=N,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=H,Ne.StrictMode=i,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Ne.act=le,Ne.cloneElement=function(U,K,me){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Se=x({},U.props),Pe=U.key,Ve=U.ref,$e=U._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,$e=ne.current),K.key!==void 0&&(Pe=""+K.key),U.type&&U.type.defaultProps)var qe=U.type.defaultProps;for(Qe in K)G.call(K,Qe)&&!P.hasOwnProperty(Qe)&&(Se[Qe]=K[Qe]===void 0&&qe!==void 0?qe[Qe]:K[Qe])}var Qe=arguments.length-2;if(Qe===1)Se.children=me;else if(1<Qe){qe=Array(Qe);for(var It=0;It<Qe;It++)qe[It]=arguments[It+2];Se.children=qe}return{$$typeof:n,type:U.type,key:Pe,ref:Ve,props:Se,_owner:$e}},Ne.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Ne.createElement=I,Ne.createFactory=function(U){var K=I.bind(null,U);return K.type=U,K},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(U){return{$$typeof:d,render:U}},Ne.isValidElement=k,Ne.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:Oe}},Ne.memo=function(U,K){return{$$typeof:y,type:U,compare:K===void 0?null:K}},Ne.startTransition=function(U){var K=oe.transition;oe.transition={};try{U()}finally{oe.transition=K}},Ne.unstable_act=le,Ne.useCallback=function(U,K){return Ue.current.useCallback(U,K)},Ne.useContext=function(U){return Ue.current.useContext(U)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(U){return Ue.current.useDeferredValue(U)},Ne.useEffect=function(U,K){return Ue.current.useEffect(U,K)},Ne.useId=function(){return Ue.current.useId()},Ne.useImperativeHandle=function(U,K,me){return Ue.current.useImperativeHandle(U,K,me)},Ne.useInsertionEffect=function(U,K){return Ue.current.useInsertionEffect(U,K)},Ne.useLayoutEffect=function(U,K){return Ue.current.useLayoutEffect(U,K)},Ne.useMemo=function(U,K){return Ue.current.useMemo(U,K)},Ne.useReducer=function(U,K,me){return Ue.current.useReducer(U,K,me)},Ne.useRef=function(U){return Ue.current.useRef(U)},Ne.useState=function(U){return Ue.current.useState(U)},Ne.useSyncExternalStore=function(U,K,me){return Ue.current.useSyncExternalStore(U,K,me)},Ne.useTransition=function(){return Ue.current.useTransition()},Ne.version="18.3.1",Ne}var Sy;function up(){return Sy||(Sy=1,rf.exports=FT()),rf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function UT(){if(Ay)return Ja;Ay=1;var n=up(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,y){var _,E={},A=null,M=null;y!==void 0&&(A=""+y),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(M=p.ref);for(_ in p)i.call(p,_)&&!a.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:A,ref:M,props:E,_owner:o.current}}return Ja.Fragment=t,Ja.jsx=u,Ja.jsxs=u,Ja}var Ry;function jT(){return Ry||(Ry=1,nf.exports=UT()),nf.exports}var b=jT(),Q=up();const N_=k_(Q),BT=MT({__proto__:null,default:N_},[Q]);var uc={},sf={exports:{}},sn={},of={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function zT(){return Cy||(Cy=1,(function(n){function e(oe,ye){var le=oe.length;oe.push(ye);e:for(;0<le;){var U=le-1>>>1,K=oe[U];if(0<o(K,ye))oe[U]=ye,oe[le]=K,le=U;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ye=oe[0],le=oe.pop();if(le!==ye){oe[0]=le;e:for(var U=0,K=oe.length,me=K>>>1;U<me;){var Se=2*(U+1)-1,Pe=oe[Se],Ve=Se+1,$e=oe[Ve];if(0>o(Pe,le))Ve<K&&0>o($e,Pe)?(oe[U]=$e,oe[Ve]=le,U=Ve):(oe[U]=Pe,oe[Se]=le,U=Se);else if(Ve<K&&0>o($e,le))oe[U]=$e,oe[Ve]=le,U=Ve;else break e}}return ye}function o(oe,ye){var le=oe.sortIndex-ye.sortIndex;return le!==0?le:oe.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],y=[],_=1,E=null,A=3,M=!1,x=!1,F=!1,N=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(oe){for(var ye=t(y);ye!==null;){if(ye.callback===null)i(y);else if(ye.startTime<=oe)i(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(y)}}function ie(oe){if(F=!1,X(oe),!x)if(t(p)!==null)x=!0,Oe(G);else{var ye=t(y);ye!==null&&Ue(ie,ye.startTime-oe)}}function G(oe,ye){x=!1,F&&(F=!1,Y(I),I=-1),M=!0;var le=A;try{for(X(ye),E=t(p);E!==null&&(!(E.expirationTime>ye)||oe&&!D());){var U=E.callback;if(typeof U=="function"){E.callback=null,A=E.priorityLevel;var K=U(E.expirationTime<=ye);ye=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(p)&&i(p),X(ye)}else i(p);E=t(p)}if(E!==null)var me=!0;else{var Se=t(y);Se!==null&&Ue(ie,Se.startTime-ye),me=!1}return me}finally{E=null,A=le,M=!1}}var ne=!1,P=null,I=-1,S=5,k=-1;function D(){return!(n.unstable_now()-k<S)}function O(){if(P!==null){var oe=n.unstable_now();k=oe;var ye=!0;try{ye=P(!0,oe)}finally{ye?R():(ne=!1,P=null)}}else ne=!1}var R;if(typeof H=="function")R=function(){H(O)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ge=ke.port2;ke.port1.onmessage=O,R=function(){Ge.postMessage(null)}}else R=function(){N(O,0)};function Oe(oe){P=oe,ne||(ne=!0,R())}function Ue(oe,ye){I=N(function(){oe(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){x||M||(x=!0,Oe(G))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(A){case 1:case 2:case 3:var ye=3;break;default:ye=A}var le=A;A=ye;try{return oe()}finally{A=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ye){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var le=A;A=oe;try{return ye()}finally{A=le}},n.unstable_scheduleCallback=function(oe,ye,le){var U=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,oe){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=le+K,oe={id:_++,callback:ye,priorityLevel:oe,startTime:le,expirationTime:K,sortIndex:-1},le>U?(oe.sortIndex=le,e(y,oe),t(p)===null&&oe===t(y)&&(F?(Y(I),I=-1):F=!0,Ue(ie,le-U))):(oe.sortIndex=K,e(p,oe),x||M||(x=!0,Oe(G))),oe},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(oe){var ye=A;return function(){var le=A;A=ye;try{return oe.apply(this,arguments)}finally{A=le}}}})(af)),af}var Py;function $T(){return Py||(Py=1,of.exports=zT()),of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function qT(){if(ky)return sn;ky=1;var n=up(),e=$T();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function A(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function M(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,l,h){if(s===null||typeof s>"u"||M(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(r,s,l,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){N[r]=new F(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];N[s]=new F(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){N[r]=new F(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){N[r]=new F(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){N[r]=new F(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){N[r]=new F(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){N[r]=new F(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){N[r]=new F(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){N[r]=new F(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function H(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Y,H);N[s]=new F(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Y,H);N[s]=new F(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Y,H);N[s]=new F(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){N[r]=new F(r,1,!1,r.toLowerCase(),null,!1,!1)}),N.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){N[r]=new F(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,l,h){var f=N.hasOwnProperty(s)?N[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,f,h)&&(l=null),h||f===null?A(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var ie=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ne=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var le=Object.assign,U;function K(r){if(U===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);U=s&&s[1]||""}return`
`+U+r}var me=!1;function Se(r,s){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var L=`
`+f[w].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=w&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?K(r):""}function Pe(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case ne:return"Portal";case S:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case ke:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case k:return(r._context.displayName||"Context")+".Provider";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ge:return s=r.displayName||null,s!==null?s:Ve(r.type)||"Memo";case Oe:s=r._payload,r=r._init;try{return Ve(r(s))}catch{}}return null}function $e(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function qe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function It(r){var s=Qe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function gr(r){r._valueTracker||(r._valueTracker=It(r))}function Ns(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Qe(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Gr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ji(r,s){var l=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function xs(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=qe(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function na(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ra(r,s){na(r,s);var l=qe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?bs(r,s.type,l):s.hasOwnProperty("defaultValue")&&bs(r,s.type,qe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Gl(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function bs(r,s,l){(s!=="number"||Gr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var yr=Array.isArray;function vr(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+qe(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ia(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Os(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(yr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:qe(l)}}function Ds(r,s){var l=qe(s.value),h=qe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function sa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function yt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?yt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var _r,oa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(_r=_r||document.createElement("div"),_r.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=_r.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Qr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zi=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(r){zi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Bi[s]=Bi[r]})});function aa(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Bi.hasOwnProperty(r)&&Bi[r]?(""+s).trim():s+"px"}function la(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=aa(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ua=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ca(r,s){if(s){if(ua[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ha(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Ls(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vs=null,_n=null,Jn=null;function Ms(r){if(r=La(r)){if(typeof Vs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Su(s),Vs(r.stateNode,r.type,s))}}function Yn(r){_n?Jn?Jn.push(r):Jn=[r]:_n=r}function da(){if(_n){var r=_n,s=Jn;if(Jn=_n=null,Ms(r),s)for(r=0;r<s.length;r++)Ms(s[r])}}function qi(r,s){return r(s)}function fa(){}var wr=!1;function pa(r,s,l){if(wr)return r(s,l);wr=!0;try{return qi(r,s,l)}finally{wr=!1,(_n!==null||Jn!==null)&&(fa(),da())}}function lt(r,s){var l=r.stateNode;if(l===null)return null;var h=Su(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Fs=!1;if(d)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Fs=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Fs=!1}function Wi(r,s,l,h,f,g,w,C,L){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(ee){this.onError(ee)}}var Hi=!1,Us=null,xn=!1,ma=null,Nh={onError:function(r){Hi=!0,Us=r}};function js(r,s,l,h,f,g,w,C,L){Hi=!1,Us=null,Wi.apply(Nh,arguments)}function Ql(r,s,l,h,f,g,w,C,L){if(js.apply(this,arguments),Hi){if(Hi){var $=Us;Hi=!1,Us=null}else throw Error(t(198));xn||(xn=!0,ma=$)}}function bn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Ki(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function On(r){if(bn(r)!==r)throw Error(t(188))}function Jl(r){var s=r.alternate;if(!s){if(s=bn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return On(f),r;if(g===h)return On(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var w=!1,C=f.child;C;){if(C===l){w=!0,l=f,h=g;break}if(C===h){w=!0,h=f,l=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===l){w=!0,l=g,h=f;break}if(C===h){w=!0,h=g,l=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ga(r){return r=Jl(r),r!==null?Bs(r):null}function Bs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Bs(r);if(s!==null)return s;r=r.sibling}return null}var zs=e.unstable_scheduleCallback,ya=e.unstable_cancelCallback,Yl=e.unstable_shouldYield,xh=e.unstable_requestPaint,Je=e.unstable_now,Xl=e.unstable_getCurrentPriorityLevel,Gi=e.unstable_ImmediatePriority,Jr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,va=e.unstable_LowPriority,Zl=e.unstable_IdlePriority,Qi=null,cn=null;function eu(r){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Qi,r,void 0,(r.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:nu,_a=Math.log,tu=Math.LN2;function nu(r){return r>>>=0,r===0?32:31-(_a(r)/tu|0)|0}var $s=64,qs=4194304;function Yr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ji(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=l&268435455;if(w!==0){var C=w&~f;C!==0?h=Yr(C):(g&=w,g!==0&&(h=Yr(g)))}else w=l&~f,w!==0?h=Yr(w):g!==0&&(h=Yr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Ht(s),f=1<<l,h|=r[l],s&=~f;return h}function bh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Ht(g),C=1<<w,L=f[w];L===-1?((C&l)===0||(C&h)!==0)&&(f[w]=bh(C,s)):L<=s&&(r.expiredLanes|=C),g&=~C}}function hn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Yi(){var r=$s;return $s<<=1,($s&4194240)===0&&($s=64),r}function Xr(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Zr(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ht(s),r[s]=l}function Ke(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Ht(l),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~g}}function ei(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Ht(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var De=0;function ti(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ru,Ws,iu,su,ou,wa=!1,Xn=[],kt=null,Dn=null,Ln=null,ni=new Map,En=new Map,Zn=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(r,s){switch(r){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":ni.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(s.pointerId)}}function Yt(r,s,l,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=La(s),s!==null&&Ws(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Dh(r,s,l,h,f){switch(s){case"focusin":return kt=Yt(kt,r,s,l,h,f),!0;case"dragenter":return Dn=Yt(Dn,r,s,l,h,f),!0;case"mouseover":return Ln=Yt(Ln,r,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return ni.set(g,Yt(ni.get(g)||null,r,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,En.set(g,Yt(En.get(g)||null,r,s,l,h,f)),!0}return!1}function lu(r){var s=ns(r.target);if(s!==null){var l=bn(s);if(l!==null){if(s=l.tag,s===13){if(s=Ki(l),s!==null){r.blockedOn=s,ou(r.priority,function(){iu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Tr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Hs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);$i=h,l.target.dispatchEvent(h),$i=null}else return s=La(l),s!==null&&Ws(s),r.blockedOn=l,!1;s.shift()}return!0}function Xi(r,s,l){Tr(r)&&l.delete(s)}function uu(){wa=!1,kt!==null&&Tr(kt)&&(kt=null),Dn!==null&&Tr(Dn)&&(Dn=null),Ln!==null&&Tr(Ln)&&(Ln=null),ni.forEach(Xi),En.forEach(Xi)}function Vn(r,s){r.blockedOn===s&&(r.blockedOn=null,wa||(wa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uu)))}function Mn(r){function s(f){return Vn(f,r)}if(0<Xn.length){Vn(Xn[0],r);for(var l=1;l<Xn.length;l++){var h=Xn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(kt!==null&&Vn(kt,r),Dn!==null&&Vn(Dn,r),Ln!==null&&Vn(Ln,r),ni.forEach(s),En.forEach(s),l=0;l<Zn.length;l++)h=Zn[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Zn.length&&(l=Zn[0],l.blockedOn===null);)lu(l),l.blockedOn===null&&Zn.shift()}var Ir=ie.ReactCurrentBatchConfig,ri=!0;function tt(r,s,l,h){var f=De,g=Ir.transition;Ir.transition=null;try{De=1,Ea(r,s,l,h)}finally{De=f,Ir.transition=g}}function Lh(r,s,l,h){var f=De,g=Ir.transition;Ir.transition=null;try{De=4,Ea(r,s,l,h)}finally{De=f,Ir.transition=g}}function Ea(r,s,l,h){if(ri){var f=Hs(r,s,l,h);if(f===null)Hh(r,s,h,Zi,l),au(r,h);else if(Dh(f,r,s,l,h))h.stopPropagation();else if(au(r,h),s&4&&-1<Oh.indexOf(r)){for(;f!==null;){var g=La(f);if(g!==null&&ru(g),g=Hs(r,s,l,h),g===null&&Hh(r,s,h,Zi,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else Hh(r,s,h,null,l)}}var Zi=null;function Hs(r,s,l,h){if(Zi=null,r=Ls(h),r=ns(r),r!==null)if(s=bn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Ki(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Zi=r,null}function Ta(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xl()){case Gi:return 1;case Jr:return 4;case wn:case va:return 16;case Zl:return 536870912;default:return 16}default:return 16}}var dn=null,Ks=null,Xt=null;function Ia(){if(Xt)return Xt;var r,s=Ks,l=s.length,h,f="value"in dn?dn.value:dn.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(h=1;h<=w&&s[l-h]===f[g-h];h++);return Xt=f.slice(r,1<h?1-h:void 0)}function Gs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function er(){return!0}function Sa(){return!1}function Nt(r){function s(l,h,f,g,w){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?er:Sa,this.isPropagationStopped=Sa,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),s}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Nt(Fn),tr=le({},Fn,{view:0,detail:0}),Vh=Nt(tr),Js,Sr,ii,es=le({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(Js=r.screenX-ii.screenX,Sr=r.screenY-ii.screenY):Sr=Js=0,ii=r),Js)},movementY:function(r){return"movementY"in r?r.movementY:Sr}}),Ys=Nt(es),Aa=le({},es,{dataTransfer:0}),cu=Nt(Aa),Xs=le({},tr,{relatedTarget:0}),Zs=Nt(Xs),hu=le({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=Nt(hu),du=le({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fu=Nt(du),pu=le({},Fn,{data:0}),Ra=Nt(pu),eo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=mu[r])?!!s[r]:!1}function nr(){return gu}var c=le({},tr,{key:function(r){if(r.key){var s=eo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Gs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nr,charCode:function(r){return r.type==="keypress"?Gs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Gs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Nt(c),v=le({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(v),j=le({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nr}),W=Nt(j),ae=le({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Nt(ae),_t=le({},es,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Nt(_t),St=[9,13,27,32],dt=d&&"CompositionEvent"in window,Tn=null;d&&"documentMode"in document&&(Tn=document.documentMode);var fn=d&&"TextEvent"in window&&!Tn,ts=d&&(!dt||Tn&&8<Tn&&11>=Tn),to=" ",ym=!1;function vm(r,s){switch(r){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var no=!1;function D0(r,s){switch(r){case"compositionend":return _m(s);case"keypress":return s.which!==32?null:(ym=!0,to);case"textInput":return r=s.data,r===to&&ym?null:r;default:return null}}function L0(r,s){if(no)return r==="compositionend"||!dt&&vm(r,s)?(r=Ia(),Xt=Ks=dn=null,no=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ts&&s.locale!=="ko"?null:s.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!V0[r.type]:s==="textarea"}function Em(r,s,l,h){Yn(h),s=Eu(s,"onChange"),0<s.length&&(l=new Qs("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var Ca=null,Pa=null;function M0(r){Um(r,0)}function yu(r){var s=ao(r);if(Ns(s))return r}function F0(r,s){if(r==="change")return s}var Tm=!1;if(d){var Mh;if(d){var Fh="oninput"in document;if(!Fh){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),Fh=typeof Im.oninput=="function"}Mh=Fh}else Mh=!1;Tm=Mh&&(!document.documentMode||9<document.documentMode)}function Sm(){Ca&&(Ca.detachEvent("onpropertychange",Am),Pa=Ca=null)}function Am(r){if(r.propertyName==="value"&&yu(Pa)){var s=[];Em(s,Pa,r,Ls(r)),pa(M0,s)}}function U0(r,s,l){r==="focusin"?(Sm(),Ca=s,Pa=l,Ca.attachEvent("onpropertychange",Am)):r==="focusout"&&Sm()}function j0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return yu(Pa)}function B0(r,s){if(r==="click")return yu(s)}function z0(r,s){if(r==="input"||r==="change")return yu(s)}function $0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:$0;function ka(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Un(r[f],s[f]))return!1}return!0}function Rm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Cm(r,s){var l=Rm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rm(l)}}function Pm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Pm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function km(){for(var r=window,s=Gr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Gr(r.document)}return s}function Uh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function q0(r){var s=km(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Pm(l.ownerDocument.documentElement,l)){if(h!==null&&Uh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Cm(l,g);var w=Cm(l,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var W0=d&&"documentMode"in document&&11>=document.documentMode,ro=null,jh=null,Na=null,Bh=!1;function Nm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bh||ro==null||ro!==Gr(h)||(h=ro,"selectionStart"in h&&Uh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Na&&ka(Na,h)||(Na=h,h=Eu(jh,"onSelect"),0<h.length&&(s=new Qs("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=ro)))}function vu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var io={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},zh={},xm={};d&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function _u(r){if(zh[r])return zh[r];if(!io[r])return r;var s=io[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in xm)return zh[r]=s[l];return r}var bm=_u("animationend"),Om=_u("animationiteration"),Dm=_u("animationstart"),Lm=_u("transitionend"),Vm=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(r,s){Vm.set(r,s),a(s,[r])}for(var $h=0;$h<Mm.length;$h++){var qh=Mm[$h],H0=qh.toLowerCase(),K0=qh[0].toUpperCase()+qh.slice(1);si(H0,"on"+K0)}si(bm,"onAnimationEnd"),si(Om,"onAnimationIteration"),si(Dm,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(Lm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function Fm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Ql(h,s,void 0,r),r.currentTarget=null}function Um(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var C=h[w],L=C.instance,$=C.currentTarget;if(C=C.listener,L!==g&&f.isPropagationStopped())break e;Fm(f,C,$),g=L}else for(w=0;w<h.length;w++){if(C=h[w],L=C.instance,$=C.currentTarget,C=C.listener,L!==g&&f.isPropagationStopped())break e;Fm(f,C,$),g=L}}}if(xn)throw r=ma,xn=!1,ma=null,r}function Xe(r,s){var l=s[Xh];l===void 0&&(l=s[Xh]=new Set);var h=r+"__bubble";l.has(h)||(jm(s,r,2,!1),l.add(h))}function Wh(r,s,l){var h=0;s&&(h|=4),jm(l,r,h,s)}var wu="_reactListening"+Math.random().toString(36).slice(2);function ba(r){if(!r[wu]){r[wu]=!0,i.forEach(function(l){l!=="selectionchange"&&(G0.has(l)||Wh(l,!1,r),Wh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[wu]||(s[wu]=!0,Wh("selectionchange",!1,s))}}function jm(r,s,l,h){switch(Ta(s)){case 1:var f=tt;break;case 4:f=Lh;break;default:f=Ea}l=f.bind(null,s,l,r),f=void 0,!Fs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Hh(r,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var L=w.tag;if((L===3||L===4)&&(L=w.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;w=w.return}for(;C!==null;){if(w=ns(C),w===null)return;if(L=w.tag,L===5||L===6){h=g=w;continue e}C=C.parentNode}}h=h.return}pa(function(){var $=g,ee=Ls(l),re=[];e:{var Z=Vm.get(r);if(Z!==void 0){var ue=Qs,de=r;switch(r){case"keypress":if(Gs(l)===0)break e;case"keydown":case"keyup":ue=m;break;case"focusin":de="focus",ue=Zs;break;case"focusout":de="blur",ue=Zs;break;case"beforeblur":case"afterblur":ue=Zs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=W;break;case bm:case Om:case Dm:ue=Ar;break;case Lm:ue=We;break;case"scroll":ue=Vh;break;case"wheel":ue=Me;break;case"copy":case"cut":case"paste":ue=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var fe=(s&4)!==0,ut=!fe&&r==="scroll",B=fe?Z!==null?Z+"Capture":null:Z;fe=[];for(var V=$,z;V!==null;){z=V;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,B!==null&&(se=lt(V,B),se!=null&&fe.push(Oa(V,se,z)))),ut)break;V=V.return}0<fe.length&&(Z=new ue(Z,de,null,l,ee),re.push({event:Z,listeners:fe}))}}if((s&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",Z&&l!==$i&&(de=l.relatedTarget||l.fromElement)&&(ns(de)||de[Rr]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(de=l.relatedTarget||l.toElement,ue=$,de=de?ns(de):null,de!==null&&(ut=bn(de),de!==ut||de.tag!==5&&de.tag!==6)&&(de=null)):(ue=null,de=$),ue!==de)){if(fe=Ys,se="onMouseLeave",B="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(fe=T,se="onPointerLeave",B="onPointerEnter",V="pointer"),ut=ue==null?Z:ao(ue),z=de==null?Z:ao(de),Z=new fe(se,V+"leave",ue,l,ee),Z.target=ut,Z.relatedTarget=z,se=null,ns(ee)===$&&(fe=new fe(B,V+"enter",de,l,ee),fe.target=z,fe.relatedTarget=ut,se=fe),ut=se,ue&&de)t:{for(fe=ue,B=de,V=0,z=fe;z;z=so(z))V++;for(z=0,se=B;se;se=so(se))z++;for(;0<V-z;)fe=so(fe),V--;for(;0<z-V;)B=so(B),z--;for(;V--;){if(fe===B||B!==null&&fe===B.alternate)break t;fe=so(fe),B=so(B)}fe=null}else fe=null;ue!==null&&Bm(re,Z,ue,fe,!1),de!==null&&ut!==null&&Bm(re,ut,de,fe,!0)}}e:{if(Z=$?ao($):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ge=F0;else if(wm(Z))if(Tm)ge=z0;else{ge=j0;var _e=U0}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ge=B0);if(ge&&(ge=ge(r,$))){Em(re,ge,l,ee);break e}_e&&_e(r,Z,$),r==="focusout"&&(_e=Z._wrapperState)&&_e.controlled&&Z.type==="number"&&bs(Z,"number",Z.value)}switch(_e=$?ao($):window,r){case"focusin":(wm(_e)||_e.contentEditable==="true")&&(ro=_e,jh=$,Na=null);break;case"focusout":Na=jh=ro=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,Nm(re,l,ee);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Nm(re,l,ee)}var we;if(dt)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else no?vm(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(ts&&l.locale!=="ko"&&(no||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&no&&(we=Ia()):(dn=ee,Ks="value"in dn?dn.value:dn.textContent,no=!0)),_e=Eu($,Te),0<_e.length&&(Te=new Ra(Te,r,null,l,ee),re.push({event:Te,listeners:_e}),we?Te.data=we:(we=_m(l),we!==null&&(Te.data=we)))),(we=fn?D0(r,l):L0(r,l))&&($=Eu($,"onBeforeInput"),0<$.length&&(ee=new Ra("onBeforeInput","beforeinput",null,l,ee),re.push({event:ee,listeners:$}),ee.data=we))}Um(re,s)})}function Oa(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Eu(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=lt(r,l),g!=null&&h.unshift(Oa(r,g,f)),g=lt(r,s),g!=null&&h.push(Oa(r,g,f))),r=r.return}return h}function so(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Bm(r,s,l,h,f){for(var g=s._reactName,w=[];l!==null&&l!==h;){var C=l,L=C.alternate,$=C.stateNode;if(L!==null&&L===h)break;C.tag===5&&$!==null&&(C=$,f?(L=lt(l,g),L!=null&&w.unshift(Oa(l,L,C))):f||(L=lt(l,g),L!=null&&w.push(Oa(l,L,C)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var Q0=/\r\n?/g,J0=/\u0000|\uFFFD/g;function zm(r){return(typeof r=="string"?r:""+r).replace(Q0,`
`).replace(J0,"")}function Tu(r,s,l){if(s=zm(s),zm(r)!==s&&l)throw Error(t(425))}function Iu(){}var Kh=null,Gh=null;function Qh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,$m=typeof Promise=="function"?Promise:void 0,X0=typeof queueMicrotask=="function"?queueMicrotask:typeof $m<"u"?function(r){return $m.resolve(null).then(r).catch(Z0)}:Jh;function Z0(r){setTimeout(function(){throw r})}function Yh(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Mn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Mn(s)}function oi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function qm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var oo=Math.random().toString(36).slice(2),rr="__reactFiber$"+oo,Da="__reactProps$"+oo,Rr="__reactContainer$"+oo,Xh="__reactEvents$"+oo,eT="__reactListeners$"+oo,tT="__reactHandles$"+oo;function ns(r){var s=r[rr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Rr]||l[rr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=qm(r);r!==null;){if(l=r[rr])return l;r=qm(r)}return s}r=l,l=r.parentNode}return null}function La(r){return r=r[rr]||r[Rr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ao(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Su(r){return r[Da]||null}var Zh=[],lo=-1;function ai(r){return{current:r}}function Ze(r){0>lo||(r.current=Zh[lo],Zh[lo]=null,lo--)}function Ye(r,s){lo++,Zh[lo]=r.current,r.current=s}var li={},Mt=ai(li),Zt=ai(!1),rs=li;function uo(r,s){var l=r.type.contextTypes;if(!l)return li;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function Au(){Ze(Zt),Ze(Mt)}function Wm(r,s,l){if(Mt.current!==li)throw Error(t(168));Ye(Mt,s),Ye(Zt,l)}function Hm(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,$e(r)||"Unknown",f));return le({},l,h)}function Ru(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||li,rs=Mt.current,Ye(Mt,r),Ye(Zt,Zt.current),!0}function Km(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=Hm(r,s,rs),h.__reactInternalMemoizedMergedChildContext=r,Ze(Zt),Ze(Mt),Ye(Mt,r)):Ze(Zt),Ye(Zt,l)}var Cr=null,Cu=!1,ed=!1;function Gm(r){Cr===null?Cr=[r]:Cr.push(r)}function nT(r){Cu=!0,Gm(r)}function ui(){if(!ed&&Cr!==null){ed=!0;var r=0,s=De;try{var l=Cr;for(De=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Cr=null,Cu=!1}catch(f){throw Cr!==null&&(Cr=Cr.slice(r+1)),zs(Gi,ui),f}finally{De=s,ed=!1}}return null}var co=[],ho=0,Pu=null,ku=0,In=[],Sn=0,is=null,Pr=1,kr="";function ss(r,s){co[ho++]=ku,co[ho++]=Pu,Pu=r,ku=s}function Qm(r,s,l){In[Sn++]=Pr,In[Sn++]=kr,In[Sn++]=is,is=r;var h=Pr;r=kr;var f=32-Ht(h)-1;h&=~(1<<f),l+=1;var g=32-Ht(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Pr=1<<32-Ht(s)+f|l<<f|h,kr=g+r}else Pr=1<<g|l<<f|h,kr=r}function td(r){r.return!==null&&(ss(r,1),Qm(r,1,0))}function nd(r){for(;r===Pu;)Pu=co[--ho],co[ho]=null,ku=co[--ho],co[ho]=null;for(;r===is;)is=In[--Sn],In[Sn]=null,kr=In[--Sn],In[Sn]=null,Pr=In[--Sn],In[Sn]=null}var pn=null,mn=null,nt=!1,jn=null;function Jm(r,s){var l=Pn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Ym(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,pn=r,mn=oi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,pn=r,mn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=is!==null?{id:Pr,overflow:kr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Pn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,pn=r,mn=null,!0):!1;default:return!1}}function rd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function id(r){if(nt){var s=mn;if(s){var l=s;if(!Ym(r,s)){if(rd(r))throw Error(t(418));s=oi(l.nextSibling);var h=pn;s&&Ym(r,s)?Jm(h,l):(r.flags=r.flags&-4097|2,nt=!1,pn=r)}}else{if(rd(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,pn=r}}}function Xm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;pn=r}function Nu(r){if(r!==pn)return!1;if(!nt)return Xm(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Qh(r.type,r.memoizedProps)),s&&(s=mn)){if(rd(r))throw Zm(),Error(t(418));for(;s;)Jm(r,s),s=oi(s.nextSibling)}if(Xm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){mn=oi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}mn=null}}else mn=pn?oi(r.stateNode.nextSibling):null;return!0}function Zm(){for(var r=mn;r;)r=oi(r.nextSibling)}function fo(){mn=pn=null,nt=!1}function sd(r){jn===null?jn=[r]:jn.push(r)}var rT=ie.ReactCurrentBatchConfig;function Va(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function xu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function eg(r){var s=r._init;return s(r._payload)}function tg(r){function s(B,V){if(r){var z=B.deletions;z===null?(B.deletions=[V],B.flags|=16):z.push(V)}}function l(B,V){if(!r)return null;for(;V!==null;)s(B,V),V=V.sibling;return null}function h(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function f(B,V){return B=yi(B,V),B.index=0,B.sibling=null,B}function g(B,V,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<V?(B.flags|=2,V):z):(B.flags|=2,V)):(B.flags|=1048576,V)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function C(B,V,z,se){return V===null||V.tag!==6?(V=Jd(z,B.mode,se),V.return=B,V):(V=f(V,z),V.return=B,V)}function L(B,V,z,se){var ge=z.type;return ge===P?ee(B,V,z.props.children,se,z.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Oe&&eg(ge)===V.type)?(se=f(V,z.props),se.ref=Va(B,V,z),se.return=B,se):(se=tc(z.type,z.key,z.props,null,B.mode,se),se.ref=Va(B,V,z),se.return=B,se)}function $(B,V,z,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Yd(z,B.mode,se),V.return=B,V):(V=f(V,z.children||[]),V.return=B,V)}function ee(B,V,z,se,ge){return V===null||V.tag!==7?(V=fs(z,B.mode,se,ge),V.return=B,V):(V=f(V,z),V.return=B,V)}function re(B,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Jd(""+V,B.mode,z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case G:return z=tc(V.type,V.key,V.props,null,B.mode,z),z.ref=Va(B,null,V),z.return=B,z;case ne:return V=Yd(V,B.mode,z),V.return=B,V;case Oe:var se=V._init;return re(B,se(V._payload),z)}if(yr(V)||ye(V))return V=fs(V,B.mode,z,null),V.return=B,V;xu(B,V)}return null}function Z(B,V,z,se){var ge=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ge!==null?null:C(B,V,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case G:return z.key===ge?L(B,V,z,se):null;case ne:return z.key===ge?$(B,V,z,se):null;case Oe:return ge=z._init,Z(B,V,ge(z._payload),se)}if(yr(z)||ye(z))return ge!==null?null:ee(B,V,z,se,null);xu(B,z)}return null}function ue(B,V,z,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return B=B.get(z)||null,C(V,B,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case G:return B=B.get(se.key===null?z:se.key)||null,L(V,B,se,ge);case ne:return B=B.get(se.key===null?z:se.key)||null,$(V,B,se,ge);case Oe:var _e=se._init;return ue(B,V,z,_e(se._payload),ge)}if(yr(se)||ye(se))return B=B.get(z)||null,ee(V,B,se,ge,null);xu(V,se)}return null}function de(B,V,z,se){for(var ge=null,_e=null,we=V,Te=V=0,Ct=null;we!==null&&Te<z.length;Te++){we.index>Te?(Ct=we,we=null):Ct=we.sibling;var Be=Z(B,we,z[Te],se);if(Be===null){we===null&&(we=Ct);break}r&&we&&Be.alternate===null&&s(B,we),V=g(Be,V,Te),_e===null?ge=Be:_e.sibling=Be,_e=Be,we=Ct}if(Te===z.length)return l(B,we),nt&&ss(B,Te),ge;if(we===null){for(;Te<z.length;Te++)we=re(B,z[Te],se),we!==null&&(V=g(we,V,Te),_e===null?ge=we:_e.sibling=we,_e=we);return nt&&ss(B,Te),ge}for(we=h(B,we);Te<z.length;Te++)Ct=ue(we,B,Te,z[Te],se),Ct!==null&&(r&&Ct.alternate!==null&&we.delete(Ct.key===null?Te:Ct.key),V=g(Ct,V,Te),_e===null?ge=Ct:_e.sibling=Ct,_e=Ct);return r&&we.forEach(function(vi){return s(B,vi)}),nt&&ss(B,Te),ge}function fe(B,V,z,se){var ge=ye(z);if(typeof ge!="function")throw Error(t(150));if(z=ge.call(z),z==null)throw Error(t(151));for(var _e=ge=null,we=V,Te=V=0,Ct=null,Be=z.next();we!==null&&!Be.done;Te++,Be=z.next()){we.index>Te?(Ct=we,we=null):Ct=we.sibling;var vi=Z(B,we,Be.value,se);if(vi===null){we===null&&(we=Ct);break}r&&we&&vi.alternate===null&&s(B,we),V=g(vi,V,Te),_e===null?ge=vi:_e.sibling=vi,_e=vi,we=Ct}if(Be.done)return l(B,we),nt&&ss(B,Te),ge;if(we===null){for(;!Be.done;Te++,Be=z.next())Be=re(B,Be.value,se),Be!==null&&(V=g(Be,V,Te),_e===null?ge=Be:_e.sibling=Be,_e=Be);return nt&&ss(B,Te),ge}for(we=h(B,we);!Be.done;Te++,Be=z.next())Be=ue(we,B,Te,Be.value,se),Be!==null&&(r&&Be.alternate!==null&&we.delete(Be.key===null?Te:Be.key),V=g(Be,V,Te),_e===null?ge=Be:_e.sibling=Be,_e=Be);return r&&we.forEach(function(VT){return s(B,VT)}),nt&&ss(B,Te),ge}function ut(B,V,z,se){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case G:e:{for(var ge=z.key,_e=V;_e!==null;){if(_e.key===ge){if(ge=z.type,ge===P){if(_e.tag===7){l(B,_e.sibling),V=f(_e,z.props.children),V.return=B,B=V;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Oe&&eg(ge)===_e.type){l(B,_e.sibling),V=f(_e,z.props),V.ref=Va(B,_e,z),V.return=B,B=V;break e}l(B,_e);break}else s(B,_e);_e=_e.sibling}z.type===P?(V=fs(z.props.children,B.mode,se,z.key),V.return=B,B=V):(se=tc(z.type,z.key,z.props,null,B.mode,se),se.ref=Va(B,V,z),se.return=B,B=se)}return w(B);case ne:e:{for(_e=z.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){l(B,V.sibling),V=f(V,z.children||[]),V.return=B,B=V;break e}else{l(B,V);break}else s(B,V);V=V.sibling}V=Yd(z,B.mode,se),V.return=B,B=V}return w(B);case Oe:return _e=z._init,ut(B,V,_e(z._payload),se)}if(yr(z))return de(B,V,z,se);if(ye(z))return fe(B,V,z,se);xu(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(l(B,V.sibling),V=f(V,z),V.return=B,B=V):(l(B,V),V=Jd(z,B.mode,se),V.return=B,B=V),w(B)):l(B,V)}return ut}var po=tg(!0),ng=tg(!1),bu=ai(null),Ou=null,mo=null,od=null;function ad(){od=mo=Ou=null}function ld(r){var s=bu.current;Ze(bu),r._currentValue=s}function ud(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function go(r,s){Ou=r,od=mo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function An(r){var s=r._currentValue;if(od!==r)if(r={context:r,memoizedValue:s,next:null},mo===null){if(Ou===null)throw Error(t(308));mo=r,Ou.dependencies={lanes:0,firstContext:r}}else mo=mo.next=r;return s}var os=null;function cd(r){os===null?os=[r]:os.push(r)}function rg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,cd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Nr(r,h)}function Nr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var ci=!1;function hd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function xr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function hi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Nr(r,l)}return f=h.interleaved,f===null?(s.next=s,cd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Nr(r,l)}function Du(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ei(r,l)}}function sg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Lu(r,s,l,h){var f=r.updateQueue;ci=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,$=L.next;L.next=null,w===null?g=$:w.next=$,w=L;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==w&&(C===null?ee.firstBaseUpdate=$:C.next=$,ee.lastBaseUpdate=L))}if(g!==null){var re=f.baseState;w=0,ee=$=L=null,C=g;do{var Z=C.lane,ue=C.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var de=r,fe=C;switch(Z=s,ue=l,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){re=de.call(ue,re,Z);break e}re=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,Z=typeof de=="function"?de.call(ue,re,Z):de,Z==null)break e;re=le({},re,Z);break e;case 2:ci=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,Z=f.effects,Z===null?f.effects=[C]:Z.push(C))}else ue={eventTime:ue,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?($=ee=ue,L=re):ee=ee.next=ue,w|=Z;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);if(ee===null&&(L=re),f.baseState=L,f.firstBaseUpdate=$,f.lastBaseUpdate=ee,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);us|=w,r.lanes=w,r.memoizedState=re}}function og(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Ma={},ir=ai(Ma),Fa=ai(Ma),Ua=ai(Ma);function as(r){if(r===Ma)throw Error(t(174));return r}function dd(r,s){switch(Ye(Ua,s),Ye(Fa,r),Ye(ir,Ma),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}Ze(ir),Ye(ir,s)}function yo(){Ze(ir),Ze(Fa),Ze(Ua)}function ag(r){as(Ua.current);var s=as(ir.current),l=vt(s,r.type);s!==l&&(Ye(Fa,r),Ye(ir,l))}function fd(r){Fa.current===r&&(Ze(ir),Ze(Fa))}var rt=ai(0);function Vu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pd=[];function md(){for(var r=0;r<pd.length;r++)pd[r]._workInProgressVersionPrimary=null;pd.length=0}var Mu=ie.ReactCurrentDispatcher,gd=ie.ReactCurrentBatchConfig,ls=0,it=null,wt=null,At=null,Fu=!1,ja=!1,Ba=0,iT=0;function Ft(){throw Error(t(321))}function yd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Un(r[l],s[l]))return!1;return!0}function vd(r,s,l,h,f,g){if(ls=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Mu.current=r===null||r.memoizedState===null?lT:uT,r=l(h,f),ja){g=0;do{if(ja=!1,Ba=0,25<=g)throw Error(t(301));g+=1,At=wt=null,s.updateQueue=null,Mu.current=cT,r=l(h,f)}while(ja)}if(Mu.current=Bu,s=wt!==null&&wt.next!==null,ls=0,At=wt=it=null,Fu=!1,s)throw Error(t(300));return r}function _d(){var r=Ba!==0;return Ba=0,r}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=r:At=At.next=r,At}function Rn(){if(wt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var s=At===null?it.memoizedState:At.next;if(s!==null)At=s,wt=r;else{if(r===null)throw Error(t(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?it.memoizedState=At=r:At=At.next=r}return At}function za(r,s){return typeof s=="function"?s(r):s}function wd(r){var s=Rn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=wt,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var C=w=null,L=null,$=g;do{var ee=$.lane;if((ls&ee)===ee)L!==null&&(L=L.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var re={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};L===null?(C=L=re,w=h):L=L.next=re,it.lanes|=ee,us|=ee}$=$.next}while($!==null&&$!==g);L===null?w=h:L.next=C,Un(h,s.memoizedState)||(tn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=L,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,us|=g,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Ed(r){var s=Rn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Un(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function lg(){}function ug(r,s){var l=it,h=Rn(),f=s(),g=!Un(h.memoizedState,f);if(g&&(h.memoizedState=f,tn=!0),h=h.queue,Td(dg.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,$a(9,hg.bind(null,l,h,f,s),void 0,null),Rt===null)throw Error(t(349));(ls&30)!==0||cg(l,s,f)}return f}function cg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function hg(r,s,l,h){s.value=l,s.getSnapshot=h,fg(s)&&pg(r)}function dg(r,s,l){return l(function(){fg(s)&&pg(r)})}function fg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Un(r,l)}catch{return!0}}function pg(r){var s=Nr(r,1);s!==null&&qn(s,r,1,-1)}function mg(r){var s=sr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:r},s.queue=r,r=r.dispatch=aT.bind(null,it,r),[s.memoizedState,r]}function $a(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function gg(){return Rn().memoizedState}function Uu(r,s,l,h){var f=sr();it.flags|=r,f.memoizedState=$a(1|s,l,void 0,h===void 0?null:h)}function ju(r,s,l,h){var f=Rn();h=h===void 0?null:h;var g=void 0;if(wt!==null){var w=wt.memoizedState;if(g=w.destroy,h!==null&&yd(h,w.deps)){f.memoizedState=$a(s,l,g,h);return}}it.flags|=r,f.memoizedState=$a(1|s,l,g,h)}function yg(r,s){return Uu(8390656,8,r,s)}function Td(r,s){return ju(2048,8,r,s)}function vg(r,s){return ju(4,2,r,s)}function _g(r,s){return ju(4,4,r,s)}function wg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Eg(r,s,l){return l=l!=null?l.concat([r]):null,ju(4,4,wg.bind(null,s,r),l)}function Id(){}function Tg(r,s){var l=Rn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&yd(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Ig(r,s){var l=Rn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&yd(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Sg(r,s,l){return(ls&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=l):(Un(l,s)||(l=Yi(),it.lanes|=l,us|=l,r.baseState=!0),s)}function sT(r,s){var l=De;De=l!==0&&4>l?l:4,r(!0);var h=gd.transition;gd.transition={};try{r(!1),s()}finally{De=l,gd.transition=h}}function Ag(){return Rn().memoizedState}function oT(r,s,l){var h=mi(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Rg(r))Cg(s,l);else if(l=rg(r,s,l,h),l!==null){var f=Qt();qn(l,r,h,f),Pg(l,s,h)}}function aT(r,s,l){var h=mi(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Rg(r))Cg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,l);if(f.hasEagerState=!0,f.eagerState=C,Un(C,w)){var L=s.interleaved;L===null?(f.next=f,cd(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}l=rg(r,s,f,h),l!==null&&(f=Qt(),qn(l,r,h,f),Pg(l,s,h))}}function Rg(r){var s=r.alternate;return r===it||s!==null&&s===it}function Cg(r,s){ja=Fu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Pg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ei(r,l)}}var Bu={readContext:An,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},lT={readContext:An,useCallback:function(r,s){return sr().memoizedState=[r,s===void 0?null:s],r},useContext:An,useEffect:yg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Uu(4194308,4,wg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Uu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Uu(4,2,r,s)},useMemo:function(r,s){var l=sr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=sr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=oT.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=sr();return r={current:r},s.memoizedState=r},useState:mg,useDebugValue:Id,useDeferredValue:function(r){return sr().memoizedState=r},useTransition:function(){var r=mg(!1),s=r[0];return r=sT.bind(null,r[1]),sr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=it,f=sr();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Rt===null)throw Error(t(349));(ls&30)!==0||cg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,yg(dg.bind(null,h,g,r),[r]),h.flags|=2048,$a(9,hg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=sr(),s=Rt.identifierPrefix;if(nt){var l=kr,h=Pr;l=(h&~(1<<32-Ht(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Ba++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=iT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},uT={readContext:An,useCallback:Tg,useContext:An,useEffect:Td,useImperativeHandle:Eg,useInsertionEffect:vg,useLayoutEffect:_g,useMemo:Ig,useReducer:wd,useRef:gg,useState:function(){return wd(za)},useDebugValue:Id,useDeferredValue:function(r){var s=Rn();return Sg(s,wt.memoizedState,r)},useTransition:function(){var r=wd(za)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:lg,useSyncExternalStore:ug,useId:Ag,unstable_isNewReconciler:!1},cT={readContext:An,useCallback:Tg,useContext:An,useEffect:Td,useImperativeHandle:Eg,useInsertionEffect:vg,useLayoutEffect:_g,useMemo:Ig,useReducer:Ed,useRef:gg,useState:function(){return Ed(za)},useDebugValue:Id,useDeferredValue:function(r){var s=Rn();return wt===null?s.memoizedState=r:Sg(s,wt.memoizedState,r)},useTransition:function(){var r=Ed(za)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:lg,useSyncExternalStore:ug,useId:Ag,unstable_isNewReconciler:!1};function Bn(r,s){if(r&&r.defaultProps){s=le({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Sd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:le({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var zu={isMounted:function(r){return(r=r._reactInternals)?bn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Qt(),f=mi(r),g=xr(h,f);g.payload=s,l!=null&&(g.callback=l),s=hi(r,g,f),s!==null&&(qn(s,r,f,h),Du(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Qt(),f=mi(r),g=xr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=hi(r,g,f),s!==null&&(qn(s,r,f,h),Du(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Qt(),h=mi(r),f=xr(l,h);f.tag=2,s!=null&&(f.callback=s),s=hi(r,f,h),s!==null&&(qn(s,r,h,l),Du(s,r,h))}};function kg(r,s,l,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!ka(l,h)||!ka(f,g):!0}function Ng(r,s,l){var h=!1,f=li,g=s.contextType;return typeof g=="object"&&g!==null?g=An(g):(f=en(s)?rs:Mt.current,h=s.contextTypes,g=(h=h!=null)?uo(r,f):li),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=zu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function xg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&zu.enqueueReplaceState(s,s.state,null)}function Ad(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},hd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=An(g):(g=en(s)?rs:Mt.current,f.context=uo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Sd(r,s,g,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&zu.enqueueReplaceState(f,f.state,null),Lu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function vo(r,s){try{var l="",h=s;do l+=Pe(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Rd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Cd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var hT=typeof WeakMap=="function"?WeakMap:Map;function bg(r,s,l){l=xr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Qu||(Qu=!0,zd=h),Cd(r,s)},l}function Og(r,s,l){l=xr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Cd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Cd(r,s),typeof h!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function Dg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new hT;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=AT.bind(null,r,s,l),s.then(r,r))}function Lg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Vg(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=xr(-1,1),s.tag=2,hi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var dT=ie.ReactCurrentOwner,tn=!1;function Gt(r,s,l,h){s.child=r===null?ng(s,null,l,h):po(s,r.child,l,h)}function Mg(r,s,l,h,f){l=l.render;var g=s.ref;return go(s,f),h=vd(r,s,l,h,g,f),l=_d(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,br(r,s,f)):(nt&&l&&td(s),s.flags|=1,Gt(r,s,h,f),s.child)}function Fg(r,s,l,h,f){if(r===null){var g=l.type;return typeof g=="function"&&!Qd(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Ug(r,s,g,h,f)):(r=tc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:ka,l(w,h)&&r.ref===s.ref)return br(r,s,f)}return s.flags|=1,r=yi(g,h),r.ref=s.ref,r.return=s,s.child=r}function Ug(r,s,l,h,f){if(r!==null){var g=r.memoizedProps;if(ka(g,h)&&r.ref===s.ref)if(tn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,br(r,s,f)}return Pd(r,s,l,h,f)}function jg(r,s,l){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(wo,gn),gn|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ye(wo,gn),gn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Ye(wo,gn),gn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Ye(wo,gn),gn|=h;return Gt(r,s,f,l),s.child}function Bg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Pd(r,s,l,h,f){var g=en(l)?rs:Mt.current;return g=uo(s,g),go(s,f),l=vd(r,s,l,h,g,f),h=_d(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,br(r,s,f)):(nt&&h&&td(s),s.flags|=1,Gt(r,s,l,f),s.child)}function zg(r,s,l,h,f){if(en(l)){var g=!0;Ru(s)}else g=!1;if(go(s,f),s.stateNode===null)qu(r,s),Ng(s,l,h),Ad(s,l,h,f),h=!0;else if(r===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var L=w.context,$=l.contextType;typeof $=="object"&&$!==null?$=An($):($=en(l)?rs:Mt.current,$=uo(s,$));var ee=l.getDerivedStateFromProps,re=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==h||L!==$)&&xg(s,w,h,$),ci=!1;var Z=s.memoizedState;w.state=Z,Lu(s,h,w,f),L=s.memoizedState,C!==h||Z!==L||Zt.current||ci?(typeof ee=="function"&&(Sd(s,l,ee,h),L=s.memoizedState),(C=ci||kg(s,l,C,h,Z,L,$))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=L),w.props=h,w.state=L,w.context=$,h=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,ig(r,s),C=s.memoizedProps,$=s.type===s.elementType?C:Bn(s.type,C),w.props=$,re=s.pendingProps,Z=w.context,L=l.contextType,typeof L=="object"&&L!==null?L=An(L):(L=en(l)?rs:Mt.current,L=uo(s,L));var ue=l.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==re||Z!==L)&&xg(s,w,h,L),ci=!1,Z=s.memoizedState,w.state=Z,Lu(s,h,w,f);var de=s.memoizedState;C!==re||Z!==de||Zt.current||ci?(typeof ue=="function"&&(Sd(s,l,ue,h),de=s.memoizedState),($=ci||kg(s,l,$,h,Z,de,L)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,de,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,de,L)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=de),w.props=h,w.state=de,w.context=L,h=$):(typeof w.componentDidUpdate!="function"||C===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),h=!1)}return kd(r,s,l,h,g,f)}function kd(r,s,l,h,f,g){Bg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Km(s,l,!1),br(r,s,g);h=s.stateNode,dT.current=s;var C=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=po(s,r.child,null,g),s.child=po(s,null,C,g)):Gt(r,s,C,g),s.memoizedState=h.state,f&&Km(s,l,!0),s.child}function $g(r){var s=r.stateNode;s.pendingContext?Wm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Wm(r,s.context,!1),dd(r,s.containerInfo)}function qg(r,s,l,h,f){return fo(),sd(f),s.flags|=256,Gt(r,s,l,h),s.child}var Nd={dehydrated:null,treeContext:null,retryLane:0};function xd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Wg(r,s,l){var h=s.pendingProps,f=rt.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(rt,f&1),r===null)return id(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=nc(w,h,0,null),r=fs(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=xd(l),s.memoizedState=Nd,r):bd(s,w));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return fT(r,s,w,h,C,f,l);if(g){g=h.fallback,w=s.mode,f=r.child,C=f.sibling;var L={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=L,s.deletions=null):(h=yi(f,L),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=yi(C,g):(g=fs(g,w,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?xd(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~l,s.memoizedState=Nd,h}return g=r.child,r=g.sibling,h=yi(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function bd(r,s){return s=nc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function $u(r,s,l,h){return h!==null&&sd(h),po(s,r.child,null,l),r=bd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fT(r,s,l,h,f,g,w){if(l)return s.flags&256?(s.flags&=-257,h=Rd(Error(t(422))),$u(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=nc({mode:"visible",children:h.children},f,0,null),g=fs(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&po(s,r.child,null,w),s.child.memoizedState=xd(w),s.memoizedState=Nd,g);if((s.mode&1)===0)return $u(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=Rd(g,h,void 0),$u(r,s,w,h)}if(C=(w&r.childLanes)!==0,tn||C){if(h=Rt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Nr(r,f),qn(h,r,f,-1))}return Gd(),h=Rd(Error(t(421))),$u(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=RT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,mn=oi(f.nextSibling),pn=s,nt=!0,jn=null,r!==null&&(In[Sn++]=Pr,In[Sn++]=kr,In[Sn++]=is,Pr=r.id,kr=r.overflow,is=s),s=bd(s,h.children),s.flags|=4096,s)}function Hg(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),ud(r.return,s,l)}function Od(r,s,l,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function Kg(r,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Gt(r,s,h.children,l),h=rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hg(r,l,s);else if(r.tag===19)Hg(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Vu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Od(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Vu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Od(s,!0,l,null,g);break;case"together":Od(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function qu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function br(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),us|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=yi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=yi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function pT(r,s,l){switch(s.tag){case 3:$g(s),fo();break;case 5:ag(s);break;case 1:en(s.type)&&Ru(s);break;case 4:dd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ye(bu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ye(rt,rt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Wg(r,s,l):(Ye(rt,rt.current&1),r=br(r,s,l),r!==null?r.sibling:null);Ye(rt,rt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Kg(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,jg(r,s,l)}return br(r,s,l)}var Gg,Dd,Qg,Jg;Gg=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Dd=function(){},Qg=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,as(ir.current);var g=null;switch(l){case"input":f=ji(r,f),h=ji(r,h),g=[];break;case"select":f=le({},f,{value:void 0}),h=le({},h,{value:void 0}),g=[];break;case"textarea":f=ia(r,f),h=ia(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Iu)}ca(l,h);var w;l=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var C=f[$];for(w in C)C.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var L=h[$];if(C=f?.[$],h.hasOwnProperty($)&&L!==C&&(L!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||L&&L.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in L)L.hasOwnProperty(w)&&C[w]!==L[w]&&(l||(l={}),l[w]=L[w])}else l||(g||(g=[]),g.push($,l)),l=L;else $==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(g=g||[]).push($,L)):$==="children"?typeof L!="string"&&typeof L!="number"||(g=g||[]).push($,""+L):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(L!=null&&$==="onScroll"&&Xe("scroll",r),g||C===L||(g=[])):(g=g||[]).push($,L))}l&&(g=g||[]).push("style",l);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},Jg=function(r,s,l,h){l!==h&&(s.flags|=4)};function qa(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function mT(r,s,l){var h=s.pendingProps;switch(nd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return en(s.type)&&Au(),Ut(s),null;case 3:return h=s.stateNode,yo(),Ze(Zt),Ze(Mt),md(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Nu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jn!==null&&(Wd(jn),jn=null))),Dd(r,s),Ut(s),null;case 5:fd(s);var f=as(Ua.current);if(l=s.type,r!==null&&s.stateNode!=null)Qg(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=as(ir.current),Nu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[rr]=s,h[Da]=g,r=(s.mode&1)!==0,l){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<xa.length;f++)Xe(xa[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":xs(h,g),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",h);break;case"textarea":Os(h,g),Xe("invalid",h)}ca(l,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&Tu(h.textContent,C,r),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Tu(h.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Xe("scroll",h)}switch(l){case"input":gr(h),Gl(h,g,!0);break;case"textarea":gr(h),sa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Iu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=yt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(l,{is:h.is}):(r=w.createElement(l),l==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,l),r[rr]=s,r[Da]=h,Gg(r,s,!1,!1),s.stateNode=r;e:{switch(w=ha(l,h),l){case"dialog":Xe("cancel",r),Xe("close",r),f=h;break;case"iframe":case"object":case"embed":Xe("load",r),f=h;break;case"video":case"audio":for(f=0;f<xa.length;f++)Xe(xa[f],r);f=h;break;case"source":Xe("error",r),f=h;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),f=h;break;case"details":Xe("toggle",r),f=h;break;case"input":xs(r,h),f=ji(r,h),Xe("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=le({},h,{value:void 0}),Xe("invalid",r);break;case"textarea":Os(r,h),f=ia(r,h),Xe("invalid",r);break;default:f=h}ca(l,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var L=C[g];g==="style"?la(r,L):g==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&oa(r,L)):g==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&Qr(r,L):typeof L=="number"&&Qr(r,""+L):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?L!=null&&g==="onScroll"&&Xe("scroll",r):L!=null&&X(r,g,L,w))}switch(l){case"input":gr(r),Gl(r,h,!1);break;case"textarea":gr(r),sa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+qe(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?vr(r,!!h.multiple,g,!1):h.defaultValue!=null&&vr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Iu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)Jg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=as(Ua.current),as(ir.current),Nu(s)){if(h=s.stateNode,l=s.memoizedProps,h[rr]=s,(g=h.nodeValue!==l)&&(r=pn,r!==null))switch(r.tag){case 3:Tu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Tu(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[rr]=s,s.stateNode=h}return Ut(s),null;case 13:if(Ze(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&mn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Zm(),fo(),s.flags|=98560,g=!1;else if(g=Nu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[rr]=s}else fo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else jn!==null&&(Wd(jn),jn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?Et===0&&(Et=3):Gd())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return yo(),Dd(r,s),r===null&&ba(s.stateNode.containerInfo),Ut(s),null;case 10:return ld(s.type._context),Ut(s),null;case 17:return en(s.type)&&Au(),Ut(s),null;case 19:if(Ze(rt),g=s.memoizedState,g===null)return Ut(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)qa(g,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Vu(r),w!==null){for(s.flags|=128,qa(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Je()>Eo&&(s.flags|=128,h=!0,qa(g,!1),s.lanes=4194304)}else{if(!h)if(r=Vu(w),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),qa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!nt)return Ut(s),null}else 2*Je()-g.renderingStartTime>Eo&&l!==1073741824&&(s.flags|=128,h=!0,qa(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(l=g.last,l!==null?l.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,l=rt.current,Ye(rt,h?l&1|2:l&1),s):(Ut(s),null);case 22:case 23:return Kd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(gn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function gT(r,s){switch(nd(s),s.tag){case 1:return en(s.type)&&Au(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return yo(),Ze(Zt),Ze(Mt),md(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return fd(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));fo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return yo(),null;case 10:return ld(s.type._context),null;case 22:case 23:return Kd(),null;case 24:return null;default:return null}}var Wu=!1,jt=!1,yT=typeof WeakSet=="function"?WeakSet:Set,he=null;function _o(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){at(r,s,h)}else l.current=null}function Ld(r,s,l){try{l()}catch(h){at(r,s,h)}}var Yg=!1;function vT(r,s){if(Kh=ri,r=km(),Uh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,C=-1,L=-1,$=0,ee=0,re=r,Z=null;t:for(;;){for(var ue;re!==l||f!==0&&re.nodeType!==3||(C=w+f),re!==g||h!==0&&re.nodeType!==3||(L=w+h),re.nodeType===3&&(w+=re.nodeValue.length),(ue=re.firstChild)!==null;)Z=re,re=ue;for(;;){if(re===r)break t;if(Z===l&&++$===f&&(C=w),Z===g&&++ee===h&&(L=w),(ue=re.nextSibling)!==null)break;re=Z,Z=re.parentNode}re=ue}l=C===-1||L===-1?null:{start:C,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gh={focusedElem:r,selectionRange:l},ri=!1,he=s;he!==null;)if(s=he,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,he=r;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ut=de.memoizedState,B=s.stateNode,V=B.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Bn(s.type,fe),ut);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){at(s,s.return,se)}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}return de=Yg,Yg=!1,de}function Wa(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Ld(s,l,g)}f=f.next}while(f!==h)}}function Hu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Vd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function Xg(r){var s=r.alternate;s!==null&&(r.alternate=null,Xg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[rr],delete s[Da],delete s[Xh],delete s[eT],delete s[tT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zg(r){return r.tag===5||r.tag===3||r.tag===4}function ey(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Md(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Iu));else if(h!==4&&(r=r.child,r!==null))for(Md(r,s,l),r=r.sibling;r!==null;)Md(r,s,l),r=r.sibling}function Fd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Fd(r,s,l),r=r.sibling;r!==null;)Fd(r,s,l),r=r.sibling}var xt=null,zn=!1;function di(r,s,l){for(l=l.child;l!==null;)ty(r,s,l),l=l.sibling}function ty(r,s,l){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Qi,l)}catch{}switch(l.tag){case 5:jt||_o(l,s);case 6:var h=xt,f=zn;xt=null,di(r,s,l),xt=h,zn=f,xt!==null&&(zn?(r=xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):xt.removeChild(l.stateNode));break;case 18:xt!==null&&(zn?(r=xt,l=l.stateNode,r.nodeType===8?Yh(r.parentNode,l):r.nodeType===1&&Yh(r,l),Mn(r)):Yh(xt,l.stateNode));break;case 4:h=xt,f=zn,xt=l.stateNode.containerInfo,zn=!0,di(r,s,l),xt=h,zn=f;break;case 0:case 11:case 14:case 15:if(!jt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Ld(l,s,w),f=f.next}while(f!==h)}di(r,s,l);break;case 1:if(!jt&&(_o(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(C){at(l,s,C)}di(r,s,l);break;case 21:di(r,s,l);break;case 22:l.mode&1?(jt=(h=jt)||l.memoizedState!==null,di(r,s,l),jt=h):di(r,s,l);break;default:di(r,s,l)}}function ny(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new yT),s.forEach(function(h){var f=CT.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function $n(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=r,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:xt=C.stateNode,zn=!1;break e;case 3:xt=C.stateNode.containerInfo,zn=!0;break e;case 4:xt=C.stateNode.containerInfo,zn=!0;break e}C=C.return}if(xt===null)throw Error(t(160));ty(g,w,f),xt=null,zn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch($){at(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ry(s,r),s=s.sibling}function ry(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if($n(s,r),or(r),h&4){try{Wa(3,r,r.return),Hu(3,r)}catch(fe){at(r,r.return,fe)}try{Wa(5,r,r.return)}catch(fe){at(r,r.return,fe)}}break;case 1:$n(s,r),or(r),h&512&&l!==null&&_o(l,l.return);break;case 5:if($n(s,r),or(r),h&512&&l!==null&&_o(l,l.return),r.flags&32){var f=r.stateNode;try{Qr(f,"")}catch(fe){at(r,r.return,fe)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=l!==null?l.memoizedProps:g,C=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&na(f,g),ha(C,w);var $=ha(C,g);for(w=0;w<L.length;w+=2){var ee=L[w],re=L[w+1];ee==="style"?la(f,re):ee==="dangerouslySetInnerHTML"?oa(f,re):ee==="children"?Qr(f,re):X(f,ee,re,$)}switch(C){case"input":ra(f,g);break;case"textarea":Ds(f,g);break;case"select":var Z=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?vr(f,!!g.multiple,ue,!1):Z!==!!g.multiple&&(g.defaultValue!=null?vr(f,!!g.multiple,g.defaultValue,!0):vr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Da]=g}catch(fe){at(r,r.return,fe)}}break;case 6:if($n(s,r),or(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(fe){at(r,r.return,fe)}}break;case 3:if($n(s,r),or(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(fe){at(r,r.return,fe)}break;case 4:$n(s,r),or(r);break;case 13:$n(s,r),or(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Bd=Je())),h&4&&ny(r);break;case 22:if(ee=l!==null&&l.memoizedState!==null,r.mode&1?(jt=($=jt)||ee,$n(s,r),jt=$):$n(s,r),or(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!ee&&(r.mode&1)!==0)for(he=r,ee=r.child;ee!==null;){for(re=he=ee;he!==null;){switch(Z=he,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:Wa(4,Z,Z.return);break;case 1:_o(Z,Z.return);var de=Z.stateNode;if(typeof de.componentWillUnmount=="function"){h=Z,l=Z.return;try{s=h,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){at(h,l,fe)}}break;case 5:_o(Z,Z.return);break;case 22:if(Z.memoizedState!==null){oy(re);continue}}ue!==null?(ue.return=Z,he=ue):oy(re)}ee=ee.sibling}e:for(ee=null,re=r;;){if(re.tag===5){if(ee===null){ee=re;try{f=re.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=re.stateNode,L=re.memoizedProps.style,w=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=aa("display",w))}catch(fe){at(r,r.return,fe)}}}else if(re.tag===6){if(ee===null)try{re.stateNode.nodeValue=$?"":re.memoizedProps}catch(fe){at(r,r.return,fe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===r)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===r)break e;for(;re.sibling===null;){if(re.return===null||re.return===r)break e;ee===re&&(ee=null),re=re.return}ee===re&&(ee=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:$n(s,r),or(r),h&4&&ny(r);break;case 21:break;default:$n(s,r),or(r)}}function or(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Zg(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Qr(f,""),h.flags&=-33);var g=ey(r);Fd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,C=ey(r);Md(r,C,w);break;default:throw Error(t(161))}}catch(L){at(r,r.return,L)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function _T(r,s,l){he=r,iy(r)}function iy(r,s,l){for(var h=(r.mode&1)!==0;he!==null;){var f=he,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Wu;if(!w){var C=f.alternate,L=C!==null&&C.memoizedState!==null||jt;C=Wu;var $=jt;if(Wu=w,(jt=L)&&!$)for(he=f;he!==null;)w=he,L=w.child,w.tag===22&&w.memoizedState!==null?ay(f):L!==null?(L.return=w,he=L):ay(f);for(;g!==null;)he=g,iy(g),g=g.sibling;he=f,Wu=C,jt=$}sy(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,he=g):sy(r)}}function sy(r){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||Hu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Bn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&og(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}og(s,w,l)}break;case 5:var C=s.stateNode;if(l===null&&s.flags&4){l=C;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var re=ee.dehydrated;re!==null&&Mn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&Vd(s)}catch(Z){at(s,s.return,Z)}}if(s===r){he=null;break}if(l=s.sibling,l!==null){l.return=s.return,he=l;break}he=s.return}}function oy(r){for(;he!==null;){var s=he;if(s===r){he=null;break}var l=s.sibling;if(l!==null){l.return=s.return,he=l;break}he=s.return}}function ay(r){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Hu(4,s)}catch(L){at(s,l,L)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(L){at(s,f,L)}}var g=s.return;try{Vd(s)}catch(L){at(s,g,L)}break;case 5:var w=s.return;try{Vd(s)}catch(L){at(s,w,L)}}}catch(L){at(s,s.return,L)}if(s===r){he=null;break}var C=s.sibling;if(C!==null){C.return=s.return,he=C;break}he=s.return}}var wT=Math.ceil,Ku=ie.ReactCurrentDispatcher,Ud=ie.ReactCurrentOwner,Cn=ie.ReactCurrentBatchConfig,je=0,Rt=null,ft=null,bt=0,gn=0,wo=ai(0),Et=0,Ha=null,us=0,Gu=0,jd=0,Ka=null,nn=null,Bd=0,Eo=1/0,Or=null,Qu=!1,zd=null,fi=null,Ju=!1,pi=null,Yu=0,Ga=0,$d=null,Xu=-1,Zu=0;function Qt(){return(je&6)!==0?Je():Xu!==-1?Xu:Xu=Je()}function mi(r){return(r.mode&1)===0?1:(je&2)!==0&&bt!==0?bt&-bt:rT.transition!==null?(Zu===0&&(Zu=Yi()),Zu):(r=De,r!==0||(r=window.event,r=r===void 0?16:Ta(r.type)),r)}function qn(r,s,l,h){if(50<Ga)throw Ga=0,$d=null,Error(t(185));Zr(r,l,h),((je&2)===0||r!==Rt)&&(r===Rt&&((je&2)===0&&(Gu|=l),Et===4&&gi(r,bt)),rn(r,h),l===1&&je===0&&(s.mode&1)===0&&(Eo=Je()+500,Cu&&ui()))}function rn(r,s){var l=r.callbackNode;Er(r,s);var h=Ji(r,r===Rt?bt:0);if(h===0)l!==null&&ya(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&ya(l),s===1)r.tag===0?nT(uy.bind(null,r)):Gm(uy.bind(null,r)),X0(function(){(je&6)===0&&ui()}),l=null;else{switch(ti(h)){case 1:l=Gi;break;case 4:l=Jr;break;case 16:l=wn;break;case 536870912:l=Zl;break;default:l=wn}l=yy(l,ly.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function ly(r,s){if(Xu=-1,Zu=0,(je&6)!==0)throw Error(t(327));var l=r.callbackNode;if(To()&&r.callbackNode!==l)return null;var h=Ji(r,r===Rt?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=ec(r,h);else{s=h;var f=je;je|=2;var g=hy();(Rt!==r||bt!==s)&&(Or=null,Eo=Je()+500,hs(r,s));do try{IT();break}catch(C){cy(r,C)}while(!0);ad(),Ku.current=g,je=f,ft!==null?s=0:(Rt=null,bt=0,s=Et)}if(s!==0){if(s===2&&(f=hn(r),f!==0&&(h=f,s=qd(r,f))),s===1)throw l=Ha,hs(r,0),gi(r,h),rn(r,Je()),l;if(s===6)gi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!ET(f)&&(s=ec(r,h),s===2&&(g=hn(r),g!==0&&(h=g,s=qd(r,g))),s===1))throw l=Ha,hs(r,0),gi(r,h),rn(r,Je()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ds(r,nn,Or);break;case 3:if(gi(r,h),(h&130023424)===h&&(s=Bd+500-Je(),10<s)){if(Ji(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Qt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Jh(ds.bind(null,r,nn,Or),s);break}ds(r,nn,Or);break;case 4:if(gi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Ht(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*wT(h/1960))-h,10<h){r.timeoutHandle=Jh(ds.bind(null,r,nn,Or),h);break}ds(r,nn,Or);break;case 5:ds(r,nn,Or);break;default:throw Error(t(329))}}}return rn(r,Je()),r.callbackNode===l?ly.bind(null,r):null}function qd(r,s){var l=Ka;return r.current.memoizedState.isDehydrated&&(hs(r,s).flags|=256),r=ec(r,s),r!==2&&(s=nn,nn=l,s!==null&&Wd(s)),r}function Wd(r){nn===null?nn=r:nn.push.apply(nn,r)}function ET(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Un(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gi(r,s){for(s&=~jd,s&=~Gu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Ht(s),h=1<<l;r[l]=-1,s&=~h}}function uy(r){if((je&6)!==0)throw Error(t(327));To();var s=Ji(r,0);if((s&1)===0)return rn(r,Je()),null;var l=ec(r,s);if(r.tag!==0&&l===2){var h=hn(r);h!==0&&(s=h,l=qd(r,h))}if(l===1)throw l=Ha,hs(r,0),gi(r,s),rn(r,Je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ds(r,nn,Or),rn(r,Je()),null}function Hd(r,s){var l=je;je|=1;try{return r(s)}finally{je=l,je===0&&(Eo=Je()+500,Cu&&ui())}}function cs(r){pi!==null&&pi.tag===0&&(je&6)===0&&To();var s=je;je|=1;var l=Cn.transition,h=De;try{if(Cn.transition=null,De=1,r)return r()}finally{De=h,Cn.transition=l,je=s,(je&6)===0&&ui()}}function Kd(){gn=wo.current,Ze(wo)}function hs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,Y0(l)),ft!==null)for(l=ft.return;l!==null;){var h=l;switch(nd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Au();break;case 3:yo(),Ze(Zt),Ze(Mt),md();break;case 5:fd(h);break;case 4:yo();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:ld(h.type._context);break;case 22:case 23:Kd()}l=l.return}if(Rt=r,ft=r=yi(r.current,null),bt=gn=s,Et=0,Ha=null,jd=Gu=us=0,nn=Ka=null,os!==null){for(s=0;s<os.length;s++)if(l=os[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}l.pending=h}os=null}return r}function cy(r,s){do{var l=ft;try{if(ad(),Mu.current=Bu,Fu){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Fu=!1}if(ls=0,At=wt=it=null,ja=!1,Ba=0,Ud.current=null,l===null||l.return===null){Et=1,Ha=s,ft=null;break}e:{var g=r,w=l.return,C=l,L=s;if(s=bt,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=L,ee=C,re=ee.tag;if((ee.mode&1)===0&&(re===0||re===11||re===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=Lg(w);if(ue!==null){ue.flags&=-257,Vg(ue,w,C,g,s),ue.mode&1&&Dg(g,$,s),s=ue,L=$;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(L),s.updateQueue=fe}else de.add(L);break e}else{if((s&1)===0){Dg(g,$,s),Gd();break e}L=Error(t(426))}}else if(nt&&C.mode&1){var ut=Lg(w);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Vg(ut,w,C,g,s),sd(vo(L,C));break e}}g=L=vo(L,C),Et!==4&&(Et=2),Ka===null?Ka=[g]:Ka.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=bg(g,L,s);sg(g,B);break e;case 1:C=L;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(fi===null||!fi.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=Og(g,C,s);sg(g,se);break e}}g=g.return}while(g!==null)}fy(l)}catch(ge){s=ge,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function hy(){var r=Ku.current;return Ku.current=Bu,r===null?Bu:r}function Gd(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||(us&268435455)===0&&(Gu&268435455)===0||gi(Rt,bt)}function ec(r,s){var l=je;je|=2;var h=hy();(Rt!==r||bt!==s)&&(Or=null,hs(r,s));do try{TT();break}catch(f){cy(r,f)}while(!0);if(ad(),je=l,Ku.current=h,ft!==null)throw Error(t(261));return Rt=null,bt=0,Et}function TT(){for(;ft!==null;)dy(ft)}function IT(){for(;ft!==null&&!Yl();)dy(ft)}function dy(r){var s=gy(r.alternate,r,gn);r.memoizedProps=r.pendingProps,s===null?fy(r):ft=s,Ud.current=null}function fy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=mT(l,s,gn),l!==null){ft=l;return}}else{if(l=gT(l,s),l!==null){l.flags&=32767,ft=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=r}while(s!==null);Et===0&&(Et=5)}function ds(r,s,l){var h=De,f=Cn.transition;try{Cn.transition=null,De=1,ST(r,s,l,h)}finally{Cn.transition=f,De=h}return null}function ST(r,s,l,h){do To();while(pi!==null);if((je&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Ke(r,g),r===Rt&&(ft=Rt=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ju||(Ju=!0,yy(wn,function(){return To(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=Cn.transition,Cn.transition=null;var w=De;De=1;var C=je;je|=4,Ud.current=null,vT(r,l),ry(l,r),q0(Gh),ri=!!Kh,Gh=Kh=null,r.current=l,_T(l),xh(),je=C,De=w,Cn.transition=g}else r.current=l;if(Ju&&(Ju=!1,pi=r,Yu=f),g=r.pendingLanes,g===0&&(fi=null),eu(l.stateNode),rn(r,Je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Qu)throw Qu=!1,r=zd,zd=null,r;return(Yu&1)!==0&&r.tag!==0&&To(),g=r.pendingLanes,(g&1)!==0?r===$d?Ga++:(Ga=0,$d=r):Ga=0,ui(),null}function To(){if(pi!==null){var r=ti(Yu),s=Cn.transition,l=De;try{if(Cn.transition=null,De=16>r?16:r,pi===null)var h=!1;else{if(r=pi,pi=null,Yu=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,he=r.current;he!==null;){var g=he,w=g.child;if((he.flags&16)!==0){var C=g.deletions;if(C!==null){for(var L=0;L<C.length;L++){var $=C[L];for(he=$;he!==null;){var ee=he;switch(ee.tag){case 0:case 11:case 15:Wa(8,ee,g)}var re=ee.child;if(re!==null)re.return=ee,he=re;else for(;he!==null;){ee=he;var Z=ee.sibling,ue=ee.return;if(Xg(ee),ee===$){he=null;break}if(Z!==null){Z.return=ue,he=Z;break}he=ue}}}var de=g.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ut=fe.sibling;fe.sibling=null,fe=ut}while(fe!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,he=w;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Wa(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,he=B;break e}he=g.return}}var V=r.current;for(he=V;he!==null;){w=he;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,he=z;else e:for(w=V;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Hu(9,C)}}catch(ge){at(C,C.return,ge)}if(C===w){he=null;break e}var se=C.sibling;if(se!==null){se.return=C.return,he=se;break e}he=C.return}}if(je=f,ui(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Qi,r)}catch{}h=!0}return h}finally{De=l,Cn.transition=s}}return!1}function py(r,s,l){s=vo(l,s),s=bg(r,s,1),r=hi(r,s,1),s=Qt(),r!==null&&(Zr(r,1,s),rn(r,s))}function at(r,s,l){if(r.tag===3)py(r,r,l);else for(;s!==null;){if(s.tag===3){py(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(fi===null||!fi.has(h))){r=vo(l,r),r=Og(s,r,1),s=hi(s,r,1),r=Qt(),s!==null&&(Zr(s,1,r),rn(s,r));break}}s=s.return}}function AT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&l,Rt===r&&(bt&l)===l&&(Et===4||Et===3&&(bt&130023424)===bt&&500>Je()-Bd?hs(r,0):jd|=l),rn(r,s)}function my(r,s){s===0&&((r.mode&1)===0?s=1:(s=qs,qs<<=1,(qs&130023424)===0&&(qs=4194304)));var l=Qt();r=Nr(r,s),r!==null&&(Zr(r,s,l),rn(r,l))}function RT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),my(r,l)}function CT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),my(r,l)}var gy;gy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return tn=!1,pT(r,s,l);tn=(r.flags&131072)!==0}else tn=!1,nt&&(s.flags&1048576)!==0&&Qm(s,ku,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;qu(r,s),r=s.pendingProps;var f=uo(s,Mt.current);go(s,l),f=vd(null,s,h,r,f,l);var g=_d();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(h)?(g=!0,Ru(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,hd(s),f.updater=zu,s.stateNode=f,f._reactInternals=s,Ad(s,h,r,l),s=kd(null,s,h,!0,g,l)):(s.tag=0,nt&&g&&td(s),Gt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(qu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=kT(h),r=Bn(h,r),f){case 0:s=Pd(null,s,h,r,l);break e;case 1:s=zg(null,s,h,r,l);break e;case 11:s=Mg(null,s,h,r,l);break e;case 14:s=Fg(null,s,h,Bn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),Pd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),zg(r,s,h,f,l);case 3:e:{if($g(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,ig(r,s),Lu(s,h,null,l);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=vo(Error(t(423)),s),s=qg(r,s,h,l,f);break e}else if(h!==f){f=vo(Error(t(424)),s),s=qg(r,s,h,l,f);break e}else for(mn=oi(s.stateNode.containerInfo.firstChild),pn=s,nt=!0,jn=null,l=ng(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(fo(),h===f){s=br(r,s,l);break e}Gt(r,s,h,l)}s=s.child}return s;case 5:return ag(s),r===null&&id(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Qh(h,f)?w=null:g!==null&&Qh(h,g)&&(s.flags|=32),Bg(r,s),Gt(r,s,w,l),s.child;case 6:return r===null&&id(s),null;case 13:return Wg(r,s,l);case 4:return dd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=po(s,null,h,l):Gt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),Mg(r,s,h,f,l);case 7:return Gt(r,s,s.pendingProps,l),s.child;case 8:return Gt(r,s,s.pendingProps.children,l),s.child;case 12:return Gt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ye(bu,h._currentValue),h._currentValue=w,g!==null)if(Un(g.value,w)){if(g.children===f.children&&!Zt.current){s=br(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var L=C.firstContext;L!==null;){if(L.context===h){if(g.tag===1){L=xr(-1,l&-l),L.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?L.next=L:(L.next=ee.next,ee.next=L),$.pending=L}}g.lanes|=l,L=g.alternate,L!==null&&(L.lanes|=l),ud(g.return,l,s),C.lanes|=l;break}L=L.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,C=w.alternate,C!==null&&(C.lanes|=l),ud(w,l,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Gt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,go(s,l),f=An(f),h=h(f),s.flags|=1,Gt(r,s,h,l),s.child;case 14:return h=s.type,f=Bn(h,s.pendingProps),f=Bn(h.type,f),Fg(r,s,h,f,l);case 15:return Ug(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),qu(r,s),s.tag=1,en(h)?(r=!0,Ru(s)):r=!1,go(s,l),Ng(s,h,f),Ad(s,h,f,l),kd(null,s,h,!0,r,l);case 19:return Kg(r,s,l);case 22:return jg(r,s,l)}throw Error(t(156,s.tag))};function yy(r,s){return zs(r,s)}function PT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,s,l,h){return new PT(r,s,l,h)}function Qd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kT(r){if(typeof r=="function")return Qd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===O)return 11;if(r===Ge)return 14}return 2}function yi(r,s){var l=r.alternate;return l===null?(l=Pn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function tc(r,s,l,h,f,g){var w=2;if(h=r,typeof r=="function")Qd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case P:return fs(l.children,f,g,s);case I:w=8,f|=8;break;case S:return r=Pn(12,l,s,f|2),r.elementType=S,r.lanes=g,r;case R:return r=Pn(13,l,s,f),r.elementType=R,r.lanes=g,r;case ke:return r=Pn(19,l,s,f),r.elementType=ke,r.lanes=g,r;case Ue:return nc(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:w=10;break e;case D:w=9;break e;case O:w=11;break e;case Ge:w=14;break e;case Oe:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Pn(w,l,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function fs(r,s,l,h){return r=Pn(7,r,h,s),r.lanes=l,r}function nc(r,s,l,h){return r=Pn(22,r,h,s),r.elementType=Ue,r.lanes=l,r.stateNode={isHidden:!1},r}function Jd(r,s,l){return r=Pn(6,r,null,s),r.lanes=l,r}function Yd(r,s,l){return s=Pn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function NT(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xr(0),this.expirationTimes=Xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Xd(r,s,l,h,f,g,w,C,L){return r=new NT(r,s,l,C,L),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Pn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hd(g),r}function xT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function vy(r){if(!r)return li;r=r._reactInternals;e:{if(bn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(en(l))return Hm(r,l,s)}return s}function _y(r,s,l,h,f,g,w,C,L){return r=Xd(l,h,!0,r,f,g,w,C,L),r.context=vy(null),l=r.current,h=Qt(),f=mi(l),g=xr(h,f),g.callback=s??null,hi(l,g,f),r.current.lanes=f,Zr(r,f,h),rn(r,h),r}function rc(r,s,l,h){var f=s.current,g=Qt(),w=mi(f);return l=vy(l),s.context===null?s.context=l:s.pendingContext=l,s=xr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=hi(f,s,w),r!==null&&(qn(r,f,w,g),Du(r,f,w)),w}function ic(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function wy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Zd(r,s){wy(r,s),(r=r.alternate)&&wy(r,s)}function bT(){return null}var Ey=typeof reportError=="function"?reportError:function(r){console.error(r)};function ef(r){this._internalRoot=r}sc.prototype.render=ef.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));rc(r,s,null,null)},sc.prototype.unmount=ef.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;cs(function(){rc(null,r,null,null)}),s[Rr]=null}};function sc(r){this._internalRoot=r}sc.prototype.unstable_scheduleHydration=function(r){if(r){var s=su();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Zn.length&&s!==0&&s<Zn[l].priority;l++);Zn.splice(l,0,r),l===0&&lu(r)}};function tf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function oc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ty(){}function OT(r,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=ic(w);g.call($)}}var w=_y(s,h,r,0,null,!1,!1,"",Ty);return r._reactRootContainer=w,r[Rr]=w.current,ba(r.nodeType===8?r.parentNode:r),cs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var $=ic(L);C.call($)}}var L=Xd(r,0,!1,null,null,!1,!1,"",Ty);return r._reactRootContainer=L,r[Rr]=L.current,ba(r.nodeType===8?r.parentNode:r),cs(function(){rc(s,L,l,h)}),L}function ac(r,s,l,h,f){var g=l._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var L=ic(w);C.call(L)}}rc(s,w,r,f)}else w=OT(l,s,r,f,h);return ic(w)}ru=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=Yr(s.pendingLanes);l!==0&&(ei(s,l|1),rn(s,Je()),(je&6)===0&&(Eo=Je()+500,ui()))}break;case 13:cs(function(){var h=Nr(r,1);if(h!==null){var f=Qt();qn(h,r,1,f)}}),Zd(r,1)}},Ws=function(r){if(r.tag===13){var s=Nr(r,134217728);if(s!==null){var l=Qt();qn(s,r,134217728,l)}Zd(r,134217728)}},iu=function(r){if(r.tag===13){var s=mi(r),l=Nr(r,s);if(l!==null){var h=Qt();qn(l,r,s,h)}Zd(r,s)}},su=function(){return De},ou=function(r,s){var l=De;try{return De=r,s()}finally{De=l}},Vs=function(r,s,l){switch(s){case"input":if(ra(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Su(h);if(!f)throw Error(t(90));Ns(h),ra(h,f)}}}break;case"textarea":Ds(r,l);break;case"select":s=l.value,s!=null&&vr(r,!!l.multiple,s,!1)}},qi=Hd,fa=cs;var DT={usingClientEntryPoint:!1,Events:[La,ao,Su,Yn,da,Hd]},Qa={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LT={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ga(r),r===null?null:r.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||bT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Qi=lc.inject(LT),cn=lc}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DT,sn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tf(s))throw Error(t(200));return xT(r,s,null,l)},sn.createRoot=function(r,s){if(!tf(r))throw Error(t(299));var l=!1,h="",f=Ey;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Xd(r,1,!1,null,null,l,!1,h,f),r[Rr]=s.current,ba(r.nodeType===8?r.parentNode:r),new ef(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ga(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return cs(r)},sn.hydrate=function(r,s,l){if(!oc(s))throw Error(t(200));return ac(null,r,s,!0,l)},sn.hydrateRoot=function(r,s,l){if(!tf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",w=Ey;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=_y(s,null,r,1,l??null,f,!1,g,w),r[Rr]=s.current,ba(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new sc(s)},sn.render=function(r,s,l){if(!oc(s))throw Error(t(200));return ac(null,r,s,!1,l)},sn.unmountComponentAtNode=function(r){if(!oc(r))throw Error(t(40));return r._reactRootContainer?(cs(function(){ac(null,null,r,!1,function(){r._reactRootContainer=null,r[Rr]=null})}),!0):!1},sn.unstable_batchedUpdates=Hd,sn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!oc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ac(r,s,l,!1,h)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var Ny;function x_(){if(Ny)return sf.exports;Ny=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sf.exports=qT(),sf.exports}var xy;function WT(){if(xy)return uc;xy=1;var n=x_();return uc.createRoot=n.createRoot,uc.hydrateRoot=n.hydrateRoot,uc}var HT=WT();const KT=k_(HT);var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},GT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},O_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|y>>6,M=y&63;p||(M=64,u||(A=64)),i.push(t[_],t[E],t[A],t[M])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(b_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||E==null)throw new QT;const A=a<<2|d>>4;if(i.push(A),y!==64){const M=d<<4&240|y>>2;if(i.push(M),E!==64){const x=y<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JT=function(n){const e=b_(n);return O_.encodeByteArray(e,!0)},bc=function(n){return JT(n).replace(/\./g,"")},D_=function(n){try{return O_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=()=>YT().__FIREBASE_DEFAULTS__,ZT=()=>{if(typeof process>"u"||typeof by>"u")return;const n=by.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&D_(n[1]);return e&&JSON.parse(e)},th=()=>{try{return XT()||ZT()||eI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},L_=n=>{var e,t;return(t=(e=th())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tI=n=>{const e=L_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},V_=()=>{var n;return(n=th())===null||n===void 0?void 0:n.config},M_=n=>{var e;return(e=th())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bc(JSON.stringify(t)),bc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function sI(){var n;const e=(n=th())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cI(){return!sI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function dI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="FirebaseError";class qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fI,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?pI(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new qr(o,d,i)}}function pI(n,e){return n.replace(mI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const mI=/\{\$([^}]+)}/g;function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Oy(a)&&Oy(u)){if(!Oc(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Oy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function il(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yI(n,e){const t=new vI(n,e);return t.subscribe.bind(t)}class vI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");_I(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=lf),o.error===void 0&&(o.error=lf),o.complete===void 0&&(o.complete=lf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _I(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n){return n&&n._delegate?n._delegate:n}class ws{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TI(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:EI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EI(n){return n===ps?void 0:n}function TI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const SI={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},AI=Le.INFO,RI={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},CI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=RI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=AI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const PI=(n,e)=>e.some(t=>n instanceof t);let Dy,Ly;function kI(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NI(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F_=new WeakMap,xf=new WeakMap,U_=new WeakMap,uf=new WeakMap,hp=new WeakMap;function xI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ci(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&F_.set(t,n)}).catch(()=>{}),hp.set(e,n),e}function bI(n){if(xf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});xf.set(n,e)}let bf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||U_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OI(n){bf=n(bf)}function DI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cf(this),e,...t);return U_.set(i,e.sort?e.sort():[e]),Ci(i)}:NI().includes(n)?function(...e){return n.apply(cf(this),e),Ci(F_.get(this))}:function(...e){return Ci(n.apply(cf(this),e))}}function LI(n){return typeof n=="function"?DI(n):(n instanceof IDBTransaction&&bI(n),PI(n,kI())?new Proxy(n,bf):n)}function Ci(n){if(n instanceof IDBRequest)return xI(n);if(uf.has(n))return uf.get(n);const e=LI(n);return e!==n&&(uf.set(n,e),hp.set(e,n)),e}const cf=n=>hp.get(n);function VI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ci(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ci(u.result),p.oldVersion,p.newVersion,Ci(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const MI=["get","getKey","getAll","getAllKeys","count"],FI=["put","add","delete","clear"],hf=new Map;function Vy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=FI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||MI.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return hf.set(e,a),a}OI(n=>({...n,get:(e,t,i)=>Vy(e,t)||n.get(e,t,i),has:(e,t)=>!!Vy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function jI(n){const e=n.getComponent();return e?.type==="VERSION"}const Of="@firebase/app",My="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new cp("@firebase/app"),BI="@firebase/app-compat",zI="@firebase/analytics-compat",$I="@firebase/analytics",qI="@firebase/app-check-compat",WI="@firebase/app-check",HI="@firebase/auth",KI="@firebase/auth-compat",GI="@firebase/database",QI="@firebase/data-connect",JI="@firebase/database-compat",YI="@firebase/functions",XI="@firebase/functions-compat",ZI="@firebase/installations",eS="@firebase/installations-compat",tS="@firebase/messaging",nS="@firebase/messaging-compat",rS="@firebase/performance",iS="@firebase/performance-compat",sS="@firebase/remote-config",oS="@firebase/remote-config-compat",aS="@firebase/storage",lS="@firebase/storage-compat",uS="@firebase/firestore",cS="@firebase/vertexai-preview",hS="@firebase/firestore-compat",dS="firebase",fS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="[DEFAULT]",pS={[Of]:"fire-core",[BI]:"fire-core-compat",[$I]:"fire-analytics",[zI]:"fire-analytics-compat",[WI]:"fire-app-check",[qI]:"fire-app-check-compat",[HI]:"fire-auth",[KI]:"fire-auth-compat",[GI]:"fire-rtdb",[QI]:"fire-data-connect",[JI]:"fire-rtdb-compat",[YI]:"fire-fn",[XI]:"fire-fn-compat",[ZI]:"fire-iid",[eS]:"fire-iid-compat",[tS]:"fire-fcm",[nS]:"fire-fcm-compat",[rS]:"fire-perf",[iS]:"fire-perf-compat",[sS]:"fire-rc",[oS]:"fire-rc-compat",[aS]:"fire-gcs",[lS]:"fire-gcs-compat",[uS]:"fire-fst",[hS]:"fire-fst-compat",[cS]:"fire-vertex","fire-js":"fire-js",[dS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,mS=new Map,Lf=new Map;function Fy(n,e){try{n.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Do(n){const e=n.name;if(Lf.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Lf.set(e,n);for(const t of Dc.values())Fy(t,n);for(const t of mS.values())Fy(t,n);return!0}function dp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new Pl("app","Firebase",gS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=fS;function j_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Df,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Pi.create("bad-app-name",{appName:String(o)});if(t||(t=V_()),!t)throw Pi.create("no-options");const a=Dc.get(o);if(a){if(Oc(t,a.options)&&Oc(i,a.config))return a;throw Pi.create("duplicate-app",{appName:o})}const u=new II(o);for(const p of Lf.values())u.addComponent(p);const d=new yS(t,i,u);return Dc.set(o,d),d}function B_(n=Df){const e=Dc.get(n);if(!e&&n===Df&&V_())return j_();if(!e)throw Pi.create("no-app",{appName:n});return e}function ki(n,e,t){var i;let o=(i=pS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(d.join(" "));return}Do(new ws(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebase-heartbeat-database",_S=1,ml="firebase-heartbeat-store";let df=null;function z_(){return df||(df=VI(vS,_S,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ml)}catch(t){console.warn(t)}}}}).catch(n=>{throw Pi.create("idb-open",{originalErrorMessage:n.message})})),df}async function wS(n){try{const t=(await z_()).transaction(ml),i=await t.objectStore(ml).get($_(n));return await t.done,i}catch(e){if(e instanceof qr)jr.warn(e.message);else{const t=Pi.create("idb-get",{originalErrorMessage:e?.message});jr.warn(t.message)}}}async function Uy(n,e){try{const i=(await z_()).transaction(ml,"readwrite");await i.objectStore(ml).put(e,$_(n)),await i.done}catch(t){if(t instanceof qr)jr.warn(t.message);else{const i=Pi.create("idb-set",{originalErrorMessage:t?.message});jr.warn(i.message)}}}function $_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=1024,TS=720*60*60*1e3;class IS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=TS}),this._storage.overwrite(this._heartbeatsCache))}catch(i){jr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jy(),{heartbeatsToSend:i,unsentEntries:o}=SS(this._heartbeatsCache.heartbeats),a=bc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return jr.warn(t),""}}}function jy(){return new Date().toISOString().substring(0,10)}function SS(n,e=ES){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),By(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),By(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hI()?dI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function By(n){return bc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){Do(new ws("platform-logger",e=>new UI(e),"PRIVATE")),Do(new ws("heartbeat",e=>new IS(e),"PRIVATE")),ki(Of,My,n),ki(Of,My,"esm2017"),ki("fire-js","")}RS("");function fp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CS=q_,W_=new Pl("auth","Firebase",q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new cp("@firebase/auth");function PS(n,...e){Lc.logLevel<=Le.WARN&&Lc.warn(`Auth (${Wo}): ${n}`,...e)}function _c(n,...e){Lc.logLevel<=Le.ERROR&&Lc.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n,...e){throw pp(n,...e)}function ur(n,...e){return pp(n,...e)}function H_(n,e,t){const i=Object.assign(Object.assign({},CS()),{[e]:t});return new Pl("auth","Firebase",i).create(e,{appName:n.name})}function Fr(n){return H_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return W_.create(n,...e)}function Ee(n,e,...t){if(!n)throw pp(e,...t)}function Lr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _c(e),new Error(e)}function Br(n,e){n||Lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function K_(){return zy()==="http:"||zy()==="https:"}function zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K_()||aI()||"connection"in navigator)?navigator.onLine:!0}function NS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Br(t>e,"Short delay should be less than long delay!"),this.isMobile=iI()||lI()}get(){return kS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e){Br(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Nl(3e4,6e4);function mr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Gn(n,e,t,i,o={}){return Q_(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=kl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return oI()||(y.referrerPolicy="no-referrer"),G_.fetch()(J_(n,n.config.apiHost,t,d),y)})}async function Q_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},xS),e);try{const o=new DS(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw cc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw cc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw cc(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw H_(n,_,y);Hn(n,_)}}catch(o){if(o instanceof qr)throw o;Hn(n,"network-request-failed",{message:String(o)})}}async function xl(n,e,t,i,o={}){const a=await Gn(n,e,t,i,o);return"mfaPendingCredential"in a&&Hn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function J_(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?mp(n.config,o):`${n.config.apiScheme}://${o}`}function OS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ur(this.auth,"network-request-failed")),bS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ur(n,e,i);return o.customData._tokenResponse=t,o}function $y(n){return n!==void 0&&n.enterprise!==void 0}class LS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function VS(n,e){return Gn(n,"GET","/v2/recaptchaConfig",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(n,e){return Gn(n,"POST","/v1/accounts:delete",e)}async function Y_(n,e){return Gn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(n,e=!1){const t=gt(n),i=await t.getIdToken(e),o=gp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:ul(ff(o.auth_time)),issuedAtTime:ul(ff(o.iat)),expirationTime:ul(ff(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ff(n){return Number(n)*1e3}function gp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const o=D_(t);return o?JSON.parse(o):(_c("Failed to decode base64 JWT payload"),null)}catch(o){return _c("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qy(n){const e=gp(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qr&&US(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function US({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Lo(n,Y_(t,{idToken:i}));Ee(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?X_(a.providerUserInfo):[],d=zS(n.providerData,u),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!d?.length,_=p?y:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Vf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function BS(n){const e=gt(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zS(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function X_(n){return n.map(e=>{var{providerId:t}=e,i=fp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(n,e){const t=await Q_(n,{},async()=>{const i=kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=J_(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",G_.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qS(n,e){return Gn(n,"POST","/v2/accounts:revokeToken",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=qy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await $S(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new No;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ee(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=fp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lo(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FS(this,e)}reload(){return BS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await Lo(this,MS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,M=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,N=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:ie,isAnonymous:G,providerData:ne,stsTokenManager:P}=t;Ee(X&&P,e,"internal-error");const I=No.fromJSON(this.name,P);Ee(typeof X=="string",e,"internal-error"),_i(E,e.name),_i(A,e.name),Ee(typeof ie=="boolean",e,"internal-error"),Ee(typeof G=="boolean",e,"internal-error"),_i(M,e.name),_i(x,e.name),_i(F,e.name),_i(N,e.name),_i(Y,e.name),_i(H,e.name);const S=new Vr({uid:X,auth:e,email:A,emailVerified:ie,displayName:E,isAnonymous:G,photoURL:x,phoneNumber:M,tenantId:F,stsTokenManager:I,createdAt:Y,lastLoginAt:H});return ne&&Array.isArray(ne)&&(S.providerData=ne.map(k=>Object.assign({},k))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const a=new Vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?X_(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new No;d.updateFromIdToken(i);const p=new Vr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;function Mr(n){Br(n instanceof Function,"Expected a class definition");let e=Wy.get(n);return e?(Br(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Z_.type="NONE";const Hy=Z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=wc(this.userKey,o.apiKey,a),this.fullPersistenceKey=wc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(Mr(Hy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Mr(Hy);const u=wc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(u);if(_){const E=Vr._fromJSON(e,_);y!==a&&(d=E),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new xo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new xo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ew(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sw(e))return"Blackberry";if(ow(e))return"Webos";if(tw(e))return"Safari";if((e.includes("chrome/")||nw(e))&&!e.includes("edge/"))return"Chrome";if(iw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function ew(n=Wt()){return/firefox\//i.test(n)}function tw(n=Wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nw(n=Wt()){return/crios\//i.test(n)}function rw(n=Wt()){return/iemobile/i.test(n)}function iw(n=Wt()){return/android/i.test(n)}function sw(n=Wt()){return/blackberry/i.test(n)}function ow(n=Wt()){return/webos/i.test(n)}function yp(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WS(n=Wt()){var e;return yp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HS(){return uI()&&document.documentMode===10}function aw(n=Wt()){return yp(n)||iw(n)||ow(n)||sw(n)||/windows phone/i.test(n)||rw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n,e=[]){let t;switch(n){case"Browser":t=Ky(Wt());break;case"Worker":t=`${Ky(Wt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(n,e={}){return Gn(n,"GET","/v2/passwordPolicy",mr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=6;class JS{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:QS,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gy(this),this.idTokenSubscription=new Gy(this),this.beforeStateQueue=new KS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Y_(this,{idToken:e}),i=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Fr(this));const t=e?gt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GS(this),t=new JS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await qS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&PS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Fi(n){return gt(n)}class Gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=yI(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XS(n){nh=n}function uw(n){return nh.loadJS(n)}function ZS(){return nh.recaptchaEnterpriseScript}function eA(){return nh.gapiScript}function tA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const nA="recaptcha-enterprise",rA="NO_RECAPTCHA";class iA{constructor(e){this.type=nA,this.auth=Fi(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{VS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new LS(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;$y(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(rA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&$y(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ZS();p.length!==0&&(p+=d),uw(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function Qy(n,e,t,i=!1){const o=new iA(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fc(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qy(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Qy(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,e){const t=dp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Oc(a,e??{}))return o;Hn(o,"already-initialized")}return t.initialize({options:e})}function oA(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Mr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function aA(n,e,t){const i=Fi(n);Ee(i._canInitEmulator,i,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=cw(e),{host:u,port:d}=lA(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),uA()}function cw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lA(n){const e=cw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:Jy(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Jy(u)}}}function Jy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,t){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}async function cA(n,e){return Gn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(n,e){return xl(n,"POST","/v1/accounts:signInWithPassword",mr(n,e))}async function dA(n,e){return Gn(n,"POST","/v1/accounts:sendOobCode",mr(n,e))}async function fA(n,e){return dA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(n,e){return xl(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}async function mA(n,e){return xl(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends vp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new gl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,t,"signInWithPassword",hA);case"emailLink":return pA(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fc(e,i,"signUpPassword",cA);case"emailLink":return mA(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n,e){return xl(n,"POST","/v1/accounts:signInWithIdp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="http://localhost";class Es extends vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=fp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Es(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:gA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vA(n){const e=rl(il(n)).link,t=e?rl(il(e)).deep_link_id:null,i=rl(il(n)).deep_link_id;return(i?rl(il(i)).link:null)||i||t||e||n}class _p{constructor(e){var t,i,o,a,u,d;const p=rl(il(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=yA((o=p.mode)!==null&&o!==void 0?o:null);Ee(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=vA(e);try{return new _p(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,t){return gl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=_p.parseLink(t);return Ee(i,"argument-error"),gl._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends bl{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Es._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ti.credential(t,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends bl{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends bl{constructor(){super("twitter.com")}static credential(e,t){return Es._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Si.credential(t,i)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(n,e){return xl(n,"POST","/v1/accounts:signUp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Vr._fromIdTokenResponse(e,i,o),u=Yy(i);return new Ts({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Yy(i);return new Ts({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Yy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends qr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Uc(e,t,i,o)}}function dw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(n,a,e,i):a})}async function wA(n,e,t=!1){const i=await Lo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ts._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(n,e,t=!1){const{auth:i}=n;if(lr(i.app))return Promise.reject(Fr(i));const o="reauthenticate";try{const a=await Lo(n,dw(i,o,e,n),t);Ee(a.idToken,i,"internal-error");const u=gp(a.idToken);Ee(u,i,"internal-error");const{sub:d}=u;return Ee(n.uid===d,i,"user-mismatch"),Ts._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Hn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(n,e,t=!1){if(lr(n.app))return Promise.reject(Fr(n));const i="signIn",o=await dw(n,i,e),a=await Ts._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function TA(n,e){return fw(Fi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(n){const e=Fi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IA(n,e,t){const i=Fi(n);await Fc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",fA)}async function Xy(n,e,t){if(lr(n.app))return Promise.reject(Fr(n));const i=Fi(n),u=await Fc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_A).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&pw(n),p}),d=await Ts._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function SA(n,e,t){return lr(n.app)?Promise.reject(Fr(n)):TA(gt(n),Ho.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pw(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(n,e){return Gn(n,"POST","/v1/accounts:createAuthUri",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(n,e){const t=K_()?Vc():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:o}=await AA(gt(n),i);return o||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e){return Gn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=gt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Lo(i,RA(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function CA(n,e,t,i){return gt(n).onIdTokenChanged(e,t,i)}function PA(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}function kA(n){return gt(n).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1e3,xA=10;class gw extends mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);HS()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},NA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gw.type="LOCAL";const bA=gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yw.type="SESSION";const vw=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new rh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await OA(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=wp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function LA(n){cr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function VA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FA(){return _w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firebaseLocalStorageDb",UA=1,Bc="firebaseLocalStorage",Ew="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ih(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function jA(){const n=indexedDB.deleteDatabase(ww);return new Ol(n).toPromise()}function Mf(){const n=indexedDB.open(ww,UA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Bc,{keyPath:Ew})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),await jA(),e(await Mf()))})})}async function tv(n,e,t){const i=ih(n,!0).put({[Ew]:e,value:t});return new Ol(i).toPromise()}async function BA(n,e){const t=ih(n,!1).get(e),i=await new Ol(t).toPromise();return i===void 0?null:i.value}function nv(n,e){const t=ih(n,!0).delete(e);return new Ol(t).toPromise()}const zA=800,$A=3;class Tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>$A)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(FA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await VA(),!this.activeServiceWorker)return;this.sender=new DA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mf();return await tv(e,jc,"1"),await nv(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>BA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ih(o,!1).getAll();return new Ol(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tw.type="LOCAL";const qA=Tw;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n,e){return e?Mr(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HA(n){return fw(n.auth,new Ep(n),n.bypassAuthState)}function KA(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),EA(t,new Ep(n),n.bypassAuthState)}async function GA(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),wA(t,new Ep(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HA;case"linkViaPopup":case"linkViaRedirect":return GA;case"reauthViaPopup":case"reauthViaRedirect":return KA;default:Hn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Nl(2e3,1e4);class ko extends Iw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QA.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="pendingRedirect",Ec=new Map;class YA extends Iw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ec.get(this.auth._key());if(!e){try{const i=await XA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ec.set(this.auth._key(),e)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XA(n,e){const t=tR(e),i=eR(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function ZA(n,e){Ec.set(n._key(),e)}function eR(n){return Mr(n._redirectPersistence)}function tR(n){return wc(JA,n.config.apiKey,n.name)}async function nR(n,e,t=!1){if(lr(n.app))return Promise.reject(Fr(n));const i=Fi(n),o=WA(i,e),u=await new YA(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=600*1e3;class iR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Sw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rR&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}saveEventToCache(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}function rv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,e={}){return Gn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lR=/^https?/;async function uR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oR(n);for(const t of e)try{if(cR(t))return}catch{}Hn(n,"unauthorized-domain")}function cR(n){const e=Vc(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!lR.test(t))return!1;if(aR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Nl(3e4,6e4);function iv(){const n=cr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dR(n){return new Promise((e,t)=>{var i,o,a;function u(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),t(ur(n,"network-request-failed"))},timeout:hR.get()})}if(!((o=(i=cr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=cr().gapi)===null||a===void 0)&&a.load)u();else{const d=tA("iframefcb");return cr()[d]=()=>{gapi.load?u():t(ur(n,"network-request-failed"))},uw(`${eA()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function fR(n){return Tc=Tc||dR(n),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new Nl(5e3,15e3),mR="__/auth/iframe",gR="emulator/auth/iframe",yR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _R(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mp(e,gR):`https://${n.config.authDomain}/${mR}`,i={apiKey:e.apiKey,appName:n.name,v:Wo},o=vR.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${kl(i).slice(1)}`}async function wR(n){const e=await fR(n),t=cr().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:_R(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yR,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=ur(n,"network-request-failed"),d=cr().setTimeout(()=>{a(u)},pR.get());function p(){cr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TR=500,IR=600,SR="_blank",AR="http://localhost";class sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RR(n,e,t,i=TR,o=IR){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},ER),{width:i.toString(),height:o.toString(),top:a,left:u}),y=Wt().toLowerCase();t&&(d=nw(y)?SR:t),ew(y)&&(e=e||AR,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[M,x])=>`${A}${M}=${x},`,"");if(WS(y)&&d!=="_self")return CR(e||"",d),new sv(null);const E=window.open(e||"",d,_);Ee(E,n,"popup-blocked");try{E.focus()}catch{}return new sv(E)}function CR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="__/auth/handler",kR="emulator/auth/handler",NR=encodeURIComponent("fac");async function ov(n,e,t,i,o,a){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wo,eventId:o};if(e instanceof hw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",gI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof bl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${NR}=${encodeURIComponent(p)}`:"";return`${xR(n)}?${kl(d).slice(1)}${y}`}function xR({config:n}){return n.emulator?mp(n,kR):`https://${n.authDomain}/${PR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="webStorageSupport";class bR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vw,this._completeRedirectFn=nR,this._overrideRedirectResult=ZA}async _openPopup(e,t,i,o){var a;Br((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await ov(e,t,i,Vc(),o);return RR(e,u,wp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await ov(e,t,i,Vc(),o);return LA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Br(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await wR(e),i=new iR(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pf,{type:pf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[pf];u!==void 0&&t(!!u),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aw()||tw()||yp()}}const OR=bR;var av="@firebase/auth",lv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VR(n){Do(new ws("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ee(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lw(n)},y=new YS(i,o,a,p);return oA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Do(new ws("auth-internal",e=>{const t=Fi(e.getProvider("auth").getImmediate());return(i=>new DR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(av,lv,LR(n)),ki(av,lv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=300,FR=M_("authIdTokenMaxAge")||MR;let uv=null;const UR=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FR)return;const o=t?.token;uv!==o&&(uv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jR(n=B_()){const e=dp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sA(n,{popupRedirectResolver:OR,persistence:[qA,bA,vw]}),i=M_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=UR(a.toString());PA(t,u,()=>u(t.currentUser)),CA(t,d=>u(d))}}const o=L_("auth");return o&&aA(t,`http://${o}`),t}function BR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}XS({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=ur("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",BR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VR("Browser");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Aw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function S(){}S.prototype=I.prototype,P.D=I.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(k,D,O){for(var R=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)R[ke-2]=arguments[ke];return I.prototype[D].apply(k,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,S){S||(S=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(D=0;16>D;++D)k[D]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=P.g[0],S=P.g[1],D=P.g[2];var O=P.g[3],R=I+(O^S&(D^O))+k[0]+3614090360&4294967295;I=S+(R<<7&4294967295|R>>>25),R=O+(D^I&(S^D))+k[1]+3905402710&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(S^O&(I^S))+k[2]+606105819&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(I^D&(O^I))+k[3]+3250441966&4294967295,S=D+(R<<22&4294967295|R>>>10),R=I+(O^S&(D^O))+k[4]+4118548399&4294967295,I=S+(R<<7&4294967295|R>>>25),R=O+(D^I&(S^D))+k[5]+1200080426&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(S^O&(I^S))+k[6]+2821735955&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(I^D&(O^I))+k[7]+4249261313&4294967295,S=D+(R<<22&4294967295|R>>>10),R=I+(O^S&(D^O))+k[8]+1770035416&4294967295,I=S+(R<<7&4294967295|R>>>25),R=O+(D^I&(S^D))+k[9]+2336552879&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(S^O&(I^S))+k[10]+4294925233&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(I^D&(O^I))+k[11]+2304563134&4294967295,S=D+(R<<22&4294967295|R>>>10),R=I+(O^S&(D^O))+k[12]+1804603682&4294967295,I=S+(R<<7&4294967295|R>>>25),R=O+(D^I&(S^D))+k[13]+4254626195&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(S^O&(I^S))+k[14]+2792965006&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(I^D&(O^I))+k[15]+1236535329&4294967295,S=D+(R<<22&4294967295|R>>>10),R=I+(D^O&(S^D))+k[1]+4129170786&4294967295,I=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(I^S))+k[6]+3225465664&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^S&(O^I))+k[11]+643717713&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^I&(D^O))+k[0]+3921069994&4294967295,S=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(S^D))+k[5]+3593408605&4294967295,I=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(I^S))+k[10]+38016083&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^S&(O^I))+k[15]+3634488961&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^I&(D^O))+k[4]+3889429448&4294967295,S=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(S^D))+k[9]+568446438&4294967295,I=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(I^S))+k[14]+3275163606&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^S&(O^I))+k[3]+4107603335&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^I&(D^O))+k[8]+1163531501&4294967295,S=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(S^D))+k[13]+2850285829&4294967295,I=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(I^S))+k[2]+4243563512&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^S&(O^I))+k[7]+1735328473&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^I&(D^O))+k[12]+2368359562&4294967295,S=D+(R<<20&4294967295|R>>>12),R=I+(S^D^O)+k[5]+4294588738&4294967295,I=S+(R<<4&4294967295|R>>>28),R=O+(I^S^D)+k[8]+2272392833&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^S)+k[11]+1839030562&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^I)+k[14]+4259657740&4294967295,S=D+(R<<23&4294967295|R>>>9),R=I+(S^D^O)+k[1]+2763975236&4294967295,I=S+(R<<4&4294967295|R>>>28),R=O+(I^S^D)+k[4]+1272893353&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^S)+k[7]+4139469664&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^I)+k[10]+3200236656&4294967295,S=D+(R<<23&4294967295|R>>>9),R=I+(S^D^O)+k[13]+681279174&4294967295,I=S+(R<<4&4294967295|R>>>28),R=O+(I^S^D)+k[0]+3936430074&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^S)+k[3]+3572445317&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^I)+k[6]+76029189&4294967295,S=D+(R<<23&4294967295|R>>>9),R=I+(S^D^O)+k[9]+3654602809&4294967295,I=S+(R<<4&4294967295|R>>>28),R=O+(I^S^D)+k[12]+3873151461&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^S)+k[15]+530742520&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^I)+k[2]+3299628645&4294967295,S=D+(R<<23&4294967295|R>>>9),R=I+(D^(S|~O))+k[0]+4096336452&4294967295,I=S+(R<<6&4294967295|R>>>26),R=O+(S^(I|~D))+k[7]+1126891415&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~S))+k[14]+2878612391&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~I))+k[5]+4237533241&4294967295,S=D+(R<<21&4294967295|R>>>11),R=I+(D^(S|~O))+k[12]+1700485571&4294967295,I=S+(R<<6&4294967295|R>>>26),R=O+(S^(I|~D))+k[3]+2399980690&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~S))+k[10]+4293915773&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~I))+k[1]+2240044497&4294967295,S=D+(R<<21&4294967295|R>>>11),R=I+(D^(S|~O))+k[8]+1873313359&4294967295,I=S+(R<<6&4294967295|R>>>26),R=O+(S^(I|~D))+k[15]+4264355552&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~S))+k[6]+2734768916&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~I))+k[13]+1309151649&4294967295,S=D+(R<<21&4294967295|R>>>11),R=I+(D^(S|~O))+k[4]+4149444226&4294967295,I=S+(R<<6&4294967295|R>>>26),R=O+(S^(I|~D))+k[11]+3174756917&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~S))+k[2]+718787259&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~I))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+O&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var S=I-this.blockSize,k=this.B,D=this.h,O=0;O<I;){if(D==0)for(;O<=S;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<I;)if(k[D++]=P.charCodeAt(O++),D==this.blockSize){o(this,k),D=0;break}}else for(;O<I;)if(k[D++]=P[O++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var S=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=S&255,S/=256;for(this.u(P),P=Array(16),I=S=0;4>I;++I)for(var k=0;32>k;k+=8)P[S++]=this.g[I]>>>k&255;return P};function a(P,I){var S=d;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=I(P)}function u(P,I){this.h=I;for(var S=[],k=!0,D=P.length-1;0<=D;D--){var O=P[D]|0;k&&O==I||(S[D]=O,k=!1)}this.g=S}var d={};function p(P){return-128<=P&&128>P?a(P,function(I){return new u([I|0],0>I?-1:0)}):new u([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return N(y(-P));for(var I=[],S=1,k=0;P>=S;k++)I[k]=P/S|0,S*=4294967296;return new u(I,0)}function _(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return N(_(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(I,8)),k=E,D=0;D<P.length;D+=8){var O=Math.min(8,P.length-D),R=parseInt(P.substring(D,D+O),I);8>O?(O=y(Math.pow(I,O)),k=k.j(O).add(y(R))):(k=k.j(S),k=k.add(y(R)))}return k}var E=p(0),A=p(1),M=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-N(this).m();for(var P=0,I=1,S=0;S<this.g.length;S++){var k=this.i(S);P+=(0<=k?k:4294967296+k)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(F(this))return"-"+N(this).toString(P);for(var I=y(Math.pow(P,6)),S=this,k="";;){var D=ie(S,I).g;S=Y(S,D.j(I));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=D,x(S))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function F(P){return P.h==-1}n.l=function(P){return P=Y(this,P),F(P)?-1:x(P)?0:1};function N(P){for(var I=P.g.length,S=[],k=0;k<I;k++)S[k]=~P.g[k];return new u(S,~P.h).add(A)}n.abs=function(){return F(this)?N(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],k=0,D=0;D<=I;D++){var O=k+(this.i(D)&65535)+(P.i(D)&65535),R=(O>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);k=R>>>16,O&=65535,R&=65535,S[D]=R<<16|O}return new u(S,S[S.length-1]&-2147483648?-1:0)};function Y(P,I){return P.add(N(I))}n.j=function(P){if(x(this)||x(P))return E;if(F(this))return F(P)?N(this).j(N(P)):N(N(this).j(P));if(F(P))return N(this.j(N(P)));if(0>this.l(M)&&0>P.l(M))return y(this.m()*P.m());for(var I=this.g.length+P.g.length,S=[],k=0;k<2*I;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<P.g.length;D++){var O=this.i(k)>>>16,R=this.i(k)&65535,ke=P.i(D)>>>16,Ge=P.i(D)&65535;S[2*k+2*D]+=R*Ge,H(S,2*k+2*D),S[2*k+2*D+1]+=O*Ge,H(S,2*k+2*D+1),S[2*k+2*D+1]+=R*ke,H(S,2*k+2*D+1),S[2*k+2*D+2]+=O*ke,H(S,2*k+2*D+2)}for(k=0;k<I;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=I;k<2*I;k++)S[k]=0;return new u(S,0)};function H(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function X(P,I){this.g=P,this.h=I}function ie(P,I){if(x(I))throw Error("division by zero");if(x(P))return new X(E,E);if(F(P))return I=ie(N(P),I),new X(N(I.g),N(I.h));if(F(I))return I=ie(P,N(I)),new X(N(I.g),I.h);if(30<P.g.length){if(F(P)||F(I))throw Error("slowDivide_ only works with positive integers.");for(var S=A,k=I;0>=k.l(P);)S=G(S),k=G(k);var D=ne(S,1),O=ne(k,1);for(k=ne(k,2),S=ne(S,2);!x(k);){var R=O.add(k);0>=R.l(P)&&(D=D.add(S),O=R),k=ne(k,1),S=ne(S,1)}return I=Y(P,D.j(I)),new X(D,I)}for(D=E;0<=P.l(I);){for(S=Math.max(1,Math.floor(P.m()/I.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=y(S),R=O.j(I);F(R)||0<R.l(P);)S-=k,O=y(S),R=O.j(I);x(O)&&(O=A),D=D.add(O),P=Y(P,R)}return new X(D,P)}n.A=function(P){return ie(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],k=0;k<I;k++)S[k]=this.i(k)&P.i(k);return new u(S,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],k=0;k<I;k++)S[k]=this.i(k)|P.i(k);return new u(S,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],k=0;k<I;k++)S[k]=this.i(k)^P.i(k);return new u(S,this.h^P.h)};function G(P){for(var I=P.g.length+1,S=[],k=0;k<I;k++)S[k]=P.i(k)<<1|P.i(k-1)>>>31;return new u(S,P.h)}function ne(P,I){var S=I>>5;I%=32;for(var k=P.g.length-S,D=[],O=0;O<k;O++)D[O]=0<I?P.i(O+S)>>>I|P.i(O+S+1)<<32-I:P.i(O+S);return new u(D,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Aw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=_,vs=u}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rw,sl,Cw,Ic,Ff,Pw,kw,Nw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var v=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var j=c[T];if(!(j in v))break e;v=v[j]}c=c[c.length-1],T=v[c],m=m(T),m!=T&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var v=0,T=!1,j={next:function(){if(!T&&v<c.length){var W=v++;return{value:m(W,c[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function E(c,m,v){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function A(c,m,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,A.apply(null,arguments)}function M(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function x(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(T,j,W){for(var ae=Array(arguments.length-2),We=2;We<arguments.length;We++)ae[We-2]=arguments[We];return m.prototype[j].apply(T,ae)}}function F(c){const m=c.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=c[T];return v}return[]}function N(c,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const j=c.length||0,W=T.length||0;c.length=j+W;for(let ae=0;ae<W;ae++)c[j+ae]=T[ae]}else c.push(T)}}class Y{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var G=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ne(c,m,v){for(const T in c)m.call(v,c[T],T,c)}function P(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function I(c){const m={};for(const v in c)m[v]=c[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,m){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)c[v]=T[v];for(let W=0;W<S.length;W++)v=S[W],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function D(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function O(c){d.setTimeout(()=>{throw c},0)}function R(){var c=ye;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ke{constructor(){this.h=this.g=null}add(m,v){const T=Ge.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Ge=new Y(()=>new Oe,c=>c.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,oe=!1,ye=new ke,le=()=>{const c=d.Promise.resolve(void 0);Ue=()=>{c.then(U)}};var U=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(v){O(v)}var m=Ge;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}oe=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return c})();function Pe(c,m){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(G){e:{try{ie(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,me);var Ve={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Qe(c,m,v,T,j){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=j,this.key=++qe,this.da=this.fa=!1}function It(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gr(c){this.src=c,this.g={},this.h=0}gr.prototype.add=function(c,m,v,T,j){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ae=Gr(c,m,T,j);return-1<ae?(m=c[ae],v||(m.fa=!1)):(m=new Qe(m,this.src,W,!!T,j),m.fa=v,c.push(m)),m};function Ns(c,m){var v=m.type;if(v in c.g){var T=c.g[v],j=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(T,j,1),W&&(It(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Gr(c,m,v,T){for(var j=0;j<c.length;++j){var W=c[j];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==T)return j}return-1}var ji="closure_lm_"+(1e6*Math.random()|0),xs={};function na(c,m,v,T,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)na(c,m[W],v,T,j);return null}return v=sa(v),c&&c[$e]?c.K(m,v,y(T)?!!T.capture:!1,j):ra(c,m,v,!1,T,j)}function ra(c,m,v,T,j,W){if(!m)throw Error("Invalid event type");var ae=y(j)?!!j.capture:!!j,We=Os(c);if(We||(c[ji]=We=new gr(c)),v=We.add(m,v,T,ae,W),v.proxy)return v;if(T=Gl(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)Se||(j=ae),j===void 0&&(j=!1),c.addEventListener(m.toString(),T,j);else if(c.attachEvent)c.attachEvent(vr(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gl(){function c(v){return m.call(c.src,c.listener,v)}const m=ia;return c}function bs(c,m,v,T,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)bs(c,m[W],v,T,j);else T=y(T)?!!T.capture:!!T,v=sa(v),c&&c[$e]?(c=c.i,m=String(m).toString(),m in c.g&&(W=c.g[m],v=Gr(W,v,T,j),-1<v&&(It(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[m],c.h--)))):c&&(c=Os(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Gr(m,v,T,j)),(v=-1<c?m[c]:null)&&yr(v))}function yr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[$e])Ns(m.i,c);else{var v=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(v,T,c.capture):m.detachEvent?m.detachEvent(vr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=Os(m))?(Ns(v,c),v.h==0&&(v.src=null,m[ji]=null)):It(c)}}}function vr(c){return c in xs?xs[c]:xs[c]="on"+c}function ia(c,m){if(c.da)c=!0;else{m=new Pe(m,this);var v=c.listener,T=c.ha||c.src;c.fa&&yr(c),c=v.call(T,m)}return c}function Os(c){return c=c[ji],c instanceof gr?c:null}var Ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(c){return typeof c=="function"?c:(c[Ds]||(c[Ds]=function(m){return c.handleEvent(m)}),c[Ds])}function yt(){K.call(this),this.i=new gr(this),this.M=this,this.F=null}x(yt,K),yt.prototype[$e]=!0,yt.prototype.removeEventListener=function(c,m,v,T){bs(this,c,m,v,T)};function vt(c,m){var v,T=c.F;if(T)for(v=[];T;T=T.F)v.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new me(m,c);else if(m instanceof me)m.target=m.target||c;else{var j=m;m=new me(T,c),k(m,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var ae=m.g=v[W];j=_r(ae,T,!0,m)&&j}if(ae=m.g=c,j=_r(ae,T,!0,m)&&j,j=_r(ae,T,!1,m)&&j,v)for(W=0;W<v.length;W++)ae=m.g=v[W],j=_r(ae,T,!1,m)&&j}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],T=0;T<v.length;T++)It(v[T]);delete c.g[m],c.h--}}this.F=null},yt.prototype.K=function(c,m,v,T){return this.i.add(String(c),m,!1,v,T)},yt.prototype.L=function(c,m,v,T){return this.i.add(String(c),m,!0,v,T)};function _r(c,m,v,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var ae=m[W];if(ae&&!ae.da&&ae.capture==v){var We=ae.listener,_t=ae.ha||ae.src;ae.fa&&Ns(c.i,ae),j=We.call(_t,T)!==!1&&j}}return j&&!T.defaultPrevented}function oa(c,m,v){if(typeof c=="function")v&&(c=A(c,v));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function Qr(c){c.g=oa(()=>{c.g=null,c.i&&(c.i=!1,Qr(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Bi extends K{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(c){K.call(this),this.h=c,this.g={}}x(zi,K);var aa=[];function la(c){ne(c.g,function(m,v){this.g.hasOwnProperty(v)&&yr(m)},c),c.g={}}zi.prototype.N=function(){zi.aa.N.call(this),la(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ua=d.JSON.stringify,ca=d.JSON.parse,ha=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function $i(){}$i.prototype.h=null;function Ls(c){return c.h||(c.h=c.i())}function Vs(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jn(){me.call(this,"d")}x(Jn,me);function Ms(){me.call(this,"c")}x(Ms,me);var Yn={},da=null;function qi(){return da=da||new yt}Yn.La="serverreachability";function fa(c){me.call(this,Yn.La,c)}x(fa,me);function wr(c){const m=qi();vt(m,new fa(m))}Yn.STAT_EVENT="statevent";function pa(c,m){me.call(this,Yn.STAT_EVENT,c),this.stat=m}x(pa,me);function lt(c){const m=qi();vt(m,new pa(m,c))}Yn.Ma="timingevent";function Fs(c,m){me.call(this,Yn.Ma,c),this.size=m}x(Fs,me);function Nn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function Hi(c,m,v,T,j,W){c.info(function(){if(c.g)if(W)for(var ae="",We=W.split("&"),_t=0;_t<We.length;_t++){var Me=We[_t].split("=");if(1<Me.length){var St=Me[0];Me=Me[1];var dt=St.split("_");ae=2<=dt.length&&dt[1]=="type"?ae+(St+"="+Me+"&"):ae+(St+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+v+`
`+ae})}function Us(c,m,v,T,j,W,ae){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+v+`
`+W+" "+ae})}function xn(c,m,v,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Nh(c,v)+(T?" "+T:"")})}function ma(c,m){c.info(function(){return"TIMEOUT: "+m})}Wi.prototype.info=function(){};function Nh(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var T=v[c];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<j.length;ae++)j[ae]=""}}}}return ua(v)}catch{return m}}var js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ql={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Ki(){}x(Ki,$i),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},bn=new Ki;function On(c,m,v,T){this.j=c,this.i=m,this.l=v,this.R=T||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var ga={},Bs={};function zs(c,m,v){c.L=1,c.v=ei(hn(m)),c.m=v,c.P=!0,ya(c,null)}function ya(c,m){c.F=Date.now(),Je(c),c.A=hn(c.v);var v=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),ni(v.i,"t",T),c.C=0,v=c.j.J,c.h=new Jl,c.g=pu(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Bi(A(c.Y,c,c.g),c.O)),m=c.U,v=c.g,T=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(aa[0]=j.toString()),j=aa);for(var W=0;W<j.length;W++){var ae=na(v,j[W],T||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),wr(),Hi(c.i,c.u,c.A,c.l,c.R,c.m)}On.prototype.ca=function(c){c=c.target;const m=this.M;m&&Xt(c)==3?m.j():this.Y(c)},On.prototype.Y=function(c){try{if(c==this.g)e:{const dt=Xt(this.g);var m=this.g.Ba();const Tn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Ia(this.g)))){this.J||dt!=4||m==7||(m==8||0>=Tn?wr(3):wr(2)),Gi(this);var v=this.g.Z();this.X=v;t:if(Yl(this)){var T=Ia(this.g);c="";var j=T.length,W=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Jr(this);var ae="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(W&&m==j-1)});T.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,Us(this.i,this.u,this.A,this.l,this.R,dt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,_t=this.g;if((We=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(We)){var Me=We;break t}}Me=null}if(v=Me)xn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,v);else{this.o=!1,this.s=3,lt(12),wn(this),Jr(this);break e}}if(this.P){v=!0;let fn;for(;!this.J&&this.C<ae.length;)if(fn=xh(this,ae),fn==Bs){dt==4&&(this.s=4,lt(14),v=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ga){this.s=4,lt(15),xn(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else xn(this.i,this.l,fn,null),va(this,fn);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||ae.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)xn(this.i,this.l,ae,"[Invalid Chunked Response]"),wn(this),Jr(this);else if(0<ae.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Aa(St),St.M=!0,lt(11))}}else xn(this.i,this.l,ae,null),va(this,ae);dt==4&&wn(this),this.o&&!this.J&&(dt==4?Zs(this.j,this):(this.o=!1,Je(this)))}else Gs(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),wn(this),Jr(this)}}}catch{}finally{}};function Yl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xh(c,m){var v=c.C,T=m.indexOf(`
`,v);return T==-1?Bs:(v=Number(m.substring(v,T)),isNaN(v)?ga:(T+=1,T+v>m.length?Bs:(m=m.slice(T,T+v),c.C=T+v,m)))}On.prototype.cancel=function(){this.J=!0,wn(this)};function Je(c){c.S=Date.now()+c.I,Xl(c,c.I)}function Xl(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Nn(A(c.ba,c),m)}function Gi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}On.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ma(this.i,this.A),this.L!=2&&(wr(),lt(17)),wn(this),this.s=2,Jr(this)):Xl(this,this.S-c)};function Jr(c){c.j.G==0||c.J||Zs(c.j,c)}function wn(c){Gi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,la(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function va(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||Ht(v.h,c))){if(!c.K&&Ht(v.h,c)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Xs(v),Fn(v);else break e;Ys(v),lt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Nn(A(v.Za,v),6e3));if(1>=eu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ar(v,11)}else if((c.K||v.g==c)&&Xs(v),!H(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Me=j[m];if(v.T=Me[0],Me=Me[1],v.G==2)if(Me[0]=="c"){v.K=Me[1],v.ia=Me[2];const St=Me[3];St!=null&&(v.la=St,v.j.info("VER="+v.la));const dt=Me[4];dt!=null&&(v.Aa=dt,v.j.info("SVER="+v.Aa));const Tn=Me[5];Tn!=null&&typeof Tn=="number"&&0<Tn&&(T=1.5*Tn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const fn=c.g;if(fn){const ts=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ts){var W=T.h;W.g||ts.indexOf("spdy")==-1&&ts.indexOf("quic")==-1&&ts.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(_a(W,W.h),W.h=null))}if(T.D){const to=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(T.ya=to,Ke(T.I,T.D,to))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ae=c;if(T.qa=fu(T,T.J?T.ia:null,T.W),ae.K){tu(T.h,ae);var We=ae,_t=T.L;_t&&(We.I=_t),We.B&&(Gi(We),Je(We)),T.g=ae}else es(T);0<v.i.length&&tr(v)}else Me[0]!="stop"&&Me[0]!="close"||Ar(v,7);else v.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Ar(v,7):Nt(v):Me[0]!="noop"&&v.l&&v.l.ta(Me),v.v=0)}}wr(4)}catch{}}var Zl=class{constructor(c,m){this.g=c,this.map=m}};function Qi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eu(c){return c.h?1:c.g?c.g.size:0}function Ht(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function _a(c,m){c.g?c.g.add(m):c.h=m}function tu(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Qi.prototype.cancel=function(){if(this.i=nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function nu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return F(c.i)}function $s(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],v=c.length,T=0;T<v;T++)m.push(c[T]);return m}m=[],v=0;for(T in c)m[v++]=c[T];return m}function qs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const T in c)m[v++]=T;return m}}}function Yr(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=qs(c),T=$s(c),j=T.length,W=0;W<j;W++)m.call(void 0,T[W],v&&v[W],c)}var Ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bh(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var T=c[v].indexOf("="),j=null;if(0<=T){var W=c[v].substring(0,T);j=c[v].substring(T+1)}else W=c[v];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Er(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Er){this.h=c.h,Yi(this,c.j),this.o=c.o,this.g=c.g,Xr(this,c.s),this.l=c.l;var m=c.i,v=new Xn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Zr(this,v),this.m=c.m}else c&&(m=String(c).match(Ji))?(this.h=!1,Yi(this,m[1]||"",!0),this.o=De(m[2]||""),this.g=De(m[3]||"",!0),Xr(this,m[4]),this.l=De(m[5]||"",!0),Zr(this,m[6]||"",!0),this.m=De(m[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}Er.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ti(m,Ws,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ti(m,Ws,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ti(v,v.charAt(0)=="/"?su:iu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ti(v,wa)),c.join("")};function hn(c){return new Er(c)}function Yi(c,m,v){c.j=v?De(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Xr(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Zr(c,m,v){m instanceof Xn?(c.i=m,Zn(c.i,c.h)):(v||(m=ti(m,ou)),c.i=new Xn(m,c.h))}function Ke(c,m,v){c.i.set(m,v)}function ei(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function De(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ti(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,ru),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ru(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ws=/[#\/\?@]/g,iu=/[#\?:]/g,su=/[#\?]/g,ou=/[#\?@]/g,wa=/#/g;function Xn(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function kt(c){c.g||(c.g=new Map,c.h=0,c.i&&bh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Xn.prototype,n.add=function(c,m){kt(this),this.i=null,c=En(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function Dn(c,m){kt(c),m=En(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Ln(c,m){return kt(c),m=En(c,m),c.g.has(m)}n.forEach=function(c,m){kt(this),this.g.forEach(function(v,T){v.forEach(function(j){c.call(m,j,T,this)},this)},this)},n.na=function(){kt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const j=c[T];for(let W=0;W<j.length;W++)v.push(m[T])}return v},n.V=function(c){kt(this);let m=[];if(typeof c=="string")Ln(this,c)&&(m=m.concat(this.g.get(En(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},n.set=function(c,m){return kt(this),this.i=null,c=En(this,c),Ln(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function ni(c,m,v){Dn(c,m),0<v.length&&(c.i=null,c.g.set(En(c,m),F(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const W=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var j=W;ae[T]!==""&&(j+="="+encodeURIComponent(String(ae[T]))),c.push(j)}}return this.i=c.join("&")};function En(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Zn(c,m){m&&!c.j&&(kt(c),c.i=null,c.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(Dn(this,T),ni(this,j,v))},c)),c.j=m}function Oh(c,m){const v=new Wi;if(d.Image){const T=new Image;T.onload=M(Yt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=M(Yt,v,"TestLoadImage: error",!1,m,T),T.onabort=M(Yt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=M(Yt,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function au(c,m){const v=new Wi,T=new AbortController,j=setTimeout(()=>{T.abort(),Yt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(W=>{clearTimeout(j),W.ok?Yt(v,"TestPingServer: ok",!0,m):Yt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Yt(v,"TestPingServer: error",!1,m)})}function Yt(c,m,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function Dh(){this.g=new ha}function lu(c,m,v){const T=v||"";try{Yr(c,function(j,W){let ae=j;y(j)&&(ae=ua(j)),m.push(T+W+"="+encodeURIComponent(ae))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function Tr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Tr,$i),Tr.prototype.g=function(){return new Xi(this.l,this.j)},Tr.prototype.i=(function(c){return function(){return c}})({});function Xi(c,m){yt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Xi,yt),n=Xi.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Mn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Vn(this):Mn(this),this.readyState==3&&uu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Vn(this))},n.Qa=function(c){this.g&&(this.response=c,Vn(this))},n.ga=function(){this.g&&Vn(this)};function Vn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Mn(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Mn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ir(c){let m="";return ne(c,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function ri(c,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Ir(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Ke(c,m,v))}function tt(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(tt,yt);var Lh=/^https?$/i,Ea=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Ls(this.o):Ls(bn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(W){Zi(this,W);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())v.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ea,m,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of v)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ks(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){Zi(this,W)}};function Zi(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Hs(c),dn(c)}function Hs(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),dn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},n.bb=function(){Ta(this)};function Ta(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Xt(c)!=4||c.Z()!=2)){if(c.u&&Xt(c)==4)oa(c.Ea,0,c);else if(vt(c,"readystatechange"),Xt(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ae===0){var j=String(c.D).match(Ji)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!Lh.test(j?j.toLowerCase():"")}v=T}if(v)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var W=2<Xt(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Hs(c)}}finally{dn(c)}}}}function dn(c,m){if(c.g){Ks(c);const v=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||vt(c,"ready");try{v.onreadystatechange=T}catch{}}}function Ks(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Xt(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ca(m)}};function Ia(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Gs(c){const m={};c=(c.g&&2<=Xt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(H(c[T]))continue;var v=D(c[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[j]||[];m[j]=W,W.push(v)}P(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function er(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Sa(c){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=er("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=er("baseRetryDelayMs",5e3,c),this.cb=er("retryDelaySeedMs",1e4,c),this.Wa=er("forwardChannelMaxRetries",2,c),this.wa=er("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(c&&c.concurrentRequestLimit),this.Da=new Dh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sa.prototype,n.la=8,n.G=1,n.connect=function(c,m,v,T){lt(0),this.W=c,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=fu(this,null,this.W),tr(this)};function Nt(c){if(Qs(c),c.G==3){var m=c.U++,v=hn(c.I);if(Ke(v,"SID",c.K),Ke(v,"RID",m),Ke(v,"TYPE","terminate"),Sr(c,v),m=new On(c,c.j,m),m.L=2,m.v=ei(hn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=pu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}du(c)}function Fn(c){c.g&&(Aa(c),c.g.cancel(),c.g=null)}function Qs(c){Fn(c),c.u&&(d.clearTimeout(c.u),c.u=null),Xs(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function tr(c){if(!cn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ue||le(),oe||(Ue(),oe=!0),ye.add(m,c),c.B=0}}function Vh(c,m){return eu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Nn(A(c.Ga,c,m),hu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new On(this,this.j,c);let W=this.o;if(this.S&&(W?(W=I(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ii(this,j,m),v=hn(this.I),Ke(v,"RID",c),Ke(v,"CVER",22),this.D&&Ke(v,"X-HTTP-Session-Id",this.D),Sr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Ir(W)))+"&"+m:this.m&&ri(v,this.m,W)),_a(this.h,j),this.Ua&&Ke(v,"TYPE","init"),this.P?(Ke(v,"$req",m),Ke(v,"SID","null"),j.T=!0,zs(j,v,null)):zs(j,v,m),this.G=2}}else this.G==3&&(c?Js(this,c):this.i.length==0||cn(this.h)||Js(this))};function Js(c,m){var v;m?v=m.l:v=c.U++;const T=hn(c.I);Ke(T,"SID",c.K),Ke(T,"RID",v),Ke(T,"AID",c.T),Sr(c,T),c.m&&c.o&&ri(T,c.m,c.o),v=new On(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ii(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_a(c.h,v),zs(v,T,m)}function Sr(c,m){c.H&&ne(c.H,function(v,T){Ke(m,T,v)}),c.l&&Yr({},function(v,T){Ke(m,T,v)})}function ii(c,m,v){v=Math.min(c.i.length,v);var T=c.l?A(c.l.Na,c.l,c):null;e:{var j=c.i;let W=-1;for(;;){const ae=["count="+v];W==-1?0<v?(W=j[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let We=!0;for(let _t=0;_t<v;_t++){let Me=j[_t].g;const St=j[_t].map;if(Me-=W,0>Me)W=Math.max(0,j[_t].g-100),We=!1;else try{lu(St,ae,"req"+Me+"_")}catch{T&&T(St)}}if(We){T=ae.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,T}function es(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ue||le(),oe||(Ue(),oe=!0),ye.add(m,c),c.v=0}}function Ys(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Nn(A(c.Fa,c),hu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Nn(A(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Fn(this),cu(this))};function Aa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function cu(c){c.g=new On(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=hn(c.qa);Ke(m,"RID","rpc"),Ke(m,"SID",c.K),Ke(m,"AID",c.T),Ke(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(m,"TO",c.ja),Ke(m,"TYPE","xmlhttp"),Sr(c,m),c.m&&c.o&&ri(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ei(hn(m)),v.m=null,v.P=!0,ya(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),Ys(this),lt(19))};function Xs(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Zs(c,m){var v=null;if(c.g==m){Xs(c),Aa(c),c.g=null;var T=2}else if(Ht(c.h,m))v=m.D,tu(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;T=qi(),vt(T,new Fs(T,v)),tr(c)}else es(c);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&Vh(c,m)||T==2&&Ys(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),j){case 1:Ar(c,5);break;case 4:Ar(c,10);break;case 3:Ar(c,6);break;default:Ar(c,2)}}}function hu(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function Ar(c,m){if(c.j.info("Error code "+m),m==2){var v=A(c.fb,c),T=c.Xa;const j=!T;T=new Er(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Yi(T,"https"),ei(T),j?Oh(T.toString(),v):au(T.toString(),v)}else lt(2);c.G=0,c.l&&c.l.sa(m),du(c),Qs(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function du(c){if(c.G=0,c.ka=[],c.l){const m=nu(c.h);(m.length!=0||c.i.length!=0)&&(N(c.ka,m),N(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function fu(c,m,v){var T=v instanceof Er?hn(v):new Er(v);if(T.g!="")m&&(T.g=m+"."+T.g),Xr(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new Er(null);T&&Yi(W,T),m&&(W.g=m),j&&Xr(W,j),v&&(W.l=v),T=W}return v=c.D,m=c.ya,v&&m&&Ke(T,v,m),Ke(T,"VER",c.la),Sr(c,T),T}function pu(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new tt(new Tr({eb:v})):new tt(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ra(){}n=Ra.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function eo(){}eo.prototype.g=function(c,m){return new Kt(c,m)};function Kt(c,m){yt.call(this),this.g=new Sa(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!H(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new nr(this)}x(Kt,yt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Nt(this.g)},Kt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ua(c),c=v);m.i.push(new Zl(m.Ya++,c)),m.G==3&&tr(m)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Kt.aa.N.call(this)};function mu(c){Jn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}x(mu,Jn);function gu(){Ms.call(this),this.status=1}x(gu,Ms);function nr(c){this.g=c}x(nr,Ra),nr.prototype.ua=function(){vt(this.g,"a")},nr.prototype.ta=function(c){vt(this.g,new mu(c))},nr.prototype.sa=function(c){vt(this.g,new gu)},nr.prototype.ra=function(){vt(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Nw=function(){return new eo},kw=function(){return qi()},Pw=Yn,Ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,Ic=js,Ql.COMPLETE="complete",Cw=Ql,Vs.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",yt.prototype.listen=yt.prototype.K,sl=Vs,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Rw=tt}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new cp("@firebase/firestore");function Ya(){return Is.logLevel}function pe(n,...e){if(Is.logLevel<=Le.DEBUG){const t=e.map(Tp);Is.debug(`Firestore (${Ko}): ${n}`,...t)}}function zr(n,...e){if(Is.logLevel<=Le.ERROR){const t=e.map(Tp);Is.error(`Firestore (${Ko}): ${n}`,...t)}}function Vo(n,...e){if(Is.logLevel<=Le.WARN){const t=e.map(Tp);Is.warn(`Firestore (${Ko}): ${n}`,...t)}}function Tp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function He(n,e){n||Ie()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class $R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qR{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ur,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ur)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string"),new xw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new zt(e)}}class WR{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HR{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new WR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){He(this.o===void 0);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string"),this.R=t.token,new KR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=QR(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function ze(n,e){return n<e?-1:n>e?1:0}function Mo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Tt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Tt(0,0))}static max(){return new Ae(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(),i===void 0?i=e.length-t:i>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends yl{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const JR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends yl{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return JR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function YR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new Oi(o,ve.empty(),e)}function XR(n){return new Oi(n.readTime,n.key,-1)}class Oi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oi(Ae.min(),ve.empty(),-1)}static max(){return new Oi(Ae.max(),ve.empty(),-1)}}function ZR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==eC)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((_=>{u[y]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function nC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ip.oe=-1;function sh(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function rC(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ow(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new Lt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Dw("Invalid base64 string: "+a):a}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const iC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(n){if(He(!!n),typeof n=="string"){let e=0;const t=iC.exec(n);if(He(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ap(n){const e=n.mapValue.fields.__previous_value__;return Sp(e)?Ap(e):e}function vl(n){const e=Di(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,i,o,a,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class _l{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={mapValue:{}};function As(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sp(n)?4:aC(n)?9007199254740991:oC(n)?10:11:Ie()}function pr(n,e){if(n===e)return!0;const t=As(n);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vl(n).isEqual(vl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Di(o.timestampValue),d=Di(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Ss(o.bytesValue).isEqual(Ss(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return ct(o.geoPointValue.latitude)===ct(a.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return ct(o.integerValue)===ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ct(o.doubleValue),d=ct(a.doubleValue);return u===d?zc(u)===zc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Mo(n.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(dv(u)!==dv(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!pr(u[p],d[p])))return!1;return!0})(n,e);default:return Ie()}}function wl(n,e){return(n.values||[]).find((t=>pr(t,e)))!==void 0}function Fo(n,e){if(n===e)return 0;const t=As(n),i=As(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=ct(a.integerValue||a.doubleValue),p=ct(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return pv(n.timestampValue,e.timestampValue);case 4:return pv(vl(n),vl(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Ss(a),p=Ss(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=ze(d[y],p[y]);if(_!==0)return _}return ze(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ze(ct(a.latitude),ct(u.latitude));return d!==0?d:ze(ct(a.longitude),ct(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mv(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,y,_;const E=a.fields||{},A=u.fields||{},M=(d=E.value)===null||d===void 0?void 0:d.arrayValue,x=(p=A.value)===null||p===void 0?void 0:p.arrayValue,F=ze(((y=M?.values)===null||y===void 0?void 0:y.length)||0,((_=x?.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:mv(M,x)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===fc.mapValue&&u===fc.mapValue)return 0;if(a===fc.mapValue)return 1;if(u===fc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const A=ze(p[E],_[E]);if(A!==0)return A;const M=Fo(d[p[E]],y[_[E]]);if(M!==0)return M}return ze(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie()}}function pv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Di(n),i=Di(e),o=ze(t.seconds,i.seconds);return o!==0?o:ze(t.nanos,i.nanos)}function mv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Fo(t[o],i[o]);if(a)return a}return ze(t.length,i.length)}function Uo(n){return Uf(n)}function Uf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Uf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Uf(t.fields[u])}`;return o+"}"})(n.mapValue):Ie()}function gv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jf(n){return!!n&&"integerValue"in n}function Rp(n){return!!n&&"arrayValue"in n}function yv(n){return!!n&&"nullValue"in n}function vv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sc(n){return!!n&&"mapValue"in n}function oC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=cl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Cs(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new an(cl(this.value))}}function Lw(n){const e=[];return Cs(n.fields,((t,i)=>{const o=new Dt([t]);if(Sc(i)){const a=Lw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),an.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ae.min(),Ae.min(),an.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ae.min(),Ae.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.position=e,this.inclusive=t}}function _v(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),t.key):i=Fo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function wv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t="asc"){this.field=e,this.dir=t}}function lC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class mt extends Vw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new cC(e,t,i):t==="array-contains"?new fC(e,i):t==="in"?new pC(e,i):t==="not-in"?new mC(e,i):t==="array-contains-any"?new gC(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new hC(e,i):new dC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fo(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends Vw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Kn(e,t)}matches(e){return Mw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Mw(n){return n.op==="and"}function Fw(n){return uC(n)&&Mw(n)}function uC(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function Bf(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(Fw(n))return n.filters.map((e=>Bf(e))).join(",");{const e=n.filters.map((t=>Bf(t))).join(",");return`${n.op}(${e})`}}function Uw(n,e){return n instanceof mt?(function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&pr(i.value,o.value)})(n,e):n instanceof Kn?(function(i,o){return o instanceof Kn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Uw(u,o.filters[d])),!0):!1})(n,e):void Ie()}function jw(n){return n instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof Kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(jw).join(" ,")+"}"})(n):"Filter"}class cC extends mt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class hC extends mt{constructor(e,t){super(e,"in",t),this.keys=Bw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dC extends mt{constructor(e,t){super(e,"not-in",t),this.keys=Bw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Bw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class fC extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rp(t)&&wl(t.arrayValue,this.value)}}class pC extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wl(this.value.arrayValue,t)}}class mC extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!wl(this.value.arrayValue,t)}}class gC extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function Ev(n,e=null,t=[],i=[],o=null,a=null,u=null){return new yC(n,e,t,i,o,a,u)}function Cp(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Bf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Uo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Uo(i))).join(",")),e.ue=t}return e.ue}function Pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Uw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wv(n.startAt,e.startAt)&&wv(n.endAt,e.endAt)}function zf(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vC(n,e,t,i,o,a,u,d){return new Go(n,e,t,i,o,a,u,d)}function oh(n){return new Go(n)}function Tv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zw(n){return n.collectionGroup!==null}function hl(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Lt(Dt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new El(a,i))})),t.has(Dt.keyField().canonicalString())||e.ce.push(new El(Dt.keyField(),i))}return e.ce}function hr(n){const e=Re(n);return e.le||(e.le=_C(e,hl(n))),e.le}function _C(n,e){if(n.limitType==="F")return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new El(o.field,a)}));const t=n.endAt?new $c(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $c(n.startAt.position,n.startAt.inclusive):null;return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function $f(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qc(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ah(n,e){return Pp(hr(n),hr(e))&&n.limitType===e.limitType}function $w(n){return`${Cp(hr(n))}|lt:${n.limitType}`}function So(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>jw(o))).join(", ")}]`),sh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${i})`})(hr(n))}; limitType=${n.limitType})`}function lh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of hl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const y=_v(u,d,p);return u.inclusive?y<=0:y<0})(i.startAt,hl(i),o)||i.endAt&&!(function(u,d,p){const y=_v(u,d,p);return u.inclusive?y>=0:y>0})(i.endAt,hl(i),o))})(n,e)}function wC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qw(n){return(e,t)=>{let i=!1;for(const o of hl(n)){const a=EC(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function EC(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?Fo(p,y):Ie()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return Ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new ot(ve.comparator);function $r(){return TC}const Ww=new ot(ve.comparator);function ol(...n){let e=Ww;for(const t of n)e=e.insert(t.key,t);return e}function Hw(n){let e=Ww;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function gs(){return dl()}function Kw(){return dl()}function dl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IC=new ot(ve.comparator),SC=new Lt(ve.comparator);function be(...n){let e=SC;for(const t of n)e=e.add(t);return e}const AC=new Lt(ze);function RC(){return AC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function Gw(n){return{integerValue:""+n}}function CC(n,e){return rC(e)?Gw(e):kp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function PC(n,e,t){return n instanceof Tl?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Sp(a)&&(a=Ap(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Il?Jw(n,e):n instanceof Sl?Yw(n,e):(function(o,a){const u=Qw(o,a),d=Iv(u)+Iv(o.Pe);return jf(u)&&jf(o.Pe)?Gw(d):kp(o.serializer,d)})(n,e)}function kC(n,e,t){return n instanceof Il?Jw(n,e):n instanceof Sl?Yw(n,e):t}function Qw(n,e){return n instanceof Wc?(function(i){return jf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Tl extends uh{}class Il extends uh{constructor(e){super(),this.elements=e}}function Jw(n,e){const t=Xw(e);for(const i of n.elements)t.some((o=>pr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Sl extends uh{constructor(e){super(),this.elements=e}}function Yw(n,e){let t=Xw(e);for(const i of n.elements)t=t.filter((o=>!pr(o,i)));return{arrayValue:{values:t}}}class Wc extends uh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Iv(n){return ct(n.integerValue||n.doubleValue)}function Xw(n){return Rp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.field=e,this.transform=t}}function xC(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Il&&o instanceof Il||i instanceof Sl&&o instanceof Sl?Mo(i.elements,o.elements,pr):i instanceof Wc&&o instanceof Wc?pr(i.Pe,o.Pe):i instanceof Tl&&o instanceof Tl})(n.transform,e.transform)}class bC{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ch{}function Zw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Np(n.key,Wn.none()):new Vl(n.key,n.data,Wn.none());{const t=n.data,i=an.empty();let o=new Lt(Dt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ui(n.key,i,new vn(o.toArray()),Wn.none())}}function OC(n,e,t){n instanceof Vl?(function(o,a,u){const d=o.value.clone(),p=Av(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ui?(function(o,a,u){if(!Ac(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Av(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(eE(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fl(n,e,t,i){return n instanceof Vl?(function(a,u,d,p){if(!Ac(a.precondition,u))return d;const y=a.value.clone(),_=Rv(a.fieldTransforms,p,u);return y.setAll(_),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ui?(function(a,u,d,p){if(!Ac(a.precondition,u))return d;const y=Rv(a.fieldTransforms,p,u),_=u.data;return _.setAll(eE(a)),_.setAll(y),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Ac(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function DC(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=Qw(i.transform,o||null);a!=null&&(t===null&&(t=an.empty()),t.set(i.field,a))}return t||null}function Sv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((a,u)=>xC(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vl extends ch{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ui extends ch{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function eE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Av(n,e,t){const i=new Map;He(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,kC(u,d,t[o]))}return i}function Rv(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,PC(a,u,e))}return i}class Np extends ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LC extends ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&OC(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Kw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=Zw(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>Sv(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>Sv(t,i)))}}class xp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length);let o=(function(){return IC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new xp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Fe;function UC(n){switch(n){default:return Ie();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function tE(n){if(n===void 0)return zr("GRPC error has no .code"),J.UNKNOWN;switch(n){case pt.OK:return J.OK;case pt.CANCELLED:return J.CANCELLED;case pt.UNKNOWN:return J.UNKNOWN;case pt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case pt.INTERNAL:return J.INTERNAL;case pt.UNAVAILABLE:return J.UNAVAILABLE;case pt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case pt.NOT_FOUND:return J.NOT_FOUND;case pt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case pt.ABORTED:return J.ABORTED;case pt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case pt.DATA_LOSS:return J.DATA_LOSS;default:return Ie()}}(Fe=pt||(pt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new vs([4294967295,4294967295],0);function Cv(n){const e=jC().encode(n),t=new Aw;return t.update(e),new Uint8Array(t.digest())}function Pv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([t,i],0),new vs([o,a],0)]}class bp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new al(`Invalid padding: ${t}`);if(i<0)throw new al(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new al(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=vs.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(vs.fromNumber(i)));return o.compare(BC)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Cv(e),[i,o]=Pv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new bp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=Cv(e),[i,o]=Pv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hh(Ae.min(),o,new ot(ze),$r(),be())}}class Ml{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ml(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class nE{constructor(e,t){this.targetId=e,this.me=t}}class rE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class kv{constructor(){this.fe=0,this.ge=xv(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),i=be();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie()}})),new Ml(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=xv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zC{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=Nv(),this.Qe=new ot(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ie()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const a=o.target;if(zf(a))if(i===0){const u=new ve(a.path);this.Ue(t,u,$t.newNoDocument(u,Ae.min()))}else He(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),p=d?this.Xe(d,e,u):1;if(p!==0){this.je(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,y)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Ss(i).toUint8Array()}catch(p){if(p instanceof Dw)return Vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new bp(u,o,a)}catch(p){return Vo(p instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&zf(d.target)){const p=new ve(d.target.path);this.ke.get(p)!==null||this.it(u,p)||this.Ue(u,p,$t.newNoDocument(p,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let i=be();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new hh(e,t,this.Qe,this.ke,i);return this.ke=$r(),this.qe=Nv(),this.Qe=new ot(ze),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kv),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Nv(){return new ot(ve.comparator)}function xv(){return new ot(ve.comparator)}const $C={asc:"ASCENDING",desc:"DESCENDING"},qC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WC={and:"AND",or:"OR"};class HC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qf(n,e){return n.useProto3Json||sh(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KC(n,e){return Hc(n,e.toTimestamp())}function dr(n){return He(!!n),Ae.fromTimestamp((function(t){const i=Di(t);return new Tt(i.seconds,i.nanos)})(n))}function Op(n,e){return Wf(n,e).canonicalString()}function Wf(n,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sE(n){const e=et.fromString(n);return He(cE(e)),e}function Hf(n,e){return Op(n.databaseId,e.path)}function mf(n,e){const t=sE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(aE(t))}function oE(n,e){return Op(n.databaseId,e)}function GC(n){const e=sE(n);return e.length===4?et.emptyPath():aE(e)}function Kf(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aE(n){return He(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function bv(n,e,t){return{name:Hf(n,e),fields:t.value.mapValue.fields}}function QC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,_){return y.useProto3Json?(He(_===void 0||typeof _=="string"),Vt.fromBase64String(_||"")):(He(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Vt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const _=y.code===void 0?J.UNKNOWN:tE(y.code);return new ce(_,y.message||"")})(u);t=new rE(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=mf(n,i.document.name),a=dr(i.document.updateTime),u=i.document.createTime?dr(i.document.createTime):Ae.min(),d=new an({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,a,u,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Rc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=mf(n,i.document),a=i.readTime?dr(i.readTime):Ae.min(),u=$t.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Rc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=mf(n,i.document),a=i.removedTargetIds||[];t=new Rc([],a,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new FC(o,a),d=i.targetId;t=new nE(d,u)}}return t}function JC(n,e){let t;if(e instanceof Vl)t={update:bv(n,e.key,e.value)};else if(e instanceof Np)t={delete:Hf(n,e.key)};else if(e instanceof Ui)t={update:bv(n,e.key,e.data),updateMask:sP(e.fieldMask)};else{if(!(e instanceof LC))return Ie();t={verify:Hf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Tl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Il)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Sl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Ie()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:KC(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie()})(n,e.precondition)),t}function YC(n,e){return n&&n.length>0?(He(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?dr(o.updateTime):dr(a);return u.isEqual(Ae.min())&&(u=dr(a)),new bC(u,o.transformResults||[])})(t,e)))):[]}function XC(n,e){return{documents:[oE(n,e.path)]}}function ZC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=oE(n,o);const a=(function(y){if(y.length!==0)return uE(Kn.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:Ao(A.field),direction:nP(A.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=qf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:t,parent:o}}function eP(n){let e=GC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const A=lE(E);return A instanceof Kn&&Fw(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((A=>(function(x){return new El(Ro(x.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,sh(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,M=E.values||[];return new $c(M,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const A=!E.before,M=E.values||[];return new $c(M,A)})(t.endAt)),vC(e,o,u,a,d,"F",p,y)}function tP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ro(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ro(t.unaryFilter.field);return mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ro(t.unaryFilter.field);return mt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}})(n):n.fieldFilter!==void 0?(function(t){return mt.create(Ro(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kn.create(t.compositeFilter.filters.map((i=>lE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}})(t.compositeFilter.op))})(n):Ie()}function nP(n){return $C[n]}function rP(n){return qC[n]}function iP(n){return WC[n]}function Ao(n){return{fieldPath:n.canonicalString()}}function Ro(n){return Dt.fromServerFormat(n.fieldPath)}function uE(n){return n instanceof mt?(function(t){if(t.op==="=="){if(vv(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if(yv(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vv(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if(yv(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:rP(t.op),value:t.value}}})(n):n instanceof Kn?(function(t){const i=t.getFilters().map((o=>uE(o)));return i.length===1?i[0]:{compositeFilter:{op:iP(t.op),filters:i}}})(n):Ie()}function sP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t,i,o,a=Ae.min(),u=Ae.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.ct=e}}function aP(n){const e=eP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.un=new uP}addToCollectionParentIndex(e,t){return this.un.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Oi.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class uP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(et.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&fl(i.mutation,o,vn.empty(),Tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=be()){const o=gs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=ol();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=gs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,be())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=$r();const u=dl(),d=(function(){return dl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ui)?a=a.insert(y.key,y):_!==void 0?(u.set(y.key,_.mutation.getFieldMask()),fl(_.mutation,y,_.mutation.getFieldMask(),Tt.now())):u.set(y.key,vn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,_)=>u.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new hP(_,(E=u.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=dl();let o=new ot(((u,d)=>u-d)),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||vn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||be()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=Kw();_.forEach((A=>{if(!a.has(A)){const M=Zw(t.get(A),i.get(A));M!==null&&E.set(A,M),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return te.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):te.resolve(gs());let d=-1,p=a;return u.next((y=>te.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,be()))).next((_=>({batchId:d,changes:Hw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=ol();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=ol();return this.indexManager.getCollectionParents(e,a).next((d=>te.forEach(d,(p=>{const y=(function(E,A){return new Go(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,A)=>{u=u.insert(E,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,y)=>{const _=y.getKey();u.get(_)===null&&(u=u.insert(_,$t.newInvalidDocument(_)))}));let d=ol();return u.forEach(((p,y)=>{const _=a.get(p);_!==void 0&&fl(_.mutation,y,vn.empty(),Tt.now()),lh(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return te.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:aP(o.bundledQuery),readTime:dr(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.overlays=new ot(ve.comparator),this.Ir=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gs();return te.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.ht(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=gs(),a=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new ot(((y,_)=>y-_));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=a.get(y.largestBatchId);_===null&&(_=gs(),a=a.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=gs(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return te.resolve(d)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new MC(t,i));let a=this.Ir.get(t);a===void 0&&(a=be(),this.Ir.set(t,a)),this.Ir.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this.Tr=new Lt(Pt.Er),this.dr=new Lt(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Pt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Pt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new ve(new et([])),i=new Pt(t,e),o=new Pt(t,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new et([])),i=new Pt(t,e),o=new Pt(t,e+1);let a=be();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Pt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Pt.Er)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new VC(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new Pt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),a=o<0?0:o;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(ze);return t.forEach((o=>{const a=new Pt(o,0),u=new Pt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),te.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new Pt(new ve(a),0);let d=new Lt(ze);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.wr)),!0)}),u),te.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return te.forEach(t.mutations,(o=>{const a=new Pt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Pt(t,0),o=this.br.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=$r();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():$t.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=$r();const u=t.path,d=new ve(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||ZR(XR(_),i)<=0||(o.has(_.key)||lh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie()}Or(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vP(this)}getSize(e){return te.resolve(this.size)}}class vP extends cP{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.persistence=e,this.Nr=new Qo((t=>Cp(t)),Pp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dp,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),te.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Kn(t),te.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),te.waitFor(a).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ip(0),this.Kr=!1,this.Kr=!0,this.$r=new mP,this.referenceDelegate=e(this),this.Ur=new _P(this),this.indexManager=new lP,this.remoteDocumentCache=(function(o){return new yP(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new oP(t),this.Gr=new fP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new gP(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new EP(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return te.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class EP extends tC{constructor(e){super(),this.currentSequenceNumber=e}}class Lp{constructor(e){this.persistence=e,this.Jr=new Dp,this.Yr=null}static Zr(e){return new Lp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),te.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Xr,(i=>{const o=ve.fromPath(i);return this.ei(e,o).next((a=>{a||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return te.or([()=>te.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=be(),o=be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Vp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return cI()?8:nC(Wt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new TP;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Ya()<=Le.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),te.resolve()):(Ya()<=Le.DEBUG&&pe("QueryEngine","Query:",So(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ya()<=Le.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):te.resolve())}Yi(e,t){if(Tv(t))return te.resolve(null);let i=hr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qc(t,null,"F"),i=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=be(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(t,d);return this.ns(t,y,u,p.readTime)?this.Yi(e,qc(t,null,"F")):this.rs(e,y,t,p)}))))})))))}Zi(e,t,i,o){return Tv(t)||o.isEqual(Ae.min())?te.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(t,a);return this.ns(t,u,i,o)?te.resolve(null):(Ya()<=Le.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(t)),this.rs(e,u,t,YR(o,-1)).next((d=>d)))}))}ts(e,t){let i=new Lt(qw(e));return t.forEach(((o,a)=>{lh(e,a)&&(i=i.add(a))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,i){return Ya()<=Le.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",So(t)),this.Ji.getDocumentsMatchingQuery(e,t,Oi.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(ze),this._s=new Qo((a=>Cp(a)),Pp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function AP(n,e,t,i){return new SP(n,e,t,i)}async function hE(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=be();for(const y of o){u.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of a){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function RP(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,_){const E=y.batch,A=E.keys();let M=te.resolve();return A.forEach((x=>{M=M.next((()=>_.getEntry(p,x))).next((F=>{const N=y.docVersions.get(x);He(N!==null),F.version.compareTo(N)<0&&(E.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),_.addEntry(F)))}))})),M.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=be();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function dE(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function CP(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;d.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,E))));let M=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,i)),o=o.insert(E,M),(function(F,N,Y){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(A,M,_)&&d.push(t.Ur.updateTargetData(a,M))}));let p=$r(),y=be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(PP(a,u,e.documentUpdates).next((_=>{p=_.Ps,y=_.Is}))),!i.isEqual(Ae.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return te.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.os=o,a)))}function PP(n,e,t){let i=be(),o=be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=$r();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):pe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ps:u,Is:o}}))}function kP(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function NP(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((a=>a?(o=a,te.resolve(o)):t.Ur.allocateTargetId(i).next((u=>(o=new Ai(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function Gf(n,e,t){const i=Re(n),o=i.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ll(u))throw u;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Ov(n,e,t){const i=Re(n);let o=Ae.min(),a=be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,_){const E=Re(p),A=E._s.get(_);return A!==void 0?te.resolve(E.os.get(A)):E.Ur.getTargetData(y,_)})(i,u,hr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?o:Ae.min(),t?a:be()))).next((d=>(xP(i,wC(e),d),{documents:d,Ts:a})))))}function xP(n,e,t){let i=n.us.get(e)||Ae.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.us.set(e,i)}class Dv{constructor(){this.activeTargetIds=RC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bP{constructor(){this.so=new Dv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc=null;function gf(){return pc===null?pc=(function(){return 268435456+Math.round(2147483648*Math.random())})():pc++,"0x"+pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class VP extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,i,o,a,u){const d=gf(),p=this.xo(t,i.toUriEncodedString());pe("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,a,u),this.No(t,p,y,o).then((_=>(pe("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw Vo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(t,i,o,a,u,d){return this.Mo(t,i,o,a,u)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,i){const o=DP[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const a=gf();return new Promise(((u,d)=>{const p=new Rw;p.setWithCredentials(!0),p.listenOnce(Cw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Ic.NO_ERROR:const _=p.getResponseJson();pe(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Ic.TIMEOUT:pe(Bt,`RPC '${e}' ${a} timed out`),d(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const E=p.getStatus();if(pe(Bt,`RPC '${e}' ${a} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const M=A?.error;if(M&&M.status&&M.message){const x=(function(N){const Y=N.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN})(M.status);d(new ce(x,M.message))}else d(new ce(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{pe(Bt,`RPC '${e}' ${a} completed.`)}}));const y=JSON.stringify(o);pe(Bt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",y,i,15)}))}Bo(e,t,i){const o=gf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Nw(),d=kw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");pe(Bt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);let A=!1,M=!1;const x=new LP({Io:N=>{M?pe(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(A||(pe(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),pe(Bt,`RPC '${e}' stream ${o} sending:`,N),E.send(N))},To:()=>E.close()}),F=(N,Y,H)=>{N.listen(Y,(X=>{try{H(X)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return F(E,sl.EventType.OPEN,(()=>{M||(pe(Bt,`RPC '${e}' stream ${o} transport opened.`),x.yo())})),F(E,sl.EventType.CLOSE,(()=>{M||(M=!0,pe(Bt,`RPC '${e}' stream ${o} transport closed`),x.So())})),F(E,sl.EventType.ERROR,(N=>{M||(M=!0,Vo(Bt,`RPC '${e}' stream ${o} transport errored:`,N),x.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),F(E,sl.EventType.MESSAGE,(N=>{var Y;if(!M){const H=N.data[0];He(!!H);const X=H,ie=X.error||((Y=X[0])===null||Y===void 0?void 0:Y.error);if(ie){pe(Bt,`RPC '${e}' stream ${o} received error:`,ie);const G=ie.status;let ne=(function(S){const k=pt[S];if(k!==void 0)return tE(k)})(G),P=ie.message;ne===void 0&&(ne=J.INTERNAL,P="Unknown error status: "+G+" with message "+ie.message),M=!0,x.So(new ce(ne,P)),E.close()}else pe(Bt,`RPC '${e}' stream ${o} received:`,H),x.bo(H)}})),F(d,Pw.STAT_EVENT,(N=>{N.stat===Ff.PROXY?pe(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===Ff.NOPROXY&&pe(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{x.wo()}),0),x}}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){return new HC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,i,o,a,u,d,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MP extends pE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=QC(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ae.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?dr(u.readTime):Ae.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Kf(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=zf(p)?{documents:XC(a,p)}:{query:ZC(a,p)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=iE(a,u.resumeToken);const y=qf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Hc(a,u.snapshotVersion.toTimestamp());const y=qf(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=tP(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Kf(this.serializer),t.removeTarget=e,this.a_(t)}}class FP extends pE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=YC(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Kf(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>JC(this.serializer,i)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Wf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())}))}Lo(e,t,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,Wf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class jP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zr(t),this.D_=!1):pe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{Ps(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.L_.add(4),await Fl(y),y.q_.set("Unknown"),y.L_.delete(4),await fh(y)})(this))}))})),this.q_=new jP(i,o)}}async function fh(n){if(Ps(n))for(const e of n.B_)await e(!0)}async function Fl(n){for(const e of n.B_)await e(!1)}function mE(n,e){const t=Re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),jp(t)?Up(t):Jo(t).r_()&&Fp(t,e))}function Mp(n,e){const t=Re(n),i=Jo(t);t.N_.delete(e),i.r_()&&gE(t,e),t.N_.size===0&&(i.r_()?i.o_():Ps(t)&&t.q_.set("Unknown"))}function Fp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).A_(e)}function gE(n,e){n.Q_.xe(e),Jo(n).R_(e)}function Up(n){n.Q_=new zC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.q_.v_()}function jp(n){return Ps(n)&&!Jo(n).n_()&&n.N_.size>0}function Ps(n){return Re(n).L_.size===0}function yE(n){n.Q_=void 0}async function zP(n){n.q_.set("Online")}async function $P(n){n.N_.forEach(((e,t)=>{Fp(n,e)}))}async function qP(n,e){yE(n),jp(n)?(n.q_.M_(e),Up(n)):n.q_.set("Unknown")}async function WP(n,e,t){if(n.q_.set("Online"),e instanceof rE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(i){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kc(n,i)}else if(e instanceof Rc?n.Q_.Ke(e):e instanceof nE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{const i=await dE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.N_.get(y);_&&a.N_.set(y,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const _=a.N_.get(p);if(!_)return;a.N_.set(p,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),gE(a,p);const E=new Ai(_.target,p,y,_.sequenceNumber);Fp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe("RemoteStore","Failed to raise snapshot:",i),await Kc(n,i)}}async function Kc(n,e,t){if(!Ll(e))throw e;n.L_.add(1),await Fl(n),n.q_.set("Offline"),t||(t=()=>dE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await fh(n)}))}function vE(n,e){return e().catch((t=>Kc(n,t,e)))}async function ph(n){const e=Re(n),t=Li(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HP(e);)try{const o=await kP(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,KP(e,o)}catch(o){await Kc(e,o)}_E(e)&&wE(e)}function HP(n){return Ps(n)&&n.O_.length<10}function KP(n,e){n.O_.push(e);const t=Li(n);t.r_()&&t.V_&&t.m_(e.mutations)}function _E(n){return Ps(n)&&!Li(n).n_()&&n.O_.length>0}function wE(n){Li(n).start()}async function GP(n){Li(n).p_()}async function QP(n){const e=Li(n);for(const t of n.O_)e.m_(t.mutations)}async function JP(n,e,t){const i=n.O_.shift(),o=xp.from(i,e,t);await vE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ph(n)}async function YP(n,e){e&&Li(n).V_&&await(async function(i,o){if((function(u){return UC(u)&&u!==J.ABORTED})(o.code)){const a=i.O_.shift();Li(i).s_(),await vE(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await ph(i)}})(n,e),_E(n)&&wE(n)}async function Vv(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const i=Ps(t);t.L_.add(3),await Fl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await fh(t)}async function XP(n,e){const t=Re(n);e?(t.L_.delete(2),await fh(t)):e||(t.L_.add(2),await Fl(t),t.q_.set("Unknown"))}function Jo(n){return n.K_||(n.K_=(function(t,i,o){const a=Re(t);return a.w_(),new MP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:zP.bind(null,n),Ro:$P.bind(null,n),mo:qP.bind(null,n),d_:WP.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),jp(n)?Up(n):n.q_.set("Unknown")):(await n.K_.stop(),yE(n))}))),n.K_}function Li(n){return n.U_||(n.U_=(function(t,i,o){const a=Re(t);return a.w_(),new FP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GP.bind(null,n),mo:YP.bind(null,n),f_:QP.bind(null,n),g_:JP.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await ph(n)):(await n.U_.stop(),n.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Bp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Ll(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=ol(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new Oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Oo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.W_=new ot(ve.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Bo{constructor(e,t,i,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Bo(e,t,Oo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ek{constructor(){this.queries=Fv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Re(t),a=o.queries;o.queries=Fv(),a.forEach(((u,d)=>{for(const p of d.j_)p.onError(i)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function Fv(){return new Qo((n=>$w(n)),ah)}async function $p(n,e){const t=Re(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new ZP,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=zp(u,`Initialization of query '${So(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Wp(t)}async function qp(n,e){const t=Re(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function tk(n,e){const t=Re(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&Wp(t)}function nk(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(t);i.queries.delete(e)}function Wp(n){n.Y_.forEach((e=>{e.next()}))}var Qf,Uv;(Uv=Qf||(Qf={})).ea="default",Uv.Cache="cache";class Hp{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class rk{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=qw(e),this.Ra=new Oo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Mv,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),M=lh(this.query,E)?E:null,x=!!A&&this.mutatedKeys.has(A.key),F=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let N=!1;A&&M?A.data.isEqual(M.data)?x!==F&&(i.track({type:3,doc:M}),N=!0):this.ga(A,M)||(i.track({type:2,doc:M}),N=!0,(p&&this.Aa(M,p)>0||y&&this.Aa(M,y)<0)&&(d=!0)):!A&&M?(i.track({type:0,doc:M}),N=!0):A&&!M&&(i.track({type:1,doc:A}),N=!0,(p||y)&&(d=!0)),N&&(M?(u=u.add(M),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(M,x){const F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return F(M)-F(x)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,u.length!==0||y?{snapshot:new Bo(this.query,e.Ra,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new TE(i))})),this.da.forEach((i=>{e.has(i)||t.push(new EE(i))})),t}ba(e){this.Ta=e.Ts,this.da=be();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ik{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sk{constructor(e){this.key=e,this.va=!1}}class ok{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Qo((d=>$w(d)),ah),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ve.comparator),this.Na=new Map,this.La=new Dp,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ak(n,e,t=!0){const i=PE(n);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await IE(i,e,t,!0),o}async function lk(n,e){const t=PE(n);await IE(t,e,!0,!1)}async function IE(n,e,t,i){const o=await NP(n.localStore,hr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await uk(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&mE(n.remoteStore,o),d}async function uk(n,e,t,i,o){n.Ka=(E,A,M)=>(async function(F,N,Y,H){let X=N.view.ma(Y);X.ns&&(X=await Ov(F.localStore,N.query,!1).then((({documents:P})=>N.view.ma(P,X))));const ie=H&&H.targetChanges.get(N.targetId),G=H&&H.targetMismatches.get(N.targetId)!=null,ne=N.view.applyChanges(X,F.isPrimaryClient,ie,G);return Bv(F,N.targetId,ne.wa),ne.snapshot})(n,E,A,M);const a=await Ov(n.localStore,e,!0),u=new rk(e,a.Ts),d=u.ma(a.documents),p=Ml.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=u.applyChanges(d,n.isPrimaryClient,p);Bv(n,t,y.wa);const _=new ik(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),y.snapshot}async function ck(n,e,t){const i=Re(n),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!ah(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Mp(i.remoteStore,o.targetId),Jf(i,o.targetId)})).catch(Dl)):(Jf(i,o.targetId),await Gf(i.localStore,o.targetId,!0))}async function hk(n,e){const t=Re(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Mp(t.remoteStore,i.targetId))}async function dk(n,e,t){const i=_k(n);try{const o=await(function(u,d){const p=Re(u),y=Tt.now(),_=d.reduce(((M,x)=>M.add(x.key)),be());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let x=$r(),F=be();return p.cs.getEntries(M,_).next((N=>{x=N,x.forEach(((Y,H)=>{H.isValidDocument()||(F=F.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,x))).next((N=>{E=N;const Y=[];for(const H of d){const X=DC(H,E.get(H.key).overlayedDocument);X!=null&&Y.push(new Ui(H.key,X,Lw(X.value.mapValue),Wn.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,Y,d)})).next((N=>{A=N;const Y=N.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(M,N.batchId,Y)}))})).then((()=>({batchId:A.batchId,changes:Hw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Ba[u.currentUser.toKey()];y||(y=new ot(ze)),y=y.insert(d,p),u.Ba[u.currentUser.toKey()]=y})(i,o.batchId,t),await Ul(i,o.changes),await ph(i.remoteStore)}catch(o){const a=zp(o,"Failed to persist write");t.reject(a)}}async function SE(n,e){const t=Re(n);try{const i=await CP(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?He(u.va):o.removedDocuments.size>0&&(He(u.va),u.va=!1))})),await Ul(t,i,e)}catch(i){await Dl(i)}}function jv(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Re(u);p.onlineState=d;let y=!1;p.queries.forEach(((_,E)=>{for(const A of E.j_)A.Z_(d)&&(y=!0)})),y&&Wp(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fk(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new ot(ve.comparator);u=u.insert(a,$t.newNoDocument(a,Ae.min()));const d=be().add(a),p=new hh(Ae.min(),new Map,new ot(ze),u,d);await SE(i,p),i.Oa=i.Oa.remove(a),i.Na.delete(e),Kp(i)}else await Gf(i.localStore,e,!1).then((()=>Jf(i,e,t))).catch(Dl)}async function pk(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await RP(t.localStore,e);RE(t,i,null),AE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ul(t,o)}catch(o){await Dl(o)}}async function mk(n,e,t){const i=Re(n);try{const o=await(function(u,d){const p=Re(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(He(E!==null),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);RE(i,e,t),AE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ul(i,o)}catch(o){await Dl(o)}}function AE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function RE(n,e,t){const i=Re(n);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||CE(n,i)}))}function CE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Mp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Kp(n))}function Bv(n,e,t){for(const i of t)i instanceof EE?(n.La.addReference(i.key,e),gk(n,i)):i instanceof TE?(pe("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||CE(n,i.key)):Ie()}function gk(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(pe("SyncEngine","New document in limbo: "+t),n.xa.add(i),Kp(n))}function Kp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ve(et.fromString(e)),i=n.qa.next();n.Na.set(i,new sk(t)),n.Oa=n.Oa.insert(t,i),mE(n.remoteStore,new Ai(hr(oh(t.path)),i,"TargetPurposeLimboResolution",Ip.oe))}}async function Ul(n,e,t){const i=Re(n),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,p)=>{u.push(i.Ka(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Vp.Wi(p.targetId,y);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(p,y){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(y,(A=>te.forEach(A.$i,(M=>_.persistence.referenceDelegate.addReference(E,A.targetId,M))).next((()=>te.forEach(A.Ui,(M=>_.persistence.referenceDelegate.removeReference(E,A.targetId,M)))))))))}catch(E){if(!Ll(E))throw E;pe("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const M=_.os.get(A),x=M.snapshotVersion,F=M.withLastLimboFreeSnapshotVersion(x);_.os=_.os.insert(A,F)}}})(i.localStore,a))}async function yk(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const i=await hE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((p=>{p.reject(new ce(J.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ul(t,i.hs)}}function vk(n,e){const t=Re(n),i=t.Na.get(e);if(i&&i.va)return be().add(i.key);{let o=be();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const d=t.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function PE(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fk.bind(null,e),e.Ca.d_=tk.bind(null,e.eventManager),e.Ca.$a=nk.bind(null,e.eventManager),e}function _k(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mk.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return AP(this.persistence,new IP,e.initialUser,this.serializer)}Ga(e){return new wP(Lp.Zr,this.serializer)}Wa(e){return new bP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class Yf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yk.bind(null,this.syncEngine),await XP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ek})()}createDatastore(e){const t=dh(e.databaseInfo.databaseId),i=(function(a){return new VP(a)})(e.databaseInfo);return(function(a,u,d,p){return new UP(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new BP(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>jv(this.syncEngine,t,0)),(function(){return Lv.D()?new Lv:new OP})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,_){const E=new ok(o,a,u,d,p,y);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Re(o);pe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Fl(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=zp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function vf(n,e){n.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await hE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function zv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ek(n);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Vv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Vv(e.remoteStore,o))),n._onlineComponents=e}async function Ek(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await vf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await vf(n,new Gc)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await vf(n,new Gc);return n._offlineComponents}async function kE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await zv(n,n._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await zv(n,new Yf))),n._onlineComponents}function Tk(n){return kE(n).then((e=>e.syncEngine))}async function Qc(n){const e=await kE(n),t=e.eventManager;return t.onListen=ak.bind(null,e.syncEngine),t.onUnlisten=ck.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hk.bind(null,e.syncEngine),t}function Ik(n,e,t={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const _=new Gp({next:A=>{_.Za(),u.enqueueAndForget((()=>qp(a,E)));const M=A.docs.has(d);!M&&A.fromCache?y.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&p&&p.source==="server"?y.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new Hp(oh(d.path),_,{includeMetadataChanges:!0,_a:!0});return $p(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}function Sk(n,e,t={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const _=new Gp({next:A=>{_.Za(),u.enqueueAndForget((()=>qp(a,E))),A.fromCache&&p.source==="server"?y.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new Hp(d,_,{includeMetadataChanges:!0,_a:!0});return $p(a,E)})(await Qc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ak(n,e,t,i){if(e===!0&&i===!0)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qv(n){if(!ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wv(n){if(ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function kn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mh(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new zR;switch(i.type){case"firstParty":return new HR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=$v.get(t);i&&(pe("ComponentProvider","Removing Datastore"),$v.delete(t),i.terminate())})(this),Promise.resolve()}}function Rk(n,e,t,i={}){var o;const a=(n=kn(n,gh))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=zt.MOCK_USER;else{d=rI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(y)}n._authCredentials=new $R(new xw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wr(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Ni extends Wr{constructor(e,t,i){super(e,t,oh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ve(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function yn(n,e,...t){if(n=gt(n),xE("collection","path",e),n instanceof gh){const i=et.fromString(e,...t);return Wv(i),new Ni(n,null,i)}{if(!(n instanceof Jt||n instanceof Ni))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return Wv(i),new Ni(n.firestore,null,i)}}function fr(n,e,...t){if(n=gt(n),arguments.length===1&&(e=bw.newId()),xE("doc","path",e),n instanceof gh){const i=et.fromString(e,...t);return qv(i),new Jt(n,null,new ve(i))}{if(!(n instanceof Jt||n instanceof Ni))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return qv(i),new Jt(n.firestore,n instanceof Ni?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fE(this,"async_queue_retry"),this.Vu=()=>{const i=yf();i&&pe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Ur;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ll(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw zr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Bp.createAndSchedule(this,e,t,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Gv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Vi extends gh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Kv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function Ck(n,e){const t=typeof n=="object"?n:B_(),i=typeof n=="string"?n:"(default)",o=dp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=tI("firestore");a&&Rk(o,...a)}return o}function yh(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Pk(n),n._firestoreClient}function Pk(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,y,_){return new sC(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,NE(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new wk(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Vt.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zo(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^__.*__$/;class Nk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vl(e,this.data,t,this.fieldTransforms)}}class bE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Yp{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OE(this.Cu)&&kk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dh(e)}Qu(e,t,i,o=!1){return new Yp({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xp(n){const e=n._freezeSettings(),t=dh(n._databaseId);return new xk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bk(n,e,t,i,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);em("Data must be an object, but it was:",u,i);const d=DE(i,u);let p,y;if(a.merge)p=new vn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const A=Xf(e,E,t);if(!u.contains(A))throw new ce(J.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);VE(_,A)||_.push(A)}p=new vn(_),y=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=u.fieldTransforms;return new Nk(new an(d),p,y)}class jl extends _h{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jl}}class Zp extends _h{_toFieldTransform(e){return new NC(e.path,new Tl)}isEqual(e){return e instanceof Zp}}function Ok(n,e,t,i){const o=n.Qu(1,e,t);em("Data must be an object, but it was:",o,i);const a=[],u=an.empty();Cs(i,((p,y)=>{const _=tm(e,p,t);y=gt(y);const E=o.Nu(_);if(y instanceof jl)a.push(_);else{const A=Bl(y,E);A!=null&&(a.push(_),u.set(_,A))}}));const d=new vn(a);return new bE(u,d,o.fieldTransforms)}function Dk(n,e,t,i,o,a){const u=n.Qu(1,e,t),d=[Xf(e,i,t)],p=[o];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(Xf(e,a[A])),p.push(a[A+1]);const y=[],_=an.empty();for(let A=d.length-1;A>=0;--A)if(!VE(y,d[A])){const M=d[A];let x=p[A];x=gt(x);const F=u.Nu(M);if(x instanceof jl)y.push(M);else{const N=Bl(x,F);N!=null&&(y.push(M),_.set(M,N))}}const E=new vn(y);return new bE(_,E,u.fieldTransforms)}function Lk(n,e,t,i=!1){return Bl(t,n.Qu(i?4:3,e))}function Bl(n,e){if(LE(n=gt(n)))return em("Unsupported field value:",e,n),DE(n,e);if(n instanceof _h)return(function(i,o){if(!OE(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Bl(d,o.Lu(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return CC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Tt.fromDate(i);return{timestampValue:Hc(o.serializer,a)}}if(i instanceof Tt){const a=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,a)}}if(i instanceof Qp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zo)return{bytesValue:iE(o.serializer,i._byteString)};if(i instanceof Jt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Op(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Jp)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return kp(d.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${mh(i)}`)})(n,e)}function DE(n,e){const t={};return Ow(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(n,((i,o)=>{const a=Bl(o,e.Mu(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function LE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Qp||n instanceof zo||n instanceof Jt||n instanceof _h||n instanceof Jp)}function em(n,e,t){if(!LE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=mh(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Xf(n,e,t){if((e=gt(e))instanceof vh)return e._internalPath;if(typeof e=="string")return tm(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vk=new RegExp("[~\\*/\\[\\]]");function tm(n,e,t){if(e.search(Vk)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vh(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,d+n+p)}function VE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mk extends ME{data(){return super.data()}}function wh(n,e){return typeof e=="string"?tm(n,e):e instanceof vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nm{}class rm extends nm{}function Dr(n,e,...t){let i=[];e instanceof nm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof im)).length,d=a.filter((p=>p instanceof Eh)).length;if(u>1||u>0&&d>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Eh extends rm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Eh(e,t,i)}_apply(e){const t=this._parse(e);return UE(e._query,t),new Wr(e.firestore,e.converter,$f(e._query,t))}_parse(e){const t=Xp(e.firestore);return(function(a,u,d,p,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Jv(E,_);const M=[];for(const x of E)M.push(Qv(p,a,x));A={arrayValue:{values:M}}}else A=Qv(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Jv(E,_),A=Lk(d,u,E,_==="in"||_==="not-in");return mt.create(y,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wi(n,e,t){const i=e,o=wh("where",n);return Eh._create(o,i,t)}class im extends nm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new im(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)UE(u,p),u=$f(u,p)})(e._query,t),new Wr(e.firestore,e.converter,$f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sm extends rm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sm(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new El(a,u)})(e._query,this._field,this._direction);return new Wr(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Go(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Fk(n,e="asc"){const t=e,i=wh("orderBy",n);return sm._create(i,t)}class om extends rm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new om(e,t,i)}_apply(e){return new Wr(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}}function ms(n){return om._create("limit",n,"F")}function Qv(n,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&t.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ve.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gv(n,new ve(i))}if(t instanceof Jt)return gv(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mh(t)}.`)}function Jv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UE(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Uk{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cs(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>ct(u.doubleValue)));return new Jp(a)}convertGeoPoint(e){return new Qp(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ap(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=Di(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);He(cE(i));const o=new _l(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jE extends ME{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Cc extends jE{data(e={}){return super.data(e)}}class BE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ll(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Cc(this._firestore,this._userDataWriter,i.key,i,new ll(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Cc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ll(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Cc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ll(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:Bk(d.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n){n=kn(n,Jt);const e=kn(n.firestore,Vi);return Ik(yh(e),n._key).then((t=>$E(e,n,t)))}class am extends Uk{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function zl(n){n=kn(n,Wr);const e=kn(n.firestore,Vi),t=yh(e),i=new am(e);return FE(n._query),Sk(t,n._query).then((o=>new BE(e,i,n,o)))}function Yc(n,e,t,...i){n=kn(n,Jt);const o=kn(n.firestore,Vi),a=Xp(o);let u;return u=typeof(e=gt(e))=="string"||e instanceof vh?Dk(a,"updateDoc",n._key,e,t,i):Ok(a,"updateDoc",n._key,e),um(o,[u.toMutation(n._key,Wn.exists(!0))])}function zE(n){return um(kn(n.firestore,Vi),[new Np(n._key,Wn.none())])}function lm(n,e){const t=kn(n.firestore,Vi),i=fr(n),o=jk(n.converter,e);return um(t,[bk(Xp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then((()=>i))}function zk(n,...e){var t,i,o;n=gt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Gv(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Gv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,y,_;if(n instanceof Jt)y=kn(n.firestore,Vi),_=oh(n._key.path),p={next:E=>{e[u]&&e[u]($E(y,n,E))},error:e[u+1],complete:e[u+2]};else{const E=kn(n,Wr);y=kn(E.firestore,Vi),_=E._query;const A=new am(y);p={next:M=>{e[u]&&e[u](new BE(y,A,E,M))},error:e[u+1],complete:e[u+2]},FE(n._query)}return(function(A,M,x,F){const N=new Gp(F),Y=new Hp(M,N,x);return A.asyncQueue.enqueueAndForget((async()=>$p(await Qc(A),Y))),()=>{N.Za(),A.asyncQueue.enqueueAndForget((async()=>qp(await Qc(A),Y)))}})(yh(y),_,d,p)}function um(n,e){return(function(i,o){const a=new Ur;return i.asyncQueue.enqueueAndForget((async()=>dk(await Tk(i),o,a))),a.promise})(yh(n),e)}function $E(n,e,t){const i=t.docs.get(e._key),o=new am(n);return new jE(n,o,e._key,i,new ll(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return new jl("deleteField")}function qE(){return new Zp("serverTimestamp")}(function(e,t=!0){(function(o){Ko=o})(Wo),Do(new ws("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Vi(new qR(i.getProvider("auth-internal")),new GR(i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(y.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ki(hv,"4.7.3",e),ki(hv,"4.7.3","esm2017")})();var qk="firebase",Wk="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(qk,Wk,"app");const Io={apiKey:"AIzaSyDMJN4-PWQMH-8PFmr9nL0kNdI2hr5DY9E",authDomain:"barberia-7ac00.firebaseapp.com",projectId:"barberia-7ac00",storageBucket:"barberia-7ac00.firebasestorage.app",messagingSenderId:"301206293641",appId:"1:301206293641:web:6d31c24c1331398ebdca58"},WE={apiKey:Io.apiKey,authDomain:Io.authDomain,projectId:Io.projectId,storageBucket:Io.storageBucket,messagingSenderId:Io.messagingSenderId,appId:Io.appId},HE=Object.values(WE).every(Boolean);let _f,on=null,xe=null,Al=HE;if(HE)try{_f=j_(WE),on=jR(_f),xe=Ck(_f)}catch(n){Al=!1,console.error("No se pudo inicializar Firebase, se usara modo demostracion.",n)}const Pc=()=>new Date().toISOString(),Hk=[{id:"carlos-ruiz",fullName:"Carlos Ruiz",phone:"555 0101",mainBarberId:"demo-barber",notes:"Fade bajo con linea marcada. Usa pomada mate.",createdAt:Pc()},{id:"maria-garcia",fullName:"Maria Garcia",phone:"555 0123",mainBarberId:"demo-barber",notes:"Corte bob texturizado. Prefiere styling natural.",createdAt:Pc()},{id:"leo-suarez",fullName:"Leo Suarez",phone:"555 0145",mainBarberId:"demo-barber",notes:"Cliente nuevo. Probar mid fade la proxima visita.",createdAt:Pc()}];let Mi=[...Hk];const Kk={"carlos-ruiz":["https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80","https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=80"],"maria-garcia":["https://images.unsplash.com/photo-1492725764893-90b379c2b6e7?auto=format&fit=crop&w=500&q=80"],"leo-suarez":[]};let pl={...Kk};const KE=[{id:"demo-barber",displayName:"Alex Demo",email:"demo@barberia.dev",role:"admin"},{id:"marcela",displayName:"Marcela",email:"marcela@barberia.dev",role:"barbero"},{id:"diego",displayName:"Diego",email:"diego@barberia.dev",role:"barbero"}];let xi=[...KE];const Gk=KE[0]?.id??"demo-barber";function wf(){return[...Mi]}function GE(n){return Mi.find(e=>e.id===n)||null}function Qk(n){const e={id:`demo-client-${Date.now()}`,fullName:n.fullName,phone:n.phone,mainBarberId:n.mainBarberId||Gk,notes:n.notes||"",createdAt:Pc()};return Mi=[e,...Mi],e}function Jk(n,e){return Mi=Mi.map(t=>t.id===n?{...t,...e}:t),GE(n)}function Yk(n){Mi=Mi.filter(e=>e.id!==n),delete pl[n]}function Xk(n){return[...pl[n]||[]]}function Zk(n,e){const t=pl[n]||[];return pl[n]=[e,...t],pl[n]}function QE(){return[...xi]}function eN(n){const e={id:`demo-user-${Date.now()}`,displayName:n.displayName,email:n.email,role:n.role||"barbero"};return xi=[e,...xi],e}function Xv(n,e){return xi=xi.map(t=>t.id===n?{...t,...e}:t),xi.find(t=>t.id===n)||null}function tN(n){xi=xi.filter(e=>e.id!==n)}const nN="barberiawebpro@gmail.com",Xa="users",Co="barberos",rN=async()=>{},JE=Q.createContext({user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!Al,loginDemo:()=>{},logout:rN}),Yo=()=>Q.useContext(JE),iN={user:null,role:void 0,profileName:void 0,loading:!0,demoMode:!Al},YE=n=>n?.trim().toLowerCase()||null,XE=n=>{if(!n)return;const e=String(n).trim().toLowerCase();if(e){if(["admin","administrador","administrator"].includes(e))return"admin";if(e==="barbero"||e==="barberos"||e.startsWith("barber"))return"barbero"}},Ef=(n,e)=>{const t=XE(n?.role);if(t)return t;if(e===Co)return"barbero"},Tf=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;if(e&&t){const i=String(e).trim(),o=String(t).trim();return i.toLowerCase().endsWith(o.toLowerCase())?i:`${i} ${o}`.trim()}if(e)return e;if(t)return t},sN=async(n,e)=>{if(!xe)return{};const i=(await Yv(fr(xe,Xa,n))).data(),o=Ef(i,Xa),a=Tf(i);if(o||a)return{role:o,displayName:a};const u=YE(e),d=[Dr(yn(xe,Xa),wi("uid","==",n),ms(1)),Dr(yn(xe,Co),wi("uid","==",n),ms(1))],p=u==null?[]:[Dr(yn(xe,Xa),wi("email","==",u),ms(1)),Dr(yn(xe,Xa),wi("emailLower","==",u),ms(1)),Dr(yn(xe,Co),wi("email","==",u),ms(1)),Dr(yn(xe,Co),wi("emailLower","==",u),ms(1))],y=[...d,...p];for(const x of y){const N=(await zl(x)).docs[0];if(N){const Y=N.data(),H=N.ref.parent.id,X=Ef(Y,H),ie=Tf(Y);if(X||ie)return{role:X,displayName:ie}}}const E=(await Yv(fr(xe,Co,n))).data(),A=Ef(E,Co),M=Tf(E);return{role:A,displayName:M}},oN=n=>({uid:n.id,email:n.email,displayName:n.displayName});function aN({children:n}){const[e,t]=Q.useState(iN);Q.useEffect(()=>{if(!on||!Al){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!0});return}const u=i();return()=>u()},[]);const i=()=>on.onAuthStateChanged(async u=>{if(!u){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!1});return}const d=YE(u.email)===nN?"admin":void 0,p=XE(d);try{const y=await sN(u.uid,u.email),_=y.role||p||"barbero",E=y.displayName||u.displayName||u.email||void 0;t({user:u,role:_,profileName:E,loading:!1,demoMode:!1})}catch(y){console.error("No se pudo obtener el rol del usuario",y),t({user:u,role:p||"barbero",profileName:u.displayName||u.email||void 0,loading:!1,demoMode:!1})}}),o=u=>{t(d=>{if(!d.demoMode)return d;const p=QE().find(y=>y.id===u);return p?{user:oN(p),role:p.role,profileName:p.displayName,loading:!1,demoMode:!0}:d})},a=async()=>{if(!on||!Al){t({user:null,role:void 0,profileName:void 0,loading:!1,demoMode:!0});return}try{await kA(on)}finally{t(u=>({...u,loading:!1}))}};return b.jsx(JE.Provider,{value:{...e,loginDemo:o,logout:a},children:n})}x_();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rl(){return Rl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rl.apply(this,arguments)}var Ri;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ri||(Ri={}));const Zv="popstate";function lN(n){n===void 0&&(n={});function e(o,a){let{pathname:u="/",search:d="",hash:p=""}=ks(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Zf("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");d=y===-1?p:p.slice(0,y)}return d+"#"+(typeof a=="string"?a:Xc(a))}function i(o,a){cm(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return cN(e,t,i,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uN(){return Math.random().toString(36).substr(2,8)}function e_(n,e){return{usr:n.state,key:n.key,idx:e}}function Zf(n,e,t,i){return t===void 0&&(t=null),Rl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ks(e):e,{state:t,key:e&&e.key||i||uN()})}function Xc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ks(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function cN(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=Ri.Pop,p=null,y=_();y==null&&(y=0,u.replaceState(Rl({},u.state,{idx:y}),""));function _(){return(u.state||{idx:null}).idx}function E(){d=Ri.Pop;let N=_(),Y=N==null?null:N-y;y=N,p&&p({action:d,location:F.location,delta:Y})}function A(N,Y){d=Ri.Push;let H=Zf(F.location,N,Y);t&&t(H,N),y=_()+1;let X=e_(H,y),ie=F.createHref(H);try{u.pushState(X,"",ie)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;o.location.assign(ie)}a&&p&&p({action:d,location:F.location,delta:1})}function M(N,Y){d=Ri.Replace;let H=Zf(F.location,N,Y);t&&t(H,N),y=_();let X=e_(H,y),ie=F.createHref(H);u.replaceState(X,"",ie),a&&p&&p({action:d,location:F.location,delta:0})}function x(N){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof N=="string"?N:Xc(N);return H=H.replace(/ $/,"%20"),st(Y,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,Y)}let F={get action(){return d},get location(){return n(o,u)},listen(N){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Zv,E),p=N,()=>{o.removeEventListener(Zv,E),p=null}},createHref(N){return e(o,N)},createURL:x,encodeLocation(N){let Y=x(N);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:A,replace:M,go(N){return u.go(N)}};return F}var t_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(t_||(t_={}));function hN(n,e,t){return t===void 0&&(t="/"),dN(n,e,t)}function dN(n,e,t,i){let o=typeof e=="string"?ks(e):e,a=$o(o.pathname||"/",t);if(a==null)return null;let u=ZE(n);fN(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let y=SN(a);d=TN(u[p],y)}return d}function ZE(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(st(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=bi([i,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(st(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),ZE(a.children,e,_,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:wN(y,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of e0(a.path))o(a,u,p)}),e}function e0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=e0(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function fN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const pN=/^:[\w-]+$/,mN=3,gN=2,yN=1,vN=10,_N=-2,n_=n=>n==="*";function wN(n,e){let t=n.split("/"),i=t.length;return t.some(n_)&&(i+=_N),e&&(i+=gN),t.filter(o=>!n_(o)).reduce((o,a)=>o+(pN.test(a)?mN:a===""?yN:vN),i)}function EN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function TN(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=ep({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),A=p.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:bi([a,E.pathname]),pathnameBase:PN(bi([a,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(a=bi([a,E.pathnameBase]))}return u}function ep(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=IN(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:A,isOptional:M}=_;if(A==="*"){let F=d[E]||"";u=a.slice(0,a.length-F.length).replace(/(.)\/+$/,"$1")}const x=d[E];return M&&!x?y[A]=void 0:y[A]=(x||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:n}}function IN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),cm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function SN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $o(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function AN(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?ks(n):n;return{pathname:t?t.startsWith("/")?t:RN(t,e):e,search:kN(i),hash:NN(o)}}function RN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function If(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hm(n,e){let t=CN(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function dm(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=ks(n):(o=Rl({},n),st(!o.pathname||!o.pathname.includes("?"),If("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),If("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),If("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let A=u.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}d=E>=0?e[E]:"/"}let p=AN(o,d),y=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const bi=n=>n.join("/").replace(/\/\/+/g,"/"),PN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const t0=["post","put","patch","delete"];new Set(t0);const bN=["get",...t0];new Set(bN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cl.apply(this,arguments)}const Th=Q.createContext(null),n0=Q.createContext(null),Hr=Q.createContext(null),Ih=Q.createContext(null),Kr=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),r0=Q.createContext(null);function ON(n,e){let{relative:t}=e===void 0?{}:e;Xo()||st(!1);let{basename:i,navigator:o}=Q.useContext(Hr),{hash:a,pathname:u,search:d}=Sh(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:bi([i,u])),o.createHref({pathname:p,search:d,hash:a})}function Xo(){return Q.useContext(Ih)!=null}function Zo(){return Xo()||st(!1),Q.useContext(Ih).location}function i0(n){Q.useContext(Hr).static||Q.useLayoutEffect(n)}function $l(){let{isDataRoute:n}=Q.useContext(Kr);return n?KN():DN()}function DN(){Xo()||st(!1);let n=Q.useContext(Th),{basename:e,future:t,navigator:i}=Q.useContext(Hr),{matches:o}=Q.useContext(Kr),{pathname:a}=Zo(),u=JSON.stringify(hm(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return i0(()=>{d.current=!0}),Q.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=dm(y,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:bi([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,u,a,n])}function LN(){let{matches:n}=Q.useContext(Kr),e=n[n.length-1];return e?e.params:{}}function Sh(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(Hr),{matches:o}=Q.useContext(Kr),{pathname:a}=Zo(),u=JSON.stringify(hm(o,i.v7_relativeSplatPath));return Q.useMemo(()=>dm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function VN(n,e){return MN(n,e)}function MN(n,e,t,i){Xo()||st(!1);let{navigator:o}=Q.useContext(Hr),{matches:a}=Q.useContext(Kr),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let y=Zo(),_;if(e){var E;let N=typeof e=="string"?ks(e):e;p==="/"||(E=N.pathname)!=null&&E.startsWith(p)||st(!1),_=N}else _=y;let A=_.pathname||"/",M=A;if(p!=="/"){let N=p.replace(/^\//,"").split("/");M="/"+A.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=hN(n,{pathname:M}),F=zN(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:bi([p,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:bi([p,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,i);return e&&F?Q.createElement(Ih.Provider,{value:{location:Cl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ri.Pop}},F):F}function FN(){let n=HN(),e=xN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const UN=Q.createElement(FN,null);class jN extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Kr.Provider,{value:this.props.routeContext},Q.createElement(r0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BN(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(Th);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Kr.Provider,{value:e},i)}function zN(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||st(!1),u=u.slice(0,Math.min(u.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:A,errors:M}=t,x=E.route.loader&&A[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||x){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((_,E,A)=>{let M,x=!1,F=null,N=null;t&&(M=d&&E.route.id?d[E.route.id]:void 0,F=E.route.errorElement||UN,p&&(y<0&&A===0?(GN("route-fallback"),x=!0,N=null):y===A&&(x=!0,N=E.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,A+1)),H=()=>{let X;return M?X=F:x?X=N:E.route.Component?X=Q.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=_,Q.createElement(BN,{match:E,routeContext:{outlet:_,matches:Y,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?Q.createElement(jN,{location:t.location,revalidation:t.revalidation,component:F,error:M,children:H(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):H()},null)}var s0=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(s0||{}),o0=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(o0||{});function $N(n){let e=Q.useContext(Th);return e||st(!1),e}function qN(n){let e=Q.useContext(n0);return e||st(!1),e}function WN(n){let e=Q.useContext(Kr);return e||st(!1),e}function a0(n){let e=WN(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function HN(){var n;let e=Q.useContext(r0),t=qN(),i=a0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function KN(){let{router:n}=$N(s0.UseNavigateStable),e=a0(o0.UseNavigateStable),t=Q.useRef(!1);return i0(()=>{t.current=!0}),Q.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Cl({fromRouteId:e},a)))},[n,e])}const r_={};function GN(n,e,t){r_[n]||(r_[n]=!0)}function QN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function tp(n){let{to:e,replace:t,state:i,relative:o}=n;Xo()||st(!1);let{future:a,static:u}=Q.useContext(Hr),{matches:d}=Q.useContext(Kr),{pathname:p}=Zo(),y=$l(),_=dm(e,hm(d,a.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return Q.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function Po(n){st(!1)}function JN(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ri.Pop,navigator:a,static:u=!1,future:d}=n;Xo()&&st(!1);let p=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:p,navigator:a,static:u,future:Cl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=ks(i));let{pathname:_="/",search:E="",hash:A="",state:M=null,key:x="default"}=i,F=Q.useMemo(()=>{let N=$o(_,p);return N==null?null:{location:{pathname:N,search:E,hash:A,state:M,key:x},navigationType:o}},[p,_,E,A,M,x,o]);return F==null?null:Q.createElement(Hr.Provider,{value:y},Q.createElement(Ih.Provider,{children:t,value:F}))}function YN(n){let{children:e,location:t}=n;return VN(np(e),t)}new Promise(()=>{});function np(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let a=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,np(i.props.children,a));return}i.type!==Po&&st(!1),!i.props.index||!i.props.children||st(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=np(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zc(){return Zc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zc.apply(this,arguments)}function l0(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function XN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZN(n,e){return n.button===0&&(!e||e==="_self")&&!XN(n)}const e1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],n1="6";try{window.__reactRouterVersion=n1}catch{}const r1=Q.createContext({isTransitioning:!1}),i1="startTransition",i_=BT[i1];function s1(n){let{basename:e,children:t,future:i,window:o}=n,a=Q.useRef();a.current==null&&(a.current=lN({window:o,v5Compat:!0}));let u=a.current,[d,p]=Q.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},_=Q.useCallback(E=>{y&&i_?i_(()=>p(E)):p(E)},[p,y]);return Q.useLayoutEffect(()=>u.listen(_),[u,_]),Q.useEffect(()=>QN(i),[i]),Q.createElement(JN,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const o1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fm=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,A=l0(e,e1),{basename:M}=Q.useContext(Hr),x,F=!1;if(typeof y=="string"&&a1.test(y)&&(x=y,o1))try{let X=new URL(window.location.href),ie=y.startsWith("//")?new URL(X.protocol+y):new URL(y),G=$o(ie.pathname,M);ie.origin===X.origin&&G!=null?y=G+ie.search+ie.hash:F=!0}catch{}let N=ON(y,{relative:o}),Y=u1(y,{replace:u,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function H(X){i&&i(X),X.defaultPrevented||Y(X)}return Q.createElement("a",Zc({},A,{href:x||N,onClick:F||a?i:H,ref:t,target:p}))}),s_=Q.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:p,viewTransition:y,children:_}=e,E=l0(e,t1),A=Sh(p,{relative:E.relative}),M=Zo(),x=Q.useContext(n0),{navigator:F,basename:N}=Q.useContext(Hr),Y=x!=null&&c1(A)&&y===!0,H=F.encodeLocation?F.encodeLocation(A).pathname:A.pathname,X=M.pathname,ie=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;o||(X=X.toLowerCase(),ie=ie?ie.toLowerCase():null,H=H.toLowerCase()),ie&&N&&(ie=$o(ie,N)||ie);const G=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ne=X===H||!u&&X.startsWith(H)&&X.charAt(G)==="/",P=ie!=null&&(ie===H||!u&&ie.startsWith(H)&&ie.charAt(H.length)==="/"),I={isActive:ne,isPending:P,isTransitioning:Y},S=ne?i:void 0,k;typeof a=="function"?k=a(I):k=[a,ne?"active":null,P?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let D=typeof d=="function"?d(I):d;return Q.createElement(fm,Zc({},E,{"aria-current":S,className:k,ref:t,style:D,to:p,viewTransition:y}),typeof _=="function"?_(I):_)});var rp;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(rp||(rp={}));var o_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(o_||(o_={}));function l1(n){let e=Q.useContext(Th);return e||st(!1),e}function u1(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=$l(),y=Zo(),_=Sh(n,{relative:u});return Q.useCallback(E=>{if(ZN(E,t)){E.preventDefault();let A=i!==void 0?i:Xc(y)===Xc(_);p(n,{replace:A,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[y,p,_,i,o,t,n,a,u,d])}function c1(n,e){e===void 0&&(e={});let t=Q.useContext(r1);t==null&&st(!1);let{basename:i}=l1(rp.useViewTransitionState),o=Sh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=$o(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=$o(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ep(o.pathname,u)!=null||ep(o.pathname,a)!=null}function Sf({children:n,allowedRoles:e}){const{user:t,loading:i,role:o}=Yo();return i?b.jsx("div",{className:"p-6",children:"Cargando..."}):t?e&&e.length>0&&(!o||!e.includes(o))?b.jsx(tp,{to:"/clientes",replace:!0}):n:b.jsx(tp,{to:"/login",replace:!0})}const a_="clientes",h1=(n,e,t)=>{const i=e.fullName||e.fullname||e.nombre||e.Nombre||"",o=e.lastName||e.apellido||e.Apellido||"",u=`${i} ${o}`.trim()||i||o||n,d=e.mainBarberId||e.barberoId||e.ownerId||t||"";return{id:n,fullName:u,fullName_lower:e.fullName_lower||u.toLowerCase(),phone:e.phone||e.telefono||e.Telefono||"",mainBarberId:d,notes:e.notes||e.Informacion||e.info||"",createdAt:e.createdAt??null}},mc=(n,e,t,i)=>{const o=e.trim().toLowerCase();return n.filter(a=>{if(t&&i&&a.mainBarberId&&a.mainBarberId!==i)return!1;if(!o)return!0;const u=(a.fullName||"").toLowerCase(),d=(a.phone||"").toLowerCase(),p=(a.notes||"").toLowerCase();return u.includes(o)||d.includes(o)||p.includes(o)})};function d1(){const{user:n,role:e}=Yo(),t=!xe,i=e==="admin"||e==="barbero",[o,a]=Q.useState(!1),[u,d]=Q.useState(""),[p,y]=Q.useState(()=>t?wf():[]),[_,E]=Q.useState(()=>mc(p,u,o,n?.uid)),[A,M]=Q.useState(()=>!t),[x,F]=Q.useState(!1),[N,Y]=Q.useState({fullName:"",phone:""}),[H,X]=Q.useState(!1),[ie,G]=Q.useState(null),[ne,P]=Q.useState(null),I=Q.useCallback(()=>{const O=wf();y(O),E(mc(O,u,o,n?.uid)),M(!1),P(null)},[o,u,n?.uid]),S=Q.useCallback(async()=>{if(!xe){I();return}M(!0),P(null);try{const O=xe;if(!O){I();return}const Ge=(await zl(yn(O,a_))).docs.map(Oe=>h1(Oe.id,Oe.data(),n?.uid)).sort((Oe,Ue)=>Oe.fullName.localeCompare(Ue.fullName));y(Ge)}catch(O){console.error("No pudimos cargar clientes",O),y([]),P("No pudimos sincronizar clientes. Verifica tu conexion o indices de Firestore.")}finally{M(!1)}},[I,n?.uid]);Q.useEffect(()=>{if(t){I();return}S()},[t,S,I]),Q.useEffect(()=>{if(t){const O=wf();E(mc(O,u,o,n?.uid));return}E(mc(p,u,o,n?.uid))},[u,o,p,n?.uid,t]);const k=async O=>{O.preventDefault();const R=N.fullName.trim(),ke=N.phone.trim();if(!R){G("El nombre es obligatorio.");return}X(!0),G(null);try{xe?(await lm(yn(xe,a_),{fullName:R,fullName_lower:R.toLowerCase(),phone:ke||void 0,mainBarberId:n?.uid||"",notes:"",createdAt:qE()}),await S()):(Qk({fullName:R,phone:ke,mainBarberId:n?.uid}),I()),Y({fullName:"",phone:""}),F(!1)}catch(Ge){console.error("No pudimos crear el cliente",Ge),G("No pudimos crear el cliente. Intenta de nuevo.")}finally{X(!1)}},D=_;return b.jsxs("div",{className:"panel space-y-8",children:[b.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.55em] text-[var(--ink-soft)]",children:"Agenda"}),b.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Clientes frecuentes"}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-xl",children:"Gestiona la informacion de tus visitas, agrega nuevos perfiles y mantente al dia con sus preferencias."})]}),i&&b.jsx("button",{className:"btn btn-primary",onClick:()=>F(O=>!O),children:x?"Cerrar formulario":"Nuevo cliente"})]}),b.jsxs("section",{className:"space-y-4",children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-center",children:[b.jsx("input",{className:"searchbar",placeholder:"Buscar cliente",value:u,onChange:O=>d(O.target.value)}),b.jsxs("label",{className:"flex items-center gap-2 text-sm text-[var(--ink-soft)]",children:[b.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(O=>!O),className:"accent-[var(--accent)] w-4 h-4"}),"Mis clientes"]})]}),x&&i&&b.jsxs("form",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-4 md:p-6",onSubmit:k,children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Juan Perez",value:N.fullName,onChange:O=>Y(R=>({...R,fullName:O.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono (opcional)"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. 555 0101",value:N.phone,onChange:O=>Y(R=>({...R,phone:O.target.value}))})]})]}),ie&&b.jsx("p",{className:"text-xs text-red-500",children:ie}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary",type:"submit",disabled:H,children:H?"Guardando...":"Guardar"}),b.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>F(!1),children:"Cancelar"})]})]})]}),b.jsxs("section",{className:"space-y-3",children:[A&&b.jsx("div",{className:"text-[var(--ink-soft)]",children:"Cargando..."}),ne&&!A&&b.jsx("div",{className:"text-sm text-red-600",children:ne}),!A&&!ne&&D.map(O=>b.jsxs(fm,{to:`/clientes/${O.id}`,className:"list-item",children:[b.jsx("div",{className:"avatar",children:O.fullName.split(" ").map(R=>R[0]).slice(0,2)}),b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"title",children:O.fullName}),O.phone&&b.jsx("div",{className:"sub",children:O.phone})]}),b.jsx("span",{className:"sub",children:"Ver"})]},O.id)),!A&&!ne&&D.length===0&&b.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"No encontramos coincidencias."})]}),!t&&b.jsx("footer",{className:"flex items-center justify-end",children:b.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>void S(),disabled:A,children:"Actualizar"})}),b.jsxs("p",{className:"text-xs text-[var(--ink-soft)]",children:["Tip: para busquedas rapidas, agrega el campo ",b.jsx("code",{children:"fullName_lower"})," en minusculas en tus documentos."]})]})}function f1({photos:n}){return n?.length?b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.map((e,t)=>b.jsx("img",{src:e,className:"rounded-xl aspect-square object-cover shadow-lg"},t))}):b.jsx("div",{className:"text-[var(--ink-soft)] text-sm",children:"Aun no hay fotos para este cliente."})}function u0(n,e){return function(){return n.apply(e,arguments)}}const{toString:p1}=Object.prototype,{getPrototypeOf:pm}=Object,{iterator:Ah,toStringTag:c0}=Symbol,Rh=(n=>e=>{const t=p1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Qn=n=>(n=n.toLowerCase(),e=>Rh(e)===n),Ch=n=>e=>typeof e===n,{isArray:ea}=Array,qo=Ch("undefined");function ql(n){return n!==null&&!qo(n)&&n.constructor!==null&&!qo(n.constructor)&&ln(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const h0=Qn("ArrayBuffer");function m1(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&h0(n.buffer),e}const g1=Ch("string"),ln=Ch("function"),d0=Ch("number"),Wl=n=>n!==null&&typeof n=="object",y1=n=>n===!0||n===!1,kc=n=>{if(Rh(n)!=="object")return!1;const e=pm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(c0 in n)&&!(Ah in n)},v1=n=>{if(!Wl(n)||ql(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},_1=Qn("Date"),w1=Qn("File"),E1=Qn("Blob"),T1=Qn("FileList"),I1=n=>Wl(n)&&ln(n.pipe),S1=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ln(n.append)&&((e=Rh(n))==="formdata"||e==="object"&&ln(n.toString)&&n.toString()==="[object FormData]"))},A1=Qn("URLSearchParams"),[R1,C1,P1,k1]=["ReadableStream","Request","Response","Headers"].map(Qn),N1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ea(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(ql(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function f0(n,e){if(ql(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const ys=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,p0=n=>!qo(n)&&n!==ys;function ip(){const{caseless:n,skipUndefined:e}=p0(this)&&this||{},t={},i=(o,a)=>{const u=n&&f0(t,a)||a;kc(t[u])&&kc(o)?t[u]=ip(t[u],o):kc(o)?t[u]=ip({},o):ea(o)?t[u]=o.slice():(!e||!qo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Hl(arguments[o],i);return t}const x1=(n,e,t,{allOwnKeys:i}={})=>(Hl(e,(o,a)=>{t&&ln(o)?n[a]=u0(o,t):n[a]=o},{allOwnKeys:i}),n),b1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),O1=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},D1=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&pm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},L1=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},V1=n=>{if(!n)return null;if(ea(n))return n;let e=n.length;if(!d0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},M1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&pm(Uint8Array)),F1=(n,e)=>{const i=(n&&n[Ah]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},U1=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},j1=Qn("HTMLFormElement"),B1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),l_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),z1=Qn("RegExp"),m0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Hl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},$1=n=>{m0(n,(e,t)=>{if(ln(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ln(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},q1=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return ea(n)?i(n):i(String(n).split(e)),t},W1=()=>{},H1=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function K1(n){return!!(n&&ln(n.append)&&n[c0]==="FormData"&&n[Ah])}const G1=n=>{const e=new Array(10),t=(i,o)=>{if(Wl(i)){if(e.indexOf(i)>=0)return;if(ql(i))return i;if(!("toJSON"in i)){e[o]=i;const a=ea(i)?[]:{};return Hl(i,(u,d)=>{const p=t(u,o+1);!qo(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},Q1=Qn("AsyncFunction"),J1=n=>n&&(Wl(n)||ln(n))&&ln(n.then)&&ln(n.catch),g0=((n,e)=>n?setImmediate:e?((t,i)=>(ys.addEventListener("message",({source:o,data:a})=>{o===ys&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),ys.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ln(ys.postMessage)),Y1=typeof queueMicrotask<"u"?queueMicrotask.bind(ys):typeof process<"u"&&process.nextTick||g0,X1=n=>n!=null&&ln(n[Ah]),q={isArray:ea,isArrayBuffer:h0,isBuffer:ql,isFormData:S1,isArrayBufferView:m1,isString:g1,isNumber:d0,isBoolean:y1,isObject:Wl,isPlainObject:kc,isEmptyObject:v1,isReadableStream:R1,isRequest:C1,isResponse:P1,isHeaders:k1,isUndefined:qo,isDate:_1,isFile:w1,isBlob:E1,isRegExp:z1,isFunction:ln,isStream:I1,isURLSearchParams:A1,isTypedArray:M1,isFileList:T1,forEach:Hl,merge:ip,extend:x1,trim:N1,stripBOM:b1,inherits:O1,toFlatObject:D1,kindOf:Rh,kindOfTest:Qn,endsWith:L1,toArray:V1,forEachEntry:F1,matchAll:U1,isHTMLForm:j1,hasOwnProperty:l_,hasOwnProp:l_,reduceDescriptors:m0,freezeMethods:$1,toObjectSet:q1,toCamelCase:B1,noop:W1,toFiniteNumber:H1,findKey:f0,global:ys,isContextDefined:p0,isSpecCompliantForm:K1,toJSONObject:G1,isAsyncFn:Q1,isThenable:J1,setImmediate:g0,asap:Y1,isIterable:X1};function Ce(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const y0=Ce.prototype,v0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{v0[n]={value:n}});Object.defineProperties(Ce,v0);Object.defineProperty(y0,"isAxiosError",{value:!0});Ce.from=(n,e,t,i,o,a)=>{const u=Object.create(y0);q.toFlatObject(n,u,function(_){return _!==Error.prototype},y=>y!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ce.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const Z1=null;function sp(n){return q.isPlainObject(n)||q.isArray(n)}function _0(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function u_(n,e,t){return n?n.concat(e).map(function(o,a){return o=_0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function ex(n){return q.isArray(n)&&!n.some(sp)}const tx=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function Ph(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,N){return!q.isUndefined(N[F])});const i=t.metaTokens,o=t.visitor||_,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(x){if(x===null)return"";if(q.isDate(x))return x.toISOString();if(q.isBoolean(x))return x.toString();if(!p&&q.isBlob(x))throw new Ce("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(x)||q.isTypedArray(x)?p&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,F,N){let Y=x;if(x&&!N&&typeof x=="object"){if(q.endsWith(F,"{}"))F=i?F:F.slice(0,-2),x=JSON.stringify(x);else if(q.isArray(x)&&ex(x)||(q.isFileList(x)||q.endsWith(F,"[]"))&&(Y=q.toArray(x)))return F=_0(F),Y.forEach(function(X,ie){!(q.isUndefined(X)||X===null)&&e.append(u===!0?u_([F],ie,a):u===null?F:F+"[]",y(X))}),!1}return sp(x)?!0:(e.append(u_(N,F,a),y(x)),!1)}const E=[],A=Object.assign(tx,{defaultVisitor:_,convertValue:y,isVisitable:sp});function M(x,F){if(!q.isUndefined(x)){if(E.indexOf(x)!==-1)throw Error("Circular reference detected in "+F.join("."));E.push(x),q.forEach(x,function(Y,H){(!(q.isUndefined(Y)||Y===null)&&o.call(e,Y,q.isString(H)?H.trim():H,F,A))===!0&&M(Y,F?F.concat(H):[H])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return M(n),e}function c_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function mm(n,e){this._pairs=[],n&&Ph(n,this,e)}const w0=mm.prototype;w0.append=function(e,t){this._pairs.push([e,t])};w0.toString=function(e){const t=e?function(i){return e.call(this,i,c_)}:c_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function nx(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function E0(n,e,t){if(!e)return n;const i=t&&t.encode||nx;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=q.isURLSearchParams(e)?e.toString():new mm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class h_{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const T0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rx=typeof URLSearchParams<"u"?URLSearchParams:mm,ix=typeof FormData<"u"?FormData:null,sx=typeof Blob<"u"?Blob:null,ox={isBrowser:!0,classes:{URLSearchParams:rx,FormData:ix,Blob:sx},protocols:["http","https","file","blob","url","data"]},gm=typeof window<"u"&&typeof document<"u",op=typeof navigator=="object"&&navigator||void 0,ax=gm&&(!op||["ReactNative","NativeScript","NS"].indexOf(op.product)<0),lx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ux=gm&&window.location.href||"http://localhost",cx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gm,hasStandardBrowserEnv:ax,hasStandardBrowserWebWorkerEnv:lx,navigator:op,origin:ux},Symbol.toStringTag,{value:"Module"})),qt={...cx,...ox};function hx(n,e){return Ph(n,new qt.classes.URLSearchParams,{visitor:function(t,i,o,a){return qt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function dx(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function fx(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function I0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&q.isArray(o)?o.length:u,p?(q.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!q.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&q.isArray(o[u])&&(o[u]=fx(o[u])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(dx(i),o,t,0)}),t}return null}function px(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Kl={transitional:T0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=q.isObject(e);if(a&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(I0(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return hx(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ph(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),px(e)):e}],transformResponse:[function(e){const t=this.transitional||Kl.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ce.from(d,Ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Kl.headers[n]={}});const mx=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gx=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&mx[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},d_=Symbol("internals");function Za(n){return n&&String(n).trim().toLowerCase()}function Nc(n){return n===!1||n==null?n:q.isArray(n)?n.map(Nc):String(n)}function yx(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const vx=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Af(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function _x(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function wx(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let un=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,y){const _=Za(p);if(!_)throw new Error("header name must be a non-empty string");const E=q.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=Nc(d))}const u=(d,p)=>q.forEach(d,(y,_)=>a(y,_,p));if(q.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(q.isString(e)&&(e=e.trim())&&!vx(e))u(gx(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},p,y;for(const _ of e){if(!q.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[y=_[0]]=(p=d[y])?q.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=Za(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return yx(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Za(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Af(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=Za(u),u){const d=q.findKey(i,u);d&&(!t||Af(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||Af(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,a)=>{const u=q.findKey(i,a);if(u){t[u]=Nc(o),delete t[a];return}const d=e?_x(a):String(a).trim();d!==a&&delete t[a],t[d]=Nc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[d_]=this[d_]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=Za(u);i[d]||(wx(o,u),i[d]=!0)}return q.isArray(e)?e.forEach(a):a(e),this}};un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(un.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(un);function Rf(n,e){const t=this||Kl,i=e||t,o=un.from(i.headers);let a=i.data;return q.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function S0(n){return!!(n&&n.__CANCEL__)}function ta(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(ta,Ce,{__CANCEL__:!0});function A0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ex(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Tx(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),_=i[a];u||(u=y),t[o]=p,i[o]=y;let E=a,A=0;for(;E!==o;)A+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),y-u<e)return;const M=_&&y-_;return M?Math.round(A*1e3/M):void 0}}function Ix(n,e){let t=0,i=1e3/e,o,a;const u=(y,_=Date.now())=>{t=_,o=null,a&&(clearTimeout(a),a=null),n(...y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?u(y,_):(o=y,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const eh=(n,e,t=3)=>{let i=0;const o=Tx(50,250);return Ix(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,y=o(p),_=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&_?(d-u)/y:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},f_=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},p_=n=>(...e)=>q.asap(()=>n(...e)),Sx=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,Ax=qt.hasStandardBrowserEnv?{write(n,e,t,i,o,a){const u=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),q.isString(i)&&u.push("path="+i),q.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Rx(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Cx(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function R0(n,e,t){let i=!Rx(e);return n&&(i||t==!1)?Cx(n,e):e}const m_=n=>n instanceof un?{...n}:n;function Rs(n,e){e=e||{};const t={};function i(y,_,E,A){return q.isPlainObject(y)&&q.isPlainObject(_)?q.merge.call({caseless:A},y,_):q.isPlainObject(_)?q.merge({},_):q.isArray(_)?_.slice():_}function o(y,_,E,A){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y,E,A)}else return i(y,_,E,A)}function a(y,_){if(!q.isUndefined(_))return i(void 0,_)}function u(y,_){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,_,E)=>o(m_(y),m_(_),E,!0)};return q.forEach(Object.keys({...n,...e}),function(_){const E=p[_]||o,A=E(n[_],e[_],_);q.isUndefined(A)&&E!==d||(t[_]=A)}),t}const C0=n=>{const e=Rs({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=un.from(u),e.url=E0(R0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),q.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(q.isFunction(t.getHeaders)){const p=t.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([_,E])=>{y.includes(_.toLowerCase())&&u.set(_,E)})}}if(qt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&Sx(e.url))){const p=o&&a&&Ax.read(a);p&&u.set(o,p)}return e},Px=typeof XMLHttpRequest<"u",kx=Px&&function(n){return new Promise(function(t,i){const o=C0(n);let a=o.data;const u=un.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,_,E,A,M,x;function F(){M&&M(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let N=new XMLHttpRequest;N.open(o.method.toUpperCase(),o.url,!0),N.timeout=o.timeout;function Y(){if(!N)return;const X=un.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),G={data:!d||d==="text"||d==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:X,config:n,request:N};A0(function(P){t(P),F()},function(P){i(P),F()},G),N=null}"onloadend"in N?N.onloadend=Y:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(Y)},N.onabort=function(){N&&(i(new Ce("Request aborted",Ce.ECONNABORTED,n,N)),N=null)},N.onerror=function(ie){const G=ie&&ie.message?ie.message:"Network Error",ne=new Ce(G,Ce.ERR_NETWORK,n,N);ne.event=ie||null,i(ne),N=null},N.ontimeout=function(){let ie=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const G=o.transitional||T0;o.timeoutErrorMessage&&(ie=o.timeoutErrorMessage),i(new Ce(ie,G.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,N)),N=null},a===void 0&&u.setContentType(null),"setRequestHeader"in N&&q.forEach(u.toJSON(),function(ie,G){N.setRequestHeader(G,ie)}),q.isUndefined(o.withCredentials)||(N.withCredentials=!!o.withCredentials),d&&d!=="json"&&(N.responseType=o.responseType),y&&([A,x]=eh(y,!0),N.addEventListener("progress",A)),p&&N.upload&&([E,M]=eh(p),N.upload.addEventListener("progress",E),N.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(_=X=>{N&&(i(!X||X.type?new ta(null,n,N):X),N.abort(),N=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const H=Ex(o.url);if(H&&qt.protocols.indexOf(H)===-1){i(new Ce("Unsupported protocol "+H+":",Ce.ERR_BAD_REQUEST,n));return}N.send(a||null)})},Nx=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof Ce?_:new ta(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,a(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(a):y.removeEventListener("abort",a)}),n=null)};n.forEach(y=>y.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>q.asap(d),p}},xx=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},bx=async function*(n,e){for await(const t of Ox(n))yield*xx(t,e)},Ox=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},g_=(n,e,t,i)=>{const o=bx(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:_}=await o.next();if(y){d(),p.close();return}let E=_.byteLength;if(t){let A=a+=E;t(A)}p.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},y_=64*1024,{isFunction:gc}=q,Dx=(({Request:n,Response:e})=>({Request:n,Response:e}))(q.global),{ReadableStream:v_,TextEncoder:__}=q.global,w_=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Lx=n=>{n=q.merge.call({skipUndefined:!0},Dx,n);const{fetch:e,Request:t,Response:i}=n,o=e?gc(e):typeof fetch=="function",a=gc(t),u=gc(i);if(!o)return!1;const d=o&&gc(v_),p=o&&(typeof __=="function"?(x=>F=>x.encode(F))(new __):async x=>new Uint8Array(await new t(x).arrayBuffer())),y=a&&d&&w_(()=>{let x=!1;const F=new t(qt.origin,{body:new v_,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!F}),_=u&&d&&w_(()=>q.isReadableStream(new i("").body)),E={stream:_&&(x=>x.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!E[x]&&(E[x]=(F,N)=>{let Y=F&&F[x];if(Y)return Y.call(F);throw new Ce(`Response type '${x}' is not supported`,Ce.ERR_NOT_SUPPORT,N)})});const A=async x=>{if(x==null)return 0;if(q.isBlob(x))return x.size;if(q.isSpecCompliantForm(x))return(await new t(qt.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(q.isArrayBufferView(x)||q.isArrayBuffer(x))return x.byteLength;if(q.isURLSearchParams(x)&&(x=x+""),q.isString(x))return(await p(x)).byteLength},M=async(x,F)=>{const N=q.toFiniteNumber(x.getContentLength());return N??A(F)};return async x=>{let{url:F,method:N,data:Y,signal:H,cancelToken:X,timeout:ie,onDownloadProgress:G,onUploadProgress:ne,responseType:P,headers:I,withCredentials:S="same-origin",fetchOptions:k}=C0(x),D=e||fetch;P=P?(P+"").toLowerCase():"text";let O=Nx([H,X&&X.toAbortSignal()],ie),R=null;const ke=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let Ge;try{if(ne&&y&&N!=="get"&&N!=="head"&&(Ge=await M(I,Y))!==0){let U=new t(F,{method:"POST",body:Y,duplex:"half"}),K;if(q.isFormData(Y)&&(K=U.headers.get("content-type"))&&I.setContentType(K),U.body){const[me,Se]=f_(Ge,eh(p_(ne)));Y=g_(U.body,y_,me,Se)}}q.isString(S)||(S=S?"include":"omit");const Oe=a&&"credentials"in t.prototype,Ue={...k,signal:O,method:N.toUpperCase(),headers:I.normalize().toJSON(),body:Y,duplex:"half",credentials:Oe?S:void 0};R=a&&new t(F,Ue);let oe=await(a?D(R,k):D(F,Ue));const ye=_&&(P==="stream"||P==="response");if(_&&(G||ye&&ke)){const U={};["status","statusText","headers"].forEach(Pe=>{U[Pe]=oe[Pe]});const K=q.toFiniteNumber(oe.headers.get("content-length")),[me,Se]=G&&f_(K,eh(p_(G),!0))||[];oe=new i(g_(oe.body,y_,me,()=>{Se&&Se(),ke&&ke()}),U)}P=P||"text";let le=await E[q.findKey(E,P)||"text"](oe,x);return!ye&&ke&&ke(),await new Promise((U,K)=>{A0(U,K,{data:le,headers:un.from(oe.headers),status:oe.status,statusText:oe.statusText,config:x,request:R})})}catch(Oe){throw ke&&ke(),Oe&&Oe.name==="TypeError"&&/Load failed|fetch/i.test(Oe.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,x,R),{cause:Oe.cause||Oe}):Ce.from(Oe,Oe&&Oe.code,x,R)}}},Vx=new Map,P0=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,y,_=Vx;for(;d--;)p=a[d],y=_.get(p),y===void 0&&_.set(p,y=d?new Map:Lx(e)),_=y;return y};P0();const ap={http:Z1,xhr:kx,fetch:{get:P0}};q.forEach(ap,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const E_=n=>`- ${n}`,Mx=n=>q.isFunction(n)||n===null||n===!1,k0={getAdapter:(n,e)=>{n=q.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!Mx(i)&&(o=ap[(d=String(i)).toLowerCase()],o===void 0))throw new Ce(`Unknown adapter '${d}'`);if(o&&(q.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(E_).join(`
`):" "+E_(u[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:ap};function Cf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ta(null,n)}function T_(n){return Cf(n),n.headers=un.from(n.headers),n.data=Rf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),k0.getAdapter(n.adapter||Kl.adapter,n)(n).then(function(i){return Cf(n),i.data=Rf.call(n,n.transformResponse,i),i.headers=un.from(i.headers),i},function(i){return S0(i)||(Cf(n),i&&i.response&&(i.response.data=Rf.call(n,n.transformResponse,i.response),i.response.headers=un.from(i.response.headers))),Promise.reject(i)})}const N0="1.12.2",kh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{kh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const I_={};kh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+N0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new Ce(o(u," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!I_[u]&&(I_[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};kh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Fx(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new Ce("option "+a+" must be "+p,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+a,Ce.ERR_BAD_OPTION)}}const xc={assertOptions:Fx,validators:kh},ar=xc.validators;let _s=class{constructor(e){this.defaults=e||{},this.interceptors={request:new h_,response:new h_}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Rs(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&xc.assertOptions(i,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:xc.assertOptions(o,{encode:ar.function,serialize:ar.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xc.assertOptions(t,{baseUrl:ar.spelling("baseURL"),withXsrfToken:ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&q.merge(a.common,a[t.method]);a&&q.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=un.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(t)===!1||(p=p&&F.synchronous,d.unshift(F.fulfilled,F.rejected))});const y=[];this.interceptors.response.forEach(function(F){y.push(F.fulfilled,F.rejected)});let _,E=0,A;if(!p){const x=[T_.bind(this),void 0];for(x.unshift(...d),x.push(...y),A=x.length,_=Promise.resolve(t);E<A;)_=_.then(x[E++],x[E++]);return _}A=d.length;let M=t;for(;E<A;){const x=d[E++],F=d[E++];try{M=x(M)}catch(N){F.call(this,N);break}}try{_=T_.call(this,M)}catch(x){return Promise.reject(x)}for(E=0,A=y.length;E<A;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=Rs(this.defaults,e);const t=R0(e.baseURL,e.url,e.allowAbsoluteUrls);return E0(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){_s.prototype[e]=function(t,i){return this.request(Rs(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(Rs(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}_s.prototype[e]=t(),_s.prototype[e+"Form"]=t(!0)});let Ux=class x0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new ta(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new x0(function(o){e=o}),cancel:e}}};function jx(n){return function(t){return n.apply(null,t)}}function Bx(n){return q.isObject(n)&&n.isAxiosError===!0}const lp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lp).forEach(([n,e])=>{lp[e]=n});function b0(n){const e=new _s(n),t=u0(_s.prototype.request,e);return q.extend(t,_s.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return b0(Rs(n,o))},t}const ht=b0(Kl);ht.Axios=_s;ht.CanceledError=ta;ht.CancelToken=Ux;ht.isCancel=S0;ht.VERSION=N0;ht.toFormData=Ph;ht.AxiosError=Ce;ht.Cancel=ht.CanceledError;ht.all=function(e){return Promise.all(e)};ht.spread=jx;ht.isAxiosError=Bx;ht.mergeConfig=Rs;ht.AxiosHeaders=un;ht.formToJSON=n=>I0(q.isHTMLForm(n)?new FormData(n):n);ht.getAdapter=k0.getAdapter;ht.HttpStatusCode=lp;ht.default=ht;const{Axios:rb,AxiosError:ib,CanceledError:sb,isCancel:ob,CancelToken:ab,VERSION:lb,all:ub,Cancel:cb,isAxiosError:hb,spread:db,toFormData:fb,AxiosHeaders:pb,HttpStatusCode:mb,formToJSON:gb,getAdapter:yb,mergeConfig:vb}=ht,O0=void 0,zx=void 0,$x=!!O0;async function qx(n,e){if(!$x){const a=encodeURIComponent(n.name||"demo");return await new Promise(u=>setTimeout(u,350)),`https://placehold.co/600x600?text=${a}`}const t=`https://api.cloudinary.com/v1_1/${O0}/image/upload`,i=new FormData;i.append("file",n),i.append("upload_preset",zx),i.append("folder",e);const{data:o}=await ht.post(t,i);return o.secure_url}function Wx({onUploaded:n,disabled:e}){return b.jsxs("label",{className:`uploader-trigger${e?" disabled":""}`,children:[b.jsx("input",{type:"file",accept:"image/*",hidden:!0,disabled:e,onChange:async t=>{const i=t.target.files?.[0];if(!i)return;const o=await qx(i,"barberia");n(o),t.target.value=""}}),b.jsx("span",{children:"Subir imagen"})]})}const Pf="clientes",S_="cuts";function Hx(){const{id:n}=LN(),e=$l(),{user:t,role:i,demoMode:o}=Yo(),[a,u]=Q.useState([]),[d,p]=Q.useState({fullName:"",phone:"",notes:""}),[y,_]=Q.useState(!0),[E,A]=Q.useState(!1),[M,x]=Q.useState(!1),[F,N]=Q.useState(null),Y=!xe,H=i==="admin"||i==="barbero";Q.useEffect(()=>{if(!n)return;if(Y){const k=GE(n);if(!k){_(!1);return}_(!0),p({fullName:k.fullName,phone:k.phone==null?"":String(k.phone),notes:k.notes||""}),u(Xk(n));return}const S=zk(fr(xe,Pf,n),k=>{if(!k.exists()){_(!1);return}const D=k.data();_(!0),p({fullName:D.fullName||"",phone:D.phone==null?"":String(D.phone),notes:D.notes||""})});return(async()=>{const k=Dr(yn(xe,S_),wi("clientId","==",n)),D=await zl(k),O=[];D.forEach(R=>{const ke=R.data();(ke.photos||[]).forEach(Oe=>O.push({url:Oe,createdAt:ke.createdAt}))}),O.sort((R,ke)=>{const Ge=R.createdAt?.toMillis?R.createdAt.toMillis():Number(R.createdAt)||0;return(ke.createdAt?.toMillis?ke.createdAt.toMillis():Number(ke.createdAt)||0)-Ge}),u(O.map(R=>R.url).slice(0,12))})(),()=>S()},[n,Y]);const X=Q.useMemo(()=>Y?b.jsx("div",{className:"rounded-2xl border border-[var(--border-soft)] bg-[var(--cream-strong)] px-4 py-3 text-sm text-[var(--ink)]",children:"Estas viendo datos de ejemplo. Conecta Firebase para trabajar con informacion real."}):null,[Y]),ie=async S=>{if(n){if(u(k=>[S,...k]),Y){Zk(n,S);return}await lm(yn(xe,S_),{clientId:n,barberId:t?.uid||"",photos:[S],createdAt:qE()})}},G=async()=>{if(!n)return;const S=(d.fullName??"").toString().trim(),k=(d.phone??"").toString().trim();if(!S){N("El nombre es obligatorio.");return}A(!0),N(null);try{if(Y)Jk(n,{fullName:S,phone:k||void 0,notes:d.notes});else{const D={fullName:S,fullName_lower:S.toLowerCase(),notes:d.notes};k?D.phone=k:D.phone=$k(),await Yc(fr(xe,Pf,n),D)}}catch(D){console.error("No pudimos actualizar el cliente",D),N("No pudimos actualizar el cliente.")}finally{A(!1)}},ne=async()=>{if(!(!n||!window.confirm("Seguro que deseas eliminar este cliente?"))){x(!0),N(null);try{Y?Yk(n):await zE(fr(xe,Pf,n)),e("/clientes")}catch(k){console.error("No pudimos eliminar el cliente",k),N("No pudimos eliminar el cliente."),x(!1)}}};if(!y)return b.jsx("div",{className:"panel text-[var(--ink)]",children:"No encontramos este cliente."});const P=(d.fullName??"").toString().trim()||"Cliente sin nombre",I=(d.phone??"").toString().trim();return b.jsxs("div",{className:"panel space-y-8",children:[X,b.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Cliente"}),b.jsx("h1",{className:"detail-title",children:P}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)]",children:I?`Tel. ${I}`:"Agrega datos de contacto y notas para personalizar cada visita."})]}),H&&b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsx(Wx,{onUploaded:ie}),b.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Subir nueva foto"})]})]}),b.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[b.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsx("h2",{className:"detail-sub",children:"Ficha del cliente"}),b.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre completo"}),b.jsx("input",{className:"input mt-1",value:d.fullName,onChange:S=>p(k=>({...k,fullName:S.target.value})),disabled:!H})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Telefono"}),b.jsx("input",{className:"input mt-1",value:d.phone,onChange:S=>p(k=>({...k,phone:S.target.value})),disabled:!H})]})]}),F&&b.jsx("p",{className:"text-xs text-red-500",children:F}),H&&b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary",onClick:()=>void G(),disabled:E,children:E?"Guardando...":"Guardar cambios"}),b.jsx("button",{className:"btn btn-ghost",onClick:()=>void ne(),disabled:M,children:M?"Eliminando...":"Eliminar"})]})]}),b.jsxs("section",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h2",{className:"detail-sub",children:"Galeria"}),a.length>0&&b.jsxs("span",{className:"text-xs text-[var(--ink-soft)]",children:[a.length," fotos"]})]}),b.jsx(f1,{photos:a}),Y&&!o&&b.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Configura Cloudinary para guardar fotos reales."})]})]}),b.jsxs("section",{className:"grid gap-3 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",children:[b.jsx("h2",{className:"detail-sub",children:"Notas"}),b.jsx("textarea",{className:"input min-h-[200px]",value:d.notes,onChange:S=>p(k=>({...k,notes:S.target.value})),disabled:!H}),H&&b.jsx("button",{onClick:()=>void G(),className:"btn btn-primary w-fit",disabled:E,children:E?"Guardando...":"Guardar notas"})]})]})}const A_={"auth/invalid-email":"El correo no tiene un formato valido.","auth/user-not-found":"No encontramos una cuenta con ese correo.","auth/wrong-password":"Contrasena incorrecta. Intenta de nuevo.","auth/invalid-credential":"Credenciales invalidas. Verifica tu correo y contrasena.","auth/user-disabled":"La cuenta esta deshabilitada. Contacta al administrador.","auth/too-many-requests":"Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo."},Kx=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,yc=n=>{if(typeof n=="object"&&n&&"code"in n){const e=String(n.code||"").toLowerCase();if(e in A_)return A_[e];if(e.startsWith("auth/"))return"No pudimos iniciar sesion. Verifica tus datos."}return"No pudimos iniciar sesion. Verifica tu correo y contrasena."},vc=[{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",caption:"Panel administrador - controla usuarios, permisos y reportes"},{src:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=600&q=80",caption:"Experiencia del barbero - registra notas y estilos de tus clientes"},{src:"https://images.unsplash.com/photo-1505483531331-65230405b270?auto=format&fit=crop&w=900&q=80",caption:"Portafolio visual - mantente al dia con las imagenes de cada servicio"}],R_=n=>{if(!n)return;const e=n.displayName||n.nombre||n.Nombre,t=n.lastName||n.apellido||n.Apellido;if(e&&t)return`${e} ${t}`.trim();if(e)return e;if(t)return t},C_=async n=>{if(!xe)return null;const e=n.toLowerCase(),t=[{col:"barberos",field:"emailLower"},{col:"barberos",field:"email"},{col:"users",field:"emailLower"},{col:"users",field:"email"}];for(const{col:i,field:o}of t){const a=yn(xe,i),u=Dr(a,wi(o,"==",o==="emailLower"?e:n),ms(1)),p=(await zl(u)).docs[0];if(p)return{refPath:`${i}/${p.id}`,collection:i,data:p.data()}}return null},P_=async(n,e,t,i)=>{if(!xe)return;const o=fr(xe,n.refPath),a={uid:e,email:t,emailLower:t.toLowerCase()};i&&(a.displayName=i),await Yc(o,a).catch(()=>{})};function Gx(){const[n,e]=Q.useState(""),[t,i]=Q.useState(""),[o,a]=Q.useState(!1),[u,d]=Q.useState(null),[p,y]=Q.useState(null),_=$l(),{user:E,role:A,loading:M}=Yo(),x=A==="admin"?"/admin/usuarios":"/clientes",F=H=>Kx.test(H.trim());Q.useEffect(()=>{M||E&&_(x,{replace:!0})},[E,A,M,x,_]);const N=async H=>{if(H.preventDefault(),!on)return;const X=n.trim(),ie=t.trim();if(!F(X)){d("Ingresa un correo valido (ejemplo@dominio.com)."),y(null);return}if(!ie){d("Ingresa una contrasena."),y(null);return}a(!0),d(null),y(null);try{if(xe&&!(await Zy(on,X)).length){const ne=await C_(X);if(!ne){d("Tu correo no esta registrado por el administrador."),a(!1);return}const P=String(ne.data.passwordSeed??ne.data.dni??"").trim();if(!P){d("Tu perfil reservado no tiene un DNI configurado. Contacta al administrador."),a(!1);return}if(ie!==P){d("Tu contrasea inicial es tu DNI registrado."),a(!1);return}try{const I=await Xy(on,X,P),S=R_(ne.data);S&&await ev(I.user,{displayName:S}).catch(()=>{}),await P_(ne,I.user.uid,X,S)}catch(I){if((typeof I=="object"&&I&&"code"in I?String(I.code||"").toLowerCase():"")!=="auth/email-already-in-use"){console.error("No pudimos crear la cuenta en el primer acceso",I),d(yc(I)),a(!1);return}console.warn("La cuenta ya existia al intentar el primer acceso, continuamos con el inicio de sesion.")}}await SA(on,X,ie)}catch(G){console.error("No pudimos iniciar sesion",G),d(yc(G))}finally{a(!1)}},Y=async()=>{if(!on)return;const H=n.trim();if(!F(H)){d("Ingresa un correo valido para recuperar tu contrasena."),y(null);return}try{if(xe&&!(await Zy(on,H)).length){const ie=await C_(H);if(!ie){d("Tu correo no esta registrado por el administrador."),y(null);return}const G=String(ie.data.passwordSeed??ie.data.dni??"").trim();if(!G){d("Tu perfil reservado no tiene un DNI configurado. Contacta al administrador."),y(null);return}let ne=!1;try{const P=await Xy(on,H,G),I=R_(ie.data);I&&await ev(P.user,{displayName:I}).catch(()=>{}),await P_(ie,P.user.uid,H,I),ne=!0}catch(P){if((typeof P=="object"&&P&&"code"in P?String(P.code||"").toLowerCase():"")!=="auth/email-already-in-use"){console.error("No pudimos crear la cuenta en el primer acceso",P),d(yc(P)),y(null);return}console.warn("La cuenta ya existia al preparar el restablecimiento de contrasena.")}ne&&await on.signOut()}await IA(on,H),y("Te enviamos un correo para restablecer tu contrasena."),d(null)}catch(X){console.error("No pudimos enviar el correo de recuperacion",X),d(yc(X)),y(null)}};return b.jsx("div",{className:"login-hero",children:b.jsxs("div",{className:"login-hero-inner",children:[b.jsxs("div",{className:"space-y-4 text-center",children:[b.jsx("span",{className:"login-eyebrow",children:"Acceso interno"}),b.jsx("h1",{className:"login-heading",children:"Barberia Prueba"}),b.jsx("p",{className:"text-base text-black/70 max-w-xl mx-auto",children:"Gestiona operaciones, clientes y equipo en un panel profesional disenado para administradores y barberos."})]}),b.jsxs("div",{className:"login-card",children:[b.jsxs("div",{className:"login-gallery",children:[b.jsx("div",{className:"login-gallery-top",children:vc.slice(0,2).map(H=>b.jsxs("figure",{children:[b.jsx("img",{src:H.src,alt:H.caption}),b.jsx("figcaption",{children:H.caption})]},H.caption))}),b.jsxs("figure",{children:[b.jsx("img",{src:vc[2].src,alt:vc[2].caption}),b.jsx("figcaption",{children:vc[2].caption})]})]}),b.jsxs("div",{className:"login-panel",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("h2",{children:"Inicia sesion"}),b.jsx("p",{children:"Ingresa con tu correo corporativo. Te enviaremos automaticamente al modulo correspondiente segun tu rol."})]}),b.jsxs("form",{className:"login-form",onSubmit:N,children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Correo"}),b.jsx("input",{className:"input mt-1",placeholder:"ejemplo@barberia.com",value:n,onChange:H=>e(H.target.value),type:"email",autoComplete:"email",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-wide text-black/50",children:"Contrasena"}),b.jsx("input",{className:"input mt-1",placeholder:"********",type:"password",value:t,onChange:H=>i(H.target.value),autoComplete:"current-password",required:!0,minLength:6})]}),u&&b.jsx("p",{className:"text-xs text-red-600",children:u}),p&&b.jsx("p",{className:"text-xs text-green-600",children:p}),b.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o||M,children:o?"Ingresando...":"Entrar"}),b.jsx("button",{className:"mt-2 text-sm font-semibold text-[#d67c21] underline hover:text-[#b86516]",type:"button",disabled:o||M,onClick:Y,children:"Olvid mi contrasea"})]}),b.jsxs("div",{className:"text-xs text-black/50 space-y-1",children:[b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-black/70",children:"Rol admin:"})," administra barberos, roles y directorio."]}),b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-black/70",children:"Rol barbero:"})," gestiona clientes, notas y galeria asignada."]}),b.jsxs("p",{children:["SoportE: ",b.jsx("span",{className:"font-semibold text-black/70",children:"barberiawebpro@gmail.com"})]})]})]})]})]})})}const el="barberos",Qx=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,tl=(n,e)=>`${n??""} ${e??""}`.trim(),kf={firstName:"",lastName:"",email:"",dni:"",role:"barbero"},nl=()=>QE().map(n=>{const e=(n.displayName||"").trim().split(" "),t=e.shift()||n.displayName||"",i=e.join(" ");return{id:n.id,displayName:n.displayName,firstName:t,lastName:i,email:n.email,emailLower:n.email.toLowerCase(),role:n.role}});function Jx(){const{role:n,loading:e}=Yo(),t=!xe,[i,o]=Q.useState(()=>t?nl():[]),[a,u]=Q.useState(""),[d,p]=Q.useState(!1),[y,_]=Q.useState(!1),[E,A]=Q.useState(kf),[M,x]=Q.useState(null);Q.useEffect(()=>{if(!xe){o(nl());return}(async()=>{const ne=await zl(Dr(yn(xe,el),Fk("displayName")));o(ne.docs.map(P=>{const I=P.data(),S=I.firstName||I.nombre||"",k=I.lastName||I.apellido||"",D=I.dni||I.passwordSeed||"";return{id:P.id,displayName:I.displayName||tl(S,k),firstName:S,lastName:k,email:I.email,emailLower:I.emailLower,dni:D,role:I.role}}))})()},[xe]);const F=a.trim().toLowerCase(),N=Q.useMemo(()=>i.filter(G=>{if(!F)return!0;const ne=(G.displayName||tl(G.firstName,G.lastName)).toLowerCase(),P=G.emailLower||G.email?.toLowerCase()||"",I=(G.dni||"").toLowerCase();return ne.includes(F)||P.includes(F)||I.includes(F)}),[i,F]),Y=G=>{if(G){const P=(G.displayName||tl(G.firstName,G.lastName)).split(" "),I=G.firstName||P.shift()||"",S=G.lastName||P.join(" ");A({id:G.id,firstName:I,lastName:S,email:G.email||"",dni:G.dni||"",role:G.role||"barbero"})}else A(kf);x(null),_(!0)},H=async G=>{G.preventDefault();const ne=E.firstName.trim(),P=E.lastName.trim(),I=E.email.trim(),S=E.dni.trim();if(!ne||!P||!I||!S){x("Nombre, apellido, email y DNI son obligatorios.");return}if(!Qx.test(I)){x("Ingresa un correo valido.");return}const k=tl(ne,P),D=I.toLowerCase();p(!0),x(null);try{if(!xe)E.id?Xv(E.id,{displayName:k,email:I,role:E.role}):eN({displayName:k,email:I,role:E.role}),o(nl());else if(E.id)await Yc(fr(xe,el,E.id),{firstName:ne,lastName:P,displayName:k,email:I,emailLower:D,dni:S,passwordSeed:D,role:E.role}),o(O=>O.map(R=>R.id===E.id?{...R,firstName:ne,lastName:P,displayName:k,email:I,emailLower:D,dni:S,role:E.role}:R));else{const O=await lm(yn(xe,el),{firstName:ne,lastName:P,displayName:k,email:I,emailLower:D,dni:S,passwordSeed:S,role:E.role});o(R=>[{id:O.id,firstName:ne,lastName:P,displayName:k,email:I,emailLower:D,dni:S,role:E.role},...R])}_(!1),A(kf)}catch(O){console.error("No pudimos guardar el usuario",O),x("No pudimos guardar el usuario.")}finally{p(!1)}},X=async(G,ne)=>{if(!xe){Xv(G,{role:ne}),o(nl());return}await Yc(fr(xe,el,G),{role:ne}),o(P=>P.map(I=>I.id===G?{...I,role:ne}:I))},ie=async G=>{const ne=i.find(S=>S.id===G);if(!ne)return;if(ne.role==="admin"){window.alert("No puedes eliminar perfiles con rol admin desde aqu.");return}const P=ne.displayName||ne.email||G;if(window.confirm(`Seguro que deseas eliminar a ${P}?`))try{xe?(await zE(fr(xe,el,G)),o(S=>S.filter(k=>k.id!==G))):(tN(G),o(nl()))}catch(S){console.error("No pudimos eliminar el usuario",S),alert("No pudimos eliminar el usuario.")}};return e?b.jsx("div",{className:"panel",children:"Cargando..."}):n!=="admin"?b.jsx("div",{className:"panel text-[var(--ink)]",children:"No tienes permisos para ver esta pagina."}):b.jsxs("div",{className:"panel space-y-6",children:[b.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.5em] text-[var(--ink-soft)]",children:"Equipo"}),b.jsx("h1",{className:"text-3xl font-semibold text-[var(--ink)]",children:"Administracion de usuarios"}),b.jsx("p",{className:"text-sm text-[var(--ink-soft)] max-w-2xl",children:"Agrega barberos, otorga permisos de administrador y manten actualizado el directorio interno."})]}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("input",{className:"input w-60",placeholder:"Buscar",value:a,onChange:G=>u(G.target.value)}),b.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:()=>Y(),children:"Nuevo barbero"})]})]}),y&&b.jsxs("form",{className:"grid gap-4 bg-[var(--cream-strong)] border border-[var(--border-soft)] rounded-2xl p-5",onSubmit:H,children:[b.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Nombre"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Ana",value:E.firstName,onChange:G=>A(ne=>({...ne,firstName:G.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Apellido"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. Gomez",value:E.lastName,onChange:G=>A(ne=>({...ne,lastName:G.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"DNI"}),b.jsx("input",{className:"input mt-1",placeholder:"Ej. 12345678",value:E.dni,onChange:G=>A(ne=>({...ne,dni:G.target.value}))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Correo"}),b.jsx("input",{className:"input mt-1",placeholder:"correo@dominio.com",value:E.email,onChange:G=>A(ne=>({...ne,email:G.target.value}))})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs uppercase tracking-[0.3em] text-[var(--ink-soft)]",children:"Rol"}),b.jsxs("select",{className:"input mt-1",value:E.role,onChange:G=>A(ne=>({...ne,role:G.target.value})),children:[b.jsx("option",{value:"barbero",children:"barbero"}),b.jsx("option",{value:"admin",children:"admin"})]})]}),M&&b.jsx("p",{className:"text-xs text-red-500",children:M}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("button",{className:"btn btn-primary w-full sm:w-auto",type:"submit",disabled:d,children:d?"Guardando...":E.id?"Actualizar":"Agregar"}),b.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>_(!1),children:"Cancelar"})]})]}),b.jsxs("div",{className:"overflow-x-auto",children:[b.jsxs("table",{className:"responsive-table text-sm text-[var(--ink)]",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"text-left text-[var(--ink-soft)]",children:[b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Nombre completo"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"DNI"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Email"}),b.jsx("th",{className:"py-2 pr-3 font-semibold",children:"Rol"}),b.jsx("th",{className:"py-2 font-semibold",children:"Acciones"})]})}),b.jsx("tbody",{className:"divide-y divide-[rgba(44,21,10,0.08)]",children:N.map(G=>b.jsxs("tr",{className:"bg-[rgba(244,237,225,0.85)]",children:[b.jsx("td",{className:"py-3 pr-3 font-medium","data-label":"Nombre completo",children:G.displayName||tl(G.firstName,G.lastName)||"-"}),b.jsx("td",{className:"py-3 pr-3","data-label":"DNI",children:G.dni||"-"}),b.jsx("td",{className:"py-3 pr-3","data-label":"Email",children:G.email||"-"}),b.jsx("td",{className:"py-3 pr-3 uppercase tracking-[0.25em] text-xs","data-label":"Rol",children:G.role}),b.jsx("td",{className:"py-3 actions-cell","data-label":"Acciones",children:b.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 w-full",children:[b.jsxs("select",{className:"input w-full sm:max-w-[130px]",value:G.role,onChange:ne=>X(G.id,ne.target.value),children:[b.jsx("option",{value:"barbero",children:"barbero"}),b.jsx("option",{value:"admin",children:"admin"})]}),b.jsx("button",{className:"btn btn-ghost w-full sm:w-auto",type:"button",onClick:()=>Y(G),children:"Editar"}),b.jsx("button",{className:"w-full sm:w-auto rounded-full px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",type:"button",onClick:()=>void ie(G.id),disabled:G.role==="admin",children:"Eliminar"})]})})]},G.id))})]}),!N.length&&b.jsx("p",{className:"text-sm text-[var(--ink-soft)] mt-3",children:"No hay usuarios para mostrar."})]}),b.jsx("p",{className:"text-xs text-[var(--ink-soft)]",children:"Nota: la creacion de usuarios (Auth) se hace desde Firebase console; aqui administras los perfiles y roles."})]})}function Nf({children:n}){const{role:e,logout:t,user:i,profileName:o}=Yo(),a=e?e.charAt(0).toUpperCase()+e.slice(1):null,u=o||i?.displayName||i?.email||a||"Perfil",d=$l(),[p,y]=Q.useState(!1),_=({isActive:F})=>`nav-pill${F?" active":""}`,E=e==="admin"?"/admin/usuarios":"/clientes",A=async()=>{await t(),d("/login"),y(!1)},M=()=>y(!1),x=()=>y(F=>!F);return b.jsxs("div",{className:"app-shell",children:[b.jsx("nav",{className:"navbar",children:b.jsxs("div",{className:"inner",children:[b.jsxs("div",{className:"navbar-heading",children:[b.jsx(fm,{to:E,className:"brand",onClick:M,children:"Barberia Prueba"}),b.jsxs("button",{type:"button",className:"navbar-toggle",onClick:x,"aria-expanded":p,"aria-controls":"primary-nav",children:[b.jsx("span",{className:"sr-only",children:"Abrir menu"}),b.jsx("span",{className:"line"}),b.jsx("span",{className:"line"}),b.jsx("span",{className:"line"})]})]}),b.jsxs("div",{id:"primary-nav",className:`nav-links${p?" open":""}`,children:[b.jsx(s_,{to:"/clientes",className:_,onClick:M,children:"Clientes"}),e==="admin"&&b.jsx(s_,{to:"/admin/usuarios",className:_,onClick:M,children:"Dashboard"}),i&&b.jsx("span",{className:"nav-pill",children:u}),i&&b.jsx("button",{type:"button",className:"nav-pill",onClick:A,children:"Salir"})]})]})}),b.jsx("main",{className:"page-container",children:n})]})}function Yx(){return b.jsx(aN,{children:b.jsx(s1,{children:b.jsxs(YN,{children:[b.jsx(Po,{path:"/",element:b.jsx(tp,{to:"/clientes",replace:!0})}),b.jsx(Po,{path:"/login",element:b.jsx(Gx,{})}),b.jsx(Po,{path:"/clientes",element:b.jsx(Sf,{children:b.jsx(Nf,{children:b.jsx(d1,{})})})}),b.jsx(Po,{path:"/clientes/:id",element:b.jsx(Sf,{children:b.jsx(Nf,{children:b.jsx(Hx,{})})})}),b.jsx(Po,{path:"/admin/usuarios",element:b.jsx(Sf,{allowedRoles:["admin"],children:b.jsx(Nf,{children:b.jsx(Jx,{})})})})]})})})}KT.createRoot(document.getElementById("root")).render(b.jsx(N_.StrictMode,{children:b.jsx(Yx,{})}));
